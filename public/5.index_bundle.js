webpackJsonp([5],{"./node_modules/create-react-class/index.js":function(t,e,r){"use strict";var n=r("./node_modules/react/react.js"),i=r("./node_modules/create-react-class/factory.js");if(void 0===n)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var s=(new n.Component).updater;t.exports=i(n.Component,n.isValidElement,s)},"./node_modules/form-data-to-object/index.js":function(t,e,r){"use strict";function n(t){return Object.keys(t).reduce(function(e,r){var n=r.match(/[^\[]*/i),i=r.match(/\[.*?\]/g)||[];i=[n[0]].concat(i).map(function(t){return t.replace(/\[|\]/g,"")});for(var s=e;i.length;){var o=i.shift();o in s?s=s[o]:(s[o]=i.length?isNaN(i[0])?{}:[]:t[r],s=s[o])}return e},{})}function i(t){function e(t,r,n){return Array.isArray(n)||"[object Object]"===Object.prototype.toString.call(n)?(Object.keys(n).forEach(function(i){e(t,r+"["+i+"]",n[i])}),t):(t[r]=n,t)}return Object.keys(t).reduce(function(r,n){return e(r,n,t[n])},{})}t.exports={fromObj:i,toObj:n}},"./node_modules/formsy-react/lib/Decorator.js":function(t,e,r){"use strict";(function(e){var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i=e.React||r("./node_modules/react/react.js"),s=r("./node_modules/create-react-class/index.js"),o=r("./node_modules/formsy-react/lib/Mixin.js");t.exports=function(){return function(t){return s({mixins:[o],render:function(){return i.createElement(t,n({setValidations:this.setValidations,setValue:this.setValue,resetValue:this.resetValue,getValue:this.getValue,hasValue:this.hasValue,getErrorMessage:this.getErrorMessage,getErrorMessages:this.getErrorMessages,isFormDisabled:this.isFormDisabled,isValid:this.isValid,isPristine:this.isPristine,isFormSubmitted:this.isFormSubmitted,isRequired:this.isRequired,showRequired:this.showRequired,showError:this.showError,isValidValue:this.isValidValue},this.props))}})}}}).call(e,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/formsy-react/lib/HOC.js":function(t,e,r){"use strict";(function(e){function n(t){return t.displayName||t.name||("string"==typeof t?t:"Component")}var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s=e.React||r("./node_modules/react/react.js"),o=r("./node_modules/create-react-class/index.js"),a=r("./node_modules/formsy-react/lib/Mixin.js");t.exports=function(t){return o({displayName:"Formsy("+n(t)+")",mixins:[a],render:function(){var e=this.props.innerRef,r=i({setValidations:this.setValidations,setValue:this.setValue,resetValue:this.resetValue,getValue:this.getValue,hasValue:this.hasValue,getErrorMessage:this.getErrorMessage,getErrorMessages:this.getErrorMessages,isFormDisabled:this.isFormDisabled,isValid:this.isValid,isPristine:this.isPristine,isFormSubmitted:this.isFormSubmitted,isRequired:this.isRequired,showRequired:this.showRequired,showError:this.showError,isValidValue:this.isValidValue},this.props);return e&&(r.ref=e),s.createElement(t,r)}})}}).call(e,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/formsy-react/lib/Mixin.js":function(t,e,r){"use strict";(function(e){var n=r("./node_modules/prop-types/index.js"),i=r("./node_modules/formsy-react/lib/utils.js"),s=(e.React||r("./node_modules/react/react.js"),function(t){return"string"==typeof t?t.split(/\,(?![^{\[]*[}\]])/g).reduce(function(t,e){var r=e.split(":"),n=r.shift();if(r=r.map(function(t){try{return JSON.parse(t)}catch(e){return t}}),r.length>1)throw new Error("Formsy does not support multiple args on string validations. Use object format of validations instead.");return t[n]=!r.length||r[0],t},{}):t||{}});t.exports={getInitialState:function(){return{_value:this.props.value,_isRequired:!1,_isValid:!0,_isPristine:!0,_pristineValue:this.props.value,_validationError:[],_externalError:null,_formSubmitted:!1}},contextTypes:{formsy:n.object},getDefaultProps:function(){return{validationError:"",validationErrors:{}}},componentWillMount:function(){var t=function(){this.setValidations(this.props.validations,this.props.required),this.context.formsy.attachToForm(this)}.bind(this);if(!this.props.name)throw new Error("Form Input requires a name property when used");t()},componentWillReceiveProps:function(t){this.setValidations(t.validations,t.required)},componentDidUpdate:function(t){i.isSame(this.props.value,t.value)||this.setValue(this.props.value),i.isSame(this.props.validations,t.validations)&&i.isSame(this.props.required,t.required)||this.context.formsy.validate(this)},componentWillUnmount:function(){this.context.formsy.detachFromForm(this)},setValidations:function(t,e){this._validations=s(t)||{},this._requiredValidations=!0===e?{isDefaultRequiredValue:!0}:s(e)},setValue:function(t){this.setState({_value:t,_isPristine:!1},function(){this.context.formsy.validate(this)}.bind(this))},resetValue:function(){this.setState({_value:this.state._pristineValue,_isPristine:!0},function(){this.context.formsy.validate(this)})},getValue:function(){return this.state._value},hasValue:function(){return""!==this.state._value},getErrorMessage:function(){var t=this.getErrorMessages();return t.length?t[0]:null},getErrorMessages:function(){return!this.isValid()||this.showRequired()?this.state._externalError||this.state._validationError||[]:[]},isFormDisabled:function(){return this.context.formsy.isFormDisabled()},isValid:function(){return this.state._isValid},isPristine:function(){return this.state._isPristine},isFormSubmitted:function(){return this.state._formSubmitted},isRequired:function(){return!!this.props.required},showRequired:function(){return this.state._isRequired},showError:function(){return!this.showRequired()&&!this.isValid()},isValidValue:function(t){return this.context.formsy.isValidValue.call(null,this,t)}}}).call(e,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/formsy-react/lib/main.js":function(t,e,r){"use strict";(function(e){function n(t,e){var r={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},o="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(t){return void 0===t?"undefined":i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":i(t)},a=r("./node_modules/prop-types/index.js"),u=e.React||r("./node_modules/react/react.js"),l=r("./node_modules/create-react-class/index.js"),c={},d=r("./node_modules/formsy-react/lib/validationRules.js"),f=r("./node_modules/form-data-to-object/index.js"),p=r("./node_modules/formsy-react/lib/utils.js"),h=r("./node_modules/formsy-react/lib/Mixin.js"),m=r("./node_modules/formsy-react/lib/HOC.js"),F=r("./node_modules/formsy-react/lib/Decorator.js"),g={},y=[];c.Mixin=h,c.HOC=m,c.Decorator=F,c.defaults=function(t){g=t},c.addValidationRule=function(t,e){d[t]=e},c.Form=l({displayName:"Formsy",getInitialState:function(){return{isValid:!0,isSubmitting:!1,canChange:!1}},getDefaultProps:function(){return{onSuccess:function(){},onError:function(){},onSubmit:function(){},onValidSubmit:function(){},onInvalidSubmit:function(){},onValid:function(){},onInvalid:function(){},onChange:function(){},validationErrors:null,preventExternalInvalidation:!1}},childContextTypes:{formsy:a.object},getChildContext:function(){var t=this;return{formsy:{attachToForm:this.attachToForm,detachFromForm:this.detachFromForm,validate:this.validate,isFormDisabled:this.isFormDisabled,isValidValue:function(e,r){return t.runValidation(e,r).isValid}}}},componentWillMount:function(){this.inputs=[]},componentDidMount:function(){this.validateForm()},componentWillUpdate:function(){this.prevInputNames=this.inputs.map(function(t){return t.props.name})},componentDidUpdate:function(){this.props.validationErrors&&"object"===o(this.props.validationErrors)&&Object.keys(this.props.validationErrors).length>0&&this.setInputValidationErrors(this.props.validationErrors);var t=this.inputs.map(function(t){return t.props.name});p.arraysDiffer(this.prevInputNames,t)&&this.validateForm()},reset:function(t){this.setFormPristine(!0),this.resetModel(t)},submit:function(t){t&&t.preventDefault(),this.setFormPristine(!1);var e=this.getModel();this.props.onSubmit(e,this.resetModel,this.updateInputsWithError),this.state.isValid?this.props.onValidSubmit(e,this.resetModel,this.updateInputsWithError):this.props.onInvalidSubmit(e,this.resetModel,this.updateInputsWithError)},mapModel:function(t){return this.props.mapping?this.props.mapping(t):f.toObj(Object.keys(t).reduce(function(e,r){for(var n=r.split("."),i=e;n.length;){var s=n.shift();i=i[s]=n.length?i[s]||{}:t[r]}return e},{}))},getModel:function(){var t=this.getCurrentValues();return this.mapModel(t)},resetModel:function(t){this.inputs.forEach(function(e){var r=e.props.name;t&&t.hasOwnProperty(r)?e.setValue(t[r]):e.resetValue()}),this.validateForm()},setInputValidationErrors:function(t){this.inputs.forEach(function(e){var r=e.props.name,n=[{_isValid:!(r in t),_validationError:"string"==typeof t[r]?[t[r]]:t[r]}];e.setState.apply(e,n)})},isChanged:function(){return!p.isSame(this.getPristineValues(),this.getCurrentValues())},getPristineValues:function(){return this.inputs.reduce(function(t,e){return t[e.props.name]=e.props.value,t},{})},updateInputsWithError:function(t){var e=this;Object.keys(t).forEach(function(r,n){var i=p.find(e.inputs,function(t){return t.props.name===r});if(!i)throw new Error("You are trying to update an input that does not exist. Verify errors object with input names. "+JSON.stringify(t));var s=[{_isValid:e.props.preventExternalInvalidation||!1,_externalError:"string"==typeof t[r]?[t[r]]:t[r]}];i.setState.apply(i,s)})},isFormDisabled:function(){return this.props.disabled},getCurrentValues:function(){return this.inputs.reduce(function(t,e){return t[e.props.name]=e.state._value,t},{})},setFormPristine:function(t){this.setState({_formSubmitted:!t}),this.inputs.forEach(function(e,r){e.setState({_formSubmitted:!t,_isPristine:t})})},validate:function(t){this.state.canChange&&this.props.onChange(this.getCurrentValues(),this.isChanged());var e=this.runValidation(t);t.setState({_isValid:e.isValid,_isRequired:e.isRequired,_validationError:e.error,_externalError:null},this.validateForm)},runValidation:function(t,e){var r=this.getCurrentValues(),n=t.props.validationErrors,i=t.props.validationError;e=2===arguments.length?e:t.state._value;var s=this.runRules(e,r,t._validations),o=this.runRules(e,r,t._requiredValidations);"function"==typeof t.validate&&(s.failed=t.validate()?[]:["failed"]);var a=!!Object.keys(t._requiredValidations).length&&!!o.success.length,u=!(s.failed.length||this.props.validationErrors&&this.props.validationErrors[t.props.name]);return{isRequired:a,isValid:!a&&u,error:function(){if(u&&!a)return y;if(s.errors.length)return s.errors;if(this.props.validationErrors&&this.props.validationErrors[t.props.name])return"string"==typeof this.props.validationErrors[t.props.name]?[this.props.validationErrors[t.props.name]]:this.props.validationErrors[t.props.name];if(a){var e=n[o.success[0]];return e?[e]:null}return s.failed.length?s.failed.map(function(t){return n[t]?n[t]:i}).filter(function(t,e,r){return r.indexOf(t)===e}):void 0}.call(this)}},runRules:function(t,e,r){var n={errors:[],failed:[],success:[]};return Object.keys(r).length&&Object.keys(r).forEach(function(i){if(d[i]&&"function"==typeof r[i])throw new Error("Formsy does not allow you to override default validations: "+i);if(!d[i]&&"function"!=typeof r[i])throw new Error("Formsy does not have the validation rule: "+i);if("function"==typeof r[i]){var s=r[i](e,t);return void("string"==typeof s?(n.errors.push(s),n.failed.push(i)):s||n.failed.push(i))}if("function"!=typeof r[i]){var s=d[i](e,t,r[i]);return void("string"==typeof s?(n.errors.push(s),n.failed.push(i)):s?n.success.push(i):n.failed.push(i))}return n.success.push(i)}),n},validateForm:function(){var t=this,e=function(){var t=this.inputs.every(function(t){return t.state._isValid});this.setState({isValid:t}),t?this.props.onValid():this.props.onInvalid(),this.setState({canChange:!0})}.bind(this);this.inputs.forEach(function(r,n){var i=t.runValidation(r);i.isValid&&r.state._externalError&&(i.isValid=!1),r.setState({_isValid:i.isValid,_isRequired:i.isRequired,_validationError:i.error,_externalError:!i.isValid&&r.state._externalError?r.state._externalError:null},n===t.inputs.length-1?e:null)}),this.inputs.length||this.setState({canChange:!0})},attachToForm:function(t){-1===this.inputs.indexOf(t)&&this.inputs.push(t),this.validate(t)},detachFromForm:function(t){var e=this.inputs.indexOf(t);-1!==e&&(this.inputs=this.inputs.slice(0,e).concat(this.inputs.slice(e+1))),this.validateForm()},render:function(){var t=this.props,e=(t.mapping,t.validationErrors,t.onSubmit,t.onValid,t.onValidSubmit,t.onInvalid,t.onInvalidSubmit,t.onChange,t.reset,t.preventExternalInvalidation,t.onSuccess,t.onError,n(t,["mapping","validationErrors","onSubmit","onValid","onValidSubmit","onInvalid","onInvalidSubmit","onChange","reset","preventExternalInvalidation","onSuccess","onError"]));return u.createElement("form",s({},e,{onSubmit:this.submit}),this.props.children)}}),e.exports||e.module||e.define&&e.define.amd||(e.Formsy=c),t.exports=c}).call(e,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/formsy-react/lib/utils.js":function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return void 0===t?"undefined":n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":n(t)};t.exports={arraysDiffer:function(t,e){var r=!1;return t.length!==e.length?r=!0:t.forEach(function(t,n){this.isSame(t,e[n])||(r=!0)},this),r},objectsDiffer:function(t,e){var r=!1;return Object.keys(t).length!==Object.keys(e).length?r=!0:Object.keys(t).forEach(function(n){this.isSame(t[n],e[n])||(r=!0)},this),r},isSame:function(t,e){return(void 0===t?"undefined":i(t))===(void 0===e?"undefined":i(e))&&(Array.isArray(t)&&Array.isArray(e)?!this.arraysDiffer(t,e):"function"==typeof t?t.toString()===e.toString():"object"===(void 0===t?"undefined":i(t))&&null!==t&&null!==e?!this.objectsDiffer(t,e):t===e)},find:function(t,e){for(var r=0,n=t.length;r<n;r++){var i=t[r];if(e(i))return i}return null}}},"./node_modules/formsy-react/lib/validationRules.js":function(t,e,r){"use strict";var n=function(t){return null!==t&&void 0!==t},i=function(t){return""===t},s={isDefaultRequiredValue:function(t,e){return void 0===e||""===e},isExisty:function(t,e){return n(e)},matchRegexp:function(t,e,r){return!n(e)||i(e)||r.test(e)},isUndefined:function(t,e){return void 0===e},isEmptyString:function(t,e){return i(e)},isEmail:function(t,e){return s.matchRegexp(t,e,/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i)},isUrl:function(t,e){return s.matchRegexp(t,e,/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i)},isTrue:function(t,e){return!0===e},isFalse:function(t,e){return!1===e},isNumeric:function(t,e){return"number"==typeof e||s.matchRegexp(t,e,/^[-+]?(?:\d*[.])?\d+$/)},isAlpha:function(t,e){return s.matchRegexp(t,e,/^[A-Z]+$/i)},isAlphanumeric:function(t,e){return s.matchRegexp(t,e,/^[0-9A-Z]+$/i)},isInt:function(t,e){return s.matchRegexp(t,e,/^(?:[-+]?(?:0|[1-9]\d*))$/)},isFloat:function(t,e){return s.matchRegexp(t,e,/^(?:[-+]?(?:\d+))?(?:\.\d*)?(?:[eE][\+\-]?(?:\d+))?$/)},isWords:function(t,e){return s.matchRegexp(t,e,/^[A-Z\s]+$/i)},isSpecialWords:function(t,e){return s.matchRegexp(t,e,/^[A-Z\s\u00C0-\u017F]+$/i)},isLength:function(t,e,r){return!n(e)||i(e)||e.length===r},equals:function(t,e,r){return!n(e)||i(e)||e==r},equalsField:function(t,e,r){return e==t[r]},maxLength:function(t,e,r){return!n(e)||e.length<=r},minLength:function(t,e,r){return!n(e)||i(e)||e.length>=r}};t.exports=s},"./src/components/Auth/Field/Field.js":function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r("./node_modules/react/react.js"),l=n(u),c=r("./node_modules/formsy-react/lib/main.js"),d=(n(c),r("./node_modules/prop-types/index.js")),f=n(d),p=function(t){function e(t){i(this,e);var r=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.changeValue=function(t){r.props.setValue(t.currentTarget["checkbox"===r.props.type?"checked":"value"])},r}return o(e,t),a(e,[{key:"render",value:function(){var t=this.props.getErrorMessage();return l.default.createElement("div",{className:"signup-field-group"},l.default.createElement("label",{htmlFor:this.props.name.toLowerCase(),className:"signup-form__label"},this.props.name),l.default.createElement("input",{onChange:this.changeValue,value:this.props.getValue(),type:this.props.type||"text",name:this.props.name.toLowerCase(),className:"signup-form__input-field"}),l.default.createElement("p",{className:"caption signup-form__caption"},this.props.text),l.default.createElement("span",{className:"signup-form__error-message"},t))}}]),e}(l.default.Component);p.propTypes={name:f.default.string,text:f.default.string,className:f.default.string,type:f.default.string,setValue:f.default.any,getValue:f.default.func,validations:f.default.any,getErrorMessage:f.default.func,registration:f.default.func},e.default=(0,c.HOC)(p)},"./src/components/Auth/Header/Header.js":function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Header=void 0;var i=r("./node_modules/react/react.js"),s=n(i),o=r("./node_modules/prop-types/index.js"),a=n(o);(e.Header=function(t){return s.default.createElement("div",{className:"signup-header"},s.default.createElement("i",{className:"fa "+t.pic+" fa-3x signup-header__icon","aria-hidden":"true"}),s.default.createElement("h1",{className:"signup-header__title"},t.title,s.default.createElement("span",{className:"caption signup-header__caption"},t.text)))}).propTypes={pic:a.default.string,title:a.default.string,text:a.default.string}},"./src/pages/Login/Login.js":function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){return{loginStatus:t.authentication.status,userData:t.authentication.isLogged,errorText:t.authentication.errorText}}function u(t){return{login:(0,b.bindActionCreators)(v.login,t),clearLoginStatus:function(){return t((0,v.clearLoginStatus)())}}}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=r("./node_modules/react/react.js"),d=n(c),f=r("./node_modules/formsy-react/lib/main.js"),p=n(f),h=r("./src/components/Auth/Header/Header.js"),m=r("./src/components/Auth/Field/Field.js"),F=n(m),g=r("./src/components/Message/Message.js"),y=r("./node_modules/react-router-dom/es/index.js"),v=r("./src/actions/auth.action.js"),b=r("./node_modules/redux/es/index.js"),_=r("./node_modules/react-redux/es/index.js"),E=r("./node_modules/prop-types/index.js"),x=n(E);r("./src/pages/Login/Login.scss");var V=function(t){function e(t){i(this,e);var r=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.addLogin=function(){var t={email:r.email.getValue(),password:r.password.getValue()};r.props.login(t)},r.enableButton=function(){r.setState({canSubmit:!0})},r.disableButton=function(){r.setState({canSubmit:!1})},r.state={canSubmit:!1},r}return o(e,t),l(e,[{key:"componentDidUpdate",value:function(){this.props.userData._id&&(this.props.history.length>3?this.props.history.goBack():this.props.history.push("/"))}},{key:"render",value:function(){var t=this;return d.default.createElement("div",{className:"login-container"},d.default.createElement(h.Header,{pic:"fa-unlock",title:"Login",text:"Please enter your credentials to login."}),d.default.createElement(g.Message,{clearStatus:this.props.clearLoginStatus,status:this.props.loginStatus,header:"Authorization failed",text:this.props.errorText}),d.default.createElement(p.default.Form,{onSubmit:this.addLogin,onValid:this.enableButton,onInvalid:this.disableButton,className:"signup-form"},d.default.createElement(F.default,{name:"E-mail",type:"text",text:"Your unique username to app",ref:function(e){t.email=e},validations:"isEmail",validationError:"This is not a valid email",required:!0}),d.default.createElement(F.default,{name:"Password",type:"password",text:"Your hard to guess password",ref:function(e){t.password=e},validations:{minLength:7,isAlphanumeric:!0},validationError:"This is not a valid pass",required:!0}),d.default.createElement("div",{className:"signup-field-group signup-btn-group"},d.default.createElement("input",{type:"submit",disabled:!this.state.canSubmit,className:"btn btn--signup btn--signup-active",value:"Login"}),d.default.createElement("span",{className:"caption signup-form__caption signup-form__caption--text"},"New here?",d.default.createElement(y.NavLink,{to:"/auth/register",className:"signup-form__caption--link"},"Register")))))}}]),e}(c.Component);e.default=(0,_.connect)(a,u)(V),V.propTypes={loginStatus:x.default.string,history:x.default.object,login:x.default.func,userData:x.default.object,errorText:x.default.string,clearLoginStatus:x.default.func}},"./src/pages/Login/Login.scss":function(t,e){}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vNS5pbmRleF9idW5kbGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jcmVhdGUtcmVhY3QtY2xhc3MvaW5kZXguanM/ODBhNCIsIndlYnBhY2s6Ly8vLi9+L2Zvcm0tZGF0YS10by1vYmplY3QvaW5kZXguanM/OWJiNSIsIndlYnBhY2s6Ly8vLi9+L2Zvcm1zeS1yZWFjdC9saWIvRGVjb3JhdG9yLmpzPzUxZmMiLCJ3ZWJwYWNrOi8vLy4vfi9mb3Jtc3ktcmVhY3QvbGliL0hPQy5qcz9iZWY4Iiwid2VicGFjazovLy8uL34vZm9ybXN5LXJlYWN0L2xpYi9NaXhpbi5qcz85MzU3Iiwid2VicGFjazovLy8uL34vZm9ybXN5LXJlYWN0L2xpYi9tYWluLmpzP2U4MTQiLCJ3ZWJwYWNrOi8vLy4vfi9mb3Jtc3ktcmVhY3QvbGliL3V0aWxzLmpzP2ZkMjYiLCJ3ZWJwYWNrOi8vLy4vfi9mb3Jtc3ktcmVhY3QvbGliL3ZhbGlkYXRpb25SdWxlcy5qcz9jMGE1Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0F1dGgvRmllbGQvRmllbGQuanM/YWJkZSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9BdXRoL0hlYWRlci9IZWFkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VzL0xvZ2luL0xvZ2luLmpzIl0sIm5hbWVzIjpbIndlYnBhY2tKc29ucCIsIi4vbm9kZV9tb2R1bGVzL2NyZWF0ZS1yZWFjdC1jbGFzcy9pbmRleC5qcyIsIm1vZHVsZSIsImV4cG9ydHMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiUmVhY3QiLCJmYWN0b3J5IiwiRXJyb3IiLCJSZWFjdE5vb3BVcGRhdGVRdWV1ZSIsIkNvbXBvbmVudCIsInVwZGF0ZXIiLCJpc1ZhbGlkRWxlbWVudCIsIi4vbm9kZV9tb2R1bGVzL2Zvcm0tZGF0YS10by1vYmplY3QvaW5kZXguanMiLCJ0b09iaiIsInNvdXJjZSIsIk9iamVjdCIsImtleXMiLCJyZWR1Y2UiLCJvdXRwdXQiLCJrZXkiLCJwYXJlbnRLZXkiLCJtYXRjaCIsInBhdGhzIiwiY29uY2F0IiwibWFwIiwicmVwbGFjZSIsImN1cnJlbnRQYXRoIiwibGVuZ3RoIiwicGF0aEtleSIsInNoaWZ0IiwiaXNOYU4iLCJmcm9tT2JqIiwib2JqIiwicmVjdXIiLCJuZXdPYmoiLCJwcm9wTmFtZSIsImN1cnJWYWwiLCJBcnJheSIsImlzQXJyYXkiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJmb3JFYWNoIiwidiIsIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvRGVjb3JhdG9yLmpzIiwiZ2xvYmFsIiwiX2V4dGVuZHMiLCJhc3NpZ24iLCJ0YXJnZXQiLCJpIiwiYXJndW1lbnRzIiwiaGFzT3duUHJvcGVydHkiLCJjcmVhdGVSZWFjdENsYXNzIiwiTWl4aW4iLCJtaXhpbnMiLCJyZW5kZXIiLCJjcmVhdGVFbGVtZW50Iiwic2V0VmFsaWRhdGlvbnMiLCJ0aGlzIiwic2V0VmFsdWUiLCJyZXNldFZhbHVlIiwiZ2V0VmFsdWUiLCJoYXNWYWx1ZSIsImdldEVycm9yTWVzc2FnZSIsImdldEVycm9yTWVzc2FnZXMiLCJpc0Zvcm1EaXNhYmxlZCIsImlzVmFsaWQiLCJpc1ByaXN0aW5lIiwiaXNGb3JtU3VibWl0dGVkIiwiaXNSZXF1aXJlZCIsInNob3dSZXF1aXJlZCIsInNob3dFcnJvciIsImlzVmFsaWRWYWx1ZSIsInByb3BzIiwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9IT0MuanMiLCJnZXREaXNwbGF5TmFtZSIsImRpc3BsYXlOYW1lIiwibmFtZSIsImlubmVyUmVmIiwicHJvcHNGb3JFbGVtZW50IiwicmVmIiwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9NaXhpbi5qcyIsIlByb3BUeXBlcyIsInV0aWxzIiwiY29udmVydFZhbGlkYXRpb25zVG9PYmplY3QiLCJ2YWxpZGF0aW9ucyIsInNwbGl0IiwidmFsaWRhdGlvbiIsImFyZ3MiLCJ2YWxpZGF0ZU1ldGhvZCIsImFyZyIsIkpTT04iLCJwYXJzZSIsImUiLCJnZXRJbml0aWFsU3RhdGUiLCJfdmFsdWUiLCJ2YWx1ZSIsIl9pc1JlcXVpcmVkIiwiX2lzVmFsaWQiLCJfaXNQcmlzdGluZSIsIl9wcmlzdGluZVZhbHVlIiwiX3ZhbGlkYXRpb25FcnJvciIsIl9leHRlcm5hbEVycm9yIiwiX2Zvcm1TdWJtaXR0ZWQiLCJjb250ZXh0VHlwZXMiLCJmb3Jtc3kiLCJvYmplY3QiLCJnZXREZWZhdWx0UHJvcHMiLCJ2YWxpZGF0aW9uRXJyb3IiLCJ2YWxpZGF0aW9uRXJyb3JzIiwiY29tcG9uZW50V2lsbE1vdW50IiwiY29uZmlndXJlIiwicmVxdWlyZWQiLCJjb250ZXh0IiwiYXR0YWNoVG9Gb3JtIiwiYmluZCIsImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiLCJuZXh0UHJvcHMiLCJjb21wb25lbnREaWRVcGRhdGUiLCJwcmV2UHJvcHMiLCJpc1NhbWUiLCJ2YWxpZGF0ZSIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwiZGV0YWNoRnJvbUZvcm0iLCJfdmFsaWRhdGlvbnMiLCJfcmVxdWlyZWRWYWxpZGF0aW9ucyIsImlzRGVmYXVsdFJlcXVpcmVkVmFsdWUiLCJzZXRTdGF0ZSIsInN0YXRlIiwibWVzc2FnZXMiLCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL21haW4uanMiLCJfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMiLCJpbmRleE9mIiwiX3R5cGVvZjIiLCJTeW1ib2wiLCJpdGVyYXRvciIsImNvbnN0cnVjdG9yIiwiX3R5cGVvZiIsIkZvcm1zeSIsInZhbGlkYXRpb25SdWxlcyIsImZvcm1EYXRhVG9PYmplY3QiLCJIT0MiLCJEZWNvcmF0b3IiLCJvcHRpb25zIiwiZW1wdHlBcnJheSIsImRlZmF1bHRzIiwicGFzc2VkT3B0aW9ucyIsImFkZFZhbGlkYXRpb25SdWxlIiwiZnVuYyIsIkZvcm0iLCJpc1N1Ym1pdHRpbmciLCJjYW5DaGFuZ2UiLCJvblN1Y2Nlc3MiLCJvbkVycm9yIiwib25TdWJtaXQiLCJvblZhbGlkU3VibWl0Iiwib25JbnZhbGlkU3VibWl0Iiwib25WYWxpZCIsIm9uSW52YWxpZCIsIm9uQ2hhbmdlIiwicHJldmVudEV4dGVybmFsSW52YWxpZGF0aW9uIiwiY2hpbGRDb250ZXh0VHlwZXMiLCJnZXRDaGlsZENvbnRleHQiLCJfdGhpcyIsImNvbXBvbmVudCIsInJ1blZhbGlkYXRpb24iLCJpbnB1dHMiLCJjb21wb25lbnREaWRNb3VudCIsInZhbGlkYXRlRm9ybSIsImNvbXBvbmVudFdpbGxVcGRhdGUiLCJwcmV2SW5wdXROYW1lcyIsInNldElucHV0VmFsaWRhdGlvbkVycm9ycyIsIm5ld0lucHV0TmFtZXMiLCJhcnJheXNEaWZmZXIiLCJyZXNldCIsImRhdGEiLCJzZXRGb3JtUHJpc3RpbmUiLCJyZXNldE1vZGVsIiwic3VibWl0IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIm1vZGVsIiwiZ2V0TW9kZWwiLCJ1cGRhdGVJbnB1dHNXaXRoRXJyb3IiLCJtYXBNb2RlbCIsIm1hcHBpbmciLCJtYXBwZWRNb2RlbCIsImtleUFycmF5IiwiYmFzZSIsImN1cnJlbnRLZXkiLCJjdXJyZW50VmFsdWVzIiwiZ2V0Q3VycmVudFZhbHVlcyIsImVycm9ycyIsImFwcGx5IiwiaXNDaGFuZ2VkIiwiZ2V0UHJpc3RpbmVWYWx1ZXMiLCJfdGhpczIiLCJpbmRleCIsImZpbmQiLCJzdHJpbmdpZnkiLCJkaXNhYmxlZCIsImVycm9yIiwidmFsaWRhdGlvblJlc3VsdHMiLCJydW5SdWxlcyIsInJlcXVpcmVkUmVzdWx0cyIsImZhaWxlZCIsInN1Y2Nlc3MiLCJmaWx0ZXIiLCJ4IiwicG9zIiwiYXJyIiwicmVzdWx0cyIsInZhbGlkYXRpb25NZXRob2QiLCJwdXNoIiwiX3RoaXMzIiwib25WYWxpZGF0aW9uQ29tcGxldGUiLCJhbGxJc1ZhbGlkIiwiZXZlcnkiLCJjb21wb25lbnRQb3MiLCJzbGljZSIsIl9wcm9wcyIsIm5vbkZvcm1zeVByb3BzIiwiY2hpbGRyZW4iLCJkZWZpbmUiLCJhbWQiLCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL3V0aWxzLmpzIiwiYSIsImIiLCJpc0RpZmZlcmVudCIsIml0ZW0iLCJvYmplY3RzRGlmZmVyIiwiY29sbGVjdGlvbiIsImZuIiwibCIsIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvdmFsaWRhdGlvblJ1bGVzLmpzIiwiX2lzRXhpc3R5IiwidW5kZWZpbmVkIiwiaXNFbXB0eSIsInZhbHVlcyIsImlzRXhpc3R5IiwibWF0Y2hSZWdleHAiLCJyZWdleHAiLCJ0ZXN0IiwiaXNVbmRlZmluZWQiLCJpc0VtcHR5U3RyaW5nIiwiaXNFbWFpbCIsImlzVXJsIiwiaXNUcnVlIiwiaXNGYWxzZSIsImlzTnVtZXJpYyIsImlzQWxwaGEiLCJpc0FscGhhbnVtZXJpYyIsImlzSW50IiwiaXNGbG9hdCIsImlzV29yZHMiLCJpc1NwZWNpYWxXb3JkcyIsImlzTGVuZ3RoIiwiZXF1YWxzIiwiZXFsIiwiZXF1YWxzRmllbGQiLCJmaWVsZCIsIm1heExlbmd0aCIsIm1pbkxlbmd0aCIsIi4vc3JjL2NvbXBvbmVudHMvQXV0aC9GaWVsZC9GaWVsZC5qcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsInNlbGYiLCJSZWZlcmVuY2VFcnJvciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNyZWF0ZSIsImVudW1lcmFibGUiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGVmaW5lUHJvcGVydHkiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZGVzY3JpcHRvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIl9yZWFjdCIsIl9yZWFjdDIiLCJfZm9ybXN5UmVhY3QiLCJfcHJvcFR5cGVzIiwiX3Byb3BUeXBlczIiLCJGaWVsZCIsIl9SZWFjdCRDb21wb25lbnQiLCJnZXRQcm90b3R5cGVPZiIsImNoYW5nZVZhbHVlIiwiY3VycmVudFRhcmdldCIsInR5cGUiLCJlcnJvck1lc3NhZ2UiLCJjbGFzc05hbWUiLCJodG1sRm9yIiwidG9Mb3dlckNhc2UiLCJ0ZXh0IiwicHJvcFR5cGVzIiwic3RyaW5nIiwiYW55IiwicmVnaXN0cmF0aW9uIiwiLi9zcmMvY29tcG9uZW50cy9BdXRoL0hlYWRlci9IZWFkZXIuanMiLCJIZWFkZXIiLCJwaWMiLCJhcmlhLWhpZGRlbiIsInRpdGxlIiwiLi9zcmMvcGFnZXMvTG9naW4vTG9naW4uanMiLCJtYXBTdGF0ZVRvUHJvcHMiLCJzdG9yZSIsImxvZ2luU3RhdHVzIiwiYXV0aGVudGljYXRpb24iLCJzdGF0dXMiLCJ1c2VyRGF0YSIsImlzTG9nZ2VkIiwiZXJyb3JUZXh0IiwibWFwRGlzcGF0Y2hUb1Byb3BzIiwiZGlzcGF0Y2giLCJsb2dpbiIsIl9yZWR1eCIsImJpbmRBY3Rpb25DcmVhdG9ycyIsIl9hdXRoIiwiY2xlYXJMb2dpblN0YXR1cyIsIl9mb3Jtc3lSZWFjdDIiLCJfSGVhZGVyIiwiX0ZpZWxkIiwiX0ZpZWxkMiIsIl9NZXNzYWdlIiwiX3JlYWN0Um91dGVyRG9tIiwiX3JlYWN0UmVkdXgiLCJMb2dpbiIsIl9Db21wb25lbnQiLCJhZGRMb2dpbiIsImVtYWlsIiwicGFzc3dvcmQiLCJlbmFibGVCdXR0b24iLCJjYW5TdWJtaXQiLCJkaXNhYmxlQnV0dG9uIiwiX2lkIiwiaGlzdG9yeSIsImdvQmFjayIsIk1lc3NhZ2UiLCJjbGVhclN0YXR1cyIsImhlYWRlciIsImlucHV0IiwiTmF2TGluayIsInRvIiwiY29ubmVjdCIsIi4vc3JjL3BhZ2VzL0xvZ2luL0xvZ2luLnNjc3MiXSwibWFwcGluZ3MiOiJBQUFBQSxjQUFjLElBRVJDLDZDQUNBLFNBQVVDLEVBQVFDLEVBQVNDLEdBRWpDLFlDT0EsSUFBSUMsR0FBUUQsRUFBUSxpQ0FDaEJF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QVUscUNBQ1Y3TSxNQUFNLFVBQ1JrTSxFQUFBeEIsUUFBQWxOLGNBQUEsUUFBTXFQLFVBQVcsMkRBQWpCLFlBR0VYLEVBQUF4QixRQUFBbE4sY0FBQXVSLEVBQUFpQixTQUFTQyxHQUFHLGlCQUNWcEQsVUFBVSw4QkFEWixvQlh3dENMb0MsR0FDUGhELEVBQU94UixVQWtCVE4sR0FBUXVRLFNXanRDTyxFQUFBc0UsRUFBQWtCLFNBQVF2QyxFQUFpQlEsR0FBb0JjLEdBRTVEQSxFQUFNaEMsV0FDSlksWUFBYXhCLEVBQUEzQixRQUFVd0MsT0FDdkJ3QyxRQUFTckQsRUFBQTNCLFFBQVVoSyxPQUNuQjJOLE1BQU9oQyxFQUFBM0IsUUFBVXRILEtBQ2pCNEssU0FBVTNCLEVBQUEzQixRQUFVaEssT0FDcEJ3TixVQUFXN0IsRUFBQTNCLFFBQVV3QyxPQUNyQnVCLGlCQUFrQnBDLEVBQUEzQixRQUFVdEgsT1h1dEN4QitNLCtCQUNBLFNBQVVqVyxFQUFRQyIsImZpbGUiOiI1LmluZGV4X2J1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIndlYnBhY2tKc29ucChbNV0se1xuXG4vKioqLyBcIi4vbm9kZV9tb2R1bGVzL2NyZWF0ZS1yZWFjdC1jbGFzcy9pbmRleC5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQ29weXJpZ2h0IDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqL1xuXG5cblxudmFyIFJlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0L3JlYWN0LmpzXCIpO1xudmFyIGZhY3RvcnkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvY3JlYXRlLXJlYWN0LWNsYXNzL2ZhY3RvcnkuanNcIik7XG5cbmlmICh0eXBlb2YgUmVhY3QgPT09ICd1bmRlZmluZWQnKSB7XG4gIHRocm93IEVycm9yKCdjcmVhdGUtcmVhY3QtY2xhc3MgY291bGQgbm90IGZpbmQgdGhlIFJlYWN0IG9iamVjdC4gSWYgeW91IGFyZSB1c2luZyBzY3JpcHQgdGFncywgJyArICdtYWtlIHN1cmUgdGhhdCBSZWFjdCBpcyBiZWluZyBsb2FkZWQgYmVmb3JlIGNyZWF0ZS1yZWFjdC1jbGFzcy4nKTtcbn1cblxuLy8gSGFjayB0byBncmFiIE5vb3BVcGRhdGVRdWV1ZSBmcm9tIGlzb21vcnBoaWMgUmVhY3RcbnZhciBSZWFjdE5vb3BVcGRhdGVRdWV1ZSA9IG5ldyBSZWFjdC5Db21wb25lbnQoKS51cGRhdGVyO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoUmVhY3QuQ29tcG9uZW50LCBSZWFjdC5pc1ZhbGlkRWxlbWVudCwgUmVhY3ROb29wVXBkYXRlUXVldWUpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL25vZGVfbW9kdWxlcy9mb3JtLWRhdGEtdG8tb2JqZWN0L2luZGV4LmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbmZ1bmN0aW9uIHRvT2JqKHNvdXJjZSkge1xuICByZXR1cm4gT2JqZWN0LmtleXMoc291cmNlKS5yZWR1Y2UoZnVuY3Rpb24gKG91dHB1dCwga2V5KSB7XG4gICAgdmFyIHBhcmVudEtleSA9IGtleS5tYXRjaCgvW15cXFtdKi9pKTtcbiAgICB2YXIgcGF0aHMgPSBrZXkubWF0Y2goL1xcWy4qP1xcXS9nKSB8fCBbXTtcbiAgICBwYXRocyA9IFtwYXJlbnRLZXlbMF1dLmNvbmNhdChwYXRocykubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHJldHVybiBrZXkucmVwbGFjZSgvXFxbfFxcXS9nLCAnJyk7XG4gICAgfSk7XG4gICAgdmFyIGN1cnJlbnRQYXRoID0gb3V0cHV0O1xuICAgIHdoaWxlIChwYXRocy5sZW5ndGgpIHtcbiAgICAgIHZhciBwYXRoS2V5ID0gcGF0aHMuc2hpZnQoKTtcblxuICAgICAgaWYgKHBhdGhLZXkgaW4gY3VycmVudFBhdGgpIHtcbiAgICAgICAgY3VycmVudFBhdGggPSBjdXJyZW50UGF0aFtwYXRoS2V5XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnRQYXRoW3BhdGhLZXldID0gcGF0aHMubGVuZ3RoID8gaXNOYU4ocGF0aHNbMF0pID8ge30gOiBbXSA6IHNvdXJjZVtrZXldO1xuICAgICAgICBjdXJyZW50UGF0aCA9IGN1cnJlbnRQYXRoW3BhdGhLZXldO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBvdXRwdXQ7XG4gIH0sIHt9KTtcbn1cblxuZnVuY3Rpb24gZnJvbU9iaihvYmopIHtcbiAgZnVuY3Rpb24gcmVjdXIobmV3T2JqLCBwcm9wTmFtZSwgY3VyclZhbCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGN1cnJWYWwpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChjdXJyVmFsKSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICAgIE9iamVjdC5rZXlzKGN1cnJWYWwpLmZvckVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgcmVjdXIobmV3T2JqLCBwcm9wTmFtZSArIFwiW1wiICsgdiArIFwiXVwiLCBjdXJyVmFsW3ZdKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG5ld09iajtcbiAgICB9XG5cbiAgICBuZXdPYmpbcHJvcE5hbWVdID0gY3VyclZhbDtcbiAgICByZXR1cm4gbmV3T2JqO1xuICB9XG5cbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuICByZXR1cm4ga2V5cy5yZWR1Y2UoZnVuY3Rpb24gKG5ld09iaiwgcHJvcE5hbWUpIHtcbiAgICByZXR1cm4gcmVjdXIobmV3T2JqLCBwcm9wTmFtZSwgb2JqW3Byb3BOYW1lXSk7XG4gIH0sIHt9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGZyb21PYmo6IGZyb21PYmosXG4gIHRvT2JqOiB0b09ialxufTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9EZWNvcmF0b3IuanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1yZXR1cm4gdGFyZ2V0O1xufTtcblxudmFyIFJlYWN0ID0gZ2xvYmFsLlJlYWN0IHx8IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC9yZWFjdC5qc1wiKTtcbnZhciBjcmVhdGVSZWFjdENsYXNzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2NyZWF0ZS1yZWFjdC1jbGFzcy9pbmRleC5qc1wiKTtcbnZhciBNaXhpbiA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL01peGluLmpzXCIpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gICAgcmV0dXJuIGNyZWF0ZVJlYWN0Q2xhc3Moe1xuICAgICAgbWl4aW5zOiBbTWl4aW5dLFxuICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KENvbXBvbmVudCwgX2V4dGVuZHMoe1xuICAgICAgICAgIHNldFZhbGlkYXRpb25zOiB0aGlzLnNldFZhbGlkYXRpb25zLFxuICAgICAgICAgIHNldFZhbHVlOiB0aGlzLnNldFZhbHVlLFxuICAgICAgICAgIHJlc2V0VmFsdWU6IHRoaXMucmVzZXRWYWx1ZSxcbiAgICAgICAgICBnZXRWYWx1ZTogdGhpcy5nZXRWYWx1ZSxcbiAgICAgICAgICBoYXNWYWx1ZTogdGhpcy5oYXNWYWx1ZSxcbiAgICAgICAgICBnZXRFcnJvck1lc3NhZ2U6IHRoaXMuZ2V0RXJyb3JNZXNzYWdlLFxuICAgICAgICAgIGdldEVycm9yTWVzc2FnZXM6IHRoaXMuZ2V0RXJyb3JNZXNzYWdlcyxcbiAgICAgICAgICBpc0Zvcm1EaXNhYmxlZDogdGhpcy5pc0Zvcm1EaXNhYmxlZCxcbiAgICAgICAgICBpc1ZhbGlkOiB0aGlzLmlzVmFsaWQsXG4gICAgICAgICAgaXNQcmlzdGluZTogdGhpcy5pc1ByaXN0aW5lLFxuICAgICAgICAgIGlzRm9ybVN1Ym1pdHRlZDogdGhpcy5pc0Zvcm1TdWJtaXR0ZWQsXG4gICAgICAgICAgaXNSZXF1aXJlZDogdGhpcy5pc1JlcXVpcmVkLFxuICAgICAgICAgIHNob3dSZXF1aXJlZDogdGhpcy5zaG93UmVxdWlyZWQsXG4gICAgICAgICAgc2hvd0Vycm9yOiB0aGlzLnNob3dFcnJvcixcbiAgICAgICAgICBpc1ZhbGlkVmFsdWU6IHRoaXMuaXNWYWxpZFZhbHVlXG4gICAgICAgIH0sIHRoaXMucHJvcHMpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn07XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3dlYnBhY2svYnVpbGRpbi9nbG9iYWwuanNcIikpKVxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL0hPQy5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfXJldHVybiB0YXJnZXQ7XG59O1xuXG52YXIgUmVhY3QgPSBnbG9iYWwuUmVhY3QgfHwgX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0L3JlYWN0LmpzXCIpO1xudmFyIGNyZWF0ZVJlYWN0Q2xhc3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvY3JlYXRlLXJlYWN0LWNsYXNzL2luZGV4LmpzXCIpO1xudmFyIE1peGluID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvTWl4aW4uanNcIik7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChDb21wb25lbnQpIHtcbiAgcmV0dXJuIGNyZWF0ZVJlYWN0Q2xhc3Moe1xuICAgIGRpc3BsYXlOYW1lOiAnRm9ybXN5KCcgKyBnZXREaXNwbGF5TmFtZShDb21wb25lbnQpICsgJyknLFxuICAgIG1peGluczogW01peGluXSxcblxuICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIGlubmVyUmVmID0gdGhpcy5wcm9wcy5pbm5lclJlZjtcblxuICAgICAgdmFyIHByb3BzRm9yRWxlbWVudCA9IF9leHRlbmRzKHtcbiAgICAgICAgc2V0VmFsaWRhdGlvbnM6IHRoaXMuc2V0VmFsaWRhdGlvbnMsXG4gICAgICAgIHNldFZhbHVlOiB0aGlzLnNldFZhbHVlLFxuICAgICAgICByZXNldFZhbHVlOiB0aGlzLnJlc2V0VmFsdWUsXG4gICAgICAgIGdldFZhbHVlOiB0aGlzLmdldFZhbHVlLFxuICAgICAgICBoYXNWYWx1ZTogdGhpcy5oYXNWYWx1ZSxcbiAgICAgICAgZ2V0RXJyb3JNZXNzYWdlOiB0aGlzLmdldEVycm9yTWVzc2FnZSxcbiAgICAgICAgZ2V0RXJyb3JNZXNzYWdlczogdGhpcy5nZXRFcnJvck1lc3NhZ2VzLFxuICAgICAgICBpc0Zvcm1EaXNhYmxlZDogdGhpcy5pc0Zvcm1EaXNhYmxlZCxcbiAgICAgICAgaXNWYWxpZDogdGhpcy5pc1ZhbGlkLFxuICAgICAgICBpc1ByaXN0aW5lOiB0aGlzLmlzUHJpc3RpbmUsXG4gICAgICAgIGlzRm9ybVN1Ym1pdHRlZDogdGhpcy5pc0Zvcm1TdWJtaXR0ZWQsXG4gICAgICAgIGlzUmVxdWlyZWQ6IHRoaXMuaXNSZXF1aXJlZCxcbiAgICAgICAgc2hvd1JlcXVpcmVkOiB0aGlzLnNob3dSZXF1aXJlZCxcbiAgICAgICAgc2hvd0Vycm9yOiB0aGlzLnNob3dFcnJvcixcbiAgICAgICAgaXNWYWxpZFZhbHVlOiB0aGlzLmlzVmFsaWRWYWx1ZVxuICAgICAgfSwgdGhpcy5wcm9wcyk7XG5cbiAgICAgIGlmIChpbm5lclJlZikge1xuICAgICAgICBwcm9wc0ZvckVsZW1lbnQucmVmID0gaW5uZXJSZWY7XG4gICAgICB9XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDb21wb25lbnQsIHByb3BzRm9yRWxlbWVudCk7XG4gICAgfVxuICB9KTtcbn07XG5cbmZ1bmN0aW9uIGdldERpc3BsYXlOYW1lKENvbXBvbmVudCkge1xuICByZXR1cm4gQ29tcG9uZW50LmRpc3BsYXlOYW1lIHx8IENvbXBvbmVudC5uYW1lIHx8ICh0eXBlb2YgQ29tcG9uZW50ID09PSAnc3RyaW5nJyA/IENvbXBvbmVudCA6ICdDb21wb25lbnQnKTtcbn1cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvd2VicGFjay9idWlsZGluL2dsb2JhbC5qc1wiKSkpXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvTWl4aW4uanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XG5cbnZhciBQcm9wVHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9pbmRleC5qc1wiKTtcbnZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL3V0aWxzLmpzXCIpO1xudmFyIFJlYWN0ID0gZ2xvYmFsLlJlYWN0IHx8IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC9yZWFjdC5qc1wiKTtcblxudmFyIGNvbnZlcnRWYWxpZGF0aW9uc1RvT2JqZWN0ID0gZnVuY3Rpb24gY29udmVydFZhbGlkYXRpb25zVG9PYmplY3QodmFsaWRhdGlvbnMpIHtcblxuICBpZiAodHlwZW9mIHZhbGlkYXRpb25zID09PSAnc3RyaW5nJykge1xuXG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLnNwbGl0KC9cXCwoPyFbXntcXFtdKlt9XFxdXSkvZykucmVkdWNlKGZ1bmN0aW9uICh2YWxpZGF0aW9ucywgdmFsaWRhdGlvbikge1xuICAgICAgdmFyIGFyZ3MgPSB2YWxpZGF0aW9uLnNwbGl0KCc6Jyk7XG4gICAgICB2YXIgdmFsaWRhdGVNZXRob2QgPSBhcmdzLnNoaWZ0KCk7XG5cbiAgICAgIGFyZ3MgPSBhcmdzLm1hcChmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoYXJnKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHJldHVybiBhcmc7IC8vIEl0IGlzIGEgc3RyaW5nIGlmIGl0IGNhbiBub3QgcGFyc2UgaXRcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3Jtc3kgZG9lcyBub3Qgc3VwcG9ydCBtdWx0aXBsZSBhcmdzIG9uIHN0cmluZyB2YWxpZGF0aW9ucy4gVXNlIG9iamVjdCBmb3JtYXQgb2YgdmFsaWRhdGlvbnMgaW5zdGVhZC4nKTtcbiAgICAgIH1cblxuICAgICAgdmFsaWRhdGlvbnNbdmFsaWRhdGVNZXRob2RdID0gYXJncy5sZW5ndGggPyBhcmdzWzBdIDogdHJ1ZTtcbiAgICAgIHJldHVybiB2YWxpZGF0aW9ucztcbiAgICB9LCB7fSk7XG4gIH1cblxuICByZXR1cm4gdmFsaWRhdGlvbnMgfHwge307XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIF92YWx1ZTogdGhpcy5wcm9wcy52YWx1ZSxcbiAgICAgIF9pc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgIF9pc1ZhbGlkOiB0cnVlLFxuICAgICAgX2lzUHJpc3RpbmU6IHRydWUsXG4gICAgICBfcHJpc3RpbmVWYWx1ZTogdGhpcy5wcm9wcy52YWx1ZSxcbiAgICAgIF92YWxpZGF0aW9uRXJyb3I6IFtdLFxuICAgICAgX2V4dGVybmFsRXJyb3I6IG51bGwsXG4gICAgICBfZm9ybVN1Ym1pdHRlZDogZmFsc2VcbiAgICB9O1xuICB9LFxuICBjb250ZXh0VHlwZXM6IHtcbiAgICBmb3Jtc3k6IFByb3BUeXBlcy5vYmplY3QgLy8gV2hhdCBhYm91dCByZXF1aXJlZD9cbiAgfSxcbiAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkYXRpb25FcnJvcjogJycsXG4gICAgICB2YWxpZGF0aW9uRXJyb3JzOiB7fVxuICAgIH07XG4gIH0sXG5cbiAgY29tcG9uZW50V2lsbE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgdmFyIGNvbmZpZ3VyZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuc2V0VmFsaWRhdGlvbnModGhpcy5wcm9wcy52YWxpZGF0aW9ucywgdGhpcy5wcm9wcy5yZXF1aXJlZCk7XG5cbiAgICAgIC8vIFBhc3MgYSBmdW5jdGlvbiBpbnN0ZWFkP1xuICAgICAgdGhpcy5jb250ZXh0LmZvcm1zeS5hdHRhY2hUb0Zvcm0odGhpcyk7XG4gICAgICAvL3RoaXMucHJvcHMuX2F0dGFjaFRvRm9ybSh0aGlzKTtcbiAgICB9LmJpbmQodGhpcyk7XG5cbiAgICBpZiAoIXRoaXMucHJvcHMubmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3JtIElucHV0IHJlcXVpcmVzIGEgbmFtZSBwcm9wZXJ0eSB3aGVuIHVzZWQnKTtcbiAgICB9XG5cbiAgICAvKlxuICAgIGlmICghdGhpcy5wcm9wcy5fYXR0YWNoVG9Gb3JtKSB7XG4gICAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc01vdW50ZWQoKSkgcmV0dXJuO1xuICAgICAgICBpZiAoIXRoaXMucHJvcHMuX2F0dGFjaFRvRm9ybSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRm9ybSBNaXhpbiByZXF1aXJlcyBjb21wb25lbnQgdG8gYmUgbmVzdGVkIGluIGEgRm9ybScpO1xuICAgICAgICB9XG4gICAgICAgIGNvbmZpZ3VyZSgpO1xuICAgICAgfS5iaW5kKHRoaXMpLCAwKTtcbiAgICB9XG4gICAgKi9cbiAgICBjb25maWd1cmUoKTtcbiAgfSxcblxuICAvLyBXZSBoYXZlIHRvIG1ha2UgdGhlIHZhbGlkYXRlIG1ldGhvZCBpcyBrZXB0IHdoZW4gbmV3IHByb3BzIGFyZSBhZGRlZFxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgIHRoaXMuc2V0VmFsaWRhdGlvbnMobmV4dFByb3BzLnZhbGlkYXRpb25zLCBuZXh0UHJvcHMucmVxdWlyZWQpO1xuICB9LFxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykge1xuXG4gICAgLy8gSWYgdGhlIHZhbHVlIHBhc3NlZCBoYXMgY2hhbmdlZCwgc2V0IGl0LiBJZiB2YWx1ZSBpcyBub3QgcGFzc2VkIGl0IHdpbGxcbiAgICAvLyBpbnRlcm5hbGx5IHVwZGF0ZSwgYW5kIHRoaXMgd2lsbCBuZXZlciBydW5cbiAgICBpZiAoIXV0aWxzLmlzU2FtZSh0aGlzLnByb3BzLnZhbHVlLCBwcmV2UHJvcHMudmFsdWUpKSB7XG4gICAgICB0aGlzLnNldFZhbHVlKHRoaXMucHJvcHMudmFsdWUpO1xuICAgIH1cblxuICAgIC8vIElmIHZhbGlkYXRpb25zIG9yIHJlcXVpcmVkIGlzIGNoYW5nZWQsIHJ1biBhIG5ldyB2YWxpZGF0aW9uXG4gICAgaWYgKCF1dGlscy5pc1NhbWUodGhpcy5wcm9wcy52YWxpZGF0aW9ucywgcHJldlByb3BzLnZhbGlkYXRpb25zKSB8fCAhdXRpbHMuaXNTYW1lKHRoaXMucHJvcHMucmVxdWlyZWQsIHByZXZQcm9wcy5yZXF1aXJlZCkpIHtcbiAgICAgIHRoaXMuY29udGV4dC5mb3Jtc3kudmFsaWRhdGUodGhpcyk7XG4gICAgfVxuICB9LFxuXG4gIC8vIERldGFjaCBpdCB3aGVuIGNvbXBvbmVudCB1bm1vdW50c1xuICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy5jb250ZXh0LmZvcm1zeS5kZXRhY2hGcm9tRm9ybSh0aGlzKTtcbiAgICAvL3RoaXMucHJvcHMuX2RldGFjaEZyb21Gb3JtKHRoaXMpO1xuICB9LFxuXG4gIHNldFZhbGlkYXRpb25zOiBmdW5jdGlvbiBzZXRWYWxpZGF0aW9ucyh2YWxpZGF0aW9ucywgcmVxdWlyZWQpIHtcblxuICAgIC8vIEFkZCB2YWxpZGF0aW9ucyB0byB0aGUgc3RvcmUgaXRzZWxmIGFzIHRoZSBwcm9wcyBvYmplY3QgY2FuIG5vdCBiZSBtb2RpZmllZFxuICAgIHRoaXMuX3ZhbGlkYXRpb25zID0gY29udmVydFZhbGlkYXRpb25zVG9PYmplY3QodmFsaWRhdGlvbnMpIHx8IHt9O1xuICAgIHRoaXMuX3JlcXVpcmVkVmFsaWRhdGlvbnMgPSByZXF1aXJlZCA9PT0gdHJ1ZSA/IHsgaXNEZWZhdWx0UmVxdWlyZWRWYWx1ZTogdHJ1ZSB9IDogY29udmVydFZhbGlkYXRpb25zVG9PYmplY3QocmVxdWlyZWQpO1xuICB9LFxuXG4gIC8vIFdlIHZhbGlkYXRlIGFmdGVyIHRoZSB2YWx1ZSBoYXMgYmVlbiBzZXRcbiAgc2V0VmFsdWU6IGZ1bmN0aW9uIHNldFZhbHVlKHZhbHVlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBfdmFsdWU6IHZhbHVlLFxuICAgICAgX2lzUHJpc3RpbmU6IGZhbHNlXG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5jb250ZXh0LmZvcm1zeS52YWxpZGF0ZSh0aGlzKTtcbiAgICAgIC8vdGhpcy5wcm9wcy5fdmFsaWRhdGUodGhpcyk7XG4gICAgfS5iaW5kKHRoaXMpKTtcbiAgfSxcbiAgcmVzZXRWYWx1ZTogZnVuY3Rpb24gcmVzZXRWYWx1ZSgpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIF92YWx1ZTogdGhpcy5zdGF0ZS5fcHJpc3RpbmVWYWx1ZSxcbiAgICAgIF9pc1ByaXN0aW5lOiB0cnVlXG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5jb250ZXh0LmZvcm1zeS52YWxpZGF0ZSh0aGlzKTtcbiAgICAgIC8vdGhpcy5wcm9wcy5fdmFsaWRhdGUodGhpcyk7XG4gICAgfSk7XG4gIH0sXG4gIGdldFZhbHVlOiBmdW5jdGlvbiBnZXRWYWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5fdmFsdWU7XG4gIH0sXG4gIGhhc1ZhbHVlOiBmdW5jdGlvbiBoYXNWYWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5fdmFsdWUgIT09ICcnO1xuICB9LFxuICBnZXRFcnJvck1lc3NhZ2U6IGZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSgpIHtcbiAgICB2YXIgbWVzc2FnZXMgPSB0aGlzLmdldEVycm9yTWVzc2FnZXMoKTtcbiAgICByZXR1cm4gbWVzc2FnZXMubGVuZ3RoID8gbWVzc2FnZXNbMF0gOiBudWxsO1xuICB9LFxuICBnZXRFcnJvck1lc3NhZ2VzOiBmdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2VzKCkge1xuICAgIHJldHVybiAhdGhpcy5pc1ZhbGlkKCkgfHwgdGhpcy5zaG93UmVxdWlyZWQoKSA/IHRoaXMuc3RhdGUuX2V4dGVybmFsRXJyb3IgfHwgdGhpcy5zdGF0ZS5fdmFsaWRhdGlvbkVycm9yIHx8IFtdIDogW107XG4gIH0sXG4gIGlzRm9ybURpc2FibGVkOiBmdW5jdGlvbiBpc0Zvcm1EaXNhYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZXh0LmZvcm1zeS5pc0Zvcm1EaXNhYmxlZCgpO1xuICAgIC8vcmV0dXJuIHRoaXMucHJvcHMuX2lzRm9ybURpc2FibGVkKCk7XG4gIH0sXG4gIGlzVmFsaWQ6IGZ1bmN0aW9uIGlzVmFsaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX2lzVmFsaWQ7XG4gIH0sXG4gIGlzUHJpc3RpbmU6IGZ1bmN0aW9uIGlzUHJpc3RpbmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX2lzUHJpc3RpbmU7XG4gIH0sXG4gIGlzRm9ybVN1Ym1pdHRlZDogZnVuY3Rpb24gaXNGb3JtU3VibWl0dGVkKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLl9mb3JtU3VibWl0dGVkO1xuICB9LFxuICBpc1JlcXVpcmVkOiBmdW5jdGlvbiBpc1JlcXVpcmVkKCkge1xuICAgIHJldHVybiAhIXRoaXMucHJvcHMucmVxdWlyZWQ7XG4gIH0sXG4gIHNob3dSZXF1aXJlZDogZnVuY3Rpb24gc2hvd1JlcXVpcmVkKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLl9pc1JlcXVpcmVkO1xuICB9LFxuICBzaG93RXJyb3I6IGZ1bmN0aW9uIHNob3dFcnJvcigpIHtcbiAgICByZXR1cm4gIXRoaXMuc2hvd1JlcXVpcmVkKCkgJiYgIXRoaXMuaXNWYWxpZCgpO1xuICB9LFxuICBpc1ZhbGlkVmFsdWU6IGZ1bmN0aW9uIGlzVmFsaWRWYWx1ZSh2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHQuZm9ybXN5LmlzVmFsaWRWYWx1ZS5jYWxsKG51bGwsIHRoaXMsIHZhbHVlKTtcbiAgICAvL3JldHVybiB0aGlzLnByb3BzLl9pc1ZhbGlkVmFsdWUuY2FsbChudWxsLCB0aGlzLCB2YWx1ZSk7XG4gIH1cbn07XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3dlYnBhY2svYnVpbGRpbi9nbG9iYWwuanNcIikpKVxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL21haW4uanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XG5cbnZhciBfdHlwZW9mMiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1yZXR1cm4gdGFyZ2V0O1xufTtcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgX3R5cGVvZjIoU3ltYm9sLml0ZXJhdG9yKSA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZjIob2JqKTtcbn0gOiBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YyKG9iaik7XG59O1xuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMob2JqLCBrZXlzKSB7XG4gIHZhciB0YXJnZXQgPSB7fTtmb3IgKHZhciBpIGluIG9iaikge1xuICAgIGlmIChrZXlzLmluZGV4T2YoaSkgPj0gMCkgY29udGludWU7aWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBpKSkgY29udGludWU7dGFyZ2V0W2ldID0gb2JqW2ldO1xuICB9cmV0dXJuIHRhcmdldDtcbn1cblxudmFyIFByb3BUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9wcm9wLXR5cGVzL2luZGV4LmpzXCIpO1xudmFyIFJlYWN0ID0gZ2xvYmFsLlJlYWN0IHx8IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC9yZWFjdC5qc1wiKTtcbnZhciBjcmVhdGVSZWFjdENsYXNzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2NyZWF0ZS1yZWFjdC1jbGFzcy9pbmRleC5qc1wiKTtcbnZhciBGb3Jtc3kgPSB7fTtcbnZhciB2YWxpZGF0aW9uUnVsZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi92YWxpZGF0aW9uUnVsZXMuanNcIik7XG52YXIgZm9ybURhdGFUb09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9mb3JtLWRhdGEtdG8tb2JqZWN0L2luZGV4LmpzXCIpO1xudmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvdXRpbHMuanNcIik7XG52YXIgTWl4aW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9NaXhpbi5qc1wiKTtcbnZhciBIT0MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9IT0MuanNcIik7XG52YXIgRGVjb3JhdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvRGVjb3JhdG9yLmpzXCIpO1xudmFyIG9wdGlvbnMgPSB7fTtcbnZhciBlbXB0eUFycmF5ID0gW107XG5cbkZvcm1zeS5NaXhpbiA9IE1peGluO1xuRm9ybXN5LkhPQyA9IEhPQztcbkZvcm1zeS5EZWNvcmF0b3IgPSBEZWNvcmF0b3I7XG5cbkZvcm1zeS5kZWZhdWx0cyA9IGZ1bmN0aW9uIChwYXNzZWRPcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBwYXNzZWRPcHRpb25zO1xufTtcblxuRm9ybXN5LmFkZFZhbGlkYXRpb25SdWxlID0gZnVuY3Rpb24gKG5hbWUsIGZ1bmMpIHtcbiAgdmFsaWRhdGlvblJ1bGVzW25hbWVdID0gZnVuYztcbn07XG5cbkZvcm1zeS5Gb3JtID0gY3JlYXRlUmVhY3RDbGFzcyh7XG4gIGRpc3BsYXlOYW1lOiAnRm9ybXN5JyxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzVmFsaWQ6IHRydWUsXG4gICAgICBpc1N1Ym1pdHRpbmc6IGZhbHNlLFxuICAgICAgY2FuQ2hhbmdlOiBmYWxzZVxuICAgIH07XG4gIH0sXG4gIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24gZ2V0RGVmYXVsdFByb3BzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBvblN1Y2Nlc3M6IGZ1bmN0aW9uIG9uU3VjY2VzcygpIHt9LFxuICAgICAgb25FcnJvcjogZnVuY3Rpb24gb25FcnJvcigpIHt9LFxuICAgICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KCkge30sXG4gICAgICBvblZhbGlkU3VibWl0OiBmdW5jdGlvbiBvblZhbGlkU3VibWl0KCkge30sXG4gICAgICBvbkludmFsaWRTdWJtaXQ6IGZ1bmN0aW9uIG9uSW52YWxpZFN1Ym1pdCgpIHt9LFxuICAgICAgb25WYWxpZDogZnVuY3Rpb24gb25WYWxpZCgpIHt9LFxuICAgICAgb25JbnZhbGlkOiBmdW5jdGlvbiBvbkludmFsaWQoKSB7fSxcbiAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZSgpIHt9LFxuICAgICAgdmFsaWRhdGlvbkVycm9yczogbnVsbCxcbiAgICAgIHByZXZlbnRFeHRlcm5hbEludmFsaWRhdGlvbjogZmFsc2VcbiAgICB9O1xuICB9LFxuXG4gIGNoaWxkQ29udGV4dFR5cGVzOiB7XG4gICAgZm9ybXN5OiBQcm9wVHlwZXMub2JqZWN0XG4gIH0sXG4gIGdldENoaWxkQ29udGV4dDogZnVuY3Rpb24gZ2V0Q2hpbGRDb250ZXh0KCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICByZXR1cm4ge1xuICAgICAgZm9ybXN5OiB7XG4gICAgICAgIGF0dGFjaFRvRm9ybTogdGhpcy5hdHRhY2hUb0Zvcm0sXG4gICAgICAgIGRldGFjaEZyb21Gb3JtOiB0aGlzLmRldGFjaEZyb21Gb3JtLFxuICAgICAgICB2YWxpZGF0ZTogdGhpcy52YWxpZGF0ZSxcbiAgICAgICAgaXNGb3JtRGlzYWJsZWQ6IHRoaXMuaXNGb3JtRGlzYWJsZWQsXG4gICAgICAgIGlzVmFsaWRWYWx1ZTogZnVuY3Rpb24gaXNWYWxpZFZhbHVlKGNvbXBvbmVudCwgdmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMucnVuVmFsaWRhdGlvbihjb21wb25lbnQsIHZhbHVlKS5pc1ZhbGlkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfSxcblxuICAvLyBBZGQgYSBtYXAgdG8gc3RvcmUgdGhlIGlucHV0cyBvZiB0aGUgZm9ybSwgYSBtb2RlbCB0byBzdG9yZVxuICAvLyB0aGUgdmFsdWVzIG9mIHRoZSBmb3JtIGFuZCByZWdpc3RlciBjaGlsZCBpbnB1dHNcbiAgY29tcG9uZW50V2lsbE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgdGhpcy5pbnB1dHMgPSBbXTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy52YWxpZGF0ZUZvcm0oKTtcbiAgfSxcblxuICBjb21wb25lbnRXaWxsVXBkYXRlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVXBkYXRlKCkge1xuICAgIC8vIEtlZXAgYSByZWZlcmVuY2UgdG8gaW5wdXQgbmFtZXMgYmVmb3JlIGZvcm0gdXBkYXRlcyxcbiAgICAvLyB0byBjaGVjayBpZiBpbnB1dHMgaGFzIGNoYW5nZWQgYWZ0ZXIgcmVuZGVyXG4gICAgdGhpcy5wcmV2SW5wdXROYW1lcyA9IHRoaXMuaW5wdXRzLm1hcChmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICByZXR1cm4gY29tcG9uZW50LnByb3BzLm5hbWU7XG4gICAgfSk7XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG5cbiAgICBpZiAodGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzICYmIF90eXBlb2YodGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzKSA9PT0gJ29iamVjdCcgJiYgT2JqZWN0LmtleXModGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzKS5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLnNldElucHV0VmFsaWRhdGlvbkVycm9ycyh0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnMpO1xuICAgIH1cblxuICAgIHZhciBuZXdJbnB1dE5hbWVzID0gdGhpcy5pbnB1dHMubWFwKGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgIHJldHVybiBjb21wb25lbnQucHJvcHMubmFtZTtcbiAgICB9KTtcbiAgICBpZiAodXRpbHMuYXJyYXlzRGlmZmVyKHRoaXMucHJldklucHV0TmFtZXMsIG5ld0lucHV0TmFtZXMpKSB7XG4gICAgICB0aGlzLnZhbGlkYXRlRm9ybSgpO1xuICAgIH1cbiAgfSxcblxuICAvLyBBbGxvdyByZXNldHRpbmcgdG8gc3BlY2lmaWVkIGRhdGFcbiAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KGRhdGEpIHtcbiAgICB0aGlzLnNldEZvcm1QcmlzdGluZSh0cnVlKTtcbiAgICB0aGlzLnJlc2V0TW9kZWwoZGF0YSk7XG4gIH0sXG5cbiAgLy8gVXBkYXRlIG1vZGVsLCBzdWJtaXQgdG8gdXJsIHByb3AgYW5kIHNlbmQgdGhlIG1vZGVsXG4gIHN1Ym1pdDogZnVuY3Rpb24gc3VibWl0KGV2ZW50KSB7XG5cbiAgICBldmVudCAmJiBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgLy8gVHJpZ2dlciBmb3JtIGFzIG5vdCBwcmlzdGluZS5cbiAgICAvLyBJZiBhbnkgaW5wdXRzIGhhdmUgbm90IGJlZW4gdG91Y2hlZCB5ZXQgdGhpcyB3aWxsIG1ha2UgdGhlbSBkaXJ0eVxuICAgIC8vIHNvIHZhbGlkYXRpb24gYmVjb21lcyB2aXNpYmxlIChpZiBiYXNlZCBvbiBpc1ByaXN0aW5lKVxuICAgIHRoaXMuc2V0Rm9ybVByaXN0aW5lKGZhbHNlKTtcbiAgICB2YXIgbW9kZWwgPSB0aGlzLmdldE1vZGVsKCk7XG4gICAgdGhpcy5wcm9wcy5vblN1Ym1pdChtb2RlbCwgdGhpcy5yZXNldE1vZGVsLCB0aGlzLnVwZGF0ZUlucHV0c1dpdGhFcnJvcik7XG4gICAgdGhpcy5zdGF0ZS5pc1ZhbGlkID8gdGhpcy5wcm9wcy5vblZhbGlkU3VibWl0KG1vZGVsLCB0aGlzLnJlc2V0TW9kZWwsIHRoaXMudXBkYXRlSW5wdXRzV2l0aEVycm9yKSA6IHRoaXMucHJvcHMub25JbnZhbGlkU3VibWl0KG1vZGVsLCB0aGlzLnJlc2V0TW9kZWwsIHRoaXMudXBkYXRlSW5wdXRzV2l0aEVycm9yKTtcbiAgfSxcblxuICBtYXBNb2RlbDogZnVuY3Rpb24gbWFwTW9kZWwobW9kZWwpIHtcblxuICAgIGlmICh0aGlzLnByb3BzLm1hcHBpbmcpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLm1hcHBpbmcobW9kZWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZm9ybURhdGFUb09iamVjdC50b09iaihPYmplY3Qua2V5cyhtb2RlbCkucmVkdWNlKGZ1bmN0aW9uIChtYXBwZWRNb2RlbCwga2V5KSB7XG5cbiAgICAgICAgdmFyIGtleUFycmF5ID0ga2V5LnNwbGl0KCcuJyk7XG4gICAgICAgIHZhciBiYXNlID0gbWFwcGVkTW9kZWw7XG4gICAgICAgIHdoaWxlIChrZXlBcnJheS5sZW5ndGgpIHtcbiAgICAgICAgICB2YXIgY3VycmVudEtleSA9IGtleUFycmF5LnNoaWZ0KCk7XG4gICAgICAgICAgYmFzZSA9IGJhc2VbY3VycmVudEtleV0gPSBrZXlBcnJheS5sZW5ndGggPyBiYXNlW2N1cnJlbnRLZXldIHx8IHt9IDogbW9kZWxba2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtYXBwZWRNb2RlbDtcbiAgICAgIH0sIHt9KSk7XG4gICAgfVxuICB9LFxuXG4gIGdldE1vZGVsOiBmdW5jdGlvbiBnZXRNb2RlbCgpIHtcbiAgICB2YXIgY3VycmVudFZhbHVlcyA9IHRoaXMuZ2V0Q3VycmVudFZhbHVlcygpO1xuICAgIHJldHVybiB0aGlzLm1hcE1vZGVsKGN1cnJlbnRWYWx1ZXMpO1xuICB9LFxuXG4gIC8vIFJlc2V0IGVhY2gga2V5IGluIHRoZSBtb2RlbCB0byB0aGUgb3JpZ2luYWwgLyBpbml0aWFsIC8gc3BlY2lmaWVkIHZhbHVlXG4gIHJlc2V0TW9kZWw6IGZ1bmN0aW9uIHJlc2V0TW9kZWwoZGF0YSkge1xuICAgIHRoaXMuaW5wdXRzLmZvckVhY2goZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgdmFyIG5hbWUgPSBjb21wb25lbnQucHJvcHMubmFtZTtcbiAgICAgIGlmIChkYXRhICYmIGRhdGEuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgY29tcG9uZW50LnNldFZhbHVlKGRhdGFbbmFtZV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29tcG9uZW50LnJlc2V0VmFsdWUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLnZhbGlkYXRlRm9ybSgpO1xuICB9LFxuXG4gIHNldElucHV0VmFsaWRhdGlvbkVycm9yczogZnVuY3Rpb24gc2V0SW5wdXRWYWxpZGF0aW9uRXJyb3JzKGVycm9ycykge1xuICAgIHRoaXMuaW5wdXRzLmZvckVhY2goZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgdmFyIG5hbWUgPSBjb21wb25lbnQucHJvcHMubmFtZTtcbiAgICAgIHZhciBhcmdzID0gW3tcbiAgICAgICAgX2lzVmFsaWQ6ICEobmFtZSBpbiBlcnJvcnMpLFxuICAgICAgICBfdmFsaWRhdGlvbkVycm9yOiB0eXBlb2YgZXJyb3JzW25hbWVdID09PSAnc3RyaW5nJyA/IFtlcnJvcnNbbmFtZV1dIDogZXJyb3JzW25hbWVdXG4gICAgICB9XTtcbiAgICAgIGNvbXBvbmVudC5zZXRTdGF0ZS5hcHBseShjb21wb25lbnQsIGFyZ3MpO1xuICAgIH0pO1xuICB9LFxuXG4gIC8vIENoZWNrcyBpZiB0aGUgdmFsdWVzIGhhdmUgY2hhbmdlZCBmcm9tIHRoZWlyIGluaXRpYWwgdmFsdWVcbiAgaXNDaGFuZ2VkOiBmdW5jdGlvbiBpc0NoYW5nZWQoKSB7XG4gICAgcmV0dXJuICF1dGlscy5pc1NhbWUodGhpcy5nZXRQcmlzdGluZVZhbHVlcygpLCB0aGlzLmdldEN1cnJlbnRWYWx1ZXMoKSk7XG4gIH0sXG5cbiAgZ2V0UHJpc3RpbmVWYWx1ZXM6IGZ1bmN0aW9uIGdldFByaXN0aW5lVmFsdWVzKCkge1xuICAgIHJldHVybiB0aGlzLmlucHV0cy5yZWR1Y2UoZnVuY3Rpb24gKGRhdGEsIGNvbXBvbmVudCkge1xuICAgICAgdmFyIG5hbWUgPSBjb21wb25lbnQucHJvcHMubmFtZTtcbiAgICAgIGRhdGFbbmFtZV0gPSBjb21wb25lbnQucHJvcHMudmFsdWU7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9LCB7fSk7XG4gIH0sXG5cbiAgLy8gR28gdGhyb3VnaCBlcnJvcnMgZnJvbSBzZXJ2ZXIgYW5kIGdyYWIgdGhlIGNvbXBvbmVudHNcbiAgLy8gc3RvcmVkIGluIHRoZSBpbnB1dHMgbWFwLiBDaGFuZ2UgdGhlaXIgc3RhdGUgdG8gaW52YWxpZFxuICAvLyBhbmQgc2V0IHRoZSBzZXJ2ZXJFcnJvciBtZXNzYWdlXG4gIHVwZGF0ZUlucHV0c1dpdGhFcnJvcjogZnVuY3Rpb24gdXBkYXRlSW5wdXRzV2l0aEVycm9yKGVycm9ycykge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgT2JqZWN0LmtleXMoZXJyb3JzKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lLCBpbmRleCkge1xuICAgICAgdmFyIGNvbXBvbmVudCA9IHV0aWxzLmZpbmQoX3RoaXMyLmlucHV0cywgZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgICByZXR1cm4gY29tcG9uZW50LnByb3BzLm5hbWUgPT09IG5hbWU7XG4gICAgICB9KTtcbiAgICAgIGlmICghY29tcG9uZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignWW91IGFyZSB0cnlpbmcgdG8gdXBkYXRlIGFuIGlucHV0IHRoYXQgZG9lcyBub3QgZXhpc3QuICcgKyAnVmVyaWZ5IGVycm9ycyBvYmplY3Qgd2l0aCBpbnB1dCBuYW1lcy4gJyArIEpTT04uc3RyaW5naWZ5KGVycm9ycykpO1xuICAgICAgfVxuICAgICAgdmFyIGFyZ3MgPSBbe1xuICAgICAgICBfaXNWYWxpZDogX3RoaXMyLnByb3BzLnByZXZlbnRFeHRlcm5hbEludmFsaWRhdGlvbiB8fCBmYWxzZSxcbiAgICAgICAgX2V4dGVybmFsRXJyb3I6IHR5cGVvZiBlcnJvcnNbbmFtZV0gPT09ICdzdHJpbmcnID8gW2Vycm9yc1tuYW1lXV0gOiBlcnJvcnNbbmFtZV1cbiAgICAgIH1dO1xuICAgICAgY29tcG9uZW50LnNldFN0YXRlLmFwcGx5KGNvbXBvbmVudCwgYXJncyk7XG4gICAgfSk7XG4gIH0sXG5cbiAgaXNGb3JtRGlzYWJsZWQ6IGZ1bmN0aW9uIGlzRm9ybURpc2FibGVkKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmRpc2FibGVkO1xuICB9LFxuXG4gIGdldEN1cnJlbnRWYWx1ZXM6IGZ1bmN0aW9uIGdldEN1cnJlbnRWYWx1ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5wdXRzLnJlZHVjZShmdW5jdGlvbiAoZGF0YSwgY29tcG9uZW50KSB7XG4gICAgICB2YXIgbmFtZSA9IGNvbXBvbmVudC5wcm9wcy5uYW1lO1xuICAgICAgZGF0YVtuYW1lXSA9IGNvbXBvbmVudC5zdGF0ZS5fdmFsdWU7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9LCB7fSk7XG4gIH0sXG5cbiAgc2V0Rm9ybVByaXN0aW5lOiBmdW5jdGlvbiBzZXRGb3JtUHJpc3RpbmUoaXNQcmlzdGluZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgX2Zvcm1TdWJtaXR0ZWQ6ICFpc1ByaXN0aW5lXG4gICAgfSk7XG5cbiAgICAvLyBJdGVyYXRlIHRocm91Z2ggZWFjaCBjb21wb25lbnQgYW5kIHNldCBpdCBhcyBwcmlzdGluZVxuICAgIC8vIG9yIFwiZGlydHlcIi5cbiAgICB0aGlzLmlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChjb21wb25lbnQsIGluZGV4KSB7XG4gICAgICBjb21wb25lbnQuc2V0U3RhdGUoe1xuICAgICAgICBfZm9ybVN1Ym1pdHRlZDogIWlzUHJpc3RpbmUsXG4gICAgICAgIF9pc1ByaXN0aW5lOiBpc1ByaXN0aW5lXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSxcblxuICAvLyBVc2UgdGhlIGJpbmRlZCB2YWx1ZXMgYW5kIHRoZSBhY3R1YWwgaW5wdXQgdmFsdWUgdG9cbiAgLy8gdmFsaWRhdGUgdGhlIGlucHV0IGFuZCBzZXQgaXRzIHN0YXRlLiBUaGVuIGNoZWNrIHRoZVxuICAvLyBzdGF0ZSBvZiB0aGUgZm9ybSBpdHNlbGZcbiAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKGNvbXBvbmVudCkge1xuXG4gICAgLy8gVHJpZ2dlciBvbkNoYW5nZVxuICAgIGlmICh0aGlzLnN0YXRlLmNhbkNoYW5nZSkge1xuICAgICAgdGhpcy5wcm9wcy5vbkNoYW5nZSh0aGlzLmdldEN1cnJlbnRWYWx1ZXMoKSwgdGhpcy5pc0NoYW5nZWQoKSk7XG4gICAgfVxuXG4gICAgdmFyIHZhbGlkYXRpb24gPSB0aGlzLnJ1blZhbGlkYXRpb24oY29tcG9uZW50KTtcbiAgICAvLyBSdW4gdGhyb3VnaCB0aGUgdmFsaWRhdGlvbnMsIHNwbGl0IHRoZW0gdXAgYW5kIGNhbGxcbiAgICAvLyB0aGUgdmFsaWRhdG9yIElGIHRoZXJlIGlzIGEgdmFsdWUgb3IgaXQgaXMgcmVxdWlyZWRcbiAgICBjb21wb25lbnQuc2V0U3RhdGUoe1xuICAgICAgX2lzVmFsaWQ6IHZhbGlkYXRpb24uaXNWYWxpZCxcbiAgICAgIF9pc1JlcXVpcmVkOiB2YWxpZGF0aW9uLmlzUmVxdWlyZWQsXG4gICAgICBfdmFsaWRhdGlvbkVycm9yOiB2YWxpZGF0aW9uLmVycm9yLFxuICAgICAgX2V4dGVybmFsRXJyb3I6IG51bGxcbiAgICB9LCB0aGlzLnZhbGlkYXRlRm9ybSk7XG4gIH0sXG5cbiAgLy8gQ2hlY2tzIHZhbGlkYXRpb24gb24gY3VycmVudCB2YWx1ZSBvciBhIHBhc3NlZCB2YWx1ZVxuICBydW5WYWxpZGF0aW9uOiBmdW5jdGlvbiBydW5WYWxpZGF0aW9uKGNvbXBvbmVudCwgdmFsdWUpIHtcblxuICAgIHZhciBjdXJyZW50VmFsdWVzID0gdGhpcy5nZXRDdXJyZW50VmFsdWVzKCk7XG4gICAgdmFyIHZhbGlkYXRpb25FcnJvcnMgPSBjb21wb25lbnQucHJvcHMudmFsaWRhdGlvbkVycm9ycztcbiAgICB2YXIgdmFsaWRhdGlvbkVycm9yID0gY29tcG9uZW50LnByb3BzLnZhbGlkYXRpb25FcnJvcjtcbiAgICB2YWx1ZSA9IGFyZ3VtZW50cy5sZW5ndGggPT09IDIgPyB2YWx1ZSA6IGNvbXBvbmVudC5zdGF0ZS5fdmFsdWU7XG5cbiAgICB2YXIgdmFsaWRhdGlvblJlc3VsdHMgPSB0aGlzLnJ1blJ1bGVzKHZhbHVlLCBjdXJyZW50VmFsdWVzLCBjb21wb25lbnQuX3ZhbGlkYXRpb25zKTtcbiAgICB2YXIgcmVxdWlyZWRSZXN1bHRzID0gdGhpcy5ydW5SdWxlcyh2YWx1ZSwgY3VycmVudFZhbHVlcywgY29tcG9uZW50Ll9yZXF1aXJlZFZhbGlkYXRpb25zKTtcblxuICAgIC8vIHRoZSBjb21wb25lbnQgZGVmaW5lcyBhbiBleHBsaWNpdCB2YWxpZGF0ZSBmdW5jdGlvblxuICAgIGlmICh0eXBlb2YgY29tcG9uZW50LnZhbGlkYXRlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHZhbGlkYXRpb25SZXN1bHRzLmZhaWxlZCA9IGNvbXBvbmVudC52YWxpZGF0ZSgpID8gW10gOiBbJ2ZhaWxlZCddO1xuICAgIH1cblxuICAgIHZhciBpc1JlcXVpcmVkID0gT2JqZWN0LmtleXMoY29tcG9uZW50Ll9yZXF1aXJlZFZhbGlkYXRpb25zKS5sZW5ndGggPyAhIXJlcXVpcmVkUmVzdWx0cy5zdWNjZXNzLmxlbmd0aCA6IGZhbHNlO1xuICAgIHZhciBpc1ZhbGlkID0gIXZhbGlkYXRpb25SZXN1bHRzLmZhaWxlZC5sZW5ndGggJiYgISh0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnMgJiYgdGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzW2NvbXBvbmVudC5wcm9wcy5uYW1lXSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXNSZXF1aXJlZDogaXNSZXF1aXJlZCxcbiAgICAgIGlzVmFsaWQ6IGlzUmVxdWlyZWQgPyBmYWxzZSA6IGlzVmFsaWQsXG4gICAgICBlcnJvcjogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIGlmIChpc1ZhbGlkICYmICFpc1JlcXVpcmVkKSB7XG4gICAgICAgICAgcmV0dXJuIGVtcHR5QXJyYXk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmFsaWRhdGlvblJlc3VsdHMuZXJyb3JzLmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybiB2YWxpZGF0aW9uUmVzdWx0cy5lcnJvcnM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzICYmIHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9yc1tjb21wb25lbnQucHJvcHMubmFtZV0pIHtcbiAgICAgICAgICByZXR1cm4gdHlwZW9mIHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9yc1tjb21wb25lbnQucHJvcHMubmFtZV0gPT09ICdzdHJpbmcnID8gW3RoaXMucHJvcHMudmFsaWRhdGlvbkVycm9yc1tjb21wb25lbnQucHJvcHMubmFtZV1dIDogdGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzW2NvbXBvbmVudC5wcm9wcy5uYW1lXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1JlcXVpcmVkKSB7XG4gICAgICAgICAgdmFyIGVycm9yID0gdmFsaWRhdGlvbkVycm9yc1tyZXF1aXJlZFJlc3VsdHMuc3VjY2Vzc1swXV07XG4gICAgICAgICAgcmV0dXJuIGVycm9yID8gW2Vycm9yXSA6IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmFsaWRhdGlvblJlc3VsdHMuZmFpbGVkLmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybiB2YWxpZGF0aW9uUmVzdWx0cy5mYWlsZWQubWFwKGZ1bmN0aW9uIChmYWlsZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWxpZGF0aW9uRXJyb3JzW2ZhaWxlZF0gPyB2YWxpZGF0aW9uRXJyb3JzW2ZhaWxlZF0gOiB2YWxpZGF0aW9uRXJyb3I7XG4gICAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uICh4LCBwb3MsIGFycikge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIGR1cGxpY2F0ZXNcbiAgICAgICAgICAgIHJldHVybiBhcnIuaW5kZXhPZih4KSA9PT0gcG9zO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LmNhbGwodGhpcylcbiAgICB9O1xuICB9LFxuXG4gIHJ1blJ1bGVzOiBmdW5jdGlvbiBydW5SdWxlcyh2YWx1ZSwgY3VycmVudFZhbHVlcywgdmFsaWRhdGlvbnMpIHtcblxuICAgIHZhciByZXN1bHRzID0ge1xuICAgICAgZXJyb3JzOiBbXSxcbiAgICAgIGZhaWxlZDogW10sXG4gICAgICBzdWNjZXNzOiBbXVxuICAgIH07XG4gICAgaWYgKE9iamVjdC5rZXlzKHZhbGlkYXRpb25zKS5sZW5ndGgpIHtcbiAgICAgIE9iamVjdC5rZXlzKHZhbGlkYXRpb25zKS5mb3JFYWNoKGZ1bmN0aW9uICh2YWxpZGF0aW9uTWV0aG9kKSB7XG5cbiAgICAgICAgaWYgKHZhbGlkYXRpb25SdWxlc1t2YWxpZGF0aW9uTWV0aG9kXSAmJiB0eXBlb2YgdmFsaWRhdGlvbnNbdmFsaWRhdGlvbk1ldGhvZF0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm1zeSBkb2VzIG5vdCBhbGxvdyB5b3UgdG8gb3ZlcnJpZGUgZGVmYXVsdCB2YWxpZGF0aW9uczogJyArIHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF2YWxpZGF0aW9uUnVsZXNbdmFsaWRhdGlvbk1ldGhvZF0gJiYgdHlwZW9mIHZhbGlkYXRpb25zW3ZhbGlkYXRpb25NZXRob2RdICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3Jtc3kgZG9lcyBub3QgaGF2ZSB0aGUgdmFsaWRhdGlvbiBydWxlOiAnICsgdmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIHZhbGlkYXRpb25zW3ZhbGlkYXRpb25NZXRob2RdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdmFyIHZhbGlkYXRpb24gPSB2YWxpZGF0aW9uc1t2YWxpZGF0aW9uTWV0aG9kXShjdXJyZW50VmFsdWVzLCB2YWx1ZSk7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2YWxpZGF0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmVzdWx0cy5lcnJvcnMucHVzaCh2YWxpZGF0aW9uKTtcbiAgICAgICAgICAgIHJlc3VsdHMuZmFpbGVkLnB1c2godmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgICAgfSBlbHNlIGlmICghdmFsaWRhdGlvbikge1xuICAgICAgICAgICAgcmVzdWx0cy5mYWlsZWQucHVzaCh2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWxpZGF0aW9uc1t2YWxpZGF0aW9uTWV0aG9kXSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHZhciB2YWxpZGF0aW9uID0gdmFsaWRhdGlvblJ1bGVzW3ZhbGlkYXRpb25NZXRob2RdKGN1cnJlbnRWYWx1ZXMsIHZhbHVlLCB2YWxpZGF0aW9uc1t2YWxpZGF0aW9uTWV0aG9kXSk7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2YWxpZGF0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmVzdWx0cy5lcnJvcnMucHVzaCh2YWxpZGF0aW9uKTtcbiAgICAgICAgICAgIHJlc3VsdHMuZmFpbGVkLnB1c2godmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgICAgfSBlbHNlIGlmICghdmFsaWRhdGlvbikge1xuICAgICAgICAgICAgcmVzdWx0cy5mYWlsZWQucHVzaCh2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0cy5zdWNjZXNzLnB1c2godmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHRzLnN1Y2Nlc3MucHVzaCh2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzO1xuICB9LFxuXG4gIC8vIFZhbGlkYXRlIHRoZSBmb3JtIGJ5IGdvaW5nIHRocm91Z2ggYWxsIGNoaWxkIGlucHV0IGNvbXBvbmVudHNcbiAgLy8gYW5kIGNoZWNrIHRoZWlyIHN0YXRlXG4gIHZhbGlkYXRlRm9ybTogZnVuY3Rpb24gdmFsaWRhdGVGb3JtKCkge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgLy8gV2UgbmVlZCBhIGNhbGxiYWNrIGFzIHdlIGFyZSB2YWxpZGF0aW5nIGFsbCBpbnB1dHMgYWdhaW4uIFRoaXMgd2lsbFxuICAgIC8vIHJ1biB3aGVuIHRoZSBsYXN0IGNvbXBvbmVudCBoYXMgc2V0IGl0cyBzdGF0ZVxuICAgIHZhciBvblZhbGlkYXRpb25Db21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhbGxJc1ZhbGlkID0gdGhpcy5pbnB1dHMuZXZlcnkoZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgICByZXR1cm4gY29tcG9uZW50LnN0YXRlLl9pc1ZhbGlkO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBpc1ZhbGlkOiBhbGxJc1ZhbGlkXG4gICAgICB9KTtcblxuICAgICAgaWYgKGFsbElzVmFsaWQpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vblZhbGlkKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnByb3BzLm9uSW52YWxpZCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBUZWxsIHRoZSBmb3JtIHRoYXQgaXQgY2FuIHN0YXJ0IHRvIHRyaWdnZXIgY2hhbmdlIGV2ZW50c1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGNhbkNoYW5nZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfS5iaW5kKHRoaXMpO1xuXG4gICAgLy8gUnVuIHZhbGlkYXRpb24gYWdhaW4gaW4gY2FzZSBhZmZlY3RlZCBieSBvdGhlciBpbnB1dHMuIFRoZVxuICAgIC8vIGxhc3QgY29tcG9uZW50IHZhbGlkYXRlZCB3aWxsIHJ1biB0aGUgb25WYWxpZGF0aW9uQ29tcGxldGUgY2FsbGJhY2tcbiAgICB0aGlzLmlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChjb21wb25lbnQsIGluZGV4KSB7XG4gICAgICB2YXIgdmFsaWRhdGlvbiA9IF90aGlzMy5ydW5WYWxpZGF0aW9uKGNvbXBvbmVudCk7XG4gICAgICBpZiAodmFsaWRhdGlvbi5pc1ZhbGlkICYmIGNvbXBvbmVudC5zdGF0ZS5fZXh0ZXJuYWxFcnJvcikge1xuICAgICAgICB2YWxpZGF0aW9uLmlzVmFsaWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGNvbXBvbmVudC5zZXRTdGF0ZSh7XG4gICAgICAgIF9pc1ZhbGlkOiB2YWxpZGF0aW9uLmlzVmFsaWQsXG4gICAgICAgIF9pc1JlcXVpcmVkOiB2YWxpZGF0aW9uLmlzUmVxdWlyZWQsXG4gICAgICAgIF92YWxpZGF0aW9uRXJyb3I6IHZhbGlkYXRpb24uZXJyb3IsXG4gICAgICAgIF9leHRlcm5hbEVycm9yOiAhdmFsaWRhdGlvbi5pc1ZhbGlkICYmIGNvbXBvbmVudC5zdGF0ZS5fZXh0ZXJuYWxFcnJvciA/IGNvbXBvbmVudC5zdGF0ZS5fZXh0ZXJuYWxFcnJvciA6IG51bGxcbiAgICAgIH0sIGluZGV4ID09PSBfdGhpczMuaW5wdXRzLmxlbmd0aCAtIDEgPyBvblZhbGlkYXRpb25Db21wbGV0ZSA6IG51bGwpO1xuICAgIH0pO1xuXG4gICAgLy8gSWYgdGhlcmUgYXJlIG5vIGlucHV0cywgc2V0IHN0YXRlIHdoZXJlIGZvcm0gaXMgcmVhZHkgdG8gdHJpZ2dlclxuICAgIC8vIGNoYW5nZSBldmVudC4gTmV3IGlucHV0cyBtaWdodCBiZSBhZGRlZCBsYXRlclxuICAgIGlmICghdGhpcy5pbnB1dHMubGVuZ3RoKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgY2FuQ2hhbmdlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gTWV0aG9kIHB1dCBvbiBlYWNoIGlucHV0IGNvbXBvbmVudCB0byByZWdpc3RlclxuICAvLyBpdHNlbGYgdG8gdGhlIGZvcm1cbiAgYXR0YWNoVG9Gb3JtOiBmdW5jdGlvbiBhdHRhY2hUb0Zvcm0oY29tcG9uZW50KSB7XG5cbiAgICBpZiAodGhpcy5pbnB1dHMuaW5kZXhPZihjb21wb25lbnQpID09PSAtMSkge1xuICAgICAgdGhpcy5pbnB1dHMucHVzaChjb21wb25lbnQpO1xuICAgIH1cblxuICAgIHRoaXMudmFsaWRhdGUoY29tcG9uZW50KTtcbiAgfSxcblxuICAvLyBNZXRob2QgcHV0IG9uIGVhY2ggaW5wdXQgY29tcG9uZW50IHRvIHVucmVnaXN0ZXJcbiAgLy8gaXRzZWxmIGZyb20gdGhlIGZvcm1cbiAgZGV0YWNoRnJvbUZvcm06IGZ1bmN0aW9uIGRldGFjaEZyb21Gb3JtKGNvbXBvbmVudCkge1xuICAgIHZhciBjb21wb25lbnRQb3MgPSB0aGlzLmlucHV0cy5pbmRleE9mKGNvbXBvbmVudCk7XG5cbiAgICBpZiAoY29tcG9uZW50UG9zICE9PSAtMSkge1xuICAgICAgdGhpcy5pbnB1dHMgPSB0aGlzLmlucHV0cy5zbGljZSgwLCBjb21wb25lbnRQb3MpLmNvbmNhdCh0aGlzLmlucHV0cy5zbGljZShjb21wb25lbnRQb3MgKyAxKSk7XG4gICAgfVxuXG4gICAgdGhpcy52YWxpZGF0ZUZvcm0oKTtcbiAgfSxcbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgIG1hcHBpbmcgPSBfcHJvcHMubWFwcGluZyxcbiAgICAgICAgdmFsaWRhdGlvbkVycm9ycyA9IF9wcm9wcy52YWxpZGF0aW9uRXJyb3JzLFxuICAgICAgICBvblN1Ym1pdCA9IF9wcm9wcy5vblN1Ym1pdCxcbiAgICAgICAgb25WYWxpZCA9IF9wcm9wcy5vblZhbGlkLFxuICAgICAgICBvblZhbGlkU3VibWl0ID0gX3Byb3BzLm9uVmFsaWRTdWJtaXQsXG4gICAgICAgIG9uSW52YWxpZCA9IF9wcm9wcy5vbkludmFsaWQsXG4gICAgICAgIG9uSW52YWxpZFN1Ym1pdCA9IF9wcm9wcy5vbkludmFsaWRTdWJtaXQsXG4gICAgICAgIG9uQ2hhbmdlID0gX3Byb3BzLm9uQ2hhbmdlLFxuICAgICAgICByZXNldCA9IF9wcm9wcy5yZXNldCxcbiAgICAgICAgcHJldmVudEV4dGVybmFsSW52YWxpZGF0aW9uID0gX3Byb3BzLnByZXZlbnRFeHRlcm5hbEludmFsaWRhdGlvbixcbiAgICAgICAgb25TdWNjZXNzID0gX3Byb3BzLm9uU3VjY2VzcyxcbiAgICAgICAgb25FcnJvciA9IF9wcm9wcy5vbkVycm9yLFxuICAgICAgICBub25Gb3Jtc3lQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcHJvcHMsIFsnbWFwcGluZycsICd2YWxpZGF0aW9uRXJyb3JzJywgJ29uU3VibWl0JywgJ29uVmFsaWQnLCAnb25WYWxpZFN1Ym1pdCcsICdvbkludmFsaWQnLCAnb25JbnZhbGlkU3VibWl0JywgJ29uQ2hhbmdlJywgJ3Jlc2V0JywgJ3ByZXZlbnRFeHRlcm5hbEludmFsaWRhdGlvbicsICdvblN1Y2Nlc3MnLCAnb25FcnJvciddKTtcblxuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KCdmb3JtJywgX2V4dGVuZHMoe30sIG5vbkZvcm1zeVByb3BzLCB7IG9uU3VibWl0OiB0aGlzLnN1Ym1pdCB9KSwgdGhpcy5wcm9wcy5jaGlsZHJlbik7XG4gIH1cbn0pO1xuXG5pZiAoIWdsb2JhbC5leHBvcnRzICYmICFnbG9iYWwubW9kdWxlICYmICghZ2xvYmFsLmRlZmluZSB8fCAhZ2xvYmFsLmRlZmluZS5hbWQpKSB7XG4gIGdsb2JhbC5Gb3Jtc3kgPSBGb3Jtc3k7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRm9ybXN5O1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy93ZWJwYWNrL2J1aWxkaW4vZ2xvYmFsLmpzXCIpKSlcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi91dGlscy5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX3R5cGVvZjIgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mMihvYmopO1xufSA6IGZ1bmN0aW9uIChvYmopIHtcbiAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmogPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZjIob2JqKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhcnJheXNEaWZmZXI6IGZ1bmN0aW9uIGFycmF5c0RpZmZlcihhLCBiKSB7XG4gICAgdmFyIGlzRGlmZmVyZW50ID0gZmFsc2U7XG4gICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkge1xuICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgIGlmICghdGhpcy5pc1NhbWUoaXRlbSwgYltpbmRleF0pKSB7XG4gICAgICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzKTtcbiAgICB9XG4gICAgcmV0dXJuIGlzRGlmZmVyZW50O1xuICB9LFxuXG4gIG9iamVjdHNEaWZmZXI6IGZ1bmN0aW9uIG9iamVjdHNEaWZmZXIoYSwgYikge1xuICAgIHZhciBpc0RpZmZlcmVudCA9IGZhbHNlO1xuICAgIGlmIChPYmplY3Qua2V5cyhhKS5sZW5ndGggIT09IE9iamVjdC5rZXlzKGIpLmxlbmd0aCkge1xuICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBPYmplY3Qua2V5cyhhKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU2FtZShhW2tleV0sIGJba2V5XSkpIHtcbiAgICAgICAgICBpc0RpZmZlcmVudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0sIHRoaXMpO1xuICAgIH1cbiAgICByZXR1cm4gaXNEaWZmZXJlbnQ7XG4gIH0sXG5cbiAgaXNTYW1lOiBmdW5jdGlvbiBpc1NhbWUoYSwgYikge1xuICAgIGlmICgodHlwZW9mIGEgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGEpKSAhPT0gKHR5cGVvZiBiID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihiKSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYSkgJiYgQXJyYXkuaXNBcnJheShiKSkge1xuICAgICAgcmV0dXJuICF0aGlzLmFycmF5c0RpZmZlcihhLCBiKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gYS50b1N0cmluZygpID09PSBiLnRvU3RyaW5nKCk7XG4gICAgfSBlbHNlIGlmICgodHlwZW9mIGEgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGEpKSA9PT0gJ29iamVjdCcgJiYgYSAhPT0gbnVsbCAmJiBiICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gIXRoaXMub2JqZWN0c0RpZmZlcihhLCBiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYSA9PT0gYjtcbiAgfSxcblxuICBmaW5kOiBmdW5jdGlvbiBmaW5kKGNvbGxlY3Rpb24sIGZuKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjb2xsZWN0aW9uLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIGl0ZW0gPSBjb2xsZWN0aW9uW2ldO1xuICAgICAgaWYgKGZuKGl0ZW0pKSB7XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi92YWxpZGF0aW9uUnVsZXMuanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9pc0V4aXN0eSA9IGZ1bmN0aW9uIF9pc0V4aXN0eSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZDtcbn07XG5cbnZhciBpc0VtcHR5ID0gZnVuY3Rpb24gaXNFbXB0eSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT09ICcnO1xufTtcblxudmFyIHZhbGlkYXRpb25zID0ge1xuICBpc0RlZmF1bHRSZXF1aXJlZFZhbHVlOiBmdW5jdGlvbiBpc0RlZmF1bHRSZXF1aXJlZFZhbHVlKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gJyc7XG4gIH0sXG4gIGlzRXhpc3R5OiBmdW5jdGlvbiBpc0V4aXN0eSh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIF9pc0V4aXN0eSh2YWx1ZSk7XG4gIH0sXG4gIG1hdGNoUmVnZXhwOiBmdW5jdGlvbiBtYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCByZWdleHApIHtcbiAgICByZXR1cm4gIV9pc0V4aXN0eSh2YWx1ZSkgfHwgaXNFbXB0eSh2YWx1ZSkgfHwgcmVnZXhwLnRlc3QodmFsdWUpO1xuICB9LFxuICBpc1VuZGVmaW5lZDogZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkO1xuICB9LFxuICBpc0VtcHR5U3RyaW5nOiBmdW5jdGlvbiBpc0VtcHR5U3RyaW5nKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gaXNFbXB0eSh2YWx1ZSk7XG4gIH0sXG4gIGlzRW1haWw6IGZ1bmN0aW9uIGlzRW1haWwodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXigoKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSsoXFwuKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSspKil8KChcXHgyMikoKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPygoW1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4N2ZdfFxceDIxfFtcXHgyMy1cXHg1Yl18W1xceDVkLVxceDdlXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KFxcXFwoW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBkLVxceDdmXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSkqKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPyhcXHgyMikpKUAoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkkL2kpO1xuICB9LFxuICBpc1VybDogZnVuY3Rpb24gaXNVcmwodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXihodHRwcz98cz9mdHApOlxcL1xcLygoKChbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoJVtcXGRhLWZdezJ9KXxbIVxcJCYnXFwoXFwpXFwqXFwrLDs9XXw6KSpAKT8oKChcXGR8WzEtOV1cXGR8MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC01XSlcXC4oXFxkfFsxLTldXFxkfDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNV0pXFwuKFxcZHxbMS05XVxcZHwxXFxkXFxkfDJbMC00XVxcZHwyNVswLTVdKVxcLihcXGR8WzEtOV1cXGR8MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC01XSkpfCgoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4pKygoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKVxcLj8pKDpcXGQqKT8pKFxcLygoKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCkrKFxcLygoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OnxAKSopKik/KT8oXFw/KCgoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OnxAKXxbXFx1RTAwMC1cXHVGOEZGXXxcXC98XFw/KSopPygjKCgoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OnxAKXxcXC98XFw/KSopPyQvaSk7XG4gIH0sXG4gIGlzVHJ1ZTogZnVuY3Rpb24gaXNUcnVlKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IHRydWU7XG4gIH0sXG4gIGlzRmFsc2U6IGZ1bmN0aW9uIGlzRmFsc2UodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gZmFsc2U7XG4gIH0sXG4gIGlzTnVtZXJpYzogZnVuY3Rpb24gaXNOdW1lcmljKHZhbHVlcywgdmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXlstK10/KD86XFxkKlsuXSk/XFxkKyQvKTtcbiAgfSxcbiAgaXNBbHBoYTogZnVuY3Rpb24gaXNBbHBoYSh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eW0EtWl0rJC9pKTtcbiAgfSxcbiAgaXNBbHBoYW51bWVyaWM6IGZ1bmN0aW9uIGlzQWxwaGFudW1lcmljKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL15bMC05QS1aXSskL2kpO1xuICB9LFxuICBpc0ludDogZnVuY3Rpb24gaXNJbnQodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXig/OlstK10/KD86MHxbMS05XVxcZCopKSQvKTtcbiAgfSxcbiAgaXNGbG9hdDogZnVuY3Rpb24gaXNGbG9hdCh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eKD86Wy0rXT8oPzpcXGQrKSk/KD86XFwuXFxkKik/KD86W2VFXVtcXCtcXC1dPyg/OlxcZCspKT8kLyk7XG4gIH0sXG4gIGlzV29yZHM6IGZ1bmN0aW9uIGlzV29yZHModmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXltBLVpcXHNdKyQvaSk7XG4gIH0sXG4gIGlzU3BlY2lhbFdvcmRzOiBmdW5jdGlvbiBpc1NwZWNpYWxXb3Jkcyh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eW0EtWlxcc1xcdTAwQzAtXFx1MDE3Rl0rJC9pKTtcbiAgfSxcbiAgaXNMZW5ndGg6IGZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlcywgdmFsdWUsIGxlbmd0aCkge1xuICAgIHJldHVybiAhX2lzRXhpc3R5KHZhbHVlKSB8fCBpc0VtcHR5KHZhbHVlKSB8fCB2YWx1ZS5sZW5ndGggPT09IGxlbmd0aDtcbiAgfSxcbiAgZXF1YWxzOiBmdW5jdGlvbiBlcXVhbHModmFsdWVzLCB2YWx1ZSwgZXFsKSB7XG4gICAgcmV0dXJuICFfaXNFeGlzdHkodmFsdWUpIHx8IGlzRW1wdHkodmFsdWUpIHx8IHZhbHVlID09IGVxbDtcbiAgfSxcbiAgZXF1YWxzRmllbGQ6IGZ1bmN0aW9uIGVxdWFsc0ZpZWxkKHZhbHVlcywgdmFsdWUsIGZpZWxkKSB7XG4gICAgcmV0dXJuIHZhbHVlID09IHZhbHVlc1tmaWVsZF07XG4gIH0sXG4gIG1heExlbmd0aDogZnVuY3Rpb24gbWF4TGVuZ3RoKHZhbHVlcywgdmFsdWUsIGxlbmd0aCkge1xuICAgIHJldHVybiAhX2lzRXhpc3R5KHZhbHVlKSB8fCB2YWx1ZS5sZW5ndGggPD0gbGVuZ3RoO1xuICB9LFxuICBtaW5MZW5ndGg6IGZ1bmN0aW9uIG1pbkxlbmd0aCh2YWx1ZXMsIHZhbHVlLCBsZW5ndGgpIHtcbiAgICByZXR1cm4gIV9pc0V4aXN0eSh2YWx1ZSkgfHwgaXNFbXB0eSh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoID49IGxlbmd0aDtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB2YWxpZGF0aW9ucztcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvY29tcG9uZW50cy9BdXRoL0ZpZWxkL0ZpZWxkLmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcmVhY3QvcmVhY3QuanNcIik7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX2Zvcm1zeVJlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvbWFpbi5qc1wiKTtcblxudmFyIF9mb3Jtc3lSZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9mb3Jtc3lSZWFjdCk7XG5cbnZhciBfcHJvcFR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3Byb3AtdHlwZXMvaW5kZXguanNcIik7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIEZpZWxkID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKEZpZWxkLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBGaWVsZChwcm9wcykge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGaWVsZCk7XG5cbiAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoRmllbGQuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihGaWVsZCkpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgIF90aGlzLmNoYW5nZVZhbHVlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBfdGhpcy5wcm9wcy5zZXRWYWx1ZShldmVudC5jdXJyZW50VGFyZ2V0W190aGlzLnByb3BzLnR5cGUgPT09ICdjaGVja2JveCcgPyAnY2hlY2tlZCcgOiAndmFsdWUnXSk7XG4gICAgfTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoRmllbGQsIFt7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IHRoaXMucHJvcHMuZ2V0RXJyb3JNZXNzYWdlKCk7XG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgY2xhc3NOYW1lOiAnc2lnbnVwLWZpZWxkLWdyb3VwJyB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnbGFiZWwnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGh0bWxGb3I6IHRoaXMucHJvcHMubmFtZS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiAnc2lnbnVwLWZvcm1fX2xhYmVsJyB9LFxuICAgICAgICAgIHRoaXMucHJvcHMubmFtZVxuICAgICAgICApLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgb25DaGFuZ2U6IHRoaXMuY2hhbmdlVmFsdWUsXG4gICAgICAgICAgdmFsdWU6IHRoaXMucHJvcHMuZ2V0VmFsdWUoKSxcbiAgICAgICAgICB0eXBlOiB0aGlzLnByb3BzLnR5cGUgfHwgJ3RleHQnLFxuICAgICAgICAgIG5hbWU6IHRoaXMucHJvcHMubmFtZS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgIGNsYXNzTmFtZTogJ3NpZ251cC1mb3JtX19pbnB1dC1maWVsZCcgfSksXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdwJyxcbiAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NhcHRpb24gc2lnbnVwLWZvcm1fX2NhcHRpb24nIH0sXG4gICAgICAgICAgdGhpcy5wcm9wcy50ZXh0XG4gICAgICAgICksXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICB7IGNsYXNzTmFtZTogJ3NpZ251cC1mb3JtX19lcnJvci1tZXNzYWdlJyB9LFxuICAgICAgICAgIGVycm9yTWVzc2FnZVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBGaWVsZDtcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbkZpZWxkLnByb3BUeXBlcyA9IHtcbiAgbmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIHRleHQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBjbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICB0eXBlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgc2V0VmFsdWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYW55LFxuICBnZXRWYWx1ZTogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICB2YWxpZGF0aW9uczogX3Byb3BUeXBlczIuZGVmYXVsdC5hbnksXG4gIGdldEVycm9yTWVzc2FnZTogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICByZWdpc3RyYXRpb246IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuY1xufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gKDAsIF9mb3Jtc3lSZWFjdC5IT0MpKEZpZWxkKTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvY29tcG9uZW50cy9BdXRoL0hlYWRlci9IZWFkZXIuanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuSGVhZGVyID0gdW5kZWZpbmVkO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0L3JlYWN0LmpzXCIpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wcm9wVHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9pbmRleC5qc1wiKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIEhlYWRlciA9IGV4cG9ydHMuSGVhZGVyID0gZnVuY3Rpb24gSGVhZGVyKHByb3BzKSB7XG4gIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAnZGl2JyxcbiAgICB7IGNsYXNzTmFtZTogJ3NpZ251cC1oZWFkZXInIH0sXG4gICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2knLCB7XG4gICAgICBjbGFzc05hbWU6ICdmYSAnICsgcHJvcHMucGljICsgJyBmYS0zeCBzaWdudXAtaGVhZGVyX19pY29uJyxcbiAgICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJyB9KSxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICdoMScsXG4gICAgICB7IGNsYXNzTmFtZTogJ3NpZ251cC1oZWFkZXJfX3RpdGxlJyB9LFxuICAgICAgcHJvcHMudGl0bGUsXG4gICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ3NwYW4nLFxuICAgICAgICB7IGNsYXNzTmFtZTogJ2NhcHRpb24gc2lnbnVwLWhlYWRlcl9fY2FwdGlvbicgfSxcbiAgICAgICAgcHJvcHMudGV4dFxuICAgICAgKVxuICAgIClcbiAgKTtcbn07XG5cbkhlYWRlci5wcm9wVHlwZXMgPSB7XG4gIHBpYzogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIHRpdGxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgdGV4dDogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmdcbn07XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3BhZ2VzL0xvZ2luL0xvZ2luLmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcmVhY3QvcmVhY3QuanNcIik7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX2Zvcm1zeVJlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvbWFpbi5qc1wiKTtcblxudmFyIF9mb3Jtc3lSZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9mb3Jtc3lSZWFjdCk7XG5cbnZhciBfSGVhZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2NvbXBvbmVudHMvQXV0aC9IZWFkZXIvSGVhZGVyLmpzXCIpO1xuXG52YXIgX0ZpZWxkID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2NvbXBvbmVudHMvQXV0aC9GaWVsZC9GaWVsZC5qc1wiKTtcblxudmFyIF9GaWVsZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9GaWVsZCk7XG5cbnZhciBfTWVzc2FnZSA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9jb21wb25lbnRzL01lc3NhZ2UvTWVzc2FnZS5qc1wiKTtcblxudmFyIF9yZWFjdFJvdXRlckRvbSA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC1yb3V0ZXItZG9tL2VzL2luZGV4LmpzXCIpO1xuXG52YXIgX2F1dGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvYWN0aW9ucy9hdXRoLmFjdGlvbi5qc1wiKTtcblxudmFyIF9yZWR1eCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWR1eC9lcy9pbmRleC5qc1wiKTtcblxudmFyIF9yZWFjdFJlZHV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0LXJlZHV4L2VzL2luZGV4LmpzXCIpO1xuXG52YXIgX3Byb3BUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9wcm9wLXR5cGVzL2luZGV4LmpzXCIpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG5fX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvcGFnZXMvTG9naW4vTG9naW4uc2Nzc1wiKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgTG9naW4gPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoTG9naW4sIF9Db21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIExvZ2luKHByb3BzKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExvZ2luKTtcblxuICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChMb2dpbi5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKExvZ2luKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgX3RoaXMuYWRkTG9naW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgZW1haWw6IF90aGlzLmVtYWlsLmdldFZhbHVlKCksXG4gICAgICAgIHBhc3N3b3JkOiBfdGhpcy5wYXNzd29yZC5nZXRWYWx1ZSgpXG4gICAgICB9O1xuXG4gICAgICBfdGhpcy5wcm9wcy5sb2dpbihkYXRhKTtcbiAgICB9O1xuXG4gICAgX3RoaXMuZW5hYmxlQnV0dG9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBjYW5TdWJtaXQ6IHRydWVcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfdGhpcy5kaXNhYmxlQnV0dG9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBjYW5TdWJtaXQ6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBjYW5TdWJtaXQ6IGZhbHNlXG4gICAgfTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoTG9naW4sIFt7XG4gICAga2V5OiAnY29tcG9uZW50RGlkVXBkYXRlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgaWYgKHRoaXMucHJvcHMudXNlckRhdGEuX2lkKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmhpc3RvcnkubGVuZ3RoID4gMykge1xuICAgICAgICAgIHRoaXMucHJvcHMuaGlzdG9yeS5nb0JhY2soKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnByb3BzLmhpc3RvcnkucHVzaCgnLycpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgY2xhc3NOYW1lOiAnbG9naW4tY29udGFpbmVyJyB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfSGVhZGVyLkhlYWRlciwge1xuICAgICAgICAgIHBpYzogJ2ZhLXVubG9jaycsXG4gICAgICAgICAgdGl0bGU6ICdMb2dpbicsXG4gICAgICAgICAgdGV4dDogJ1BsZWFzZSBlbnRlciB5b3VyIGNyZWRlbnRpYWxzIHRvIGxvZ2luLicgfSksXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9NZXNzYWdlLk1lc3NhZ2UsIHtcbiAgICAgICAgICBjbGVhclN0YXR1czogdGhpcy5wcm9wcy5jbGVhckxvZ2luU3RhdHVzLFxuICAgICAgICAgIHN0YXR1czogdGhpcy5wcm9wcy5sb2dpblN0YXR1cyxcbiAgICAgICAgICBoZWFkZXI6ICdBdXRob3JpemF0aW9uIGZhaWxlZCcsXG4gICAgICAgICAgdGV4dDogdGhpcy5wcm9wcy5lcnJvclRleHQgfSksXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgIF9mb3Jtc3lSZWFjdDIuZGVmYXVsdC5Gb3JtLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG9uU3VibWl0OiB0aGlzLmFkZExvZ2luLFxuICAgICAgICAgICAgb25WYWxpZDogdGhpcy5lbmFibGVCdXR0b24sXG4gICAgICAgICAgICBvbkludmFsaWQ6IHRoaXMuZGlzYWJsZUJ1dHRvbixcbiAgICAgICAgICAgIGNsYXNzTmFtZTogJ3NpZ251cC1mb3JtJyB9LFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9GaWVsZDIuZGVmYXVsdCwge1xuICAgICAgICAgICAgbmFtZTogJ0UtbWFpbCcsXG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICB0ZXh0OiAnWW91ciB1bmlxdWUgdXNlcm5hbWUgdG8gYXBwJyxcbiAgICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKGlucHV0KSB7XG4gICAgICAgICAgICAgIF90aGlzMi5lbWFpbCA9IGlucHV0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZhbGlkYXRpb25zOiAnaXNFbWFpbCcsXG4gICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3I6ICdUaGlzIGlzIG5vdCBhIHZhbGlkIGVtYWlsJyxcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlIH0pLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9GaWVsZDIuZGVmYXVsdCwge1xuICAgICAgICAgICAgbmFtZTogJ1Bhc3N3b3JkJyxcbiAgICAgICAgICAgIHR5cGU6ICdwYXNzd29yZCcsXG4gICAgICAgICAgICB0ZXh0OiAnWW91ciBoYXJkIHRvIGd1ZXNzIHBhc3N3b3JkJyxcbiAgICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKGlucHV0KSB7XG4gICAgICAgICAgICAgIF90aGlzMi5wYXNzd29yZCA9IGlucHV0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZhbGlkYXRpb25zOiB7XG4gICAgICAgICAgICAgIG1pbkxlbmd0aDogNyxcbiAgICAgICAgICAgICAgaXNBbHBoYW51bWVyaWM6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3I6ICdUaGlzIGlzIG5vdCBhIHZhbGlkIHBhc3MnLFxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUgfSksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnc2lnbnVwLWZpZWxkLWdyb3VwIHNpZ251cC1idG4tZ3JvdXAnIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdWJtaXQnLFxuICAgICAgICAgICAgICBkaXNhYmxlZDogIXRoaXMuc3RhdGUuY2FuU3VibWl0LFxuICAgICAgICAgICAgICBjbGFzc05hbWU6ICdidG4gYnRuLS1zaWdudXAgYnRuLS1zaWdudXAtYWN0aXZlJyxcbiAgICAgICAgICAgICAgdmFsdWU6ICdMb2dpbicgfSksXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NhcHRpb24gc2lnbnVwLWZvcm1fX2NhcHRpb24gJyArICdzaWdudXAtZm9ybV9fY2FwdGlvbi0tdGV4dCcgfSxcbiAgICAgICAgICAgICAgJ05ldyBoZXJlPycsXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgIF9yZWFjdFJvdXRlckRvbS5OYXZMaW5rLFxuICAgICAgICAgICAgICAgIHsgdG86ICcvYXV0aC9yZWdpc3RlcicsXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdzaWdudXAtZm9ybV9fY2FwdGlvbi0tbGluaycgfSxcbiAgICAgICAgICAgICAgICAnUmVnaXN0ZXInXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIExvZ2luO1xufShfcmVhY3QuQ29tcG9uZW50KTtcblxuZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzKHN0b3JlKSB7XG4gIHJldHVybiB7XG4gICAgbG9naW5TdGF0dXM6IHN0b3JlLmF1dGhlbnRpY2F0aW9uLnN0YXR1cyxcbiAgICB1c2VyRGF0YTogc3RvcmUuYXV0aGVudGljYXRpb24uaXNMb2dnZWQsXG4gICAgZXJyb3JUZXh0OiBzdG9yZS5hdXRoZW50aWNhdGlvbi5lcnJvclRleHRcbiAgfTtcbn1cbmZ1bmN0aW9uIG1hcERpc3BhdGNoVG9Qcm9wcyhkaXNwYXRjaCkge1xuICByZXR1cm4ge1xuICAgIGxvZ2luOiAoMCwgX3JlZHV4LmJpbmRBY3Rpb25DcmVhdG9ycykoX2F1dGgubG9naW4sIGRpc3BhdGNoKSxcbiAgICBjbGVhckxvZ2luU3RhdHVzOiBmdW5jdGlvbiBjbGVhckxvZ2luU3RhdHVzKCkge1xuICAgICAgcmV0dXJuIGRpc3BhdGNoKCgwLCBfYXV0aC5jbGVhckxvZ2luU3RhdHVzKSgpKTtcbiAgICB9XG4gIH07XG59XG5cbmV4cG9ydHMuZGVmYXVsdCA9ICgwLCBfcmVhY3RSZWR1eC5jb25uZWN0KShtYXBTdGF0ZVRvUHJvcHMsIG1hcERpc3BhdGNoVG9Qcm9wcykoTG9naW4pO1xuXG5cbkxvZ2luLnByb3BUeXBlcyA9IHtcbiAgbG9naW5TdGF0dXM6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBoaXN0b3J5OiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgbG9naW46IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgdXNlckRhdGE6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBlcnJvclRleHQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBjbGVhckxvZ2luU3RhdHVzOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmNcbn07XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3BhZ2VzL0xvZ2luL0xvZ2luLnNjc3NcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuLyoqKi8gfSlcblxufSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIDUuaW5kZXhfYnVuZGxlLmpzIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbnZhciBmYWN0b3J5ID0gcmVxdWlyZSgnLi9mYWN0b3J5Jyk7XG5cbmlmICh0eXBlb2YgUmVhY3QgPT09ICd1bmRlZmluZWQnKSB7XG4gIHRocm93IEVycm9yKFxuICAgICdjcmVhdGUtcmVhY3QtY2xhc3MgY291bGQgbm90IGZpbmQgdGhlIFJlYWN0IG9iamVjdC4gSWYgeW91IGFyZSB1c2luZyBzY3JpcHQgdGFncywgJyArXG4gICAgICAnbWFrZSBzdXJlIHRoYXQgUmVhY3QgaXMgYmVpbmcgbG9hZGVkIGJlZm9yZSBjcmVhdGUtcmVhY3QtY2xhc3MuJ1xuICApO1xufVxuXG4vLyBIYWNrIHRvIGdyYWIgTm9vcFVwZGF0ZVF1ZXVlIGZyb20gaXNvbW9ycGhpYyBSZWFjdFxudmFyIFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlID0gbmV3IFJlYWN0LkNvbXBvbmVudCgpLnVwZGF0ZXI7XG5cbm1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShcbiAgUmVhY3QuQ29tcG9uZW50LFxuICBSZWFjdC5pc1ZhbGlkRWxlbWVudCxcbiAgUmVhY3ROb29wVXBkYXRlUXVldWVcbik7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2NyZWF0ZS1yZWFjdC1jbGFzcy9pbmRleC5qcyIsImZ1bmN0aW9uIHRvT2JqKHNvdXJjZSkge1xuICByZXR1cm4gT2JqZWN0LmtleXMoc291cmNlKS5yZWR1Y2UoZnVuY3Rpb24gKG91dHB1dCwga2V5KSB7XG4gICAgdmFyIHBhcmVudEtleSA9IGtleS5tYXRjaCgvW15cXFtdKi9pKTtcbiAgICB2YXIgcGF0aHMgPSBrZXkubWF0Y2goL1xcWy4qP1xcXS9nKSB8fCBbXTtcbiAgICBwYXRocyA9IFtwYXJlbnRLZXlbMF1dLmNvbmNhdChwYXRocykubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHJldHVybiBrZXkucmVwbGFjZSgvXFxbfFxcXS9nLCAnJyk7XG4gICAgfSk7XG4gICAgdmFyIGN1cnJlbnRQYXRoID0gb3V0cHV0O1xuICAgIHdoaWxlIChwYXRocy5sZW5ndGgpIHtcbiAgICAgIHZhciBwYXRoS2V5ID0gcGF0aHMuc2hpZnQoKTtcblxuICAgICAgaWYgKHBhdGhLZXkgaW4gY3VycmVudFBhdGgpIHtcbiAgICAgICAgY3VycmVudFBhdGggPSBjdXJyZW50UGF0aFtwYXRoS2V5XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnRQYXRoW3BhdGhLZXldID0gcGF0aHMubGVuZ3RoID8gaXNOYU4ocGF0aHNbMF0pID8ge30gOiBbXSA6IHNvdXJjZVtrZXldO1xuICAgICAgICBjdXJyZW50UGF0aCA9IGN1cnJlbnRQYXRoW3BhdGhLZXldO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBvdXRwdXQ7XG4gIH0sIHt9KTtcbn1cblxuZnVuY3Rpb24gZnJvbU9iaihvYmopIHtcbiAgZnVuY3Rpb24gcmVjdXIobmV3T2JqLCBwcm9wTmFtZSwgY3VyclZhbCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGN1cnJWYWwpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChjdXJyVmFsKSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICAgIE9iamVjdC5rZXlzKGN1cnJWYWwpLmZvckVhY2goZnVuY3Rpb24odikge1xuICAgICAgICByZWN1cihuZXdPYmosIHByb3BOYW1lICsgXCJbXCIgKyB2ICsgXCJdXCIsIGN1cnJWYWxbdl0pO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gbmV3T2JqO1xuICAgIH1cblxuICAgIG5ld09ialtwcm9wTmFtZV0gPSBjdXJyVmFsO1xuICAgIHJldHVybiBuZXdPYmo7XG4gIH1cblxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG4gIHJldHVybiBrZXlzLnJlZHVjZShmdW5jdGlvbihuZXdPYmosIHByb3BOYW1lKSB7XG4gICAgcmV0dXJuIHJlY3VyKG5ld09iaiwgcHJvcE5hbWUsIG9ialtwcm9wTmFtZV0pO1xuICB9LCB7fSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBmcm9tT2JqOiBmcm9tT2JqLFxuICB0b09iajogdG9PYmpcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2Zvcm0tZGF0YS10by1vYmplY3QvaW5kZXguanMiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBSZWFjdCA9IGdsb2JhbC5SZWFjdCB8fCByZXF1aXJlKCdyZWFjdCcpO1xudmFyIGNyZWF0ZVJlYWN0Q2xhc3MgPSByZXF1aXJlKCdjcmVhdGUtcmVhY3QtY2xhc3MnKTtcbnZhciBNaXhpbiA9IHJlcXVpcmUoJy4vTWl4aW4uanMnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZnVuY3Rpb24gKENvbXBvbmVudCkge1xuICAgIHJldHVybiBjcmVhdGVSZWFjdENsYXNzKHtcbiAgICAgIG1peGluczogW01peGluXSxcbiAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDb21wb25lbnQsIF9leHRlbmRzKHtcbiAgICAgICAgICBzZXRWYWxpZGF0aW9uczogdGhpcy5zZXRWYWxpZGF0aW9ucyxcbiAgICAgICAgICBzZXRWYWx1ZTogdGhpcy5zZXRWYWx1ZSxcbiAgICAgICAgICByZXNldFZhbHVlOiB0aGlzLnJlc2V0VmFsdWUsXG4gICAgICAgICAgZ2V0VmFsdWU6IHRoaXMuZ2V0VmFsdWUsXG4gICAgICAgICAgaGFzVmFsdWU6IHRoaXMuaGFzVmFsdWUsXG4gICAgICAgICAgZ2V0RXJyb3JNZXNzYWdlOiB0aGlzLmdldEVycm9yTWVzc2FnZSxcbiAgICAgICAgICBnZXRFcnJvck1lc3NhZ2VzOiB0aGlzLmdldEVycm9yTWVzc2FnZXMsXG4gICAgICAgICAgaXNGb3JtRGlzYWJsZWQ6IHRoaXMuaXNGb3JtRGlzYWJsZWQsXG4gICAgICAgICAgaXNWYWxpZDogdGhpcy5pc1ZhbGlkLFxuICAgICAgICAgIGlzUHJpc3RpbmU6IHRoaXMuaXNQcmlzdGluZSxcbiAgICAgICAgICBpc0Zvcm1TdWJtaXR0ZWQ6IHRoaXMuaXNGb3JtU3VibWl0dGVkLFxuICAgICAgICAgIGlzUmVxdWlyZWQ6IHRoaXMuaXNSZXF1aXJlZCxcbiAgICAgICAgICBzaG93UmVxdWlyZWQ6IHRoaXMuc2hvd1JlcXVpcmVkLFxuICAgICAgICAgIHNob3dFcnJvcjogdGhpcy5zaG93RXJyb3IsXG4gICAgICAgICAgaXNWYWxpZFZhbHVlOiB0aGlzLmlzVmFsaWRWYWx1ZVxuICAgICAgICB9LCB0aGlzLnByb3BzKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vZm9ybXN5LXJlYWN0L2xpYi9EZWNvcmF0b3IuanMiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBSZWFjdCA9IGdsb2JhbC5SZWFjdCB8fCByZXF1aXJlKCdyZWFjdCcpO1xudmFyIGNyZWF0ZVJlYWN0Q2xhc3MgPSByZXF1aXJlKCdjcmVhdGUtcmVhY3QtY2xhc3MnKTtcbnZhciBNaXhpbiA9IHJlcXVpcmUoJy4vTWl4aW4uanMnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKENvbXBvbmVudCkge1xuICByZXR1cm4gY3JlYXRlUmVhY3RDbGFzcyh7XG4gICAgZGlzcGxheU5hbWU6ICdGb3Jtc3koJyArIGdldERpc3BsYXlOYW1lKENvbXBvbmVudCkgKyAnKScsXG4gICAgbWl4aW5zOiBbTWl4aW5dLFxuXG4gICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgaW5uZXJSZWYgPSB0aGlzLnByb3BzLmlubmVyUmVmO1xuXG4gICAgICB2YXIgcHJvcHNGb3JFbGVtZW50ID0gX2V4dGVuZHMoe1xuICAgICAgICBzZXRWYWxpZGF0aW9uczogdGhpcy5zZXRWYWxpZGF0aW9ucyxcbiAgICAgICAgc2V0VmFsdWU6IHRoaXMuc2V0VmFsdWUsXG4gICAgICAgIHJlc2V0VmFsdWU6IHRoaXMucmVzZXRWYWx1ZSxcbiAgICAgICAgZ2V0VmFsdWU6IHRoaXMuZ2V0VmFsdWUsXG4gICAgICAgIGhhc1ZhbHVlOiB0aGlzLmhhc1ZhbHVlLFxuICAgICAgICBnZXRFcnJvck1lc3NhZ2U6IHRoaXMuZ2V0RXJyb3JNZXNzYWdlLFxuICAgICAgICBnZXRFcnJvck1lc3NhZ2VzOiB0aGlzLmdldEVycm9yTWVzc2FnZXMsXG4gICAgICAgIGlzRm9ybURpc2FibGVkOiB0aGlzLmlzRm9ybURpc2FibGVkLFxuICAgICAgICBpc1ZhbGlkOiB0aGlzLmlzVmFsaWQsXG4gICAgICAgIGlzUHJpc3RpbmU6IHRoaXMuaXNQcmlzdGluZSxcbiAgICAgICAgaXNGb3JtU3VibWl0dGVkOiB0aGlzLmlzRm9ybVN1Ym1pdHRlZCxcbiAgICAgICAgaXNSZXF1aXJlZDogdGhpcy5pc1JlcXVpcmVkLFxuICAgICAgICBzaG93UmVxdWlyZWQ6IHRoaXMuc2hvd1JlcXVpcmVkLFxuICAgICAgICBzaG93RXJyb3I6IHRoaXMuc2hvd0Vycm9yLFxuICAgICAgICBpc1ZhbGlkVmFsdWU6IHRoaXMuaXNWYWxpZFZhbHVlXG4gICAgICB9LCB0aGlzLnByb3BzKTtcblxuICAgICAgaWYgKGlubmVyUmVmKSB7XG4gICAgICAgIHByb3BzRm9yRWxlbWVudC5yZWYgPSBpbm5lclJlZjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KENvbXBvbmVudCwgcHJvcHNGb3JFbGVtZW50KTtcbiAgICB9XG4gIH0pO1xufTtcblxuZnVuY3Rpb24gZ2V0RGlzcGxheU5hbWUoQ29tcG9uZW50KSB7XG4gIHJldHVybiBDb21wb25lbnQuZGlzcGxheU5hbWUgfHwgQ29tcG9uZW50Lm5hbWUgfHwgKHR5cGVvZiBDb21wb25lbnQgPT09ICdzdHJpbmcnID8gQ29tcG9uZW50IDogJ0NvbXBvbmVudCcpO1xufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vZm9ybXN5LXJlYWN0L2xpYi9IT0MuanMiLCIndXNlIHN0cmljdCc7XG5cbnZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzLmpzJyk7XG52YXIgUmVhY3QgPSBnbG9iYWwuUmVhY3QgfHwgcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIGNvbnZlcnRWYWxpZGF0aW9uc1RvT2JqZWN0ID0gZnVuY3Rpb24gY29udmVydFZhbGlkYXRpb25zVG9PYmplY3QodmFsaWRhdGlvbnMpIHtcblxuICBpZiAodHlwZW9mIHZhbGlkYXRpb25zID09PSAnc3RyaW5nJykge1xuXG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLnNwbGl0KC9cXCwoPyFbXntcXFtdKlt9XFxdXSkvZykucmVkdWNlKGZ1bmN0aW9uICh2YWxpZGF0aW9ucywgdmFsaWRhdGlvbikge1xuICAgICAgdmFyIGFyZ3MgPSB2YWxpZGF0aW9uLnNwbGl0KCc6Jyk7XG4gICAgICB2YXIgdmFsaWRhdGVNZXRob2QgPSBhcmdzLnNoaWZ0KCk7XG5cbiAgICAgIGFyZ3MgPSBhcmdzLm1hcChmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoYXJnKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHJldHVybiBhcmc7IC8vIEl0IGlzIGEgc3RyaW5nIGlmIGl0IGNhbiBub3QgcGFyc2UgaXRcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3Jtc3kgZG9lcyBub3Qgc3VwcG9ydCBtdWx0aXBsZSBhcmdzIG9uIHN0cmluZyB2YWxpZGF0aW9ucy4gVXNlIG9iamVjdCBmb3JtYXQgb2YgdmFsaWRhdGlvbnMgaW5zdGVhZC4nKTtcbiAgICAgIH1cblxuICAgICAgdmFsaWRhdGlvbnNbdmFsaWRhdGVNZXRob2RdID0gYXJncy5sZW5ndGggPyBhcmdzWzBdIDogdHJ1ZTtcbiAgICAgIHJldHVybiB2YWxpZGF0aW9ucztcbiAgICB9LCB7fSk7XG4gIH1cblxuICByZXR1cm4gdmFsaWRhdGlvbnMgfHwge307XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIF92YWx1ZTogdGhpcy5wcm9wcy52YWx1ZSxcbiAgICAgIF9pc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgIF9pc1ZhbGlkOiB0cnVlLFxuICAgICAgX2lzUHJpc3RpbmU6IHRydWUsXG4gICAgICBfcHJpc3RpbmVWYWx1ZTogdGhpcy5wcm9wcy52YWx1ZSxcbiAgICAgIF92YWxpZGF0aW9uRXJyb3I6IFtdLFxuICAgICAgX2V4dGVybmFsRXJyb3I6IG51bGwsXG4gICAgICBfZm9ybVN1Ym1pdHRlZDogZmFsc2VcbiAgICB9O1xuICB9LFxuICBjb250ZXh0VHlwZXM6IHtcbiAgICBmb3Jtc3k6IFByb3BUeXBlcy5vYmplY3QgLy8gV2hhdCBhYm91dCByZXF1aXJlZD9cbiAgfSxcbiAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkYXRpb25FcnJvcjogJycsXG4gICAgICB2YWxpZGF0aW9uRXJyb3JzOiB7fVxuICAgIH07XG4gIH0sXG5cbiAgY29tcG9uZW50V2lsbE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgdmFyIGNvbmZpZ3VyZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuc2V0VmFsaWRhdGlvbnModGhpcy5wcm9wcy52YWxpZGF0aW9ucywgdGhpcy5wcm9wcy5yZXF1aXJlZCk7XG5cbiAgICAgIC8vIFBhc3MgYSBmdW5jdGlvbiBpbnN0ZWFkP1xuICAgICAgdGhpcy5jb250ZXh0LmZvcm1zeS5hdHRhY2hUb0Zvcm0odGhpcyk7XG4gICAgICAvL3RoaXMucHJvcHMuX2F0dGFjaFRvRm9ybSh0aGlzKTtcbiAgICB9LmJpbmQodGhpcyk7XG5cbiAgICBpZiAoIXRoaXMucHJvcHMubmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3JtIElucHV0IHJlcXVpcmVzIGEgbmFtZSBwcm9wZXJ0eSB3aGVuIHVzZWQnKTtcbiAgICB9XG5cbiAgICAvKlxuICAgIGlmICghdGhpcy5wcm9wcy5fYXR0YWNoVG9Gb3JtKSB7XG4gICAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc01vdW50ZWQoKSkgcmV0dXJuO1xuICAgICAgICBpZiAoIXRoaXMucHJvcHMuX2F0dGFjaFRvRm9ybSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRm9ybSBNaXhpbiByZXF1aXJlcyBjb21wb25lbnQgdG8gYmUgbmVzdGVkIGluIGEgRm9ybScpO1xuICAgICAgICB9XG4gICAgICAgIGNvbmZpZ3VyZSgpO1xuICAgICAgfS5iaW5kKHRoaXMpLCAwKTtcbiAgICB9XG4gICAgKi9cbiAgICBjb25maWd1cmUoKTtcbiAgfSxcblxuICAvLyBXZSBoYXZlIHRvIG1ha2UgdGhlIHZhbGlkYXRlIG1ldGhvZCBpcyBrZXB0IHdoZW4gbmV3IHByb3BzIGFyZSBhZGRlZFxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgIHRoaXMuc2V0VmFsaWRhdGlvbnMobmV4dFByb3BzLnZhbGlkYXRpb25zLCBuZXh0UHJvcHMucmVxdWlyZWQpO1xuICB9LFxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykge1xuXG4gICAgLy8gSWYgdGhlIHZhbHVlIHBhc3NlZCBoYXMgY2hhbmdlZCwgc2V0IGl0LiBJZiB2YWx1ZSBpcyBub3QgcGFzc2VkIGl0IHdpbGxcbiAgICAvLyBpbnRlcm5hbGx5IHVwZGF0ZSwgYW5kIHRoaXMgd2lsbCBuZXZlciBydW5cbiAgICBpZiAoIXV0aWxzLmlzU2FtZSh0aGlzLnByb3BzLnZhbHVlLCBwcmV2UHJvcHMudmFsdWUpKSB7XG4gICAgICB0aGlzLnNldFZhbHVlKHRoaXMucHJvcHMudmFsdWUpO1xuICAgIH1cblxuICAgIC8vIElmIHZhbGlkYXRpb25zIG9yIHJlcXVpcmVkIGlzIGNoYW5nZWQsIHJ1biBhIG5ldyB2YWxpZGF0aW9uXG4gICAgaWYgKCF1dGlscy5pc1NhbWUodGhpcy5wcm9wcy52YWxpZGF0aW9ucywgcHJldlByb3BzLnZhbGlkYXRpb25zKSB8fCAhdXRpbHMuaXNTYW1lKHRoaXMucHJvcHMucmVxdWlyZWQsIHByZXZQcm9wcy5yZXF1aXJlZCkpIHtcbiAgICAgIHRoaXMuY29udGV4dC5mb3Jtc3kudmFsaWRhdGUodGhpcyk7XG4gICAgfVxuICB9LFxuXG4gIC8vIERldGFjaCBpdCB3aGVuIGNvbXBvbmVudCB1bm1vdW50c1xuICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy5jb250ZXh0LmZvcm1zeS5kZXRhY2hGcm9tRm9ybSh0aGlzKTtcbiAgICAvL3RoaXMucHJvcHMuX2RldGFjaEZyb21Gb3JtKHRoaXMpO1xuICB9LFxuXG4gIHNldFZhbGlkYXRpb25zOiBmdW5jdGlvbiBzZXRWYWxpZGF0aW9ucyh2YWxpZGF0aW9ucywgcmVxdWlyZWQpIHtcblxuICAgIC8vIEFkZCB2YWxpZGF0aW9ucyB0byB0aGUgc3RvcmUgaXRzZWxmIGFzIHRoZSBwcm9wcyBvYmplY3QgY2FuIG5vdCBiZSBtb2RpZmllZFxuICAgIHRoaXMuX3ZhbGlkYXRpb25zID0gY29udmVydFZhbGlkYXRpb25zVG9PYmplY3QodmFsaWRhdGlvbnMpIHx8IHt9O1xuICAgIHRoaXMuX3JlcXVpcmVkVmFsaWRhdGlvbnMgPSByZXF1aXJlZCA9PT0gdHJ1ZSA/IHsgaXNEZWZhdWx0UmVxdWlyZWRWYWx1ZTogdHJ1ZSB9IDogY29udmVydFZhbGlkYXRpb25zVG9PYmplY3QocmVxdWlyZWQpO1xuICB9LFxuXG4gIC8vIFdlIHZhbGlkYXRlIGFmdGVyIHRoZSB2YWx1ZSBoYXMgYmVlbiBzZXRcbiAgc2V0VmFsdWU6IGZ1bmN0aW9uIHNldFZhbHVlKHZhbHVlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBfdmFsdWU6IHZhbHVlLFxuICAgICAgX2lzUHJpc3RpbmU6IGZhbHNlXG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5jb250ZXh0LmZvcm1zeS52YWxpZGF0ZSh0aGlzKTtcbiAgICAgIC8vdGhpcy5wcm9wcy5fdmFsaWRhdGUodGhpcyk7XG4gICAgfS5iaW5kKHRoaXMpKTtcbiAgfSxcbiAgcmVzZXRWYWx1ZTogZnVuY3Rpb24gcmVzZXRWYWx1ZSgpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIF92YWx1ZTogdGhpcy5zdGF0ZS5fcHJpc3RpbmVWYWx1ZSxcbiAgICAgIF9pc1ByaXN0aW5lOiB0cnVlXG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5jb250ZXh0LmZvcm1zeS52YWxpZGF0ZSh0aGlzKTtcbiAgICAgIC8vdGhpcy5wcm9wcy5fdmFsaWRhdGUodGhpcyk7XG4gICAgfSk7XG4gIH0sXG4gIGdldFZhbHVlOiBmdW5jdGlvbiBnZXRWYWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5fdmFsdWU7XG4gIH0sXG4gIGhhc1ZhbHVlOiBmdW5jdGlvbiBoYXNWYWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5fdmFsdWUgIT09ICcnO1xuICB9LFxuICBnZXRFcnJvck1lc3NhZ2U6IGZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSgpIHtcbiAgICB2YXIgbWVzc2FnZXMgPSB0aGlzLmdldEVycm9yTWVzc2FnZXMoKTtcbiAgICByZXR1cm4gbWVzc2FnZXMubGVuZ3RoID8gbWVzc2FnZXNbMF0gOiBudWxsO1xuICB9LFxuICBnZXRFcnJvck1lc3NhZ2VzOiBmdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2VzKCkge1xuICAgIHJldHVybiAhdGhpcy5pc1ZhbGlkKCkgfHwgdGhpcy5zaG93UmVxdWlyZWQoKSA/IHRoaXMuc3RhdGUuX2V4dGVybmFsRXJyb3IgfHwgdGhpcy5zdGF0ZS5fdmFsaWRhdGlvbkVycm9yIHx8IFtdIDogW107XG4gIH0sXG4gIGlzRm9ybURpc2FibGVkOiBmdW5jdGlvbiBpc0Zvcm1EaXNhYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZXh0LmZvcm1zeS5pc0Zvcm1EaXNhYmxlZCgpO1xuICAgIC8vcmV0dXJuIHRoaXMucHJvcHMuX2lzRm9ybURpc2FibGVkKCk7XG4gIH0sXG4gIGlzVmFsaWQ6IGZ1bmN0aW9uIGlzVmFsaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX2lzVmFsaWQ7XG4gIH0sXG4gIGlzUHJpc3RpbmU6IGZ1bmN0aW9uIGlzUHJpc3RpbmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX2lzUHJpc3RpbmU7XG4gIH0sXG4gIGlzRm9ybVN1Ym1pdHRlZDogZnVuY3Rpb24gaXNGb3JtU3VibWl0dGVkKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLl9mb3JtU3VibWl0dGVkO1xuICB9LFxuICBpc1JlcXVpcmVkOiBmdW5jdGlvbiBpc1JlcXVpcmVkKCkge1xuICAgIHJldHVybiAhIXRoaXMucHJvcHMucmVxdWlyZWQ7XG4gIH0sXG4gIHNob3dSZXF1aXJlZDogZnVuY3Rpb24gc2hvd1JlcXVpcmVkKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLl9pc1JlcXVpcmVkO1xuICB9LFxuICBzaG93RXJyb3I6IGZ1bmN0aW9uIHNob3dFcnJvcigpIHtcbiAgICByZXR1cm4gIXRoaXMuc2hvd1JlcXVpcmVkKCkgJiYgIXRoaXMuaXNWYWxpZCgpO1xuICB9LFxuICBpc1ZhbGlkVmFsdWU6IGZ1bmN0aW9uIGlzVmFsaWRWYWx1ZSh2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHQuZm9ybXN5LmlzVmFsaWRWYWx1ZS5jYWxsKG51bGwsIHRoaXMsIHZhbHVlKTtcbiAgICAvL3JldHVybiB0aGlzLnByb3BzLl9pc1ZhbGlkVmFsdWUuY2FsbChudWxsLCB0aGlzLCB2YWx1ZSk7XG4gIH1cbn07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9mb3Jtc3ktcmVhY3QvbGliL01peGluLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhvYmosIGtleXMpIHsgdmFyIHRhcmdldCA9IHt9OyBmb3IgKHZhciBpIGluIG9iaikgeyBpZiAoa2V5cy5pbmRleE9mKGkpID49IDApIGNvbnRpbnVlOyBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGkpKSBjb250aW51ZTsgdGFyZ2V0W2ldID0gb2JqW2ldOyB9IHJldHVybiB0YXJnZXQ7IH1cblxudmFyIFByb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcbnZhciBSZWFjdCA9IGdsb2JhbC5SZWFjdCB8fCByZXF1aXJlKCdyZWFjdCcpO1xudmFyIGNyZWF0ZVJlYWN0Q2xhc3MgPSByZXF1aXJlKCdjcmVhdGUtcmVhY3QtY2xhc3MnKTtcbnZhciBGb3Jtc3kgPSB7fTtcbnZhciB2YWxpZGF0aW9uUnVsZXMgPSByZXF1aXJlKCcuL3ZhbGlkYXRpb25SdWxlcy5qcycpO1xudmFyIGZvcm1EYXRhVG9PYmplY3QgPSByZXF1aXJlKCdmb3JtLWRhdGEtdG8tb2JqZWN0Jyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzLmpzJyk7XG52YXIgTWl4aW4gPSByZXF1aXJlKCcuL01peGluLmpzJyk7XG52YXIgSE9DID0gcmVxdWlyZSgnLi9IT0MuanMnKTtcbnZhciBEZWNvcmF0b3IgPSByZXF1aXJlKCcuL0RlY29yYXRvci5qcycpO1xudmFyIG9wdGlvbnMgPSB7fTtcbnZhciBlbXB0eUFycmF5ID0gW107XG5cbkZvcm1zeS5NaXhpbiA9IE1peGluO1xuRm9ybXN5LkhPQyA9IEhPQztcbkZvcm1zeS5EZWNvcmF0b3IgPSBEZWNvcmF0b3I7XG5cbkZvcm1zeS5kZWZhdWx0cyA9IGZ1bmN0aW9uIChwYXNzZWRPcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBwYXNzZWRPcHRpb25zO1xufTtcblxuRm9ybXN5LmFkZFZhbGlkYXRpb25SdWxlID0gZnVuY3Rpb24gKG5hbWUsIGZ1bmMpIHtcbiAgdmFsaWRhdGlvblJ1bGVzW25hbWVdID0gZnVuYztcbn07XG5cbkZvcm1zeS5Gb3JtID0gY3JlYXRlUmVhY3RDbGFzcyh7XG4gIGRpc3BsYXlOYW1lOiAnRm9ybXN5JyxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzVmFsaWQ6IHRydWUsXG4gICAgICBpc1N1Ym1pdHRpbmc6IGZhbHNlLFxuICAgICAgY2FuQ2hhbmdlOiBmYWxzZVxuICAgIH07XG4gIH0sXG4gIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24gZ2V0RGVmYXVsdFByb3BzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBvblN1Y2Nlc3M6IGZ1bmN0aW9uIG9uU3VjY2VzcygpIHt9LFxuICAgICAgb25FcnJvcjogZnVuY3Rpb24gb25FcnJvcigpIHt9LFxuICAgICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KCkge30sXG4gICAgICBvblZhbGlkU3VibWl0OiBmdW5jdGlvbiBvblZhbGlkU3VibWl0KCkge30sXG4gICAgICBvbkludmFsaWRTdWJtaXQ6IGZ1bmN0aW9uIG9uSW52YWxpZFN1Ym1pdCgpIHt9LFxuICAgICAgb25WYWxpZDogZnVuY3Rpb24gb25WYWxpZCgpIHt9LFxuICAgICAgb25JbnZhbGlkOiBmdW5jdGlvbiBvbkludmFsaWQoKSB7fSxcbiAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZSgpIHt9LFxuICAgICAgdmFsaWRhdGlvbkVycm9yczogbnVsbCxcbiAgICAgIHByZXZlbnRFeHRlcm5hbEludmFsaWRhdGlvbjogZmFsc2VcbiAgICB9O1xuICB9LFxuXG4gIGNoaWxkQ29udGV4dFR5cGVzOiB7XG4gICAgZm9ybXN5OiBQcm9wVHlwZXMub2JqZWN0XG4gIH0sXG4gIGdldENoaWxkQ29udGV4dDogZnVuY3Rpb24gZ2V0Q2hpbGRDb250ZXh0KCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICByZXR1cm4ge1xuICAgICAgZm9ybXN5OiB7XG4gICAgICAgIGF0dGFjaFRvRm9ybTogdGhpcy5hdHRhY2hUb0Zvcm0sXG4gICAgICAgIGRldGFjaEZyb21Gb3JtOiB0aGlzLmRldGFjaEZyb21Gb3JtLFxuICAgICAgICB2YWxpZGF0ZTogdGhpcy52YWxpZGF0ZSxcbiAgICAgICAgaXNGb3JtRGlzYWJsZWQ6IHRoaXMuaXNGb3JtRGlzYWJsZWQsXG4gICAgICAgIGlzVmFsaWRWYWx1ZTogZnVuY3Rpb24gaXNWYWxpZFZhbHVlKGNvbXBvbmVudCwgdmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMucnVuVmFsaWRhdGlvbihjb21wb25lbnQsIHZhbHVlKS5pc1ZhbGlkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfSxcblxuICAvLyBBZGQgYSBtYXAgdG8gc3RvcmUgdGhlIGlucHV0cyBvZiB0aGUgZm9ybSwgYSBtb2RlbCB0byBzdG9yZVxuICAvLyB0aGUgdmFsdWVzIG9mIHRoZSBmb3JtIGFuZCByZWdpc3RlciBjaGlsZCBpbnB1dHNcbiAgY29tcG9uZW50V2lsbE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgdGhpcy5pbnB1dHMgPSBbXTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy52YWxpZGF0ZUZvcm0oKTtcbiAgfSxcblxuICBjb21wb25lbnRXaWxsVXBkYXRlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVXBkYXRlKCkge1xuICAgIC8vIEtlZXAgYSByZWZlcmVuY2UgdG8gaW5wdXQgbmFtZXMgYmVmb3JlIGZvcm0gdXBkYXRlcyxcbiAgICAvLyB0byBjaGVjayBpZiBpbnB1dHMgaGFzIGNoYW5nZWQgYWZ0ZXIgcmVuZGVyXG4gICAgdGhpcy5wcmV2SW5wdXROYW1lcyA9IHRoaXMuaW5wdXRzLm1hcChmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICByZXR1cm4gY29tcG9uZW50LnByb3BzLm5hbWU7XG4gICAgfSk7XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG5cbiAgICBpZiAodGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzICYmIF90eXBlb2YodGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzKSA9PT0gJ29iamVjdCcgJiYgT2JqZWN0LmtleXModGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzKS5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLnNldElucHV0VmFsaWRhdGlvbkVycm9ycyh0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnMpO1xuICAgIH1cblxuICAgIHZhciBuZXdJbnB1dE5hbWVzID0gdGhpcy5pbnB1dHMubWFwKGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgIHJldHVybiBjb21wb25lbnQucHJvcHMubmFtZTtcbiAgICB9KTtcbiAgICBpZiAodXRpbHMuYXJyYXlzRGlmZmVyKHRoaXMucHJldklucHV0TmFtZXMsIG5ld0lucHV0TmFtZXMpKSB7XG4gICAgICB0aGlzLnZhbGlkYXRlRm9ybSgpO1xuICAgIH1cbiAgfSxcblxuICAvLyBBbGxvdyByZXNldHRpbmcgdG8gc3BlY2lmaWVkIGRhdGFcbiAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KGRhdGEpIHtcbiAgICB0aGlzLnNldEZvcm1QcmlzdGluZSh0cnVlKTtcbiAgICB0aGlzLnJlc2V0TW9kZWwoZGF0YSk7XG4gIH0sXG5cbiAgLy8gVXBkYXRlIG1vZGVsLCBzdWJtaXQgdG8gdXJsIHByb3AgYW5kIHNlbmQgdGhlIG1vZGVsXG4gIHN1Ym1pdDogZnVuY3Rpb24gc3VibWl0KGV2ZW50KSB7XG5cbiAgICBldmVudCAmJiBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgLy8gVHJpZ2dlciBmb3JtIGFzIG5vdCBwcmlzdGluZS5cbiAgICAvLyBJZiBhbnkgaW5wdXRzIGhhdmUgbm90IGJlZW4gdG91Y2hlZCB5ZXQgdGhpcyB3aWxsIG1ha2UgdGhlbSBkaXJ0eVxuICAgIC8vIHNvIHZhbGlkYXRpb24gYmVjb21lcyB2aXNpYmxlIChpZiBiYXNlZCBvbiBpc1ByaXN0aW5lKVxuICAgIHRoaXMuc2V0Rm9ybVByaXN0aW5lKGZhbHNlKTtcbiAgICB2YXIgbW9kZWwgPSB0aGlzLmdldE1vZGVsKCk7XG4gICAgdGhpcy5wcm9wcy5vblN1Ym1pdChtb2RlbCwgdGhpcy5yZXNldE1vZGVsLCB0aGlzLnVwZGF0ZUlucHV0c1dpdGhFcnJvcik7XG4gICAgdGhpcy5zdGF0ZS5pc1ZhbGlkID8gdGhpcy5wcm9wcy5vblZhbGlkU3VibWl0KG1vZGVsLCB0aGlzLnJlc2V0TW9kZWwsIHRoaXMudXBkYXRlSW5wdXRzV2l0aEVycm9yKSA6IHRoaXMucHJvcHMub25JbnZhbGlkU3VibWl0KG1vZGVsLCB0aGlzLnJlc2V0TW9kZWwsIHRoaXMudXBkYXRlSW5wdXRzV2l0aEVycm9yKTtcbiAgfSxcblxuICBtYXBNb2RlbDogZnVuY3Rpb24gbWFwTW9kZWwobW9kZWwpIHtcblxuICAgIGlmICh0aGlzLnByb3BzLm1hcHBpbmcpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLm1hcHBpbmcobW9kZWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZm9ybURhdGFUb09iamVjdC50b09iaihPYmplY3Qua2V5cyhtb2RlbCkucmVkdWNlKGZ1bmN0aW9uIChtYXBwZWRNb2RlbCwga2V5KSB7XG5cbiAgICAgICAgdmFyIGtleUFycmF5ID0ga2V5LnNwbGl0KCcuJyk7XG4gICAgICAgIHZhciBiYXNlID0gbWFwcGVkTW9kZWw7XG4gICAgICAgIHdoaWxlIChrZXlBcnJheS5sZW5ndGgpIHtcbiAgICAgICAgICB2YXIgY3VycmVudEtleSA9IGtleUFycmF5LnNoaWZ0KCk7XG4gICAgICAgICAgYmFzZSA9IGJhc2VbY3VycmVudEtleV0gPSBrZXlBcnJheS5sZW5ndGggPyBiYXNlW2N1cnJlbnRLZXldIHx8IHt9IDogbW9kZWxba2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtYXBwZWRNb2RlbDtcbiAgICAgIH0sIHt9KSk7XG4gICAgfVxuICB9LFxuXG4gIGdldE1vZGVsOiBmdW5jdGlvbiBnZXRNb2RlbCgpIHtcbiAgICB2YXIgY3VycmVudFZhbHVlcyA9IHRoaXMuZ2V0Q3VycmVudFZhbHVlcygpO1xuICAgIHJldHVybiB0aGlzLm1hcE1vZGVsKGN1cnJlbnRWYWx1ZXMpO1xuICB9LFxuXG4gIC8vIFJlc2V0IGVhY2gga2V5IGluIHRoZSBtb2RlbCB0byB0aGUgb3JpZ2luYWwgLyBpbml0aWFsIC8gc3BlY2lmaWVkIHZhbHVlXG4gIHJlc2V0TW9kZWw6IGZ1bmN0aW9uIHJlc2V0TW9kZWwoZGF0YSkge1xuICAgIHRoaXMuaW5wdXRzLmZvckVhY2goZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgdmFyIG5hbWUgPSBjb21wb25lbnQucHJvcHMubmFtZTtcbiAgICAgIGlmIChkYXRhICYmIGRhdGEuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgY29tcG9uZW50LnNldFZhbHVlKGRhdGFbbmFtZV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29tcG9uZW50LnJlc2V0VmFsdWUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLnZhbGlkYXRlRm9ybSgpO1xuICB9LFxuXG4gIHNldElucHV0VmFsaWRhdGlvbkVycm9yczogZnVuY3Rpb24gc2V0SW5wdXRWYWxpZGF0aW9uRXJyb3JzKGVycm9ycykge1xuICAgIHRoaXMuaW5wdXRzLmZvckVhY2goZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgdmFyIG5hbWUgPSBjb21wb25lbnQucHJvcHMubmFtZTtcbiAgICAgIHZhciBhcmdzID0gW3tcbiAgICAgICAgX2lzVmFsaWQ6ICEobmFtZSBpbiBlcnJvcnMpLFxuICAgICAgICBfdmFsaWRhdGlvbkVycm9yOiB0eXBlb2YgZXJyb3JzW25hbWVdID09PSAnc3RyaW5nJyA/IFtlcnJvcnNbbmFtZV1dIDogZXJyb3JzW25hbWVdXG4gICAgICB9XTtcbiAgICAgIGNvbXBvbmVudC5zZXRTdGF0ZS5hcHBseShjb21wb25lbnQsIGFyZ3MpO1xuICAgIH0pO1xuICB9LFxuXG4gIC8vIENoZWNrcyBpZiB0aGUgdmFsdWVzIGhhdmUgY2hhbmdlZCBmcm9tIHRoZWlyIGluaXRpYWwgdmFsdWVcbiAgaXNDaGFuZ2VkOiBmdW5jdGlvbiBpc0NoYW5nZWQoKSB7XG4gICAgcmV0dXJuICF1dGlscy5pc1NhbWUodGhpcy5nZXRQcmlzdGluZVZhbHVlcygpLCB0aGlzLmdldEN1cnJlbnRWYWx1ZXMoKSk7XG4gIH0sXG5cbiAgZ2V0UHJpc3RpbmVWYWx1ZXM6IGZ1bmN0aW9uIGdldFByaXN0aW5lVmFsdWVzKCkge1xuICAgIHJldHVybiB0aGlzLmlucHV0cy5yZWR1Y2UoZnVuY3Rpb24gKGRhdGEsIGNvbXBvbmVudCkge1xuICAgICAgdmFyIG5hbWUgPSBjb21wb25lbnQucHJvcHMubmFtZTtcbiAgICAgIGRhdGFbbmFtZV0gPSBjb21wb25lbnQucHJvcHMudmFsdWU7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9LCB7fSk7XG4gIH0sXG5cbiAgLy8gR28gdGhyb3VnaCBlcnJvcnMgZnJvbSBzZXJ2ZXIgYW5kIGdyYWIgdGhlIGNvbXBvbmVudHNcbiAgLy8gc3RvcmVkIGluIHRoZSBpbnB1dHMgbWFwLiBDaGFuZ2UgdGhlaXIgc3RhdGUgdG8gaW52YWxpZFxuICAvLyBhbmQgc2V0IHRoZSBzZXJ2ZXJFcnJvciBtZXNzYWdlXG4gIHVwZGF0ZUlucHV0c1dpdGhFcnJvcjogZnVuY3Rpb24gdXBkYXRlSW5wdXRzV2l0aEVycm9yKGVycm9ycykge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgT2JqZWN0LmtleXMoZXJyb3JzKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lLCBpbmRleCkge1xuICAgICAgdmFyIGNvbXBvbmVudCA9IHV0aWxzLmZpbmQoX3RoaXMyLmlucHV0cywgZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgICByZXR1cm4gY29tcG9uZW50LnByb3BzLm5hbWUgPT09IG5hbWU7XG4gICAgICB9KTtcbiAgICAgIGlmICghY29tcG9uZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignWW91IGFyZSB0cnlpbmcgdG8gdXBkYXRlIGFuIGlucHV0IHRoYXQgZG9lcyBub3QgZXhpc3QuICcgKyAnVmVyaWZ5IGVycm9ycyBvYmplY3Qgd2l0aCBpbnB1dCBuYW1lcy4gJyArIEpTT04uc3RyaW5naWZ5KGVycm9ycykpO1xuICAgICAgfVxuICAgICAgdmFyIGFyZ3MgPSBbe1xuICAgICAgICBfaXNWYWxpZDogX3RoaXMyLnByb3BzLnByZXZlbnRFeHRlcm5hbEludmFsaWRhdGlvbiB8fCBmYWxzZSxcbiAgICAgICAgX2V4dGVybmFsRXJyb3I6IHR5cGVvZiBlcnJvcnNbbmFtZV0gPT09ICdzdHJpbmcnID8gW2Vycm9yc1tuYW1lXV0gOiBlcnJvcnNbbmFtZV1cbiAgICAgIH1dO1xuICAgICAgY29tcG9uZW50LnNldFN0YXRlLmFwcGx5KGNvbXBvbmVudCwgYXJncyk7XG4gICAgfSk7XG4gIH0sXG5cbiAgaXNGb3JtRGlzYWJsZWQ6IGZ1bmN0aW9uIGlzRm9ybURpc2FibGVkKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmRpc2FibGVkO1xuICB9LFxuXG4gIGdldEN1cnJlbnRWYWx1ZXM6IGZ1bmN0aW9uIGdldEN1cnJlbnRWYWx1ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5wdXRzLnJlZHVjZShmdW5jdGlvbiAoZGF0YSwgY29tcG9uZW50KSB7XG4gICAgICB2YXIgbmFtZSA9IGNvbXBvbmVudC5wcm9wcy5uYW1lO1xuICAgICAgZGF0YVtuYW1lXSA9IGNvbXBvbmVudC5zdGF0ZS5fdmFsdWU7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9LCB7fSk7XG4gIH0sXG5cbiAgc2V0Rm9ybVByaXN0aW5lOiBmdW5jdGlvbiBzZXRGb3JtUHJpc3RpbmUoaXNQcmlzdGluZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgX2Zvcm1TdWJtaXR0ZWQ6ICFpc1ByaXN0aW5lXG4gICAgfSk7XG5cbiAgICAvLyBJdGVyYXRlIHRocm91Z2ggZWFjaCBjb21wb25lbnQgYW5kIHNldCBpdCBhcyBwcmlzdGluZVxuICAgIC8vIG9yIFwiZGlydHlcIi5cbiAgICB0aGlzLmlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChjb21wb25lbnQsIGluZGV4KSB7XG4gICAgICBjb21wb25lbnQuc2V0U3RhdGUoe1xuICAgICAgICBfZm9ybVN1Ym1pdHRlZDogIWlzUHJpc3RpbmUsXG4gICAgICAgIF9pc1ByaXN0aW5lOiBpc1ByaXN0aW5lXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSxcblxuICAvLyBVc2UgdGhlIGJpbmRlZCB2YWx1ZXMgYW5kIHRoZSBhY3R1YWwgaW5wdXQgdmFsdWUgdG9cbiAgLy8gdmFsaWRhdGUgdGhlIGlucHV0IGFuZCBzZXQgaXRzIHN0YXRlLiBUaGVuIGNoZWNrIHRoZVxuICAvLyBzdGF0ZSBvZiB0aGUgZm9ybSBpdHNlbGZcbiAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKGNvbXBvbmVudCkge1xuXG4gICAgLy8gVHJpZ2dlciBvbkNoYW5nZVxuICAgIGlmICh0aGlzLnN0YXRlLmNhbkNoYW5nZSkge1xuICAgICAgdGhpcy5wcm9wcy5vbkNoYW5nZSh0aGlzLmdldEN1cnJlbnRWYWx1ZXMoKSwgdGhpcy5pc0NoYW5nZWQoKSk7XG4gICAgfVxuXG4gICAgdmFyIHZhbGlkYXRpb24gPSB0aGlzLnJ1blZhbGlkYXRpb24oY29tcG9uZW50KTtcbiAgICAvLyBSdW4gdGhyb3VnaCB0aGUgdmFsaWRhdGlvbnMsIHNwbGl0IHRoZW0gdXAgYW5kIGNhbGxcbiAgICAvLyB0aGUgdmFsaWRhdG9yIElGIHRoZXJlIGlzIGEgdmFsdWUgb3IgaXQgaXMgcmVxdWlyZWRcbiAgICBjb21wb25lbnQuc2V0U3RhdGUoe1xuICAgICAgX2lzVmFsaWQ6IHZhbGlkYXRpb24uaXNWYWxpZCxcbiAgICAgIF9pc1JlcXVpcmVkOiB2YWxpZGF0aW9uLmlzUmVxdWlyZWQsXG4gICAgICBfdmFsaWRhdGlvbkVycm9yOiB2YWxpZGF0aW9uLmVycm9yLFxuICAgICAgX2V4dGVybmFsRXJyb3I6IG51bGxcbiAgICB9LCB0aGlzLnZhbGlkYXRlRm9ybSk7XG4gIH0sXG5cbiAgLy8gQ2hlY2tzIHZhbGlkYXRpb24gb24gY3VycmVudCB2YWx1ZSBvciBhIHBhc3NlZCB2YWx1ZVxuICBydW5WYWxpZGF0aW9uOiBmdW5jdGlvbiBydW5WYWxpZGF0aW9uKGNvbXBvbmVudCwgdmFsdWUpIHtcblxuICAgIHZhciBjdXJyZW50VmFsdWVzID0gdGhpcy5nZXRDdXJyZW50VmFsdWVzKCk7XG4gICAgdmFyIHZhbGlkYXRpb25FcnJvcnMgPSBjb21wb25lbnQucHJvcHMudmFsaWRhdGlvbkVycm9ycztcbiAgICB2YXIgdmFsaWRhdGlvbkVycm9yID0gY29tcG9uZW50LnByb3BzLnZhbGlkYXRpb25FcnJvcjtcbiAgICB2YWx1ZSA9IGFyZ3VtZW50cy5sZW5ndGggPT09IDIgPyB2YWx1ZSA6IGNvbXBvbmVudC5zdGF0ZS5fdmFsdWU7XG5cbiAgICB2YXIgdmFsaWRhdGlvblJlc3VsdHMgPSB0aGlzLnJ1blJ1bGVzKHZhbHVlLCBjdXJyZW50VmFsdWVzLCBjb21wb25lbnQuX3ZhbGlkYXRpb25zKTtcbiAgICB2YXIgcmVxdWlyZWRSZXN1bHRzID0gdGhpcy5ydW5SdWxlcyh2YWx1ZSwgY3VycmVudFZhbHVlcywgY29tcG9uZW50Ll9yZXF1aXJlZFZhbGlkYXRpb25zKTtcblxuICAgIC8vIHRoZSBjb21wb25lbnQgZGVmaW5lcyBhbiBleHBsaWNpdCB2YWxpZGF0ZSBmdW5jdGlvblxuICAgIGlmICh0eXBlb2YgY29tcG9uZW50LnZhbGlkYXRlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHZhbGlkYXRpb25SZXN1bHRzLmZhaWxlZCA9IGNvbXBvbmVudC52YWxpZGF0ZSgpID8gW10gOiBbJ2ZhaWxlZCddO1xuICAgIH1cblxuICAgIHZhciBpc1JlcXVpcmVkID0gT2JqZWN0LmtleXMoY29tcG9uZW50Ll9yZXF1aXJlZFZhbGlkYXRpb25zKS5sZW5ndGggPyAhIXJlcXVpcmVkUmVzdWx0cy5zdWNjZXNzLmxlbmd0aCA6IGZhbHNlO1xuICAgIHZhciBpc1ZhbGlkID0gIXZhbGlkYXRpb25SZXN1bHRzLmZhaWxlZC5sZW5ndGggJiYgISh0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnMgJiYgdGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzW2NvbXBvbmVudC5wcm9wcy5uYW1lXSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXNSZXF1aXJlZDogaXNSZXF1aXJlZCxcbiAgICAgIGlzVmFsaWQ6IGlzUmVxdWlyZWQgPyBmYWxzZSA6IGlzVmFsaWQsXG4gICAgICBlcnJvcjogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIGlmIChpc1ZhbGlkICYmICFpc1JlcXVpcmVkKSB7XG4gICAgICAgICAgcmV0dXJuIGVtcHR5QXJyYXk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmFsaWRhdGlvblJlc3VsdHMuZXJyb3JzLmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybiB2YWxpZGF0aW9uUmVzdWx0cy5lcnJvcnM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzICYmIHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9yc1tjb21wb25lbnQucHJvcHMubmFtZV0pIHtcbiAgICAgICAgICByZXR1cm4gdHlwZW9mIHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9yc1tjb21wb25lbnQucHJvcHMubmFtZV0gPT09ICdzdHJpbmcnID8gW3RoaXMucHJvcHMudmFsaWRhdGlvbkVycm9yc1tjb21wb25lbnQucHJvcHMubmFtZV1dIDogdGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzW2NvbXBvbmVudC5wcm9wcy5uYW1lXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1JlcXVpcmVkKSB7XG4gICAgICAgICAgdmFyIGVycm9yID0gdmFsaWRhdGlvbkVycm9yc1tyZXF1aXJlZFJlc3VsdHMuc3VjY2Vzc1swXV07XG4gICAgICAgICAgcmV0dXJuIGVycm9yID8gW2Vycm9yXSA6IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmFsaWRhdGlvblJlc3VsdHMuZmFpbGVkLmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybiB2YWxpZGF0aW9uUmVzdWx0cy5mYWlsZWQubWFwKGZ1bmN0aW9uIChmYWlsZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWxpZGF0aW9uRXJyb3JzW2ZhaWxlZF0gPyB2YWxpZGF0aW9uRXJyb3JzW2ZhaWxlZF0gOiB2YWxpZGF0aW9uRXJyb3I7XG4gICAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uICh4LCBwb3MsIGFycikge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIGR1cGxpY2F0ZXNcbiAgICAgICAgICAgIHJldHVybiBhcnIuaW5kZXhPZih4KSA9PT0gcG9zO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LmNhbGwodGhpcylcbiAgICB9O1xuICB9LFxuXG4gIHJ1blJ1bGVzOiBmdW5jdGlvbiBydW5SdWxlcyh2YWx1ZSwgY3VycmVudFZhbHVlcywgdmFsaWRhdGlvbnMpIHtcblxuICAgIHZhciByZXN1bHRzID0ge1xuICAgICAgZXJyb3JzOiBbXSxcbiAgICAgIGZhaWxlZDogW10sXG4gICAgICBzdWNjZXNzOiBbXVxuICAgIH07XG4gICAgaWYgKE9iamVjdC5rZXlzKHZhbGlkYXRpb25zKS5sZW5ndGgpIHtcbiAgICAgIE9iamVjdC5rZXlzKHZhbGlkYXRpb25zKS5mb3JFYWNoKGZ1bmN0aW9uICh2YWxpZGF0aW9uTWV0aG9kKSB7XG5cbiAgICAgICAgaWYgKHZhbGlkYXRpb25SdWxlc1t2YWxpZGF0aW9uTWV0aG9kXSAmJiB0eXBlb2YgdmFsaWRhdGlvbnNbdmFsaWRhdGlvbk1ldGhvZF0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm1zeSBkb2VzIG5vdCBhbGxvdyB5b3UgdG8gb3ZlcnJpZGUgZGVmYXVsdCB2YWxpZGF0aW9uczogJyArIHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF2YWxpZGF0aW9uUnVsZXNbdmFsaWRhdGlvbk1ldGhvZF0gJiYgdHlwZW9mIHZhbGlkYXRpb25zW3ZhbGlkYXRpb25NZXRob2RdICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3Jtc3kgZG9lcyBub3QgaGF2ZSB0aGUgdmFsaWRhdGlvbiBydWxlOiAnICsgdmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIHZhbGlkYXRpb25zW3ZhbGlkYXRpb25NZXRob2RdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdmFyIHZhbGlkYXRpb24gPSB2YWxpZGF0aW9uc1t2YWxpZGF0aW9uTWV0aG9kXShjdXJyZW50VmFsdWVzLCB2YWx1ZSk7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2YWxpZGF0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmVzdWx0cy5lcnJvcnMucHVzaCh2YWxpZGF0aW9uKTtcbiAgICAgICAgICAgIHJlc3VsdHMuZmFpbGVkLnB1c2godmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgICAgfSBlbHNlIGlmICghdmFsaWRhdGlvbikge1xuICAgICAgICAgICAgcmVzdWx0cy5mYWlsZWQucHVzaCh2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWxpZGF0aW9uc1t2YWxpZGF0aW9uTWV0aG9kXSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHZhciB2YWxpZGF0aW9uID0gdmFsaWRhdGlvblJ1bGVzW3ZhbGlkYXRpb25NZXRob2RdKGN1cnJlbnRWYWx1ZXMsIHZhbHVlLCB2YWxpZGF0aW9uc1t2YWxpZGF0aW9uTWV0aG9kXSk7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2YWxpZGF0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmVzdWx0cy5lcnJvcnMucHVzaCh2YWxpZGF0aW9uKTtcbiAgICAgICAgICAgIHJlc3VsdHMuZmFpbGVkLnB1c2godmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgICAgfSBlbHNlIGlmICghdmFsaWRhdGlvbikge1xuICAgICAgICAgICAgcmVzdWx0cy5mYWlsZWQucHVzaCh2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0cy5zdWNjZXNzLnB1c2godmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHRzLnN1Y2Nlc3MucHVzaCh2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzO1xuICB9LFxuXG4gIC8vIFZhbGlkYXRlIHRoZSBmb3JtIGJ5IGdvaW5nIHRocm91Z2ggYWxsIGNoaWxkIGlucHV0IGNvbXBvbmVudHNcbiAgLy8gYW5kIGNoZWNrIHRoZWlyIHN0YXRlXG4gIHZhbGlkYXRlRm9ybTogZnVuY3Rpb24gdmFsaWRhdGVGb3JtKCkge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgLy8gV2UgbmVlZCBhIGNhbGxiYWNrIGFzIHdlIGFyZSB2YWxpZGF0aW5nIGFsbCBpbnB1dHMgYWdhaW4uIFRoaXMgd2lsbFxuICAgIC8vIHJ1biB3aGVuIHRoZSBsYXN0IGNvbXBvbmVudCBoYXMgc2V0IGl0cyBzdGF0ZVxuICAgIHZhciBvblZhbGlkYXRpb25Db21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhbGxJc1ZhbGlkID0gdGhpcy5pbnB1dHMuZXZlcnkoZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgICByZXR1cm4gY29tcG9uZW50LnN0YXRlLl9pc1ZhbGlkO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBpc1ZhbGlkOiBhbGxJc1ZhbGlkXG4gICAgICB9KTtcblxuICAgICAgaWYgKGFsbElzVmFsaWQpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vblZhbGlkKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnByb3BzLm9uSW52YWxpZCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBUZWxsIHRoZSBmb3JtIHRoYXQgaXQgY2FuIHN0YXJ0IHRvIHRyaWdnZXIgY2hhbmdlIGV2ZW50c1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGNhbkNoYW5nZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfS5iaW5kKHRoaXMpO1xuXG4gICAgLy8gUnVuIHZhbGlkYXRpb24gYWdhaW4gaW4gY2FzZSBhZmZlY3RlZCBieSBvdGhlciBpbnB1dHMuIFRoZVxuICAgIC8vIGxhc3QgY29tcG9uZW50IHZhbGlkYXRlZCB3aWxsIHJ1biB0aGUgb25WYWxpZGF0aW9uQ29tcGxldGUgY2FsbGJhY2tcbiAgICB0aGlzLmlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChjb21wb25lbnQsIGluZGV4KSB7XG4gICAgICB2YXIgdmFsaWRhdGlvbiA9IF90aGlzMy5ydW5WYWxpZGF0aW9uKGNvbXBvbmVudCk7XG4gICAgICBpZiAodmFsaWRhdGlvbi5pc1ZhbGlkICYmIGNvbXBvbmVudC5zdGF0ZS5fZXh0ZXJuYWxFcnJvcikge1xuICAgICAgICB2YWxpZGF0aW9uLmlzVmFsaWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGNvbXBvbmVudC5zZXRTdGF0ZSh7XG4gICAgICAgIF9pc1ZhbGlkOiB2YWxpZGF0aW9uLmlzVmFsaWQsXG4gICAgICAgIF9pc1JlcXVpcmVkOiB2YWxpZGF0aW9uLmlzUmVxdWlyZWQsXG4gICAgICAgIF92YWxpZGF0aW9uRXJyb3I6IHZhbGlkYXRpb24uZXJyb3IsXG4gICAgICAgIF9leHRlcm5hbEVycm9yOiAhdmFsaWRhdGlvbi5pc1ZhbGlkICYmIGNvbXBvbmVudC5zdGF0ZS5fZXh0ZXJuYWxFcnJvciA/IGNvbXBvbmVudC5zdGF0ZS5fZXh0ZXJuYWxFcnJvciA6IG51bGxcbiAgICAgIH0sIGluZGV4ID09PSBfdGhpczMuaW5wdXRzLmxlbmd0aCAtIDEgPyBvblZhbGlkYXRpb25Db21wbGV0ZSA6IG51bGwpO1xuICAgIH0pO1xuXG4gICAgLy8gSWYgdGhlcmUgYXJlIG5vIGlucHV0cywgc2V0IHN0YXRlIHdoZXJlIGZvcm0gaXMgcmVhZHkgdG8gdHJpZ2dlclxuICAgIC8vIGNoYW5nZSBldmVudC4gTmV3IGlucHV0cyBtaWdodCBiZSBhZGRlZCBsYXRlclxuICAgIGlmICghdGhpcy5pbnB1dHMubGVuZ3RoKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgY2FuQ2hhbmdlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gTWV0aG9kIHB1dCBvbiBlYWNoIGlucHV0IGNvbXBvbmVudCB0byByZWdpc3RlclxuICAvLyBpdHNlbGYgdG8gdGhlIGZvcm1cbiAgYXR0YWNoVG9Gb3JtOiBmdW5jdGlvbiBhdHRhY2hUb0Zvcm0oY29tcG9uZW50KSB7XG5cbiAgICBpZiAodGhpcy5pbnB1dHMuaW5kZXhPZihjb21wb25lbnQpID09PSAtMSkge1xuICAgICAgdGhpcy5pbnB1dHMucHVzaChjb21wb25lbnQpO1xuICAgIH1cblxuICAgIHRoaXMudmFsaWRhdGUoY29tcG9uZW50KTtcbiAgfSxcblxuICAvLyBNZXRob2QgcHV0IG9uIGVhY2ggaW5wdXQgY29tcG9uZW50IHRvIHVucmVnaXN0ZXJcbiAgLy8gaXRzZWxmIGZyb20gdGhlIGZvcm1cbiAgZGV0YWNoRnJvbUZvcm06IGZ1bmN0aW9uIGRldGFjaEZyb21Gb3JtKGNvbXBvbmVudCkge1xuICAgIHZhciBjb21wb25lbnRQb3MgPSB0aGlzLmlucHV0cy5pbmRleE9mKGNvbXBvbmVudCk7XG5cbiAgICBpZiAoY29tcG9uZW50UG9zICE9PSAtMSkge1xuICAgICAgdGhpcy5pbnB1dHMgPSB0aGlzLmlucHV0cy5zbGljZSgwLCBjb21wb25lbnRQb3MpLmNvbmNhdCh0aGlzLmlucHV0cy5zbGljZShjb21wb25lbnRQb3MgKyAxKSk7XG4gICAgfVxuXG4gICAgdGhpcy52YWxpZGF0ZUZvcm0oKTtcbiAgfSxcbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgIG1hcHBpbmcgPSBfcHJvcHMubWFwcGluZyxcbiAgICAgICAgdmFsaWRhdGlvbkVycm9ycyA9IF9wcm9wcy52YWxpZGF0aW9uRXJyb3JzLFxuICAgICAgICBvblN1Ym1pdCA9IF9wcm9wcy5vblN1Ym1pdCxcbiAgICAgICAgb25WYWxpZCA9IF9wcm9wcy5vblZhbGlkLFxuICAgICAgICBvblZhbGlkU3VibWl0ID0gX3Byb3BzLm9uVmFsaWRTdWJtaXQsXG4gICAgICAgIG9uSW52YWxpZCA9IF9wcm9wcy5vbkludmFsaWQsXG4gICAgICAgIG9uSW52YWxpZFN1Ym1pdCA9IF9wcm9wcy5vbkludmFsaWRTdWJtaXQsXG4gICAgICAgIG9uQ2hhbmdlID0gX3Byb3BzLm9uQ2hhbmdlLFxuICAgICAgICByZXNldCA9IF9wcm9wcy5yZXNldCxcbiAgICAgICAgcHJldmVudEV4dGVybmFsSW52YWxpZGF0aW9uID0gX3Byb3BzLnByZXZlbnRFeHRlcm5hbEludmFsaWRhdGlvbixcbiAgICAgICAgb25TdWNjZXNzID0gX3Byb3BzLm9uU3VjY2VzcyxcbiAgICAgICAgb25FcnJvciA9IF9wcm9wcy5vbkVycm9yLFxuICAgICAgICBub25Gb3Jtc3lQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcHJvcHMsIFsnbWFwcGluZycsICd2YWxpZGF0aW9uRXJyb3JzJywgJ29uU3VibWl0JywgJ29uVmFsaWQnLCAnb25WYWxpZFN1Ym1pdCcsICdvbkludmFsaWQnLCAnb25JbnZhbGlkU3VibWl0JywgJ29uQ2hhbmdlJywgJ3Jlc2V0JywgJ3ByZXZlbnRFeHRlcm5hbEludmFsaWRhdGlvbicsICdvblN1Y2Nlc3MnLCAnb25FcnJvciddKTtcblxuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgJ2Zvcm0nLFxuICAgICAgX2V4dGVuZHMoe30sIG5vbkZvcm1zeVByb3BzLCB7IG9uU3VibWl0OiB0aGlzLnN1Ym1pdCB9KSxcbiAgICAgIHRoaXMucHJvcHMuY2hpbGRyZW5cbiAgICApO1xuICB9XG59KTtcblxuaWYgKCFnbG9iYWwuZXhwb3J0cyAmJiAhZ2xvYmFsLm1vZHVsZSAmJiAoIWdsb2JhbC5kZWZpbmUgfHwgIWdsb2JhbC5kZWZpbmUuYW1kKSkge1xuICBnbG9iYWwuRm9ybXN5ID0gRm9ybXN5O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEZvcm1zeTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2Zvcm1zeS1yZWFjdC9saWIvbWFpbi5qcyIsIid1c2Ugc3RyaWN0JztcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYXJyYXlzRGlmZmVyOiBmdW5jdGlvbiBhcnJheXNEaWZmZXIoYSwgYikge1xuICAgIHZhciBpc0RpZmZlcmVudCA9IGZhbHNlO1xuICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHtcbiAgICAgIGlzRGlmZmVyZW50ID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgYS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTYW1lKGl0ZW0sIGJbaW5kZXhdKSkge1xuICAgICAgICAgIGlzRGlmZmVyZW50ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSwgdGhpcyk7XG4gICAgfVxuICAgIHJldHVybiBpc0RpZmZlcmVudDtcbiAgfSxcblxuICBvYmplY3RzRGlmZmVyOiBmdW5jdGlvbiBvYmplY3RzRGlmZmVyKGEsIGIpIHtcbiAgICB2YXIgaXNEaWZmZXJlbnQgPSBmYWxzZTtcbiAgICBpZiAoT2JqZWN0LmtleXMoYSkubGVuZ3RoICE9PSBPYmplY3Qua2V5cyhiKS5sZW5ndGgpIHtcbiAgICAgIGlzRGlmZmVyZW50ID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgT2JqZWN0LmtleXMoYSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGlmICghdGhpcy5pc1NhbWUoYVtrZXldLCBiW2tleV0pKSB7XG4gICAgICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzKTtcbiAgICB9XG4gICAgcmV0dXJuIGlzRGlmZmVyZW50O1xuICB9LFxuXG4gIGlzU2FtZTogZnVuY3Rpb24gaXNTYW1lKGEsIGIpIHtcbiAgICBpZiAoKHR5cGVvZiBhID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihhKSkgIT09ICh0eXBlb2YgYiA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoYikpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGEpICYmIEFycmF5LmlzQXJyYXkoYikpIHtcbiAgICAgIHJldHVybiAhdGhpcy5hcnJheXNEaWZmZXIoYSwgYik7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIGEudG9TdHJpbmcoKSA9PT0gYi50b1N0cmluZygpO1xuICAgIH0gZWxzZSBpZiAoKHR5cGVvZiBhID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihhKSkgPT09ICdvYmplY3QnICYmIGEgIT09IG51bGwgJiYgYiAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuICF0aGlzLm9iamVjdHNEaWZmZXIoYSwgYik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGEgPT09IGI7XG4gIH0sXG5cbiAgZmluZDogZnVuY3Rpb24gZmluZChjb2xsZWN0aW9uLCBmbikge1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gY29sbGVjdGlvbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gY29sbGVjdGlvbltpXTtcbiAgICAgIGlmIChmbihpdGVtKSkge1xuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9mb3Jtc3ktcmVhY3QvbGliL3V0aWxzLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2lzRXhpc3R5ID0gZnVuY3Rpb24gX2lzRXhpc3R5KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkO1xufTtcblxudmFyIGlzRW1wdHkgPSBmdW5jdGlvbiBpc0VtcHR5KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PT0gJyc7XG59O1xuXG52YXIgdmFsaWRhdGlvbnMgPSB7XG4gIGlzRGVmYXVsdFJlcXVpcmVkVmFsdWU6IGZ1bmN0aW9uIGlzRGVmYXVsdFJlcXVpcmVkVmFsdWUodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSAnJztcbiAgfSxcbiAgaXNFeGlzdHk6IGZ1bmN0aW9uIGlzRXhpc3R5KHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gX2lzRXhpc3R5KHZhbHVlKTtcbiAgfSxcbiAgbWF0Y2hSZWdleHA6IGZ1bmN0aW9uIG1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIHJlZ2V4cCkge1xuICAgIHJldHVybiAhX2lzRXhpc3R5KHZhbHVlKSB8fCBpc0VtcHR5KHZhbHVlKSB8fCByZWdleHAudGVzdCh2YWx1ZSk7XG4gIH0sXG4gIGlzVW5kZWZpbmVkOiBmdW5jdGlvbiBpc1VuZGVmaW5lZCh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQ7XG4gIH0sXG4gIGlzRW1wdHlTdHJpbmc6IGZ1bmN0aW9uIGlzRW1wdHlTdHJpbmcodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiBpc0VtcHR5KHZhbHVlKTtcbiAgfSxcbiAgaXNFbWFpbDogZnVuY3Rpb24gaXNFbWFpbCh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eKCgoW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKyhcXC4oW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKykqKXwoKFxceDIyKSgoKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KChbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHg3Zl18XFx4MjF8W1xceDIzLVxceDViXXxbXFx4NWQtXFx4N2VdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoXFxcXChbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGQtXFx4N2ZdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpKSooKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KFxceDIyKSkpQCgoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4pKygoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSQvaSk7XG4gIH0sXG4gIGlzVXJsOiBmdW5jdGlvbiBpc1VybCh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eKGh0dHBzP3xzP2Z0cCk6XFwvXFwvKCgoKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDopKkApPygoKFxcZHxbMS05XVxcZHwxXFxkXFxkfDJbMC00XVxcZHwyNVswLTVdKVxcLihcXGR8WzEtOV1cXGR8MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC01XSlcXC4oXFxkfFsxLTldXFxkfDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNV0pXFwuKFxcZHxbMS05XVxcZHwxXFxkXFxkfDJbMC00XVxcZHwyNVswLTVdKSl8KCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKVxcLikrKChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuPykoOlxcZCopPykoXFwvKCgoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OnxAKSsoXFwvKChbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoJVtcXGRhLWZdezJ9KXxbIVxcJCYnXFwoXFwpXFwqXFwrLDs9XXw6fEApKikqKT8pPyhcXD8oKChbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoJVtcXGRhLWZdezJ9KXxbIVxcJCYnXFwoXFwpXFwqXFwrLDs9XXw6fEApfFtcXHVFMDAwLVxcdUY4RkZdfFxcL3xcXD8pKik/KCMoKChbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoJVtcXGRhLWZdezJ9KXxbIVxcJCYnXFwoXFwpXFwqXFwrLDs9XXw6fEApfFxcL3xcXD8pKik/JC9pKTtcbiAgfSxcbiAgaXNUcnVlOiBmdW5jdGlvbiBpc1RydWUodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gdHJ1ZTtcbiAgfSxcbiAgaXNGYWxzZTogZnVuY3Rpb24gaXNGYWxzZSh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSBmYWxzZTtcbiAgfSxcbiAgaXNOdW1lcmljOiBmdW5jdGlvbiBpc051bWVyaWModmFsdWVzLCB2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eWy0rXT8oPzpcXGQqWy5dKT9cXGQrJC8pO1xuICB9LFxuICBpc0FscGhhOiBmdW5jdGlvbiBpc0FscGhhKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL15bQS1aXSskL2kpO1xuICB9LFxuICBpc0FscGhhbnVtZXJpYzogZnVuY3Rpb24gaXNBbHBoYW51bWVyaWModmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXlswLTlBLVpdKyQvaSk7XG4gIH0sXG4gIGlzSW50OiBmdW5jdGlvbiBpc0ludCh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eKD86Wy0rXT8oPzowfFsxLTldXFxkKikpJC8pO1xuICB9LFxuICBpc0Zsb2F0OiBmdW5jdGlvbiBpc0Zsb2F0KHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL14oPzpbLStdPyg/OlxcZCspKT8oPzpcXC5cXGQqKT8oPzpbZUVdW1xcK1xcLV0/KD86XFxkKykpPyQvKTtcbiAgfSxcbiAgaXNXb3JkczogZnVuY3Rpb24gaXNXb3Jkcyh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eW0EtWlxcc10rJC9pKTtcbiAgfSxcbiAgaXNTcGVjaWFsV29yZHM6IGZ1bmN0aW9uIGlzU3BlY2lhbFdvcmRzKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL15bQS1aXFxzXFx1MDBDMC1cXHUwMTdGXSskL2kpO1xuICB9LFxuICBpc0xlbmd0aDogZnVuY3Rpb24gaXNMZW5ndGgodmFsdWVzLCB2YWx1ZSwgbGVuZ3RoKSB7XG4gICAgcmV0dXJuICFfaXNFeGlzdHkodmFsdWUpIHx8IGlzRW1wdHkodmFsdWUpIHx8IHZhbHVlLmxlbmd0aCA9PT0gbGVuZ3RoO1xuICB9LFxuICBlcXVhbHM6IGZ1bmN0aW9uIGVxdWFscyh2YWx1ZXMsIHZhbHVlLCBlcWwpIHtcbiAgICByZXR1cm4gIV9pc0V4aXN0eSh2YWx1ZSkgfHwgaXNFbXB0eSh2YWx1ZSkgfHwgdmFsdWUgPT0gZXFsO1xuICB9LFxuICBlcXVhbHNGaWVsZDogZnVuY3Rpb24gZXF1YWxzRmllbGQodmFsdWVzLCB2YWx1ZSwgZmllbGQpIHtcbiAgICByZXR1cm4gdmFsdWUgPT0gdmFsdWVzW2ZpZWxkXTtcbiAgfSxcbiAgbWF4TGVuZ3RoOiBmdW5jdGlvbiBtYXhMZW5ndGgodmFsdWVzLCB2YWx1ZSwgbGVuZ3RoKSB7XG4gICAgcmV0dXJuICFfaXNFeGlzdHkodmFsdWUpIHx8IHZhbHVlLmxlbmd0aCA8PSBsZW5ndGg7XG4gIH0sXG4gIG1pbkxlbmd0aDogZnVuY3Rpb24gbWluTGVuZ3RoKHZhbHVlcywgdmFsdWUsIGxlbmd0aCkge1xuICAgIHJldHVybiAhX2lzRXhpc3R5KHZhbHVlKSB8fCBpc0VtcHR5KHZhbHVlKSB8fCB2YWx1ZS5sZW5ndGggPj0gbGVuZ3RoO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHZhbGlkYXRpb25zO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vZm9ybXN5LXJlYWN0L2xpYi92YWxpZGF0aW9uUnVsZXMuanMiLCJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgRm9ybXN5LCB7IEhPQyB9IGZyb20gJ2Zvcm1zeS1yZWFjdCc7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XHJcblxyXG5jbGFzcyBGaWVsZCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLmNoYW5nZVZhbHVlID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMucHJvcHMuc2V0VmFsdWUoZXZlbnQuY3VycmVudFRhcmdldFt0aGlzLnByb3BzLnR5cGUgPT09ICdjaGVja2JveCcgP1xyXG4gICAgICAgICdjaGVja2VkJyA6ICd2YWx1ZSddKTtcclxuICAgIH07XHJcbiAgfVxyXG4gIHJlbmRlciAoKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0aGlzLnByb3BzLmdldEVycm9yTWVzc2FnZSgpO1xyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2lnbnVwLWZpZWxkLWdyb3VwXCI+XHJcbiAgICAgICAgPGxhYmVsXHJcbiAgICAgICAgICBodG1sRm9yPXsgdGhpcy5wcm9wcy5uYW1lLnRvTG93ZXJDYXNlKCkgfVxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwic2lnbnVwLWZvcm1fX2xhYmVsXCI+XHJcbiAgICAgICAgICB7IHRoaXMucHJvcHMubmFtZSB9XHJcbiAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICA8aW5wdXRcclxuICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmNoYW5nZVZhbHVlfVxyXG4gICAgICAgICAgdmFsdWU9e3RoaXMucHJvcHMuZ2V0VmFsdWUoKX1cclxuICAgICAgICAgIHR5cGU9e3RoaXMucHJvcHMudHlwZSB8fCAndGV4dCd9XHJcbiAgICAgICAgICBuYW1lPXsgdGhpcy5wcm9wcy5uYW1lLnRvTG93ZXJDYXNlKCkgfVxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwic2lnbnVwLWZvcm1fX2lucHV0LWZpZWxkXCIvPlxyXG4gICAgICAgIDxwIGNsYXNzTmFtZT1cImNhcHRpb24gc2lnbnVwLWZvcm1fX2NhcHRpb25cIj5cclxuICAgICAgICAgIHsgdGhpcy5wcm9wcy50ZXh0IH1cclxuICAgICAgICA8L3A+XHJcbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwic2lnbnVwLWZvcm1fX2Vycm9yLW1lc3NhZ2VcIj57ZXJyb3JNZXNzYWdlfTwvc3Bhbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuRmllbGQucHJvcFR5cGVzID0ge1xyXG4gIG5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgdGV4dDogUHJvcFR5cGVzLnN0cmluZyxcclxuICBjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgdHlwZTogUHJvcFR5cGVzLnN0cmluZyxcclxuICBzZXRWYWx1ZTogUHJvcFR5cGVzLmFueSxcclxuICBnZXRWYWx1ZTogUHJvcFR5cGVzLmZ1bmMsXHJcbiAgdmFsaWRhdGlvbnM6IFByb3BUeXBlcy5hbnksXHJcbiAgZ2V0RXJyb3JNZXNzYWdlOiBQcm9wVHlwZXMuZnVuYyxcclxuICByZWdpc3RyYXRpb246IFByb3BUeXBlcy5mdW5jXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBIT0MoRmllbGQpO1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy9BdXRoL0ZpZWxkL0ZpZWxkLmpzIiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcclxuXHJcbmV4cG9ydCBjb25zdCBIZWFkZXIgPSAocHJvcHMpID0+IChcclxuICA8ZGl2IGNsYXNzTmFtZT1cInNpZ251cC1oZWFkZXJcIj5cclxuICAgIDxpXHJcbiAgICAgIGNsYXNzTmFtZT17IGBmYSAkeyBwcm9wcy5waWMgfSBmYS0zeCBzaWdudXAtaGVhZGVyX19pY29uYCB9XHJcbiAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPlxyXG4gICAgPC9pPlxyXG4gICAgPGgxIGNsYXNzTmFtZT1cInNpZ251cC1oZWFkZXJfX3RpdGxlXCI+eyBwcm9wcy50aXRsZSB9XHJcbiAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImNhcHRpb24gc2lnbnVwLWhlYWRlcl9fY2FwdGlvblwiPlxyXG4gICAgICAgIHsgcHJvcHMudGV4dCB9XHJcbiAgICAgIDwvc3Bhbj5cclxuICAgIDwvaDE+XHJcbiAgPC9kaXY+XHJcbik7XHJcblxyXG5IZWFkZXIucHJvcFR5cGVzID0ge1xyXG4gIHBpYzogUHJvcFR5cGVzLnN0cmluZyxcclxuICB0aXRsZTogUHJvcFR5cGVzLnN0cmluZyxcclxuICB0ZXh0OiBQcm9wVHlwZXMuc3RyaW5nXHJcbn07XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21wb25lbnRzL0F1dGgvSGVhZGVyL0hlYWRlci5qcyIsImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBGb3Jtc3ksIHsgSE9DIH0gZnJvbSAnZm9ybXN5LXJlYWN0JztcclxuaW1wb3J0IHsgSGVhZGVyIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9BdXRoL0hlYWRlci9IZWFkZXInO1xyXG5pbXBvcnQgRmllbGQgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9BdXRoL0ZpZWxkL0ZpZWxkJztcclxuaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvTWVzc2FnZS9NZXNzYWdlJztcclxuaW1wb3J0IHsgTmF2TGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgeyBsb2dpbiwgY2xlYXJMb2dpblN0YXR1cyB9IGZyb20gJy4uLy4uL2FjdGlvbnMvYXV0aC5hY3Rpb24nO1xyXG5pbXBvcnQgeyBiaW5kQWN0aW9uQ3JlYXRvcnMgfSBmcm9tICdyZWR1eCc7XHJcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCc7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XHJcbmltcG9ydCAnLi9Mb2dpbi5zY3NzJztcclxuaW1wb3J0IHsgcmVnaXN0cmF0aW9uU3VjY2VzcyB9IGZyb20gJy4uLy4uL2FjdGlvbnMvYXV0aC5hY3Rpb24nO1xyXG5cclxuY2xhc3MgTG9naW4gZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgY2FuU3VibWl0OiBmYWxzZVxyXG4gICAgfTtcclxuICB9XHJcbiAgY29tcG9uZW50RGlkVXBkYXRlICgpIHtcclxuICAgIGlmICh0aGlzLnByb3BzLnVzZXJEYXRhLl9pZCkge1xyXG4gICAgICBpZiAodGhpcy5wcm9wcy5oaXN0b3J5Lmxlbmd0aCA+IDMpIHtcclxuICAgICAgICB0aGlzLnByb3BzLmhpc3RvcnkuZ29CYWNrKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5oaXN0b3J5LnB1c2goJy8nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBhZGRMb2dpbiA9ICgpID0+IHtcclxuICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLmdldFZhbHVlKCksXHJcbiAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkLmdldFZhbHVlKClcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5wcm9wcy5sb2dpbihkYXRhKTtcclxuICB9O1xyXG4gIGVuYWJsZUJ1dHRvbiA9ICgpID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBjYW5TdWJtaXQ6IHRydWVcclxuICAgIH0pO1xyXG4gIH07XHJcbiAgZGlzYWJsZUJ1dHRvbiA9ICgpID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBjYW5TdWJtaXQ6IGZhbHNlXHJcbiAgICB9KTtcclxuICB9O1xyXG4gIHJlbmRlciAoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImxvZ2luLWNvbnRhaW5lclwiPlxyXG4gICAgICAgIDxIZWFkZXJcclxuICAgICAgICAgIHBpYz17J2ZhLXVubG9jayd9XHJcbiAgICAgICAgICB0aXRsZT17J0xvZ2luJ31cclxuICAgICAgICAgIHRleHQ9eydQbGVhc2UgZW50ZXIgeW91ciBjcmVkZW50aWFscyB0byBsb2dpbi4nfSAvPlxyXG4gICAgICAgIDxNZXNzYWdlXHJcbiAgICAgICAgICBjbGVhclN0YXR1cz17dGhpcy5wcm9wcy5jbGVhckxvZ2luU3RhdHVzfVxyXG4gICAgICAgICAgc3RhdHVzPXt0aGlzLnByb3BzLmxvZ2luU3RhdHVzfVxyXG4gICAgICAgICAgaGVhZGVyPXsnQXV0aG9yaXphdGlvbiBmYWlsZWQnfVxyXG4gICAgICAgICAgdGV4dD17dGhpcy5wcm9wcy5lcnJvclRleHR9IC8+XHJcbiAgICAgICAgPEZvcm1zeS5Gb3JtXHJcbiAgICAgICAgICBvblN1Ym1pdD17dGhpcy5hZGRMb2dpbn1cclxuICAgICAgICAgIG9uVmFsaWQ9e3RoaXMuZW5hYmxlQnV0dG9ufVxyXG4gICAgICAgICAgb25JbnZhbGlkPXt0aGlzLmRpc2FibGVCdXR0b259XHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJzaWdudXAtZm9ybVwiPlxyXG4gICAgICAgICAgPEZpZWxkXHJcbiAgICAgICAgICAgIG5hbWU9XCJFLW1haWxcIlxyXG4gICAgICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgIHRleHQ9eydZb3VyIHVuaXF1ZSB1c2VybmFtZSB0byBhcHAnfVxyXG4gICAgICAgICAgICByZWY9eyhpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICAgIHRoaXMuZW1haWwgPSBpbnB1dDtcclxuICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgdmFsaWRhdGlvbnM9XCJpc0VtYWlsXCJcclxuICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9yPVwiVGhpcyBpcyBub3QgYSB2YWxpZCBlbWFpbFwiXHJcbiAgICAgICAgICAgIHJlcXVpcmVkLz5cclxuICAgICAgICAgIDxGaWVsZFxyXG4gICAgICAgICAgICBuYW1lPVwiUGFzc3dvcmRcIlxyXG4gICAgICAgICAgICB0eXBlPVwicGFzc3dvcmRcIlxyXG4gICAgICAgICAgICB0ZXh0PXsnWW91ciBoYXJkIHRvIGd1ZXNzIHBhc3N3b3JkJ31cclxuICAgICAgICAgICAgcmVmPXsoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgICB0aGlzLnBhc3N3b3JkID0gaW5wdXQ7XHJcbiAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgIHZhbGlkYXRpb25zPSB7e1xyXG4gICAgICAgICAgICAgIG1pbkxlbmd0aDogNyxcclxuICAgICAgICAgICAgICBpc0FscGhhbnVtZXJpYzogdHJ1ZVxyXG4gICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3I9XCJUaGlzIGlzIG5vdCBhIHZhbGlkIHBhc3NcIlxyXG4gICAgICAgICAgICByZXF1aXJlZC8+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNpZ251cC1maWVsZC1ncm91cCBzaWdudXAtYnRuLWdyb3VwXCI+XHJcbiAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgIHR5cGU9XCJzdWJtaXRcIlxyXG4gICAgICAgICAgICAgIGRpc2FibGVkPXshdGhpcy5zdGF0ZS5jYW5TdWJtaXR9XHJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi0tc2lnbnVwIGJ0bi0tc2lnbnVwLWFjdGl2ZVwiXHJcbiAgICAgICAgICAgICAgdmFsdWU9XCJMb2dpblwiLz5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXsnY2FwdGlvbiBzaWdudXAtZm9ybV9fY2FwdGlvbiAnICtcclxuICAgICAgICAgICAgICAnc2lnbnVwLWZvcm1fX2NhcHRpb24tLXRleHQnfT5cclxuICAgICAgICAgICAgICBOZXcgaGVyZT9cclxuICAgICAgICAgICAgICA8TmF2TGluayB0bz1cIi9hdXRoL3JlZ2lzdGVyXCJcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNpZ251cC1mb3JtX19jYXB0aW9uLS1saW5rXCI+XHJcbiAgICAgICAgICAgICAgICBSZWdpc3RlclxyXG4gICAgICAgICAgICAgIDwvTmF2TGluaz5cclxuICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9Gb3Jtc3kuRm9ybT5cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzIChzdG9yZSkge1xyXG4gIHJldHVybiB7XHJcbiAgICBsb2dpblN0YXR1czogc3RvcmUuYXV0aGVudGljYXRpb24uc3RhdHVzLFxyXG4gICAgdXNlckRhdGE6IHN0b3JlLmF1dGhlbnRpY2F0aW9uLmlzTG9nZ2VkLFxyXG4gICAgZXJyb3JUZXh0OiBzdG9yZS5hdXRoZW50aWNhdGlvbi5lcnJvclRleHRcclxuICB9O1xyXG59XHJcbmZ1bmN0aW9uIG1hcERpc3BhdGNoVG9Qcm9wcyAoZGlzcGF0Y2gpIHtcclxuICByZXR1cm4ge1xyXG4gICAgbG9naW46IGJpbmRBY3Rpb25DcmVhdG9ycyhsb2dpbiwgZGlzcGF0Y2gpLFxyXG4gICAgY2xlYXJMb2dpblN0YXR1czogKCkgPT4gZGlzcGF0Y2goY2xlYXJMb2dpblN0YXR1cygpKVxyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzLCBtYXBEaXNwYXRjaFRvUHJvcHMpKExvZ2luKTtcclxuXHJcbkxvZ2luLnByb3BUeXBlcyA9IHtcclxuICBsb2dpblN0YXR1czogUHJvcFR5cGVzLnN0cmluZyxcclxuICBoaXN0b3J5OiBQcm9wVHlwZXMub2JqZWN0LFxyXG4gIGxvZ2luOiBQcm9wVHlwZXMuZnVuYyxcclxuICB1c2VyRGF0YTogUHJvcFR5cGVzLm9iamVjdCxcclxuICBlcnJvclRleHQ6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgY2xlYXJMb2dpblN0YXR1czogUHJvcFR5cGVzLmZ1bmNcclxufTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3BhZ2VzL0xvZ2luL0xvZ2luLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==