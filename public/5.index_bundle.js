webpackJsonp([5],{"./node_modules/create-react-class/index.js":function(t,e,r){"use strict";var n=r("./node_modules/react/react.js"),i=r("./node_modules/create-react-class/factory.js");if(void 0===n)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var s=(new n.Component).updater;t.exports=i(n.Component,n.isValidElement,s)},"./node_modules/form-data-to-object/index.js":function(t,e,r){"use strict";function n(t){return Object.keys(t).reduce(function(e,r){var n=r.match(/[^\[]*/i),i=r.match(/\[.*?\]/g)||[];i=[n[0]].concat(i).map(function(t){return t.replace(/\[|\]/g,"")});for(var s=e;i.length;){var o=i.shift();o in s?s=s[o]:(s[o]=i.length?isNaN(i[0])?{}:[]:t[r],s=s[o])}return e},{})}function i(t){function e(t,r,n){return Array.isArray(n)||"[object Object]"===Object.prototype.toString.call(n)?(Object.keys(n).forEach(function(i){e(t,r+"["+i+"]",n[i])}),t):(t[r]=n,t)}return Object.keys(t).reduce(function(r,n){return e(r,n,t[n])},{})}t.exports={fromObj:i,toObj:n}},"./node_modules/formsy-react/lib/Decorator.js":function(t,e,r){"use strict";(function(e){var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i=e.React||r("./node_modules/react/react.js"),s=r("./node_modules/create-react-class/index.js"),o=r("./node_modules/formsy-react/lib/Mixin.js");t.exports=function(){return function(t){return s({mixins:[o],render:function(){return i.createElement(t,n({setValidations:this.setValidations,setValue:this.setValue,resetValue:this.resetValue,getValue:this.getValue,hasValue:this.hasValue,getErrorMessage:this.getErrorMessage,getErrorMessages:this.getErrorMessages,isFormDisabled:this.isFormDisabled,isValid:this.isValid,isPristine:this.isPristine,isFormSubmitted:this.isFormSubmitted,isRequired:this.isRequired,showRequired:this.showRequired,showError:this.showError,isValidValue:this.isValidValue},this.props))}})}}}).call(e,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/formsy-react/lib/HOC.js":function(t,e,r){"use strict";(function(e){function n(t){return t.displayName||t.name||("string"==typeof t?t:"Component")}var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s=e.React||r("./node_modules/react/react.js"),o=r("./node_modules/create-react-class/index.js"),a=r("./node_modules/formsy-react/lib/Mixin.js");t.exports=function(t){return o({displayName:"Formsy("+n(t)+")",mixins:[a],render:function(){var e=this.props.innerRef,r=i({setValidations:this.setValidations,setValue:this.setValue,resetValue:this.resetValue,getValue:this.getValue,hasValue:this.hasValue,getErrorMessage:this.getErrorMessage,getErrorMessages:this.getErrorMessages,isFormDisabled:this.isFormDisabled,isValid:this.isValid,isPristine:this.isPristine,isFormSubmitted:this.isFormSubmitted,isRequired:this.isRequired,showRequired:this.showRequired,showError:this.showError,isValidValue:this.isValidValue},this.props);return e&&(r.ref=e),s.createElement(t,r)}})}}).call(e,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/formsy-react/lib/Mixin.js":function(t,e,r){"use strict";(function(e){var n=r("./node_modules/prop-types/index.js"),i=r("./node_modules/formsy-react/lib/utils.js"),s=(e.React||r("./node_modules/react/react.js"),function(t){return"string"==typeof t?t.split(/\,(?![^{\[]*[}\]])/g).reduce(function(t,e){var r=e.split(":"),n=r.shift();if(r=r.map(function(t){try{return JSON.parse(t)}catch(e){return t}}),r.length>1)throw new Error("Formsy does not support multiple args on string validations. Use object format of validations instead.");return t[n]=!r.length||r[0],t},{}):t||{}});t.exports={getInitialState:function(){return{_value:this.props.value,_isRequired:!1,_isValid:!0,_isPristine:!0,_pristineValue:this.props.value,_validationError:[],_externalError:null,_formSubmitted:!1}},contextTypes:{formsy:n.object},getDefaultProps:function(){return{validationError:"",validationErrors:{}}},componentWillMount:function(){var t=function(){this.setValidations(this.props.validations,this.props.required),this.context.formsy.attachToForm(this)}.bind(this);if(!this.props.name)throw new Error("Form Input requires a name property when used");t()},componentWillReceiveProps:function(t){this.setValidations(t.validations,t.required)},componentDidUpdate:function(t){i.isSame(this.props.value,t.value)||this.setValue(this.props.value),i.isSame(this.props.validations,t.validations)&&i.isSame(this.props.required,t.required)||this.context.formsy.validate(this)},componentWillUnmount:function(){this.context.formsy.detachFromForm(this)},setValidations:function(t,e){this._validations=s(t)||{},this._requiredValidations=!0===e?{isDefaultRequiredValue:!0}:s(e)},setValue:function(t){this.setState({_value:t,_isPristine:!1},function(){this.context.formsy.validate(this)}.bind(this))},resetValue:function(){this.setState({_value:this.state._pristineValue,_isPristine:!0},function(){this.context.formsy.validate(this)})},getValue:function(){return this.state._value},hasValue:function(){return""!==this.state._value},getErrorMessage:function(){var t=this.getErrorMessages();return t.length?t[0]:null},getErrorMessages:function(){return!this.isValid()||this.showRequired()?this.state._externalError||this.state._validationError||[]:[]},isFormDisabled:function(){return this.context.formsy.isFormDisabled()},isValid:function(){return this.state._isValid},isPristine:function(){return this.state._isPristine},isFormSubmitted:function(){return this.state._formSubmitted},isRequired:function(){return!!this.props.required},showRequired:function(){return this.state._isRequired},showError:function(){return!this.showRequired()&&!this.isValid()},isValidValue:function(t){return this.context.formsy.isValidValue.call(null,this,t)}}}).call(e,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/formsy-react/lib/main.js":function(t,e,r){"use strict";(function(e){function n(t,e){var r={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},o="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(t){return void 0===t?"undefined":i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":i(t)},a=r("./node_modules/prop-types/index.js"),u=e.React||r("./node_modules/react/react.js"),l=r("./node_modules/create-react-class/index.js"),c={},d=r("./node_modules/formsy-react/lib/validationRules.js"),f=r("./node_modules/form-data-to-object/index.js"),p=r("./node_modules/formsy-react/lib/utils.js"),h=r("./node_modules/formsy-react/lib/Mixin.js"),m=r("./node_modules/formsy-react/lib/HOC.js"),F=r("./node_modules/formsy-react/lib/Decorator.js"),g={},v=[];c.Mixin=h,c.HOC=m,c.Decorator=F,c.defaults=function(t){g=t},c.addValidationRule=function(t,e){d[t]=e},c.Form=l({displayName:"Formsy",getInitialState:function(){return{isValid:!0,isSubmitting:!1,canChange:!1}},getDefaultProps:function(){return{onSuccess:function(){},onError:function(){},onSubmit:function(){},onValidSubmit:function(){},onInvalidSubmit:function(){},onValid:function(){},onInvalid:function(){},onChange:function(){},validationErrors:null,preventExternalInvalidation:!1}},childContextTypes:{formsy:a.object},getChildContext:function(){var t=this;return{formsy:{attachToForm:this.attachToForm,detachFromForm:this.detachFromForm,validate:this.validate,isFormDisabled:this.isFormDisabled,isValidValue:function(e,r){return t.runValidation(e,r).isValid}}}},componentWillMount:function(){this.inputs=[]},componentDidMount:function(){this.validateForm()},componentWillUpdate:function(){this.prevInputNames=this.inputs.map(function(t){return t.props.name})},componentDidUpdate:function(){this.props.validationErrors&&"object"===o(this.props.validationErrors)&&Object.keys(this.props.validationErrors).length>0&&this.setInputValidationErrors(this.props.validationErrors);var t=this.inputs.map(function(t){return t.props.name});p.arraysDiffer(this.prevInputNames,t)&&this.validateForm()},reset:function(t){this.setFormPristine(!0),this.resetModel(t)},submit:function(t){t&&t.preventDefault(),this.setFormPristine(!1);var e=this.getModel();this.props.onSubmit(e,this.resetModel,this.updateInputsWithError),this.state.isValid?this.props.onValidSubmit(e,this.resetModel,this.updateInputsWithError):this.props.onInvalidSubmit(e,this.resetModel,this.updateInputsWithError)},mapModel:function(t){return this.props.mapping?this.props.mapping(t):f.toObj(Object.keys(t).reduce(function(e,r){for(var n=r.split("."),i=e;n.length;){var s=n.shift();i=i[s]=n.length?i[s]||{}:t[r]}return e},{}))},getModel:function(){var t=this.getCurrentValues();return this.mapModel(t)},resetModel:function(t){this.inputs.forEach(function(e){var r=e.props.name;t&&t.hasOwnProperty(r)?e.setValue(t[r]):e.resetValue()}),this.validateForm()},setInputValidationErrors:function(t){this.inputs.forEach(function(e){var r=e.props.name,n=[{_isValid:!(r in t),_validationError:"string"==typeof t[r]?[t[r]]:t[r]}];e.setState.apply(e,n)})},isChanged:function(){return!p.isSame(this.getPristineValues(),this.getCurrentValues())},getPristineValues:function(){return this.inputs.reduce(function(t,e){return t[e.props.name]=e.props.value,t},{})},updateInputsWithError:function(t){var e=this;Object.keys(t).forEach(function(r,n){var i=p.find(e.inputs,function(t){return t.props.name===r});if(!i)throw new Error("You are trying to update an input that does not exist. Verify errors object with input names. "+JSON.stringify(t));var s=[{_isValid:e.props.preventExternalInvalidation||!1,_externalError:"string"==typeof t[r]?[t[r]]:t[r]}];i.setState.apply(i,s)})},isFormDisabled:function(){return this.props.disabled},getCurrentValues:function(){return this.inputs.reduce(function(t,e){return t[e.props.name]=e.state._value,t},{})},setFormPristine:function(t){this.setState({_formSubmitted:!t}),this.inputs.forEach(function(e,r){e.setState({_formSubmitted:!t,_isPristine:t})})},validate:function(t){this.state.canChange&&this.props.onChange(this.getCurrentValues(),this.isChanged());var e=this.runValidation(t);t.setState({_isValid:e.isValid,_isRequired:e.isRequired,_validationError:e.error,_externalError:null},this.validateForm)},runValidation:function(t,e){var r=this.getCurrentValues(),n=t.props.validationErrors,i=t.props.validationError;e=2===arguments.length?e:t.state._value;var s=this.runRules(e,r,t._validations),o=this.runRules(e,r,t._requiredValidations);"function"==typeof t.validate&&(s.failed=t.validate()?[]:["failed"]);var a=!!Object.keys(t._requiredValidations).length&&!!o.success.length,u=!(s.failed.length||this.props.validationErrors&&this.props.validationErrors[t.props.name]);return{isRequired:a,isValid:!a&&u,error:function(){if(u&&!a)return v;if(s.errors.length)return s.errors;if(this.props.validationErrors&&this.props.validationErrors[t.props.name])return"string"==typeof this.props.validationErrors[t.props.name]?[this.props.validationErrors[t.props.name]]:this.props.validationErrors[t.props.name];if(a){var e=n[o.success[0]];return e?[e]:null}return s.failed.length?s.failed.map(function(t){return n[t]?n[t]:i}).filter(function(t,e,r){return r.indexOf(t)===e}):void 0}.call(this)}},runRules:function(t,e,r){var n={errors:[],failed:[],success:[]};return Object.keys(r).length&&Object.keys(r).forEach(function(i){if(d[i]&&"function"==typeof r[i])throw new Error("Formsy does not allow you to override default validations: "+i);if(!d[i]&&"function"!=typeof r[i])throw new Error("Formsy does not have the validation rule: "+i);if("function"==typeof r[i]){var s=r[i](e,t);return void("string"==typeof s?(n.errors.push(s),n.failed.push(i)):s||n.failed.push(i))}if("function"!=typeof r[i]){var s=d[i](e,t,r[i]);return void("string"==typeof s?(n.errors.push(s),n.failed.push(i)):s?n.success.push(i):n.failed.push(i))}return n.success.push(i)}),n},validateForm:function(){var t=this,e=function(){var t=this.inputs.every(function(t){return t.state._isValid});this.setState({isValid:t}),t?this.props.onValid():this.props.onInvalid(),this.setState({canChange:!0})}.bind(this);this.inputs.forEach(function(r,n){var i=t.runValidation(r);i.isValid&&r.state._externalError&&(i.isValid=!1),r.setState({_isValid:i.isValid,_isRequired:i.isRequired,_validationError:i.error,_externalError:!i.isValid&&r.state._externalError?r.state._externalError:null},n===t.inputs.length-1?e:null)}),this.inputs.length||this.setState({canChange:!0})},attachToForm:function(t){-1===this.inputs.indexOf(t)&&this.inputs.push(t),this.validate(t)},detachFromForm:function(t){var e=this.inputs.indexOf(t);-1!==e&&(this.inputs=this.inputs.slice(0,e).concat(this.inputs.slice(e+1))),this.validateForm()},render:function(){var t=this.props,e=(t.mapping,t.validationErrors,t.onSubmit,t.onValid,t.onValidSubmit,t.onInvalid,t.onInvalidSubmit,t.onChange,t.reset,t.preventExternalInvalidation,t.onSuccess,t.onError,n(t,["mapping","validationErrors","onSubmit","onValid","onValidSubmit","onInvalid","onInvalidSubmit","onChange","reset","preventExternalInvalidation","onSuccess","onError"]));return u.createElement("form",s({},e,{onSubmit:this.submit}),this.props.children)}}),e.exports||e.module||e.define&&e.define.amd||(e.Formsy=c),t.exports=c}).call(e,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/formsy-react/lib/utils.js":function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return void 0===t?"undefined":n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":n(t)};t.exports={arraysDiffer:function(t,e){var r=!1;return t.length!==e.length?r=!0:t.forEach(function(t,n){this.isSame(t,e[n])||(r=!0)},this),r},objectsDiffer:function(t,e){var r=!1;return Object.keys(t).length!==Object.keys(e).length?r=!0:Object.keys(t).forEach(function(n){this.isSame(t[n],e[n])||(r=!0)},this),r},isSame:function(t,e){return(void 0===t?"undefined":i(t))===(void 0===e?"undefined":i(e))&&(Array.isArray(t)&&Array.isArray(e)?!this.arraysDiffer(t,e):"function"==typeof t?t.toString()===e.toString():"object"===(void 0===t?"undefined":i(t))&&null!==t&&null!==e?!this.objectsDiffer(t,e):t===e)},find:function(t,e){for(var r=0,n=t.length;r<n;r++){var i=t[r];if(e(i))return i}return null}}},"./node_modules/formsy-react/lib/validationRules.js":function(t,e,r){"use strict";var n=function(t){return null!==t&&void 0!==t},i=function(t){return""===t},s={isDefaultRequiredValue:function(t,e){return void 0===e||""===e},isExisty:function(t,e){return n(e)},matchRegexp:function(t,e,r){return!n(e)||i(e)||r.test(e)},isUndefined:function(t,e){return void 0===e},isEmptyString:function(t,e){return i(e)},isEmail:function(t,e){return s.matchRegexp(t,e,/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i)},isUrl:function(t,e){return s.matchRegexp(t,e,/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i)},isTrue:function(t,e){return!0===e},isFalse:function(t,e){return!1===e},isNumeric:function(t,e){return"number"==typeof e||s.matchRegexp(t,e,/^[-+]?(?:\d*[.])?\d+$/)},isAlpha:function(t,e){return s.matchRegexp(t,e,/^[A-Z]+$/i)},isAlphanumeric:function(t,e){return s.matchRegexp(t,e,/^[0-9A-Z]+$/i)},isInt:function(t,e){return s.matchRegexp(t,e,/^(?:[-+]?(?:0|[1-9]\d*))$/)},isFloat:function(t,e){return s.matchRegexp(t,e,/^(?:[-+]?(?:\d+))?(?:\.\d*)?(?:[eE][\+\-]?(?:\d+))?$/)},isWords:function(t,e){return s.matchRegexp(t,e,/^[A-Z\s]+$/i)},isSpecialWords:function(t,e){return s.matchRegexp(t,e,/^[A-Z\s\u00C0-\u017F]+$/i)},isLength:function(t,e,r){return!n(e)||i(e)||e.length===r},equals:function(t,e,r){return!n(e)||i(e)||e==r},equalsField:function(t,e,r){return e==t[r]},maxLength:function(t,e,r){return!n(e)||e.length<=r},minLength:function(t,e,r){return!n(e)||i(e)||e.length>=r}};t.exports=s},"./src/components/Auth/Field/Field.js":function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r("./node_modules/react/react.js"),l=n(u),c=r("./node_modules/formsy-react/lib/main.js"),d=(n(c),r("./node_modules/prop-types/index.js")),f=n(d),p=function(t){function e(t){i(this,e);var r=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.changeValue=function(t){r.props.setValue(t.currentTarget["checkbox"===r.props.type?"checked":"value"])},r}return o(e,t),a(e,[{key:"render",value:function(){var t=this.props.getErrorMessage();return l.default.createElement("div",{className:"signup-field-group"},l.default.createElement("label",{htmlFor:this.props.name.toLowerCase(),className:"signup-form__label"},this.props.name),l.default.createElement("input",{onChange:this.changeValue,value:this.props.getValue(),type:this.props.type||"text",name:this.props.name.toLowerCase(),className:"signup-form__input-field"}),l.default.createElement("p",{className:"caption signup-form__caption"},this.props.text),l.default.createElement("span",{className:"signup-form__error-message"},t))}}]),e}(l.default.Component);p.propTypes={name:f.default.string,text:f.default.string,className:f.default.string,type:f.default.string,setValue:f.default.any,getValue:f.default.func,validations:f.default.any,getErrorMessage:f.default.func,registration:f.default.func},e.default=(0,c.HOC)(p)},"./src/components/Auth/Header/Header.js":function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Header=void 0;var i=r("./node_modules/react/react.js"),s=n(i),o=r("./node_modules/prop-types/index.js"),a=n(o);(e.Header=function(t){return s.default.createElement("div",{className:"signup-header"},s.default.createElement("i",{className:"fa "+t.pic+" fa-3x signup-header__icon","aria-hidden":"true"}),s.default.createElement("h1",{className:"signup-header__title"},t.title,s.default.createElement("span",{className:"caption signup-header__caption"},t.text)))}).propTypes={pic:a.default.string,title:a.default.string,text:a.default.string}},"./src/pages/Login/Login.js":function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){return{loginStatus:t.authentication.status,userData:t.authentication.isLogged,errorText:t.authentication.errorText}}function u(t){return{login:(0,y.bindActionCreators)(b.login,t),clearLoginStatus:function(){return t((0,b.clearLoginStatus)())}}}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=r("./node_modules/react/react.js"),d=n(c),f=r("./node_modules/formsy-react/lib/main.js"),p=n(f),h=r("./src/components/Auth/Header/Header.js"),m=r("./src/components/Auth/Field/Field.js"),F=n(m),g=r("./src/components/Message/Message.js"),v=r("./node_modules/react-router-dom/es/index.js"),b=r("./src/actions/auth.action.js"),y=r("./node_modules/redux/es/index.js"),_=r("./node_modules/react-redux/es/index.js"),E=r("./node_modules/prop-types/index.js"),x=n(E);r("./src/pages/Login/Login.scss");var V=function(t){function e(t){i(this,e);var r=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.addLogin=function(){var t={email:r.email.getValue(),password:r.password.getValue()};r.props.login(t)},r.enableButton=function(){r.setState({canSubmit:!0})},r.disableButton=function(){r.setState({canSubmit:!1})},r.state={canSubmit:!1},r}return o(e,t),l(e,[{key:"render",value:function(){var t=this;return d.default.createElement("div",{className:"login-container"},d.default.createElement(h.Header,{pic:"fa-unlock",title:"Login",text:"Please enter your credentials to login."}),d.default.createElement(g.Message,{clearStatus:this.props.clearLoginStatus,status:this.props.loginStatus,header:"Authorization failed",text:this.props.errorText}),d.default.createElement(p.default.Form,{onSubmit:this.addLogin,onValid:this.enableButton,onInvalid:this.disableButton,className:"signup-form"},d.default.createElement(F.default,{name:"E-mail",type:"text",text:"Your unique username to app",ref:function(e){t.email=e},validations:"isEmail",validationError:"This is not a valid email",required:!0}),d.default.createElement(F.default,{name:"Password",type:"password",text:"Your hard to guess password",ref:function(e){t.password=e},validations:{minLength:7,isAlphanumeric:!0},validationError:"This is not a valid pass",required:!0}),d.default.createElement("div",{className:"signup-field-group signup-btn-group"},d.default.createElement("input",{type:"submit",disabled:!this.state.canSubmit,className:"btn btn--signup btn--signup-active",value:"Login"}),d.default.createElement("span",{className:"caption signup-form__caption signup-form__caption--text"},"New here?",d.default.createElement(v.NavLink,{to:"/auth/register",className:"signup-form__caption--link"},"Register")))))}}]),e}(c.Component);e.default=(0,_.connect)(a,u)(V),V.propTypes={loginStatus:x.default.string,history:x.default.object,login:x.default.func,userData:x.default.object,errorText:x.default.string,clearLoginStatus:x.default.func}},"./src/pages/Login/Login.scss":function(t,e){}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vNS5pbmRleF9idW5kbGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jcmVhdGUtcmVhY3QtY2xhc3MvaW5kZXguanM/ODBhNCIsIndlYnBhY2s6Ly8vLi9+L2Zvcm0tZGF0YS10by1vYmplY3QvaW5kZXguanM/OWJiNSIsIndlYnBhY2s6Ly8vLi9+L2Zvcm1zeS1yZWFjdC9saWIvRGVjb3JhdG9yLmpzPzUxZmMiLCJ3ZWJwYWNrOi8vLy4vfi9mb3Jtc3ktcmVhY3QvbGliL0hPQy5qcz9iZWY4Iiwid2VicGFjazovLy8uL34vZm9ybXN5LXJlYWN0L2xpYi9NaXhpbi5qcz85MzU3Iiwid2VicGFjazovLy8uL34vZm9ybXN5LXJlYWN0L2xpYi9tYWluLmpzP2U4MTQiLCJ3ZWJwYWNrOi8vLy4vfi9mb3Jtc3ktcmVhY3QvbGliL3V0aWxzLmpzP2ZkMjYiLCJ3ZWJwYWNrOi8vLy4vfi9mb3Jtc3ktcmVhY3QvbGliL3ZhbGlkYXRpb25SdWxlcy5qcz9jMGE1Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0F1dGgvRmllbGQvRmllbGQuanM/YWJkZSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9BdXRoL0hlYWRlci9IZWFkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VzL0xvZ2luL0xvZ2luLmpzIl0sIm5hbWVzIjpbIndlYnBhY2tKc29ucCIsIi4vbm9kZV9tb2R1bGVzL2NyZWF0ZS1yZWFjdC1jbGFzcy9pbmRleC5qcyIsIm1vZHVsZSIsImV4cG9ydHMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiUmVhY3QiLCJmYWN0b3J5IiwiRXJyb3IiLCJSZWFjdE5vb3BVcGRhdGVRdWV1ZSIsIkNvbXBvbmVudCIsInVwZGF0ZXIiLCJpc1ZhbGlkRWxlbWVudCIsIi4vbm9kZV9tb2R1bGVzL2Zvcm0tZGF0YS10by1vYmplY3QvaW5kZXguanMiLCJ0b09iaiIsInNvdXJjZSIsIk9iamVjdCIsImtleXMiLCJyZWR1Y2UiLCJvdXRwdXQiLCJrZXkiLCJwYXJlbnRLZXkiLCJtYXRjaCIsInBhdGhzIiwiY29uY2F0IiwibWFwIiwicmVwbGFjZSIsImN1cnJlbnRQYXRoIiwibGVuZ3RoIiwicGF0aEtleSIsInNoaWZ0IiwiaXNOYU4iLCJmcm9tT2JqIiwib2JqIiwicmVjdXIiLCJuZXdPYmoiLCJwcm9wTmFtZSIsImN1cnJWYWwiLCJBcnJheSIsImlzQXJyYXkiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJmb3JFYWNoIiwidiIsIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvRGVjb3JhdG9yLmpzIiwiZ2xvYmFsIiwiX2V4dGVuZHMiLCJhc3NpZ24iLCJ0YXJnZXQiLCJpIiwiYXJndW1lbnRzIiwiaGFzT3duUHJvcGVydHkiLCJjcmVhdGVSZWFjdENsYXNzIiwiTWl4aW4iLCJtaXhpbnMiLCJyZW5kZXIiLCJjcmVhdGVFbGVtZW50Iiwic2V0VmFsaWRhdGlvbnMiLCJ0aGlzIiwic2V0VmFsdWUiLCJyZXNldFZhbHVlIiwiZ2V0VmFsdWUiLCJoYXNWYWx1ZSIsImdldEVycm9yTWVzc2FnZSIsImdldEVycm9yTWVzc2FnZXMiLCJpc0Zvcm1EaXNhYmxlZCIsImlzVmFsaWQiLCJpc1ByaXN0aW5lIiwiaXNGb3JtU3VibWl0dGVkIiwiaXNSZXF1aXJlZCIsInNob3dSZXF1aXJlZCIsInNob3dFcnJvciIsImlzVmFsaWRWYWx1ZSIsInByb3BzIiwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9IT0MuanMiLCJnZXREaXNwbGF5TmFtZSIsImRpc3BsYXlOYW1lIiwibmFtZSIsImlubmVyUmVmIiwicHJvcHNGb3JFbGVtZW50IiwicmVmIiwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9NaXhpbi5qcyIsIlByb3BUeXBlcyIsInV0aWxzIiwiY29udmVydFZhbGlkYXRpb25zVG9PYmplY3QiLCJ2YWxpZGF0aW9ucyIsInNwbGl0IiwidmFsaWRhdGlvbiIsImFyZ3MiLCJ2YWxpZGF0ZU1ldGhvZCIsImFyZyIsIkpTT04iLCJwYXJzZSIsImUiLCJnZXRJbml0aWFsU3RhdGUiLCJfdmFsdWUiLCJ2YWx1ZSIsIl9pc1JlcXVpcmVkIiwiX2lzVmFsaWQiLCJfaXNQcmlzdGluZSIsIl9wcmlzdGluZVZhbHVlIiwiX3ZhbGlkYXRpb25FcnJvciIsIl9leHRlcm5hbEVycm9yIiwiX2Zvcm1TdWJtaXR0ZWQiLCJjb250ZXh0VHlwZXMiLCJmb3Jtc3kiLCJvYmplY3QiLCJnZXREZWZhdWx0UHJvcHMiLCJ2YWxpZGF0aW9uRXJyb3IiLCJ2YWxpZGF0aW9uRXJyb3JzIiwiY29tcG9uZW50V2lsbE1vdW50IiwiY29uZmlndXJlIiwicmVxdWlyZWQiLCJjb250ZXh0IiwiYXR0YWNoVG9Gb3JtIiwiYmluZCIsImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiLCJuZXh0UHJvcHMiLCJjb21wb25lbnREaWRVcGRhdGUiLCJwcmV2UHJvcHMiLCJpc1NhbWUiLCJ2YWxpZGF0ZSIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwiZGV0YWNoRnJvbUZvcm0iLCJfdmFsaWRhdGlvbnMiLCJfcmVxdWlyZWRWYWxpZGF0aW9ucyIsImlzRGVmYXVsdFJlcXVpcmVkVmFsdWUiLCJzZXRTdGF0ZSIsInN0YXRlIiwibWVzc2FnZXMiLCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL21haW4uanMiLCJfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMiLCJpbmRleE9mIiwiX3R5cGVvZjIiLCJTeW1ib2wiLCJpdGVyYXRvciIsImNvbnN0cnVjdG9yIiwiX3R5cGVvZiIsIkZvcm1zeSIsInZhbGlkYXRpb25SdWxlcyIsImZvcm1EYXRhVG9PYmplY3QiLCJIT0MiLCJEZWNvcmF0b3IiLCJvcHRpb25zIiwiZW1wdHlBcnJheSIsImRlZmF1bHRzIiwicGFzc2VkT3B0aW9ucyIsImFkZFZhbGlkYXRpb25SdWxlIiwiZnVuYyIsIkZvcm0iLCJpc1N1Ym1pdHRpbmciLCJjYW5DaGFuZ2UiLCJvblN1Y2Nlc3MiLCJvbkVycm9yIiwib25TdWJtaXQiLCJvblZhbGlkU3VibWl0Iiwib25JbnZhbGlkU3VibWl0Iiwib25WYWxpZCIsIm9uSW52YWxpZCIsIm9uQ2hhbmdlIiwicHJldmVudEV4dGVybmFsSW52YWxpZGF0aW9uIiwiY2hpbGRDb250ZXh0VHlwZXMiLCJnZXRDaGlsZENvbnRleHQiLCJfdGhpcyIsImNvbXBvbmVudCIsInJ1blZhbGlkYXRpb24iLCJpbnB1dHMiLCJjb21wb25lbnREaWRNb3VudCIsInZhbGlkYXRlRm9ybSIsImNvbXBvbmVudFdpbGxVcGRhdGUiLCJwcmV2SW5wdXROYW1lcyIsInNldElucHV0VmFsaWRhdGlvbkVycm9ycyIsIm5ld0lucHV0TmFtZXMiLCJhcnJheXNEaWZmZXIiLCJyZXNldCIsImRhdGEiLCJzZXRGb3JtUHJpc3RpbmUiLCJyZXNldE1vZGVsIiwic3VibWl0IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIm1vZGVsIiwiZ2V0TW9kZWwiLCJ1cGRhdGVJbnB1dHNXaXRoRXJyb3IiLCJtYXBNb2RlbCIsIm1hcHBpbmciLCJtYXBwZWRNb2RlbCIsImtleUFycmF5IiwiYmFzZSIsImN1cnJlbnRLZXkiLCJjdXJyZW50VmFsdWVzIiwiZ2V0Q3VycmVudFZhbHVlcyIsImVycm9ycyIsImFwcGx5IiwiaXNDaGFuZ2VkIiwiZ2V0UHJpc3RpbmVWYWx1ZXMiLCJfdGhpczIiLCJpbmRleCIsImZpbmQiLCJzdHJpbmdpZnkiLCJkaXNhYmxlZCIsImVycm9yIiwidmFsaWRhdGlvblJlc3VsdHMiLCJydW5SdWxlcyIsInJlcXVpcmVkUmVzdWx0cyIsImZhaWxlZCIsInN1Y2Nlc3MiLCJmaWx0ZXIiLCJ4IiwicG9zIiwiYXJyIiwicmVzdWx0cyIsInZhbGlkYXRpb25NZXRob2QiLCJwdXNoIiwiX3RoaXMzIiwib25WYWxpZGF0aW9uQ29tcGxldGUiLCJhbGxJc1ZhbGlkIiwiZXZlcnkiLCJjb21wb25lbnRQb3MiLCJzbGljZSIsIl9wcm9wcyIsIm5vbkZvcm1zeVByb3BzIiwiY2hpbGRyZW4iLCJkZWZpbmUiLCJhbWQiLCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL3V0aWxzLmpzIiwiYSIsImIiLCJpc0RpZmZlcmVudCIsIml0ZW0iLCJvYmplY3RzRGlmZmVyIiwiY29sbGVjdGlvbiIsImZuIiwibCIsIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvdmFsaWRhdGlvblJ1bGVzLmpzIiwiX2lzRXhpc3R5IiwidW5kZWZpbmVkIiwiaXNFbXB0eSIsInZhbHVlcyIsImlzRXhpc3R5IiwibWF0Y2hSZWdleHAiLCJyZWdleHAiLCJ0ZXN0IiwiaXNVbmRlZmluZWQiLCJpc0VtcHR5U3RyaW5nIiwiaXNFbWFpbCIsImlzVXJsIiwiaXNUcnVlIiwiaXNGYWxzZSIsImlzTnVtZXJpYyIsImlzQWxwaGEiLCJpc0FscGhhbnVtZXJpYyIsImlzSW50IiwiaXNGbG9hdCIsImlzV29yZHMiLCJpc1NwZWNpYWxXb3JkcyIsImlzTGVuZ3RoIiwiZXF1YWxzIiwiZXFsIiwiZXF1YWxzRmllbGQiLCJmaWVsZCIsIm1heExlbmd0aCIsIm1pbkxlbmd0aCIsIi4vc3JjL2NvbXBvbmVudHMvQXV0aC9GaWVsZC9GaWVsZC5qcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsInNlbGYiLCJSZWZlcmVuY2VFcnJvciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNyZWF0ZSIsImVudW1lcmFibGUiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGVmaW5lUHJvcGVydHkiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZGVzY3JpcHRvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIl9yZWFjdCIsIl9yZWFjdDIiLCJfZm9ybXN5UmVhY3QiLCJfcHJvcFR5cGVzIiwiX3Byb3BUeXBlczIiLCJGaWVsZCIsIl9SZWFjdCRDb21wb25lbnQiLCJnZXRQcm90b3R5cGVPZiIsImNoYW5nZVZhbHVlIiwiY3VycmVudFRhcmdldCIsInR5cGUiLCJlcnJvck1lc3NhZ2UiLCJjbGFzc05hbWUiLCJodG1sRm9yIiwidG9Mb3dlckNhc2UiLCJ0ZXh0IiwicHJvcFR5cGVzIiwic3RyaW5nIiwiYW55IiwicmVnaXN0cmF0aW9uIiwiLi9zcmMvY29tcG9uZW50cy9BdXRoL0hlYWRlci9IZWFkZXIuanMiLCJIZWFkZXIiLCJwaWMiLCJhcmlhLWhpZGRlbiIsInRpdGxlIiwiLi9zcmMvcGFnZXMvTG9naW4vTG9naW4uanMiLCJtYXBTdGF0ZVRvUHJvcHMiLCJzdG9yZSIsImxvZ2luU3RhdHVzIiwiYXV0aGVudGljYXRpb24iLCJzdGF0dXMiLCJ1c2VyRGF0YSIsImlzTG9nZ2VkIiwiZXJyb3JUZXh0IiwibWFwRGlzcGF0Y2hUb1Byb3BzIiwiZGlzcGF0Y2giLCJsb2dpbiIsIl9yZWR1eCIsImJpbmRBY3Rpb25DcmVhdG9ycyIsIl9hdXRoIiwiY2xlYXJMb2dpblN0YXR1cyIsIl9mb3Jtc3lSZWFjdDIiLCJfSGVhZGVyIiwiX0ZpZWxkIiwiX0ZpZWxkMiIsIl9NZXNzYWdlIiwiX3JlYWN0Um91dGVyRG9tIiwiX3JlYWN0UmVkdXgiLCJMb2dpbiIsIl9Db21wb25lbnQiLCJhZGRMb2dpbiIsImVtYWlsIiwicGFzc3dvcmQiLCJlbmFibGVCdXR0b24iLCJjYW5TdWJtaXQiLCJkaXNhYmxlQnV0dG9uIiwiTWVzc2FnZSIsImNsZWFyU3RhdHVzIiwiaGVhZGVyIiwiaW5wdXQiLCJOYXZMaW5rIiwidG8iLCJjb25uZWN0IiwiaGlzdG9yeSIsIi4vc3JjL3BhZ2VzL0xvZ2luL0xvZ2luLnNjc3MiXSwibWFwcGluZ3MiOiJBQUFBQSxjQUFjLElBRVJDLDZDQUNBLFNBQVVDLEVBQVFDLEVBQVNDLEdBRWpDLFlDT0EsSUFBSUMsR0FBUUQsRUFBUSxpQ0FDaEJFLEVBQVVGLEVBQVEsK0NB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TyxFQUFBc0UsRUFBQWUsU0FBUXBDLEVBQWlCUSxHQUFvQmMsR0FFNURBLEVBQU1oQyxXQUNKWSxZQUFheEIsRUFBQTNCLFFBQVV3QyxPQUN2QjhDLFFBQVMzRCxFQUFBM0IsUUFBVWhLLE9BQ25CMk4sTUFBT2hDLEVBQUEzQixRQUFVdEgsS0FDakI0SyxTQUFVM0IsRUFBQTNCLFFBQVVoSyxPQUNwQndOLFVBQVc3QixFQUFBM0IsUUFBVXdDLE9BQ3JCdUIsaUJBQWtCcEMsRUFBQTNCLFFBQVV0SCxPWHF0Q3hCNk0sK0JBQ0EsU0FBVS9WLEVBQVFDIiwiZmlsZSI6IjUuaW5kZXhfYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2VicGFja0pzb25wKFs1XSx7XG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvY3JlYXRlLXJlYWN0LWNsYXNzL2luZGV4LmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICovXG5cblxuXG52YXIgUmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcmVhY3QvcmVhY3QuanNcIik7XG52YXIgZmFjdG9yeSA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9jcmVhdGUtcmVhY3QtY2xhc3MvZmFjdG9yeS5qc1wiKTtcblxuaWYgKHR5cGVvZiBSZWFjdCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgdGhyb3cgRXJyb3IoJ2NyZWF0ZS1yZWFjdC1jbGFzcyBjb3VsZCBub3QgZmluZCB0aGUgUmVhY3Qgb2JqZWN0LiBJZiB5b3UgYXJlIHVzaW5nIHNjcmlwdCB0YWdzLCAnICsgJ21ha2Ugc3VyZSB0aGF0IFJlYWN0IGlzIGJlaW5nIGxvYWRlZCBiZWZvcmUgY3JlYXRlLXJlYWN0LWNsYXNzLicpO1xufVxuXG4vLyBIYWNrIHRvIGdyYWIgTm9vcFVwZGF0ZVF1ZXVlIGZyb20gaXNvbW9ycGhpYyBSZWFjdFxudmFyIFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlID0gbmV3IFJlYWN0LkNvbXBvbmVudCgpLnVwZGF0ZXI7XG5cbm1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShSZWFjdC5Db21wb25lbnQsIFJlYWN0LmlzVmFsaWRFbGVtZW50LCBSZWFjdE5vb3BVcGRhdGVRdWV1ZSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbm9kZV9tb2R1bGVzL2Zvcm0tZGF0YS10by1vYmplY3QvaW5kZXguanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuZnVuY3Rpb24gdG9PYmooc291cmNlKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhzb3VyY2UpLnJlZHVjZShmdW5jdGlvbiAob3V0cHV0LCBrZXkpIHtcbiAgICB2YXIgcGFyZW50S2V5ID0ga2V5Lm1hdGNoKC9bXlxcW10qL2kpO1xuICAgIHZhciBwYXRocyA9IGtleS5tYXRjaCgvXFxbLio/XFxdL2cpIHx8IFtdO1xuICAgIHBhdGhzID0gW3BhcmVudEtleVswXV0uY29uY2F0KHBhdGhzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuIGtleS5yZXBsYWNlKC9cXFt8XFxdL2csICcnKTtcbiAgICB9KTtcbiAgICB2YXIgY3VycmVudFBhdGggPSBvdXRwdXQ7XG4gICAgd2hpbGUgKHBhdGhzLmxlbmd0aCkge1xuICAgICAgdmFyIHBhdGhLZXkgPSBwYXRocy5zaGlmdCgpO1xuXG4gICAgICBpZiAocGF0aEtleSBpbiBjdXJyZW50UGF0aCkge1xuICAgICAgICBjdXJyZW50UGF0aCA9IGN1cnJlbnRQYXRoW3BhdGhLZXldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudFBhdGhbcGF0aEtleV0gPSBwYXRocy5sZW5ndGggPyBpc05hTihwYXRoc1swXSkgPyB7fSA6IFtdIDogc291cmNlW2tleV07XG4gICAgICAgIGN1cnJlbnRQYXRoID0gY3VycmVudFBhdGhbcGF0aEtleV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfSwge30pO1xufVxuXG5mdW5jdGlvbiBmcm9tT2JqKG9iaikge1xuICBmdW5jdGlvbiByZWN1cihuZXdPYmosIHByb3BOYW1lLCBjdXJyVmFsKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY3VyclZhbCkgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGN1cnJWYWwpID09PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgICAgT2JqZWN0LmtleXMoY3VyclZhbCkuZm9yRWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICByZWN1cihuZXdPYmosIHByb3BOYW1lICsgXCJbXCIgKyB2ICsgXCJdXCIsIGN1cnJWYWxbdl0pO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gbmV3T2JqO1xuICAgIH1cblxuICAgIG5ld09ialtwcm9wTmFtZV0gPSBjdXJyVmFsO1xuICAgIHJldHVybiBuZXdPYmo7XG4gIH1cblxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG4gIHJldHVybiBrZXlzLnJlZHVjZShmdW5jdGlvbiAobmV3T2JqLCBwcm9wTmFtZSkge1xuICAgIHJldHVybiByZWN1cihuZXdPYmosIHByb3BOYW1lLCBvYmpbcHJvcE5hbWVdKTtcbiAgfSwge30pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZnJvbU9iajogZnJvbU9iaixcbiAgdG9PYmo6IHRvT2JqXG59O1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL0RlY29yYXRvci5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfXJldHVybiB0YXJnZXQ7XG59O1xuXG52YXIgUmVhY3QgPSBnbG9iYWwuUmVhY3QgfHwgX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0L3JlYWN0LmpzXCIpO1xudmFyIGNyZWF0ZVJlYWN0Q2xhc3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvY3JlYXRlLXJlYWN0LWNsYXNzL2luZGV4LmpzXCIpO1xudmFyIE1peGluID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvTWl4aW4uanNcIik7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChDb21wb25lbnQpIHtcbiAgICByZXR1cm4gY3JlYXRlUmVhY3RDbGFzcyh7XG4gICAgICBtaXhpbnM6IFtNaXhpbl0sXG4gICAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29tcG9uZW50LCBfZXh0ZW5kcyh7XG4gICAgICAgICAgc2V0VmFsaWRhdGlvbnM6IHRoaXMuc2V0VmFsaWRhdGlvbnMsXG4gICAgICAgICAgc2V0VmFsdWU6IHRoaXMuc2V0VmFsdWUsXG4gICAgICAgICAgcmVzZXRWYWx1ZTogdGhpcy5yZXNldFZhbHVlLFxuICAgICAgICAgIGdldFZhbHVlOiB0aGlzLmdldFZhbHVlLFxuICAgICAgICAgIGhhc1ZhbHVlOiB0aGlzLmhhc1ZhbHVlLFxuICAgICAgICAgIGdldEVycm9yTWVzc2FnZTogdGhpcy5nZXRFcnJvck1lc3NhZ2UsXG4gICAgICAgICAgZ2V0RXJyb3JNZXNzYWdlczogdGhpcy5nZXRFcnJvck1lc3NhZ2VzLFxuICAgICAgICAgIGlzRm9ybURpc2FibGVkOiB0aGlzLmlzRm9ybURpc2FibGVkLFxuICAgICAgICAgIGlzVmFsaWQ6IHRoaXMuaXNWYWxpZCxcbiAgICAgICAgICBpc1ByaXN0aW5lOiB0aGlzLmlzUHJpc3RpbmUsXG4gICAgICAgICAgaXNGb3JtU3VibWl0dGVkOiB0aGlzLmlzRm9ybVN1Ym1pdHRlZCxcbiAgICAgICAgICBpc1JlcXVpcmVkOiB0aGlzLmlzUmVxdWlyZWQsXG4gICAgICAgICAgc2hvd1JlcXVpcmVkOiB0aGlzLnNob3dSZXF1aXJlZCxcbiAgICAgICAgICBzaG93RXJyb3I6IHRoaXMuc2hvd0Vycm9yLFxuICAgICAgICAgIGlzVmFsaWRWYWx1ZTogdGhpcy5pc1ZhbGlkVmFsdWVcbiAgICAgICAgfSwgdGhpcy5wcm9wcykpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xufTtcbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvd2VicGFjay9idWlsZGluL2dsb2JhbC5qc1wiKSkpXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvSE9DLmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO2ZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9cmV0dXJuIHRhcmdldDtcbn07XG5cbnZhciBSZWFjdCA9IGdsb2JhbC5SZWFjdCB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcmVhY3QvcmVhY3QuanNcIik7XG52YXIgY3JlYXRlUmVhY3RDbGFzcyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9jcmVhdGUtcmVhY3QtY2xhc3MvaW5kZXguanNcIik7XG52YXIgTWl4aW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9NaXhpbi5qc1wiKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKENvbXBvbmVudCkge1xuICByZXR1cm4gY3JlYXRlUmVhY3RDbGFzcyh7XG4gICAgZGlzcGxheU5hbWU6ICdGb3Jtc3koJyArIGdldERpc3BsYXlOYW1lKENvbXBvbmVudCkgKyAnKScsXG4gICAgbWl4aW5zOiBbTWl4aW5dLFxuXG4gICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgaW5uZXJSZWYgPSB0aGlzLnByb3BzLmlubmVyUmVmO1xuXG4gICAgICB2YXIgcHJvcHNGb3JFbGVtZW50ID0gX2V4dGVuZHMoe1xuICAgICAgICBzZXRWYWxpZGF0aW9uczogdGhpcy5zZXRWYWxpZGF0aW9ucyxcbiAgICAgICAgc2V0VmFsdWU6IHRoaXMuc2V0VmFsdWUsXG4gICAgICAgIHJlc2V0VmFsdWU6IHRoaXMucmVzZXRWYWx1ZSxcbiAgICAgICAgZ2V0VmFsdWU6IHRoaXMuZ2V0VmFsdWUsXG4gICAgICAgIGhhc1ZhbHVlOiB0aGlzLmhhc1ZhbHVlLFxuICAgICAgICBnZXRFcnJvck1lc3NhZ2U6IHRoaXMuZ2V0RXJyb3JNZXNzYWdlLFxuICAgICAgICBnZXRFcnJvck1lc3NhZ2VzOiB0aGlzLmdldEVycm9yTWVzc2FnZXMsXG4gICAgICAgIGlzRm9ybURpc2FibGVkOiB0aGlzLmlzRm9ybURpc2FibGVkLFxuICAgICAgICBpc1ZhbGlkOiB0aGlzLmlzVmFsaWQsXG4gICAgICAgIGlzUHJpc3RpbmU6IHRoaXMuaXNQcmlzdGluZSxcbiAgICAgICAgaXNGb3JtU3VibWl0dGVkOiB0aGlzLmlzRm9ybVN1Ym1pdHRlZCxcbiAgICAgICAgaXNSZXF1aXJlZDogdGhpcy5pc1JlcXVpcmVkLFxuICAgICAgICBzaG93UmVxdWlyZWQ6IHRoaXMuc2hvd1JlcXVpcmVkLFxuICAgICAgICBzaG93RXJyb3I6IHRoaXMuc2hvd0Vycm9yLFxuICAgICAgICBpc1ZhbGlkVmFsdWU6IHRoaXMuaXNWYWxpZFZhbHVlXG4gICAgICB9LCB0aGlzLnByb3BzKTtcblxuICAgICAgaWYgKGlubmVyUmVmKSB7XG4gICAgICAgIHByb3BzRm9yRWxlbWVudC5yZWYgPSBpbm5lclJlZjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KENvbXBvbmVudCwgcHJvcHNGb3JFbGVtZW50KTtcbiAgICB9XG4gIH0pO1xufTtcblxuZnVuY3Rpb24gZ2V0RGlzcGxheU5hbWUoQ29tcG9uZW50KSB7XG4gIHJldHVybiBDb21wb25lbnQuZGlzcGxheU5hbWUgfHwgQ29tcG9uZW50Lm5hbWUgfHwgKHR5cGVvZiBDb21wb25lbnQgPT09ICdzdHJpbmcnID8gQ29tcG9uZW50IDogJ0NvbXBvbmVudCcpO1xufVxuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy93ZWJwYWNrL2J1aWxkaW4vZ2xvYmFsLmpzXCIpKSlcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9NaXhpbi5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHtcblxudmFyIFByb3BUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9wcm9wLXR5cGVzL2luZGV4LmpzXCIpO1xudmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvdXRpbHMuanNcIik7XG52YXIgUmVhY3QgPSBnbG9iYWwuUmVhY3QgfHwgX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0L3JlYWN0LmpzXCIpO1xuXG52YXIgY29udmVydFZhbGlkYXRpb25zVG9PYmplY3QgPSBmdW5jdGlvbiBjb252ZXJ0VmFsaWRhdGlvbnNUb09iamVjdCh2YWxpZGF0aW9ucykge1xuXG4gIGlmICh0eXBlb2YgdmFsaWRhdGlvbnMgPT09ICdzdHJpbmcnKSB7XG5cbiAgICByZXR1cm4gdmFsaWRhdGlvbnMuc3BsaXQoL1xcLCg/IVtee1xcW10qW31cXF1dKS9nKS5yZWR1Y2UoZnVuY3Rpb24gKHZhbGlkYXRpb25zLCB2YWxpZGF0aW9uKSB7XG4gICAgICB2YXIgYXJncyA9IHZhbGlkYXRpb24uc3BsaXQoJzonKTtcbiAgICAgIHZhciB2YWxpZGF0ZU1ldGhvZCA9IGFyZ3Muc2hpZnQoKTtcblxuICAgICAgYXJncyA9IGFyZ3MubWFwKGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShhcmcpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgcmV0dXJuIGFyZzsgLy8gSXQgaXMgYSBzdHJpbmcgaWYgaXQgY2FuIG5vdCBwYXJzZSBpdFxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gMSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm1zeSBkb2VzIG5vdCBzdXBwb3J0IG11bHRpcGxlIGFyZ3Mgb24gc3RyaW5nIHZhbGlkYXRpb25zLiBVc2Ugb2JqZWN0IGZvcm1hdCBvZiB2YWxpZGF0aW9ucyBpbnN0ZWFkLicpO1xuICAgICAgfVxuXG4gICAgICB2YWxpZGF0aW9uc1t2YWxpZGF0ZU1ldGhvZF0gPSBhcmdzLmxlbmd0aCA/IGFyZ3NbMF0gOiB0cnVlO1xuICAgICAgcmV0dXJuIHZhbGlkYXRpb25zO1xuICAgIH0sIHt9KTtcbiAgfVxuXG4gIHJldHVybiB2YWxpZGF0aW9ucyB8fCB7fTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgX3ZhbHVlOiB0aGlzLnByb3BzLnZhbHVlLFxuICAgICAgX2lzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgX2lzVmFsaWQ6IHRydWUsXG4gICAgICBfaXNQcmlzdGluZTogdHJ1ZSxcbiAgICAgIF9wcmlzdGluZVZhbHVlOiB0aGlzLnByb3BzLnZhbHVlLFxuICAgICAgX3ZhbGlkYXRpb25FcnJvcjogW10sXG4gICAgICBfZXh0ZXJuYWxFcnJvcjogbnVsbCxcbiAgICAgIF9mb3JtU3VibWl0dGVkOiBmYWxzZVxuICAgIH07XG4gIH0sXG4gIGNvbnRleHRUeXBlczoge1xuICAgIGZvcm1zeTogUHJvcFR5cGVzLm9iamVjdCAvLyBXaGF0IGFib3V0IHJlcXVpcmVkP1xuICB9LFxuICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWRhdGlvbkVycm9yOiAnJyxcbiAgICAgIHZhbGlkYXRpb25FcnJvcnM6IHt9XG4gICAgfTtcbiAgfSxcblxuICBjb21wb25lbnRXaWxsTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICB2YXIgY29uZmlndXJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5zZXRWYWxpZGF0aW9ucyh0aGlzLnByb3BzLnZhbGlkYXRpb25zLCB0aGlzLnByb3BzLnJlcXVpcmVkKTtcblxuICAgICAgLy8gUGFzcyBhIGZ1bmN0aW9uIGluc3RlYWQ/XG4gICAgICB0aGlzLmNvbnRleHQuZm9ybXN5LmF0dGFjaFRvRm9ybSh0aGlzKTtcbiAgICAgIC8vdGhpcy5wcm9wcy5fYXR0YWNoVG9Gb3JtKHRoaXMpO1xuICAgIH0uYmluZCh0aGlzKTtcblxuICAgIGlmICghdGhpcy5wcm9wcy5uYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm0gSW5wdXQgcmVxdWlyZXMgYSBuYW1lIHByb3BlcnR5IHdoZW4gdXNlZCcpO1xuICAgIH1cblxuICAgIC8qXG4gICAgaWYgKCF0aGlzLnByb3BzLl9hdHRhY2hUb0Zvcm0pIHtcbiAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzTW91bnRlZCgpKSByZXR1cm47XG4gICAgICAgIGlmICghdGhpcy5wcm9wcy5fYXR0YWNoVG9Gb3JtKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3JtIE1peGluIHJlcXVpcmVzIGNvbXBvbmVudCB0byBiZSBuZXN0ZWQgaW4gYSBGb3JtJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uZmlndXJlKCk7XG4gICAgICB9LmJpbmQodGhpcyksIDApO1xuICAgIH1cbiAgICAqL1xuICAgIGNvbmZpZ3VyZSgpO1xuICB9LFxuXG4gIC8vIFdlIGhhdmUgdG8gbWFrZSB0aGUgdmFsaWRhdGUgbWV0aG9kIGlzIGtlcHQgd2hlbiBuZXcgcHJvcHMgYXJlIGFkZGVkXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHM6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgdGhpcy5zZXRWYWxpZGF0aW9ucyhuZXh0UHJvcHMudmFsaWRhdGlvbnMsIG5leHRQcm9wcy5yZXF1aXJlZCk7XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzKSB7XG5cbiAgICAvLyBJZiB0aGUgdmFsdWUgcGFzc2VkIGhhcyBjaGFuZ2VkLCBzZXQgaXQuIElmIHZhbHVlIGlzIG5vdCBwYXNzZWQgaXQgd2lsbFxuICAgIC8vIGludGVybmFsbHkgdXBkYXRlLCBhbmQgdGhpcyB3aWxsIG5ldmVyIHJ1blxuICAgIGlmICghdXRpbHMuaXNTYW1lKHRoaXMucHJvcHMudmFsdWUsIHByZXZQcm9wcy52YWx1ZSkpIHtcbiAgICAgIHRoaXMuc2V0VmFsdWUodGhpcy5wcm9wcy52YWx1ZSk7XG4gICAgfVxuXG4gICAgLy8gSWYgdmFsaWRhdGlvbnMgb3IgcmVxdWlyZWQgaXMgY2hhbmdlZCwgcnVuIGEgbmV3IHZhbGlkYXRpb25cbiAgICBpZiAoIXV0aWxzLmlzU2FtZSh0aGlzLnByb3BzLnZhbGlkYXRpb25zLCBwcmV2UHJvcHMudmFsaWRhdGlvbnMpIHx8ICF1dGlscy5pc1NhbWUodGhpcy5wcm9wcy5yZXF1aXJlZCwgcHJldlByb3BzLnJlcXVpcmVkKSkge1xuICAgICAgdGhpcy5jb250ZXh0LmZvcm1zeS52YWxpZGF0ZSh0aGlzKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gRGV0YWNoIGl0IHdoZW4gY29tcG9uZW50IHVubW91bnRzXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50OiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICB0aGlzLmNvbnRleHQuZm9ybXN5LmRldGFjaEZyb21Gb3JtKHRoaXMpO1xuICAgIC8vdGhpcy5wcm9wcy5fZGV0YWNoRnJvbUZvcm0odGhpcyk7XG4gIH0sXG5cbiAgc2V0VmFsaWRhdGlvbnM6IGZ1bmN0aW9uIHNldFZhbGlkYXRpb25zKHZhbGlkYXRpb25zLCByZXF1aXJlZCkge1xuXG4gICAgLy8gQWRkIHZhbGlkYXRpb25zIHRvIHRoZSBzdG9yZSBpdHNlbGYgYXMgdGhlIHByb3BzIG9iamVjdCBjYW4gbm90IGJlIG1vZGlmaWVkXG4gICAgdGhpcy5fdmFsaWRhdGlvbnMgPSBjb252ZXJ0VmFsaWRhdGlvbnNUb09iamVjdCh2YWxpZGF0aW9ucykgfHwge307XG4gICAgdGhpcy5fcmVxdWlyZWRWYWxpZGF0aW9ucyA9IHJlcXVpcmVkID09PSB0cnVlID8geyBpc0RlZmF1bHRSZXF1aXJlZFZhbHVlOiB0cnVlIH0gOiBjb252ZXJ0VmFsaWRhdGlvbnNUb09iamVjdChyZXF1aXJlZCk7XG4gIH0sXG5cbiAgLy8gV2UgdmFsaWRhdGUgYWZ0ZXIgdGhlIHZhbHVlIGhhcyBiZWVuIHNldFxuICBzZXRWYWx1ZTogZnVuY3Rpb24gc2V0VmFsdWUodmFsdWUpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIF92YWx1ZTogdmFsdWUsXG4gICAgICBfaXNQcmlzdGluZTogZmFsc2VcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmNvbnRleHQuZm9ybXN5LnZhbGlkYXRlKHRoaXMpO1xuICAgICAgLy90aGlzLnByb3BzLl92YWxpZGF0ZSh0aGlzKTtcbiAgICB9LmJpbmQodGhpcykpO1xuICB9LFxuICByZXNldFZhbHVlOiBmdW5jdGlvbiByZXNldFZhbHVlKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgX3ZhbHVlOiB0aGlzLnN0YXRlLl9wcmlzdGluZVZhbHVlLFxuICAgICAgX2lzUHJpc3RpbmU6IHRydWVcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmNvbnRleHQuZm9ybXN5LnZhbGlkYXRlKHRoaXMpO1xuICAgICAgLy90aGlzLnByb3BzLl92YWxpZGF0ZSh0aGlzKTtcbiAgICB9KTtcbiAgfSxcbiAgZ2V0VmFsdWU6IGZ1bmN0aW9uIGdldFZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLl92YWx1ZTtcbiAgfSxcbiAgaGFzVmFsdWU6IGZ1bmN0aW9uIGhhc1ZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLl92YWx1ZSAhPT0gJyc7XG4gIH0sXG4gIGdldEVycm9yTWVzc2FnZTogZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKCkge1xuICAgIHZhciBtZXNzYWdlcyA9IHRoaXMuZ2V0RXJyb3JNZXNzYWdlcygpO1xuICAgIHJldHVybiBtZXNzYWdlcy5sZW5ndGggPyBtZXNzYWdlc1swXSA6IG51bGw7XG4gIH0sXG4gIGdldEVycm9yTWVzc2FnZXM6IGZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZXMoKSB7XG4gICAgcmV0dXJuICF0aGlzLmlzVmFsaWQoKSB8fCB0aGlzLnNob3dSZXF1aXJlZCgpID8gdGhpcy5zdGF0ZS5fZXh0ZXJuYWxFcnJvciB8fCB0aGlzLnN0YXRlLl92YWxpZGF0aW9uRXJyb3IgfHwgW10gOiBbXTtcbiAgfSxcbiAgaXNGb3JtRGlzYWJsZWQ6IGZ1bmN0aW9uIGlzRm9ybURpc2FibGVkKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHQuZm9ybXN5LmlzRm9ybURpc2FibGVkKCk7XG4gICAgLy9yZXR1cm4gdGhpcy5wcm9wcy5faXNGb3JtRGlzYWJsZWQoKTtcbiAgfSxcbiAgaXNWYWxpZDogZnVuY3Rpb24gaXNWYWxpZCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5faXNWYWxpZDtcbiAgfSxcbiAgaXNQcmlzdGluZTogZnVuY3Rpb24gaXNQcmlzdGluZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5faXNQcmlzdGluZTtcbiAgfSxcbiAgaXNGb3JtU3VibWl0dGVkOiBmdW5jdGlvbiBpc0Zvcm1TdWJtaXR0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX2Zvcm1TdWJtaXR0ZWQ7XG4gIH0sXG4gIGlzUmVxdWlyZWQ6IGZ1bmN0aW9uIGlzUmVxdWlyZWQoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5wcm9wcy5yZXF1aXJlZDtcbiAgfSxcbiAgc2hvd1JlcXVpcmVkOiBmdW5jdGlvbiBzaG93UmVxdWlyZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX2lzUmVxdWlyZWQ7XG4gIH0sXG4gIHNob3dFcnJvcjogZnVuY3Rpb24gc2hvd0Vycm9yKCkge1xuICAgIHJldHVybiAhdGhpcy5zaG93UmVxdWlyZWQoKSAmJiAhdGhpcy5pc1ZhbGlkKCk7XG4gIH0sXG4gIGlzVmFsaWRWYWx1ZTogZnVuY3Rpb24gaXNWYWxpZFZhbHVlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGV4dC5mb3Jtc3kuaXNWYWxpZFZhbHVlLmNhbGwobnVsbCwgdGhpcywgdmFsdWUpO1xuICAgIC8vcmV0dXJuIHRoaXMucHJvcHMuX2lzVmFsaWRWYWx1ZS5jYWxsKG51bGwsIHRoaXMsIHZhbHVlKTtcbiAgfVxufTtcbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvd2VicGFjay9idWlsZGluL2dsb2JhbC5qc1wiKSkpXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvbWFpbi5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHtcblxudmFyIF90eXBlb2YyID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfXJldHVybiB0YXJnZXQ7XG59O1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mMihvYmopO1xufSA6IGZ1bmN0aW9uIChvYmopIHtcbiAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmogPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZjIob2JqKTtcbn07XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhvYmosIGtleXMpIHtcbiAgdmFyIHRhcmdldCA9IHt9O2ZvciAodmFyIGkgaW4gb2JqKSB7XG4gICAgaWYgKGtleXMuaW5kZXhPZihpKSA+PSAwKSBjb250aW51ZTtpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGkpKSBjb250aW51ZTt0YXJnZXRbaV0gPSBvYmpbaV07XG4gIH1yZXR1cm4gdGFyZ2V0O1xufVxuXG52YXIgUHJvcFR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3Byb3AtdHlwZXMvaW5kZXguanNcIik7XG52YXIgUmVhY3QgPSBnbG9iYWwuUmVhY3QgfHwgX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0L3JlYWN0LmpzXCIpO1xudmFyIGNyZWF0ZVJlYWN0Q2xhc3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvY3JlYXRlLXJlYWN0LWNsYXNzL2luZGV4LmpzXCIpO1xudmFyIEZvcm1zeSA9IHt9O1xudmFyIHZhbGlkYXRpb25SdWxlcyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL3ZhbGlkYXRpb25SdWxlcy5qc1wiKTtcbnZhciBmb3JtRGF0YVRvT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2Zvcm0tZGF0YS10by1vYmplY3QvaW5kZXguanNcIik7XG52YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi91dGlscy5qc1wiKTtcbnZhciBNaXhpbiA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL01peGluLmpzXCIpO1xudmFyIEhPQyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL0hPQy5qc1wiKTtcbnZhciBEZWNvcmF0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9EZWNvcmF0b3IuanNcIik7XG52YXIgb3B0aW9ucyA9IHt9O1xudmFyIGVtcHR5QXJyYXkgPSBbXTtcblxuRm9ybXN5Lk1peGluID0gTWl4aW47XG5Gb3Jtc3kuSE9DID0gSE9DO1xuRm9ybXN5LkRlY29yYXRvciA9IERlY29yYXRvcjtcblxuRm9ybXN5LmRlZmF1bHRzID0gZnVuY3Rpb24gKHBhc3NlZE9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IHBhc3NlZE9wdGlvbnM7XG59O1xuXG5Gb3Jtc3kuYWRkVmFsaWRhdGlvblJ1bGUgPSBmdW5jdGlvbiAobmFtZSwgZnVuYykge1xuICB2YWxpZGF0aW9uUnVsZXNbbmFtZV0gPSBmdW5jO1xufTtcblxuRm9ybXN5LkZvcm0gPSBjcmVhdGVSZWFjdENsYXNzKHtcbiAgZGlzcGxheU5hbWU6ICdGb3Jtc3knLFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaXNWYWxpZDogdHJ1ZSxcbiAgICAgIGlzU3VibWl0dGluZzogZmFsc2UsXG4gICAgICBjYW5DaGFuZ2U6IGZhbHNlXG4gICAgfTtcbiAgfSxcbiAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9uU3VjY2VzczogZnVuY3Rpb24gb25TdWNjZXNzKCkge30sXG4gICAgICBvbkVycm9yOiBmdW5jdGlvbiBvbkVycm9yKCkge30sXG4gICAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoKSB7fSxcbiAgICAgIG9uVmFsaWRTdWJtaXQ6IGZ1bmN0aW9uIG9uVmFsaWRTdWJtaXQoKSB7fSxcbiAgICAgIG9uSW52YWxpZFN1Ym1pdDogZnVuY3Rpb24gb25JbnZhbGlkU3VibWl0KCkge30sXG4gICAgICBvblZhbGlkOiBmdW5jdGlvbiBvblZhbGlkKCkge30sXG4gICAgICBvbkludmFsaWQ6IGZ1bmN0aW9uIG9uSW52YWxpZCgpIHt9LFxuICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKCkge30sXG4gICAgICB2YWxpZGF0aW9uRXJyb3JzOiBudWxsLFxuICAgICAgcHJldmVudEV4dGVybmFsSW52YWxpZGF0aW9uOiBmYWxzZVxuICAgIH07XG4gIH0sXG5cbiAgY2hpbGRDb250ZXh0VHlwZXM6IHtcbiAgICBmb3Jtc3k6IFByb3BUeXBlcy5vYmplY3RcbiAgfSxcbiAgZ2V0Q2hpbGRDb250ZXh0OiBmdW5jdGlvbiBnZXRDaGlsZENvbnRleHQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHJldHVybiB7XG4gICAgICBmb3Jtc3k6IHtcbiAgICAgICAgYXR0YWNoVG9Gb3JtOiB0aGlzLmF0dGFjaFRvRm9ybSxcbiAgICAgICAgZGV0YWNoRnJvbUZvcm06IHRoaXMuZGV0YWNoRnJvbUZvcm0sXG4gICAgICAgIHZhbGlkYXRlOiB0aGlzLnZhbGlkYXRlLFxuICAgICAgICBpc0Zvcm1EaXNhYmxlZDogdGhpcy5pc0Zvcm1EaXNhYmxlZCxcbiAgICAgICAgaXNWYWxpZFZhbHVlOiBmdW5jdGlvbiBpc1ZhbGlkVmFsdWUoY29tcG9uZW50LCB2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiBfdGhpcy5ydW5WYWxpZGF0aW9uKGNvbXBvbmVudCwgdmFsdWUpLmlzVmFsaWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9LFxuXG4gIC8vIEFkZCBhIG1hcCB0byBzdG9yZSB0aGUgaW5wdXRzIG9mIHRoZSBmb3JtLCBhIG1vZGVsIHRvIHN0b3JlXG4gIC8vIHRoZSB2YWx1ZXMgb2YgdGhlIGZvcm0gYW5kIHJlZ2lzdGVyIGNoaWxkIGlucHV0c1xuICBjb21wb25lbnRXaWxsTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICB0aGlzLmlucHV0cyA9IFtdO1xuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnZhbGlkYXRlRm9ybSgpO1xuICB9LFxuXG4gIGNvbXBvbmVudFdpbGxVcGRhdGU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVcGRhdGUoKSB7XG4gICAgLy8gS2VlcCBhIHJlZmVyZW5jZSB0byBpbnB1dCBuYW1lcyBiZWZvcmUgZm9ybSB1cGRhdGVzLFxuICAgIC8vIHRvIGNoZWNrIGlmIGlucHV0cyBoYXMgY2hhbmdlZCBhZnRlciByZW5kZXJcbiAgICB0aGlzLnByZXZJbnB1dE5hbWVzID0gdGhpcy5pbnB1dHMubWFwKGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgIHJldHVybiBjb21wb25lbnQucHJvcHMubmFtZTtcbiAgICB9KTtcbiAgfSxcblxuICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcblxuICAgIGlmICh0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnMgJiYgX3R5cGVvZih0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnMpID09PSAnb2JqZWN0JyAmJiBPYmplY3Qua2V5cyh0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnMpLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuc2V0SW5wdXRWYWxpZGF0aW9uRXJyb3JzKHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9ycyk7XG4gICAgfVxuXG4gICAgdmFyIG5ld0lucHV0TmFtZXMgPSB0aGlzLmlucHV0cy5tYXAoZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgcmV0dXJuIGNvbXBvbmVudC5wcm9wcy5uYW1lO1xuICAgIH0pO1xuICAgIGlmICh1dGlscy5hcnJheXNEaWZmZXIodGhpcy5wcmV2SW5wdXROYW1lcywgbmV3SW5wdXROYW1lcykpIHtcbiAgICAgIHRoaXMudmFsaWRhdGVGb3JtKCk7XG4gICAgfVxuICB9LFxuXG4gIC8vIEFsbG93IHJlc2V0dGluZyB0byBzcGVjaWZpZWQgZGF0YVxuICByZXNldDogZnVuY3Rpb24gcmVzZXQoZGF0YSkge1xuICAgIHRoaXMuc2V0Rm9ybVByaXN0aW5lKHRydWUpO1xuICAgIHRoaXMucmVzZXRNb2RlbChkYXRhKTtcbiAgfSxcblxuICAvLyBVcGRhdGUgbW9kZWwsIHN1Ym1pdCB0byB1cmwgcHJvcCBhbmQgc2VuZCB0aGUgbW9kZWxcbiAgc3VibWl0OiBmdW5jdGlvbiBzdWJtaXQoZXZlbnQpIHtcblxuICAgIGV2ZW50ICYmIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAvLyBUcmlnZ2VyIGZvcm0gYXMgbm90IHByaXN0aW5lLlxuICAgIC8vIElmIGFueSBpbnB1dHMgaGF2ZSBub3QgYmVlbiB0b3VjaGVkIHlldCB0aGlzIHdpbGwgbWFrZSB0aGVtIGRpcnR5XG4gICAgLy8gc28gdmFsaWRhdGlvbiBiZWNvbWVzIHZpc2libGUgKGlmIGJhc2VkIG9uIGlzUHJpc3RpbmUpXG4gICAgdGhpcy5zZXRGb3JtUHJpc3RpbmUoZmFsc2UpO1xuICAgIHZhciBtb2RlbCA9IHRoaXMuZ2V0TW9kZWwoKTtcbiAgICB0aGlzLnByb3BzLm9uU3VibWl0KG1vZGVsLCB0aGlzLnJlc2V0TW9kZWwsIHRoaXMudXBkYXRlSW5wdXRzV2l0aEVycm9yKTtcbiAgICB0aGlzLnN0YXRlLmlzVmFsaWQgPyB0aGlzLnByb3BzLm9uVmFsaWRTdWJtaXQobW9kZWwsIHRoaXMucmVzZXRNb2RlbCwgdGhpcy51cGRhdGVJbnB1dHNXaXRoRXJyb3IpIDogdGhpcy5wcm9wcy5vbkludmFsaWRTdWJtaXQobW9kZWwsIHRoaXMucmVzZXRNb2RlbCwgdGhpcy51cGRhdGVJbnB1dHNXaXRoRXJyb3IpO1xuICB9LFxuXG4gIG1hcE1vZGVsOiBmdW5jdGlvbiBtYXBNb2RlbChtb2RlbCkge1xuXG4gICAgaWYgKHRoaXMucHJvcHMubWFwcGluZykge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMubWFwcGluZyhtb2RlbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmb3JtRGF0YVRvT2JqZWN0LnRvT2JqKE9iamVjdC5rZXlzKG1vZGVsKS5yZWR1Y2UoZnVuY3Rpb24gKG1hcHBlZE1vZGVsLCBrZXkpIHtcblxuICAgICAgICB2YXIga2V5QXJyYXkgPSBrZXkuc3BsaXQoJy4nKTtcbiAgICAgICAgdmFyIGJhc2UgPSBtYXBwZWRNb2RlbDtcbiAgICAgICAgd2hpbGUgKGtleUFycmF5Lmxlbmd0aCkge1xuICAgICAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5QXJyYXkuc2hpZnQoKTtcbiAgICAgICAgICBiYXNlID0gYmFzZVtjdXJyZW50S2V5XSA9IGtleUFycmF5Lmxlbmd0aCA/IGJhc2VbY3VycmVudEtleV0gfHwge30gOiBtb2RlbFtrZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1hcHBlZE1vZGVsO1xuICAgICAgfSwge30pKTtcbiAgICB9XG4gIH0sXG5cbiAgZ2V0TW9kZWw6IGZ1bmN0aW9uIGdldE1vZGVsKCkge1xuICAgIHZhciBjdXJyZW50VmFsdWVzID0gdGhpcy5nZXRDdXJyZW50VmFsdWVzKCk7XG4gICAgcmV0dXJuIHRoaXMubWFwTW9kZWwoY3VycmVudFZhbHVlcyk7XG4gIH0sXG5cbiAgLy8gUmVzZXQgZWFjaCBrZXkgaW4gdGhlIG1vZGVsIHRvIHRoZSBvcmlnaW5hbCAvIGluaXRpYWwgLyBzcGVjaWZpZWQgdmFsdWVcbiAgcmVzZXRNb2RlbDogZnVuY3Rpb24gcmVzZXRNb2RlbChkYXRhKSB7XG4gICAgdGhpcy5pbnB1dHMuZm9yRWFjaChmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICB2YXIgbmFtZSA9IGNvbXBvbmVudC5wcm9wcy5uYW1lO1xuICAgICAgaWYgKGRhdGEgJiYgZGF0YS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICBjb21wb25lbnQuc2V0VmFsdWUoZGF0YVtuYW1lXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb21wb25lbnQucmVzZXRWYWx1ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMudmFsaWRhdGVGb3JtKCk7XG4gIH0sXG5cbiAgc2V0SW5wdXRWYWxpZGF0aW9uRXJyb3JzOiBmdW5jdGlvbiBzZXRJbnB1dFZhbGlkYXRpb25FcnJvcnMoZXJyb3JzKSB7XG4gICAgdGhpcy5pbnB1dHMuZm9yRWFjaChmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICB2YXIgbmFtZSA9IGNvbXBvbmVudC5wcm9wcy5uYW1lO1xuICAgICAgdmFyIGFyZ3MgPSBbe1xuICAgICAgICBfaXNWYWxpZDogIShuYW1lIGluIGVycm9ycyksXG4gICAgICAgIF92YWxpZGF0aW9uRXJyb3I6IHR5cGVvZiBlcnJvcnNbbmFtZV0gPT09ICdzdHJpbmcnID8gW2Vycm9yc1tuYW1lXV0gOiBlcnJvcnNbbmFtZV1cbiAgICAgIH1dO1xuICAgICAgY29tcG9uZW50LnNldFN0YXRlLmFwcGx5KGNvbXBvbmVudCwgYXJncyk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLy8gQ2hlY2tzIGlmIHRoZSB2YWx1ZXMgaGF2ZSBjaGFuZ2VkIGZyb20gdGhlaXIgaW5pdGlhbCB2YWx1ZVxuICBpc0NoYW5nZWQ6IGZ1bmN0aW9uIGlzQ2hhbmdlZCgpIHtcbiAgICByZXR1cm4gIXV0aWxzLmlzU2FtZSh0aGlzLmdldFByaXN0aW5lVmFsdWVzKCksIHRoaXMuZ2V0Q3VycmVudFZhbHVlcygpKTtcbiAgfSxcblxuICBnZXRQcmlzdGluZVZhbHVlczogZnVuY3Rpb24gZ2V0UHJpc3RpbmVWYWx1ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5wdXRzLnJlZHVjZShmdW5jdGlvbiAoZGF0YSwgY29tcG9uZW50KSB7XG4gICAgICB2YXIgbmFtZSA9IGNvbXBvbmVudC5wcm9wcy5uYW1lO1xuICAgICAgZGF0YVtuYW1lXSA9IGNvbXBvbmVudC5wcm9wcy52YWx1ZTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0sIHt9KTtcbiAgfSxcblxuICAvLyBHbyB0aHJvdWdoIGVycm9ycyBmcm9tIHNlcnZlciBhbmQgZ3JhYiB0aGUgY29tcG9uZW50c1xuICAvLyBzdG9yZWQgaW4gdGhlIGlucHV0cyBtYXAuIENoYW5nZSB0aGVpciBzdGF0ZSB0byBpbnZhbGlkXG4gIC8vIGFuZCBzZXQgdGhlIHNlcnZlckVycm9yIG1lc3NhZ2VcbiAgdXBkYXRlSW5wdXRzV2l0aEVycm9yOiBmdW5jdGlvbiB1cGRhdGVJbnB1dHNXaXRoRXJyb3IoZXJyb3JzKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICBPYmplY3Qua2V5cyhlcnJvcnMpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUsIGluZGV4KSB7XG4gICAgICB2YXIgY29tcG9uZW50ID0gdXRpbHMuZmluZChfdGhpczIuaW5wdXRzLCBmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICAgIHJldHVybiBjb21wb25lbnQucHJvcHMubmFtZSA9PT0gbmFtZTtcbiAgICAgIH0pO1xuICAgICAgaWYgKCFjb21wb25lbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgYXJlIHRyeWluZyB0byB1cGRhdGUgYW4gaW5wdXQgdGhhdCBkb2VzIG5vdCBleGlzdC4gJyArICdWZXJpZnkgZXJyb3JzIG9iamVjdCB3aXRoIGlucHV0IG5hbWVzLiAnICsgSlNPTi5zdHJpbmdpZnkoZXJyb3JzKSk7XG4gICAgICB9XG4gICAgICB2YXIgYXJncyA9IFt7XG4gICAgICAgIF9pc1ZhbGlkOiBfdGhpczIucHJvcHMucHJldmVudEV4dGVybmFsSW52YWxpZGF0aW9uIHx8IGZhbHNlLFxuICAgICAgICBfZXh0ZXJuYWxFcnJvcjogdHlwZW9mIGVycm9yc1tuYW1lXSA9PT0gJ3N0cmluZycgPyBbZXJyb3JzW25hbWVdXSA6IGVycm9yc1tuYW1lXVxuICAgICAgfV07XG4gICAgICBjb21wb25lbnQuc2V0U3RhdGUuYXBwbHkoY29tcG9uZW50LCBhcmdzKTtcbiAgICB9KTtcbiAgfSxcblxuICBpc0Zvcm1EaXNhYmxlZDogZnVuY3Rpb24gaXNGb3JtRGlzYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuZGlzYWJsZWQ7XG4gIH0sXG5cbiAgZ2V0Q3VycmVudFZhbHVlczogZnVuY3Rpb24gZ2V0Q3VycmVudFZhbHVlcygpIHtcbiAgICByZXR1cm4gdGhpcy5pbnB1dHMucmVkdWNlKGZ1bmN0aW9uIChkYXRhLCBjb21wb25lbnQpIHtcbiAgICAgIHZhciBuYW1lID0gY29tcG9uZW50LnByb3BzLm5hbWU7XG4gICAgICBkYXRhW25hbWVdID0gY29tcG9uZW50LnN0YXRlLl92YWx1ZTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0sIHt9KTtcbiAgfSxcblxuICBzZXRGb3JtUHJpc3RpbmU6IGZ1bmN0aW9uIHNldEZvcm1QcmlzdGluZShpc1ByaXN0aW5lKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBfZm9ybVN1Ym1pdHRlZDogIWlzUHJpc3RpbmVcbiAgICB9KTtcblxuICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBlYWNoIGNvbXBvbmVudCBhbmQgc2V0IGl0IGFzIHByaXN0aW5lXG4gICAgLy8gb3IgXCJkaXJ0eVwiLlxuICAgIHRoaXMuaW5wdXRzLmZvckVhY2goZnVuY3Rpb24gKGNvbXBvbmVudCwgaW5kZXgpIHtcbiAgICAgIGNvbXBvbmVudC5zZXRTdGF0ZSh7XG4gICAgICAgIF9mb3JtU3VibWl0dGVkOiAhaXNQcmlzdGluZSxcbiAgICAgICAgX2lzUHJpc3RpbmU6IGlzUHJpc3RpbmVcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LFxuXG4gIC8vIFVzZSB0aGUgYmluZGVkIHZhbHVlcyBhbmQgdGhlIGFjdHVhbCBpbnB1dCB2YWx1ZSB0b1xuICAvLyB2YWxpZGF0ZSB0aGUgaW5wdXQgYW5kIHNldCBpdHMgc3RhdGUuIFRoZW4gY2hlY2sgdGhlXG4gIC8vIHN0YXRlIG9mIHRoZSBmb3JtIGl0c2VsZlxuICB2YWxpZGF0ZTogZnVuY3Rpb24gdmFsaWRhdGUoY29tcG9uZW50KSB7XG5cbiAgICAvLyBUcmlnZ2VyIG9uQ2hhbmdlXG4gICAgaWYgKHRoaXMuc3RhdGUuY2FuQ2hhbmdlKSB7XG4gICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHRoaXMuZ2V0Q3VycmVudFZhbHVlcygpLCB0aGlzLmlzQ2hhbmdlZCgpKTtcbiAgICB9XG5cbiAgICB2YXIgdmFsaWRhdGlvbiA9IHRoaXMucnVuVmFsaWRhdGlvbihjb21wb25lbnQpO1xuICAgIC8vIFJ1biB0aHJvdWdoIHRoZSB2YWxpZGF0aW9ucywgc3BsaXQgdGhlbSB1cCBhbmQgY2FsbFxuICAgIC8vIHRoZSB2YWxpZGF0b3IgSUYgdGhlcmUgaXMgYSB2YWx1ZSBvciBpdCBpcyByZXF1aXJlZFxuICAgIGNvbXBvbmVudC5zZXRTdGF0ZSh7XG4gICAgICBfaXNWYWxpZDogdmFsaWRhdGlvbi5pc1ZhbGlkLFxuICAgICAgX2lzUmVxdWlyZWQ6IHZhbGlkYXRpb24uaXNSZXF1aXJlZCxcbiAgICAgIF92YWxpZGF0aW9uRXJyb3I6IHZhbGlkYXRpb24uZXJyb3IsXG4gICAgICBfZXh0ZXJuYWxFcnJvcjogbnVsbFxuICAgIH0sIHRoaXMudmFsaWRhdGVGb3JtKTtcbiAgfSxcblxuICAvLyBDaGVja3MgdmFsaWRhdGlvbiBvbiBjdXJyZW50IHZhbHVlIG9yIGEgcGFzc2VkIHZhbHVlXG4gIHJ1blZhbGlkYXRpb246IGZ1bmN0aW9uIHJ1blZhbGlkYXRpb24oY29tcG9uZW50LCB2YWx1ZSkge1xuXG4gICAgdmFyIGN1cnJlbnRWYWx1ZXMgPSB0aGlzLmdldEN1cnJlbnRWYWx1ZXMoKTtcbiAgICB2YXIgdmFsaWRhdGlvbkVycm9ycyA9IGNvbXBvbmVudC5wcm9wcy52YWxpZGF0aW9uRXJyb3JzO1xuICAgIHZhciB2YWxpZGF0aW9uRXJyb3IgPSBjb21wb25lbnQucHJvcHMudmFsaWRhdGlvbkVycm9yO1xuICAgIHZhbHVlID0gYXJndW1lbnRzLmxlbmd0aCA9PT0gMiA/IHZhbHVlIDogY29tcG9uZW50LnN0YXRlLl92YWx1ZTtcblxuICAgIHZhciB2YWxpZGF0aW9uUmVzdWx0cyA9IHRoaXMucnVuUnVsZXModmFsdWUsIGN1cnJlbnRWYWx1ZXMsIGNvbXBvbmVudC5fdmFsaWRhdGlvbnMpO1xuICAgIHZhciByZXF1aXJlZFJlc3VsdHMgPSB0aGlzLnJ1blJ1bGVzKHZhbHVlLCBjdXJyZW50VmFsdWVzLCBjb21wb25lbnQuX3JlcXVpcmVkVmFsaWRhdGlvbnMpO1xuXG4gICAgLy8gdGhlIGNvbXBvbmVudCBkZWZpbmVzIGFuIGV4cGxpY2l0IHZhbGlkYXRlIGZ1bmN0aW9uXG4gICAgaWYgKHR5cGVvZiBjb21wb25lbnQudmFsaWRhdGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdmFsaWRhdGlvblJlc3VsdHMuZmFpbGVkID0gY29tcG9uZW50LnZhbGlkYXRlKCkgPyBbXSA6IFsnZmFpbGVkJ107XG4gICAgfVxuXG4gICAgdmFyIGlzUmVxdWlyZWQgPSBPYmplY3Qua2V5cyhjb21wb25lbnQuX3JlcXVpcmVkVmFsaWRhdGlvbnMpLmxlbmd0aCA/ICEhcmVxdWlyZWRSZXN1bHRzLnN1Y2Nlc3MubGVuZ3RoIDogZmFsc2U7XG4gICAgdmFyIGlzVmFsaWQgPSAhdmFsaWRhdGlvblJlc3VsdHMuZmFpbGVkLmxlbmd0aCAmJiAhKHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9ycyAmJiB0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnNbY29tcG9uZW50LnByb3BzLm5hbWVdKTtcblxuICAgIHJldHVybiB7XG4gICAgICBpc1JlcXVpcmVkOiBpc1JlcXVpcmVkLFxuICAgICAgaXNWYWxpZDogaXNSZXF1aXJlZCA/IGZhbHNlIDogaXNWYWxpZCxcbiAgICAgIGVycm9yOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgaWYgKGlzVmFsaWQgJiYgIWlzUmVxdWlyZWQpIHtcbiAgICAgICAgICByZXR1cm4gZW1wdHlBcnJheTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2YWxpZGF0aW9uUmVzdWx0cy5lcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbGlkYXRpb25SZXN1bHRzLmVycm9ycztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnMgJiYgdGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzW2NvbXBvbmVudC5wcm9wcy5uYW1lXSkge1xuICAgICAgICAgIHJldHVybiB0eXBlb2YgdGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzW2NvbXBvbmVudC5wcm9wcy5uYW1lXSA9PT0gJ3N0cmluZycgPyBbdGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzW2NvbXBvbmVudC5wcm9wcy5uYW1lXV0gOiB0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnNbY29tcG9uZW50LnByb3BzLm5hbWVdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzUmVxdWlyZWQpIHtcbiAgICAgICAgICB2YXIgZXJyb3IgPSB2YWxpZGF0aW9uRXJyb3JzW3JlcXVpcmVkUmVzdWx0cy5zdWNjZXNzWzBdXTtcbiAgICAgICAgICByZXR1cm4gZXJyb3IgPyBbZXJyb3JdIDogbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2YWxpZGF0aW9uUmVzdWx0cy5mYWlsZWQubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbGlkYXRpb25SZXN1bHRzLmZhaWxlZC5tYXAoZnVuY3Rpb24gKGZhaWxlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbGlkYXRpb25FcnJvcnNbZmFpbGVkXSA/IHZhbGlkYXRpb25FcnJvcnNbZmFpbGVkXSA6IHZhbGlkYXRpb25FcnJvcjtcbiAgICAgICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKHgsIHBvcywgYXJyKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgZHVwbGljYXRlc1xuICAgICAgICAgICAgcmV0dXJuIGFyci5pbmRleE9mKHgpID09PSBwb3M7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0uY2FsbCh0aGlzKVxuICAgIH07XG4gIH0sXG5cbiAgcnVuUnVsZXM6IGZ1bmN0aW9uIHJ1blJ1bGVzKHZhbHVlLCBjdXJyZW50VmFsdWVzLCB2YWxpZGF0aW9ucykge1xuXG4gICAgdmFyIHJlc3VsdHMgPSB7XG4gICAgICBlcnJvcnM6IFtdLFxuICAgICAgZmFpbGVkOiBbXSxcbiAgICAgIHN1Y2Nlc3M6IFtdXG4gICAgfTtcbiAgICBpZiAoT2JqZWN0LmtleXModmFsaWRhdGlvbnMpLmxlbmd0aCkge1xuICAgICAgT2JqZWN0LmtleXModmFsaWRhdGlvbnMpLmZvckVhY2goZnVuY3Rpb24gKHZhbGlkYXRpb25NZXRob2QpIHtcblxuICAgICAgICBpZiAodmFsaWRhdGlvblJ1bGVzW3ZhbGlkYXRpb25NZXRob2RdICYmIHR5cGVvZiB2YWxpZGF0aW9uc1t2YWxpZGF0aW9uTWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRm9ybXN5IGRvZXMgbm90IGFsbG93IHlvdSB0byBvdmVycmlkZSBkZWZhdWx0IHZhbGlkYXRpb25zOiAnICsgdmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXZhbGlkYXRpb25SdWxlc1t2YWxpZGF0aW9uTWV0aG9kXSAmJiB0eXBlb2YgdmFsaWRhdGlvbnNbdmFsaWRhdGlvbk1ldGhvZF0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm1zeSBkb2VzIG5vdCBoYXZlIHRoZSB2YWxpZGF0aW9uIHJ1bGU6ICcgKyB2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgdmFsaWRhdGlvbnNbdmFsaWRhdGlvbk1ldGhvZF0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB2YXIgdmFsaWRhdGlvbiA9IHZhbGlkYXRpb25zW3ZhbGlkYXRpb25NZXRob2RdKGN1cnJlbnRWYWx1ZXMsIHZhbHVlKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbGlkYXRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXN1bHRzLmVycm9ycy5wdXNoKHZhbGlkYXRpb24pO1xuICAgICAgICAgICAgcmVzdWx0cy5mYWlsZWQucHVzaCh2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCF2YWxpZGF0aW9uKSB7XG4gICAgICAgICAgICByZXN1bHRzLmZhaWxlZC5wdXNoKHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbGlkYXRpb25zW3ZhbGlkYXRpb25NZXRob2RdICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdmFyIHZhbGlkYXRpb24gPSB2YWxpZGF0aW9uUnVsZXNbdmFsaWRhdGlvbk1ldGhvZF0oY3VycmVudFZhbHVlcywgdmFsdWUsIHZhbGlkYXRpb25zW3ZhbGlkYXRpb25NZXRob2RdKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbGlkYXRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXN1bHRzLmVycm9ycy5wdXNoKHZhbGlkYXRpb24pO1xuICAgICAgICAgICAgcmVzdWx0cy5mYWlsZWQucHVzaCh2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCF2YWxpZGF0aW9uKSB7XG4gICAgICAgICAgICByZXN1bHRzLmZhaWxlZC5wdXNoKHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHRzLnN1Y2Nlc3MucHVzaCh2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdHMuc3VjY2Vzcy5wdXNoKHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH0sXG5cbiAgLy8gVmFsaWRhdGUgdGhlIGZvcm0gYnkgZ29pbmcgdGhyb3VnaCBhbGwgY2hpbGQgaW5wdXQgY29tcG9uZW50c1xuICAvLyBhbmQgY2hlY2sgdGhlaXIgc3RhdGVcbiAgdmFsaWRhdGVGb3JtOiBmdW5jdGlvbiB2YWxpZGF0ZUZvcm0oKSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAvLyBXZSBuZWVkIGEgY2FsbGJhY2sgYXMgd2UgYXJlIHZhbGlkYXRpbmcgYWxsIGlucHV0cyBhZ2Fpbi4gVGhpcyB3aWxsXG4gICAgLy8gcnVuIHdoZW4gdGhlIGxhc3QgY29tcG9uZW50IGhhcyBzZXQgaXRzIHN0YXRlXG4gICAgdmFyIG9uVmFsaWRhdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFsbElzVmFsaWQgPSB0aGlzLmlucHV0cy5ldmVyeShmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICAgIHJldHVybiBjb21wb25lbnQuc3RhdGUuX2lzVmFsaWQ7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGlzVmFsaWQ6IGFsbElzVmFsaWRcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoYWxsSXNWYWxpZCkge1xuICAgICAgICB0aGlzLnByb3BzLm9uVmFsaWQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucHJvcHMub25JbnZhbGlkKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFRlbGwgdGhlIGZvcm0gdGhhdCBpdCBjYW4gc3RhcnQgdG8gdHJpZ2dlciBjaGFuZ2UgZXZlbnRzXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgY2FuQ2hhbmdlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9LmJpbmQodGhpcyk7XG5cbiAgICAvLyBSdW4gdmFsaWRhdGlvbiBhZ2FpbiBpbiBjYXNlIGFmZmVjdGVkIGJ5IG90aGVyIGlucHV0cy4gVGhlXG4gICAgLy8gbGFzdCBjb21wb25lbnQgdmFsaWRhdGVkIHdpbGwgcnVuIHRoZSBvblZhbGlkYXRpb25Db21wbGV0ZSBjYWxsYmFja1xuICAgIHRoaXMuaW5wdXRzLmZvckVhY2goZnVuY3Rpb24gKGNvbXBvbmVudCwgaW5kZXgpIHtcbiAgICAgIHZhciB2YWxpZGF0aW9uID0gX3RoaXMzLnJ1blZhbGlkYXRpb24oY29tcG9uZW50KTtcbiAgICAgIGlmICh2YWxpZGF0aW9uLmlzVmFsaWQgJiYgY29tcG9uZW50LnN0YXRlLl9leHRlcm5hbEVycm9yKSB7XG4gICAgICAgIHZhbGlkYXRpb24uaXNWYWxpZCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgY29tcG9uZW50LnNldFN0YXRlKHtcbiAgICAgICAgX2lzVmFsaWQ6IHZhbGlkYXRpb24uaXNWYWxpZCxcbiAgICAgICAgX2lzUmVxdWlyZWQ6IHZhbGlkYXRpb24uaXNSZXF1aXJlZCxcbiAgICAgICAgX3ZhbGlkYXRpb25FcnJvcjogdmFsaWRhdGlvbi5lcnJvcixcbiAgICAgICAgX2V4dGVybmFsRXJyb3I6ICF2YWxpZGF0aW9uLmlzVmFsaWQgJiYgY29tcG9uZW50LnN0YXRlLl9leHRlcm5hbEVycm9yID8gY29tcG9uZW50LnN0YXRlLl9leHRlcm5hbEVycm9yIDogbnVsbFxuICAgICAgfSwgaW5kZXggPT09IF90aGlzMy5pbnB1dHMubGVuZ3RoIC0gMSA/IG9uVmFsaWRhdGlvbkNvbXBsZXRlIDogbnVsbCk7XG4gICAgfSk7XG5cbiAgICAvLyBJZiB0aGVyZSBhcmUgbm8gaW5wdXRzLCBzZXQgc3RhdGUgd2hlcmUgZm9ybSBpcyByZWFkeSB0byB0cmlnZ2VyXG4gICAgLy8gY2hhbmdlIGV2ZW50LiBOZXcgaW5wdXRzIG1pZ2h0IGJlIGFkZGVkIGxhdGVyXG4gICAgaWYgKCF0aGlzLmlucHV0cy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBjYW5DaGFuZ2U6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBNZXRob2QgcHV0IG9uIGVhY2ggaW5wdXQgY29tcG9uZW50IHRvIHJlZ2lzdGVyXG4gIC8vIGl0c2VsZiB0byB0aGUgZm9ybVxuICBhdHRhY2hUb0Zvcm06IGZ1bmN0aW9uIGF0dGFjaFRvRm9ybShjb21wb25lbnQpIHtcblxuICAgIGlmICh0aGlzLmlucHV0cy5pbmRleE9mKGNvbXBvbmVudCkgPT09IC0xKSB7XG4gICAgICB0aGlzLmlucHV0cy5wdXNoKGNvbXBvbmVudCk7XG4gICAgfVxuXG4gICAgdGhpcy52YWxpZGF0ZShjb21wb25lbnQpO1xuICB9LFxuXG4gIC8vIE1ldGhvZCBwdXQgb24gZWFjaCBpbnB1dCBjb21wb25lbnQgdG8gdW5yZWdpc3RlclxuICAvLyBpdHNlbGYgZnJvbSB0aGUgZm9ybVxuICBkZXRhY2hGcm9tRm9ybTogZnVuY3Rpb24gZGV0YWNoRnJvbUZvcm0oY29tcG9uZW50KSB7XG4gICAgdmFyIGNvbXBvbmVudFBvcyA9IHRoaXMuaW5wdXRzLmluZGV4T2YoY29tcG9uZW50KTtcblxuICAgIGlmIChjb21wb25lbnRQb3MgIT09IC0xKSB7XG4gICAgICB0aGlzLmlucHV0cyA9IHRoaXMuaW5wdXRzLnNsaWNlKDAsIGNvbXBvbmVudFBvcykuY29uY2F0KHRoaXMuaW5wdXRzLnNsaWNlKGNvbXBvbmVudFBvcyArIDEpKTtcbiAgICB9XG5cbiAgICB0aGlzLnZhbGlkYXRlRm9ybSgpO1xuICB9LFxuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgbWFwcGluZyA9IF9wcm9wcy5tYXBwaW5nLFxuICAgICAgICB2YWxpZGF0aW9uRXJyb3JzID0gX3Byb3BzLnZhbGlkYXRpb25FcnJvcnMsXG4gICAgICAgIG9uU3VibWl0ID0gX3Byb3BzLm9uU3VibWl0LFxuICAgICAgICBvblZhbGlkID0gX3Byb3BzLm9uVmFsaWQsXG4gICAgICAgIG9uVmFsaWRTdWJtaXQgPSBfcHJvcHMub25WYWxpZFN1Ym1pdCxcbiAgICAgICAgb25JbnZhbGlkID0gX3Byb3BzLm9uSW52YWxpZCxcbiAgICAgICAgb25JbnZhbGlkU3VibWl0ID0gX3Byb3BzLm9uSW52YWxpZFN1Ym1pdCxcbiAgICAgICAgb25DaGFuZ2UgPSBfcHJvcHMub25DaGFuZ2UsXG4gICAgICAgIHJlc2V0ID0gX3Byb3BzLnJlc2V0LFxuICAgICAgICBwcmV2ZW50RXh0ZXJuYWxJbnZhbGlkYXRpb24gPSBfcHJvcHMucHJldmVudEV4dGVybmFsSW52YWxpZGF0aW9uLFxuICAgICAgICBvblN1Y2Nlc3MgPSBfcHJvcHMub25TdWNjZXNzLFxuICAgICAgICBvbkVycm9yID0gX3Byb3BzLm9uRXJyb3IsXG4gICAgICAgIG5vbkZvcm1zeVByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9wcm9wcywgWydtYXBwaW5nJywgJ3ZhbGlkYXRpb25FcnJvcnMnLCAnb25TdWJtaXQnLCAnb25WYWxpZCcsICdvblZhbGlkU3VibWl0JywgJ29uSW52YWxpZCcsICdvbkludmFsaWRTdWJtaXQnLCAnb25DaGFuZ2UnLCAncmVzZXQnLCAncHJldmVudEV4dGVybmFsSW52YWxpZGF0aW9uJywgJ29uU3VjY2VzcycsICdvbkVycm9yJ10pO1xuXG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nLCBfZXh0ZW5kcyh7fSwgbm9uRm9ybXN5UHJvcHMsIHsgb25TdWJtaXQ6IHRoaXMuc3VibWl0IH0pLCB0aGlzLnByb3BzLmNoaWxkcmVuKTtcbiAgfVxufSk7XG5cbmlmICghZ2xvYmFsLmV4cG9ydHMgJiYgIWdsb2JhbC5tb2R1bGUgJiYgKCFnbG9iYWwuZGVmaW5lIHx8ICFnbG9iYWwuZGVmaW5lLmFtZCkpIHtcbiAgZ2xvYmFsLkZvcm1zeSA9IEZvcm1zeTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBGb3Jtc3k7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3dlYnBhY2svYnVpbGRpbi9nbG9iYWwuanNcIikpKVxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL3V0aWxzLmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfdHlwZW9mMiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIF90eXBlb2YyKFN5bWJvbC5pdGVyYXRvcikgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiB0eXBlb2Ygb2JqID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YyKG9iaik7XG59IDogZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iaiA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mMihvYmopO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGFycmF5c0RpZmZlcjogZnVuY3Rpb24gYXJyYXlzRGlmZmVyKGEsIGIpIHtcbiAgICB2YXIgaXNEaWZmZXJlbnQgPSBmYWxzZTtcbiAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICBpc0RpZmZlcmVudCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU2FtZShpdGVtLCBiW2luZGV4XSkpIHtcbiAgICAgICAgICBpc0RpZmZlcmVudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0sIHRoaXMpO1xuICAgIH1cbiAgICByZXR1cm4gaXNEaWZmZXJlbnQ7XG4gIH0sXG5cbiAgb2JqZWN0c0RpZmZlcjogZnVuY3Rpb24gb2JqZWN0c0RpZmZlcihhLCBiKSB7XG4gICAgdmFyIGlzRGlmZmVyZW50ID0gZmFsc2U7XG4gICAgaWYgKE9iamVjdC5rZXlzKGEpLmxlbmd0aCAhPT0gT2JqZWN0LmtleXMoYikubGVuZ3RoKSB7XG4gICAgICBpc0RpZmZlcmVudCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIE9iamVjdC5rZXlzKGEpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTYW1lKGFba2V5XSwgYltrZXldKSkge1xuICAgICAgICAgIGlzRGlmZmVyZW50ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSwgdGhpcyk7XG4gICAgfVxuICAgIHJldHVybiBpc0RpZmZlcmVudDtcbiAgfSxcblxuICBpc1NhbWU6IGZ1bmN0aW9uIGlzU2FtZShhLCBiKSB7XG4gICAgaWYgKCh0eXBlb2YgYSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoYSkpICE9PSAodHlwZW9mIGIgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGIpKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhKSAmJiBBcnJheS5pc0FycmF5KGIpKSB7XG4gICAgICByZXR1cm4gIXRoaXMuYXJyYXlzRGlmZmVyKGEsIGIpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGEgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBhLnRvU3RyaW5nKCkgPT09IGIudG9TdHJpbmcoKTtcbiAgICB9IGVsc2UgaWYgKCh0eXBlb2YgYSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoYSkpID09PSAnb2JqZWN0JyAmJiBhICE9PSBudWxsICYmIGIgIT09IG51bGwpIHtcbiAgICAgIHJldHVybiAhdGhpcy5vYmplY3RzRGlmZmVyKGEsIGIpO1xuICAgIH1cblxuICAgIHJldHVybiBhID09PSBiO1xuICB9LFxuXG4gIGZpbmQ6IGZ1bmN0aW9uIGZpbmQoY29sbGVjdGlvbiwgZm4pIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNvbGxlY3Rpb24ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IGNvbGxlY3Rpb25baV07XG4gICAgICBpZiAoZm4oaXRlbSkpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG59O1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL3ZhbGlkYXRpb25SdWxlcy5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX2lzRXhpc3R5ID0gZnVuY3Rpb24gX2lzRXhpc3R5KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkO1xufTtcblxudmFyIGlzRW1wdHkgPSBmdW5jdGlvbiBpc0VtcHR5KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PT0gJyc7XG59O1xuXG52YXIgdmFsaWRhdGlvbnMgPSB7XG4gIGlzRGVmYXVsdFJlcXVpcmVkVmFsdWU6IGZ1bmN0aW9uIGlzRGVmYXVsdFJlcXVpcmVkVmFsdWUodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSAnJztcbiAgfSxcbiAgaXNFeGlzdHk6IGZ1bmN0aW9uIGlzRXhpc3R5KHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gX2lzRXhpc3R5KHZhbHVlKTtcbiAgfSxcbiAgbWF0Y2hSZWdleHA6IGZ1bmN0aW9uIG1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIHJlZ2V4cCkge1xuICAgIHJldHVybiAhX2lzRXhpc3R5KHZhbHVlKSB8fCBpc0VtcHR5KHZhbHVlKSB8fCByZWdleHAudGVzdCh2YWx1ZSk7XG4gIH0sXG4gIGlzVW5kZWZpbmVkOiBmdW5jdGlvbiBpc1VuZGVmaW5lZCh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQ7XG4gIH0sXG4gIGlzRW1wdHlTdHJpbmc6IGZ1bmN0aW9uIGlzRW1wdHlTdHJpbmcodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiBpc0VtcHR5KHZhbHVlKTtcbiAgfSxcbiAgaXNFbWFpbDogZnVuY3Rpb24gaXNFbWFpbCh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eKCgoW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKyhcXC4oW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKykqKXwoKFxceDIyKSgoKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KChbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHg3Zl18XFx4MjF8W1xceDIzLVxceDViXXxbXFx4NWQtXFx4N2VdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoXFxcXChbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGQtXFx4N2ZdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpKSooKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KFxceDIyKSkpQCgoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4pKygoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSQvaSk7XG4gIH0sXG4gIGlzVXJsOiBmdW5jdGlvbiBpc1VybCh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eKGh0dHBzP3xzP2Z0cCk6XFwvXFwvKCgoKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDopKkApPygoKFxcZHxbMS05XVxcZHwxXFxkXFxkfDJbMC00XVxcZHwyNVswLTVdKVxcLihcXGR8WzEtOV1cXGR8MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC01XSlcXC4oXFxkfFsxLTldXFxkfDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNV0pXFwuKFxcZHxbMS05XVxcZHwxXFxkXFxkfDJbMC00XVxcZHwyNVswLTVdKSl8KCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKVxcLikrKChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuPykoOlxcZCopPykoXFwvKCgoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OnxAKSsoXFwvKChbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoJVtcXGRhLWZdezJ9KXxbIVxcJCYnXFwoXFwpXFwqXFwrLDs9XXw6fEApKikqKT8pPyhcXD8oKChbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoJVtcXGRhLWZdezJ9KXxbIVxcJCYnXFwoXFwpXFwqXFwrLDs9XXw6fEApfFtcXHVFMDAwLVxcdUY4RkZdfFxcL3xcXD8pKik/KCMoKChbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoJVtcXGRhLWZdezJ9KXxbIVxcJCYnXFwoXFwpXFwqXFwrLDs9XXw6fEApfFxcL3xcXD8pKik/JC9pKTtcbiAgfSxcbiAgaXNUcnVlOiBmdW5jdGlvbiBpc1RydWUodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gdHJ1ZTtcbiAgfSxcbiAgaXNGYWxzZTogZnVuY3Rpb24gaXNGYWxzZSh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSBmYWxzZTtcbiAgfSxcbiAgaXNOdW1lcmljOiBmdW5jdGlvbiBpc051bWVyaWModmFsdWVzLCB2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eWy0rXT8oPzpcXGQqWy5dKT9cXGQrJC8pO1xuICB9LFxuICBpc0FscGhhOiBmdW5jdGlvbiBpc0FscGhhKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL15bQS1aXSskL2kpO1xuICB9LFxuICBpc0FscGhhbnVtZXJpYzogZnVuY3Rpb24gaXNBbHBoYW51bWVyaWModmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXlswLTlBLVpdKyQvaSk7XG4gIH0sXG4gIGlzSW50OiBmdW5jdGlvbiBpc0ludCh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eKD86Wy0rXT8oPzowfFsxLTldXFxkKikpJC8pO1xuICB9LFxuICBpc0Zsb2F0OiBmdW5jdGlvbiBpc0Zsb2F0KHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL14oPzpbLStdPyg/OlxcZCspKT8oPzpcXC5cXGQqKT8oPzpbZUVdW1xcK1xcLV0/KD86XFxkKykpPyQvKTtcbiAgfSxcbiAgaXNXb3JkczogZnVuY3Rpb24gaXNXb3Jkcyh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eW0EtWlxcc10rJC9pKTtcbiAgfSxcbiAgaXNTcGVjaWFsV29yZHM6IGZ1bmN0aW9uIGlzU3BlY2lhbFdvcmRzKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL15bQS1aXFxzXFx1MDBDMC1cXHUwMTdGXSskL2kpO1xuICB9LFxuICBpc0xlbmd0aDogZnVuY3Rpb24gaXNMZW5ndGgodmFsdWVzLCB2YWx1ZSwgbGVuZ3RoKSB7XG4gICAgcmV0dXJuICFfaXNFeGlzdHkodmFsdWUpIHx8IGlzRW1wdHkodmFsdWUpIHx8IHZhbHVlLmxlbmd0aCA9PT0gbGVuZ3RoO1xuICB9LFxuICBlcXVhbHM6IGZ1bmN0aW9uIGVxdWFscyh2YWx1ZXMsIHZhbHVlLCBlcWwpIHtcbiAgICByZXR1cm4gIV9pc0V4aXN0eSh2YWx1ZSkgfHwgaXNFbXB0eSh2YWx1ZSkgfHwgdmFsdWUgPT0gZXFsO1xuICB9LFxuICBlcXVhbHNGaWVsZDogZnVuY3Rpb24gZXF1YWxzRmllbGQodmFsdWVzLCB2YWx1ZSwgZmllbGQpIHtcbiAgICByZXR1cm4gdmFsdWUgPT0gdmFsdWVzW2ZpZWxkXTtcbiAgfSxcbiAgbWF4TGVuZ3RoOiBmdW5jdGlvbiBtYXhMZW5ndGgodmFsdWVzLCB2YWx1ZSwgbGVuZ3RoKSB7XG4gICAgcmV0dXJuICFfaXNFeGlzdHkodmFsdWUpIHx8IHZhbHVlLmxlbmd0aCA8PSBsZW5ndGg7XG4gIH0sXG4gIG1pbkxlbmd0aDogZnVuY3Rpb24gbWluTGVuZ3RoKHZhbHVlcywgdmFsdWUsIGxlbmd0aCkge1xuICAgIHJldHVybiAhX2lzRXhpc3R5KHZhbHVlKSB8fCBpc0VtcHR5KHZhbHVlKSB8fCB2YWx1ZS5sZW5ndGggPj0gbGVuZ3RoO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHZhbGlkYXRpb25zO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9jb21wb25lbnRzL0F1dGgvRmllbGQvRmllbGQuanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC9yZWFjdC5qc1wiKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfZm9ybXN5UmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9tYWluLmpzXCIpO1xuXG52YXIgX2Zvcm1zeVJlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Zvcm1zeVJlYWN0KTtcblxudmFyIF9wcm9wVHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9pbmRleC5qc1wiKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgRmllbGQgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoRmllbGQsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIEZpZWxkKHByb3BzKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpZWxkKTtcblxuICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChGaWVsZC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEZpZWxkKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgX3RoaXMuY2hhbmdlVmFsdWUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIF90aGlzLnByb3BzLnNldFZhbHVlKGV2ZW50LmN1cnJlbnRUYXJnZXRbX3RoaXMucHJvcHMudHlwZSA9PT0gJ2NoZWNrYm94JyA/ICdjaGVja2VkJyA6ICd2YWx1ZSddKTtcbiAgICB9O1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhGaWVsZCwgW3tcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgZXJyb3JNZXNzYWdlID0gdGhpcy5wcm9wcy5nZXRFcnJvck1lc3NhZ2UoKTtcblxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyBjbGFzc05hbWU6ICdzaWdudXAtZmllbGQtZ3JvdXAnIH0sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdsYWJlbCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgaHRtbEZvcjogdGhpcy5wcm9wcy5uYW1lLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICBjbGFzc05hbWU6ICdzaWdudXAtZm9ybV9fbGFiZWwnIH0sXG4gICAgICAgICAgdGhpcy5wcm9wcy5uYW1lXG4gICAgICAgICksXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICBvbkNoYW5nZTogdGhpcy5jaGFuZ2VWYWx1ZSxcbiAgICAgICAgICB2YWx1ZTogdGhpcy5wcm9wcy5nZXRWYWx1ZSgpLFxuICAgICAgICAgIHR5cGU6IHRoaXMucHJvcHMudHlwZSB8fCAndGV4dCcsXG4gICAgICAgICAgbmFtZTogdGhpcy5wcm9wcy5uYW1lLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgY2xhc3NOYW1lOiAnc2lnbnVwLWZvcm1fX2lucHV0LWZpZWxkJyB9KSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ3AnLFxuICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY2FwdGlvbiBzaWdudXAtZm9ybV9fY2FwdGlvbicgfSxcbiAgICAgICAgICB0aGlzLnByb3BzLnRleHRcbiAgICAgICAgKSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgIHsgY2xhc3NOYW1lOiAnc2lnbnVwLWZvcm1fX2Vycm9yLW1lc3NhZ2UnIH0sXG4gICAgICAgICAgZXJyb3JNZXNzYWdlXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEZpZWxkO1xufShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTtcblxuRmllbGQucHJvcFR5cGVzID0ge1xuICBuYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgdGV4dDogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIHR5cGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBzZXRWYWx1ZTogX3Byb3BUeXBlczIuZGVmYXVsdC5hbnksXG4gIGdldFZhbHVlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIHZhbGlkYXRpb25zOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmFueSxcbiAgZ2V0RXJyb3JNZXNzYWdlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIHJlZ2lzdHJhdGlvbjogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jXG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSAoMCwgX2Zvcm1zeVJlYWN0LkhPQykoRmllbGQpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9jb21wb25lbnRzL0F1dGgvSGVhZGVyL0hlYWRlci5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5IZWFkZXIgPSB1bmRlZmluZWQ7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcmVhY3QvcmVhY3QuanNcIik7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3Byb3BUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9wcm9wLXR5cGVzL2luZGV4LmpzXCIpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgSGVhZGVyID0gZXhwb3J0cy5IZWFkZXIgPSBmdW5jdGlvbiBIZWFkZXIocHJvcHMpIHtcbiAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICdkaXYnLFxuICAgIHsgY2xhc3NOYW1lOiAnc2lnbnVwLWhlYWRlcicgfSxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaScsIHtcbiAgICAgIGNsYXNzTmFtZTogJ2ZhICcgKyBwcm9wcy5waWMgKyAnIGZhLTN4IHNpZ251cC1oZWFkZXJfX2ljb24nLFxuICAgICAgJ2FyaWEtaGlkZGVuJzogJ3RydWUnIH0pLFxuICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgJ2gxJyxcbiAgICAgIHsgY2xhc3NOYW1lOiAnc2lnbnVwLWhlYWRlcl9fdGl0bGUnIH0sXG4gICAgICBwcm9wcy50aXRsZSxcbiAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnc3BhbicsXG4gICAgICAgIHsgY2xhc3NOYW1lOiAnY2FwdGlvbiBzaWdudXAtaGVhZGVyX19jYXB0aW9uJyB9LFxuICAgICAgICBwcm9wcy50ZXh0XG4gICAgICApXG4gICAgKVxuICApO1xufTtcblxuSGVhZGVyLnByb3BUeXBlcyA9IHtcbiAgcGljOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgdGl0bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICB0ZXh0OiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZ1xufTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcGFnZXMvTG9naW4vTG9naW4uanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC9yZWFjdC5qc1wiKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfZm9ybXN5UmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9tYWluLmpzXCIpO1xuXG52YXIgX2Zvcm1zeVJlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Zvcm1zeVJlYWN0KTtcblxudmFyIF9IZWFkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvY29tcG9uZW50cy9BdXRoL0hlYWRlci9IZWFkZXIuanNcIik7XG5cbnZhciBfRmllbGQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvY29tcG9uZW50cy9BdXRoL0ZpZWxkL0ZpZWxkLmpzXCIpO1xuXG52YXIgX0ZpZWxkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0ZpZWxkKTtcblxudmFyIF9NZXNzYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2NvbXBvbmVudHMvTWVzc2FnZS9NZXNzYWdlLmpzXCIpO1xuXG52YXIgX3JlYWN0Um91dGVyRG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0LXJvdXRlci1kb20vZXMvaW5kZXguanNcIik7XG5cbnZhciBfYXV0aCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9hY3Rpb25zL2F1dGguYWN0aW9uLmpzXCIpO1xuXG52YXIgX3JlZHV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlZHV4L2VzL2luZGV4LmpzXCIpO1xuXG52YXIgX3JlYWN0UmVkdXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcmVhY3QtcmVkdXgvZXMvaW5kZXguanNcIik7XG5cbnZhciBfcHJvcFR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3Byb3AtdHlwZXMvaW5kZXguanNcIik7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbl9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9wYWdlcy9Mb2dpbi9Mb2dpbi5zY3NzXCIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBMb2dpbiA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhMb2dpbiwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gTG9naW4ocHJvcHMpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTG9naW4pO1xuXG4gICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKExvZ2luLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTG9naW4pKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICBfdGhpcy5hZGRMb2dpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICBlbWFpbDogX3RoaXMuZW1haWwuZ2V0VmFsdWUoKSxcbiAgICAgICAgcGFzc3dvcmQ6IF90aGlzLnBhc3N3b3JkLmdldFZhbHVlKClcbiAgICAgIH07XG5cbiAgICAgIF90aGlzLnByb3BzLmxvZ2luKGRhdGEpO1xuICAgIH07XG5cbiAgICBfdGhpcy5lbmFibGVCdXR0b24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGNhblN1Ym1pdDogdHJ1ZVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF90aGlzLmRpc2FibGVCdXR0b24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGNhblN1Ym1pdDogZmFsc2VcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGNhblN1Ym1pdDogZmFsc2VcbiAgICB9O1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhMb2dpbiwgW3tcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyBjbGFzc05hbWU6ICdsb2dpbi1jb250YWluZXInIH0sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9IZWFkZXIuSGVhZGVyLCB7XG4gICAgICAgICAgcGljOiAnZmEtdW5sb2NrJyxcbiAgICAgICAgICB0aXRsZTogJ0xvZ2luJyxcbiAgICAgICAgICB0ZXh0OiAnUGxlYXNlIGVudGVyIHlvdXIgY3JlZGVudGlhbHMgdG8gbG9naW4uJyB9KSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX01lc3NhZ2UuTWVzc2FnZSwge1xuICAgICAgICAgIGNsZWFyU3RhdHVzOiB0aGlzLnByb3BzLmNsZWFyTG9naW5TdGF0dXMsXG4gICAgICAgICAgc3RhdHVzOiB0aGlzLnByb3BzLmxvZ2luU3RhdHVzLFxuICAgICAgICAgIGhlYWRlcjogJ0F1dGhvcml6YXRpb24gZmFpbGVkJyxcbiAgICAgICAgICB0ZXh0OiB0aGlzLnByb3BzLmVycm9yVGV4dCB9KSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgX2Zvcm1zeVJlYWN0Mi5kZWZhdWx0LkZvcm0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgb25TdWJtaXQ6IHRoaXMuYWRkTG9naW4sXG4gICAgICAgICAgICBvblZhbGlkOiB0aGlzLmVuYWJsZUJ1dHRvbixcbiAgICAgICAgICAgIG9uSW52YWxpZDogdGhpcy5kaXNhYmxlQnV0dG9uLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiAnc2lnbnVwLWZvcm0nIH0sXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0ZpZWxkMi5kZWZhdWx0LCB7XG4gICAgICAgICAgICBuYW1lOiAnRS1tYWlsJyxcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgIHRleHQ6ICdZb3VyIHVuaXF1ZSB1c2VybmFtZSB0byBhcHAnLFxuICAgICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYoaW5wdXQpIHtcbiAgICAgICAgICAgICAgX3RoaXMyLmVtYWlsID0gaW5wdXQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdmFsaWRhdGlvbnM6ICdpc0VtYWlsJyxcbiAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcjogJ1RoaXMgaXMgbm90IGEgdmFsaWQgZW1haWwnLFxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUgfSksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0ZpZWxkMi5kZWZhdWx0LCB7XG4gICAgICAgICAgICBuYW1lOiAnUGFzc3dvcmQnLFxuICAgICAgICAgICAgdHlwZTogJ3Bhc3N3b3JkJyxcbiAgICAgICAgICAgIHRleHQ6ICdZb3VyIGhhcmQgdG8gZ3Vlc3MgcGFzc3dvcmQnLFxuICAgICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYoaW5wdXQpIHtcbiAgICAgICAgICAgICAgX3RoaXMyLnBhc3N3b3JkID0gaW5wdXQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdmFsaWRhdGlvbnM6IHtcbiAgICAgICAgICAgICAgbWluTGVuZ3RoOiA3LFxuICAgICAgICAgICAgICBpc0FscGhhbnVtZXJpYzogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcjogJ1RoaXMgaXMgbm90IGEgdmFsaWQgcGFzcycsXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSB9KSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdzaWdudXAtZmllbGQtZ3JvdXAgc2lnbnVwLWJ0bi1ncm91cCcgfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N1Ym1pdCcsXG4gICAgICAgICAgICAgIGRpc2FibGVkOiAhdGhpcy5zdGF0ZS5jYW5TdWJtaXQsXG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2J0biBidG4tLXNpZ251cCBidG4tLXNpZ251cC1hY3RpdmUnLFxuICAgICAgICAgICAgICB2YWx1ZTogJ0xvZ2luJyB9KSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnY2FwdGlvbiBzaWdudXAtZm9ybV9fY2FwdGlvbiAnICsgJ3NpZ251cC1mb3JtX19jYXB0aW9uLS10ZXh0JyB9LFxuICAgICAgICAgICAgICAnTmV3IGhlcmU/JyxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgX3JlYWN0Um91dGVyRG9tLk5hdkxpbmssXG4gICAgICAgICAgICAgICAgeyB0bzogJy9hdXRoL3JlZ2lzdGVyJyxcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3NpZ251cC1mb3JtX19jYXB0aW9uLS1saW5rJyB9LFxuICAgICAgICAgICAgICAgICdSZWdpc3RlcidcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gTG9naW47XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5mdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RvcmUpIHtcbiAgcmV0dXJuIHtcbiAgICBsb2dpblN0YXR1czogc3RvcmUuYXV0aGVudGljYXRpb24uc3RhdHVzLFxuICAgIHVzZXJEYXRhOiBzdG9yZS5hdXRoZW50aWNhdGlvbi5pc0xvZ2dlZCxcbiAgICBlcnJvclRleHQ6IHN0b3JlLmF1dGhlbnRpY2F0aW9uLmVycm9yVGV4dFxuICB9O1xufVxuZnVuY3Rpb24gbWFwRGlzcGF0Y2hUb1Byb3BzKGRpc3BhdGNoKSB7XG4gIHJldHVybiB7XG4gICAgbG9naW46ICgwLCBfcmVkdXguYmluZEFjdGlvbkNyZWF0b3JzKShfYXV0aC5sb2dpbiwgZGlzcGF0Y2gpLFxuICAgIGNsZWFyTG9naW5TdGF0dXM6IGZ1bmN0aW9uIGNsZWFyTG9naW5TdGF0dXMoKSB7XG4gICAgICByZXR1cm4gZGlzcGF0Y2goKDAsIF9hdXRoLmNsZWFyTG9naW5TdGF0dXMpKCkpO1xuICAgIH1cbiAgfTtcbn1cblxuZXhwb3J0cy5kZWZhdWx0ID0gKDAsIF9yZWFjdFJlZHV4LmNvbm5lY3QpKG1hcFN0YXRlVG9Qcm9wcywgbWFwRGlzcGF0Y2hUb1Byb3BzKShMb2dpbik7XG5cblxuTG9naW4ucHJvcFR5cGVzID0ge1xuICBsb2dpblN0YXR1czogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGhpc3Rvcnk6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBsb2dpbjogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICB1c2VyRGF0YTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIGVycm9yVGV4dDogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGNsZWFyTG9naW5TdGF0dXM6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuY1xufTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcGFnZXMvTG9naW4vTG9naW4uc2Nzc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG4vKioqLyB9KVxuXG59KTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gNS5pbmRleF9idW5kbGUuanMiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIGZhY3RvcnkgPSByZXF1aXJlKCcuL2ZhY3RvcnknKTtcblxuaWYgKHR5cGVvZiBSZWFjdCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgdGhyb3cgRXJyb3IoXG4gICAgJ2NyZWF0ZS1yZWFjdC1jbGFzcyBjb3VsZCBub3QgZmluZCB0aGUgUmVhY3Qgb2JqZWN0LiBJZiB5b3UgYXJlIHVzaW5nIHNjcmlwdCB0YWdzLCAnICtcbiAgICAgICdtYWtlIHN1cmUgdGhhdCBSZWFjdCBpcyBiZWluZyBsb2FkZWQgYmVmb3JlIGNyZWF0ZS1yZWFjdC1jbGFzcy4nXG4gICk7XG59XG5cbi8vIEhhY2sgdG8gZ3JhYiBOb29wVXBkYXRlUXVldWUgZnJvbSBpc29tb3JwaGljIFJlYWN0XG52YXIgUmVhY3ROb29wVXBkYXRlUXVldWUgPSBuZXcgUmVhY3QuQ29tcG9uZW50KCkudXBkYXRlcjtcblxubW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KFxuICBSZWFjdC5Db21wb25lbnQsXG4gIFJlYWN0LmlzVmFsaWRFbGVtZW50LFxuICBSZWFjdE5vb3BVcGRhdGVRdWV1ZVxuKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vY3JlYXRlLXJlYWN0LWNsYXNzL2luZGV4LmpzIiwiZnVuY3Rpb24gdG9PYmooc291cmNlKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhzb3VyY2UpLnJlZHVjZShmdW5jdGlvbiAob3V0cHV0LCBrZXkpIHtcbiAgICB2YXIgcGFyZW50S2V5ID0ga2V5Lm1hdGNoKC9bXlxcW10qL2kpO1xuICAgIHZhciBwYXRocyA9IGtleS5tYXRjaCgvXFxbLio/XFxdL2cpIHx8IFtdO1xuICAgIHBhdGhzID0gW3BhcmVudEtleVswXV0uY29uY2F0KHBhdGhzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuIGtleS5yZXBsYWNlKC9cXFt8XFxdL2csICcnKTtcbiAgICB9KTtcbiAgICB2YXIgY3VycmVudFBhdGggPSBvdXRwdXQ7XG4gICAgd2hpbGUgKHBhdGhzLmxlbmd0aCkge1xuICAgICAgdmFyIHBhdGhLZXkgPSBwYXRocy5zaGlmdCgpO1xuXG4gICAgICBpZiAocGF0aEtleSBpbiBjdXJyZW50UGF0aCkge1xuICAgICAgICBjdXJyZW50UGF0aCA9IGN1cnJlbnRQYXRoW3BhdGhLZXldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudFBhdGhbcGF0aEtleV0gPSBwYXRocy5sZW5ndGggPyBpc05hTihwYXRoc1swXSkgPyB7fSA6IFtdIDogc291cmNlW2tleV07XG4gICAgICAgIGN1cnJlbnRQYXRoID0gY3VycmVudFBhdGhbcGF0aEtleV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfSwge30pO1xufVxuXG5mdW5jdGlvbiBmcm9tT2JqKG9iaikge1xuICBmdW5jdGlvbiByZWN1cihuZXdPYmosIHByb3BOYW1lLCBjdXJyVmFsKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY3VyclZhbCkgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGN1cnJWYWwpID09PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgICAgT2JqZWN0LmtleXMoY3VyclZhbCkuZm9yRWFjaChmdW5jdGlvbih2KSB7XG4gICAgICAgIHJlY3VyKG5ld09iaiwgcHJvcE5hbWUgKyBcIltcIiArIHYgKyBcIl1cIiwgY3VyclZhbFt2XSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBuZXdPYmo7XG4gICAgfVxuXG4gICAgbmV3T2JqW3Byb3BOYW1lXSA9IGN1cnJWYWw7XG4gICAgcmV0dXJuIG5ld09iajtcbiAgfVxuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcbiAgcmV0dXJuIGtleXMucmVkdWNlKGZ1bmN0aW9uKG5ld09iaiwgcHJvcE5hbWUpIHtcbiAgICByZXR1cm4gcmVjdXIobmV3T2JqLCBwcm9wTmFtZSwgb2JqW3Byb3BOYW1lXSk7XG4gIH0sIHt9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGZyb21PYmo6IGZyb21PYmosXG4gIHRvT2JqOiB0b09ialxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vZm9ybS1kYXRhLXRvLW9iamVjdC9pbmRleC5qcyIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIFJlYWN0ID0gZ2xvYmFsLlJlYWN0IHx8IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgY3JlYXRlUmVhY3RDbGFzcyA9IHJlcXVpcmUoJ2NyZWF0ZS1yZWFjdC1jbGFzcycpO1xudmFyIE1peGluID0gcmVxdWlyZSgnLi9NaXhpbi5qcycpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gICAgcmV0dXJuIGNyZWF0ZVJlYWN0Q2xhc3Moe1xuICAgICAgbWl4aW5zOiBbTWl4aW5dLFxuICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KENvbXBvbmVudCwgX2V4dGVuZHMoe1xuICAgICAgICAgIHNldFZhbGlkYXRpb25zOiB0aGlzLnNldFZhbGlkYXRpb25zLFxuICAgICAgICAgIHNldFZhbHVlOiB0aGlzLnNldFZhbHVlLFxuICAgICAgICAgIHJlc2V0VmFsdWU6IHRoaXMucmVzZXRWYWx1ZSxcbiAgICAgICAgICBnZXRWYWx1ZTogdGhpcy5nZXRWYWx1ZSxcbiAgICAgICAgICBoYXNWYWx1ZTogdGhpcy5oYXNWYWx1ZSxcbiAgICAgICAgICBnZXRFcnJvck1lc3NhZ2U6IHRoaXMuZ2V0RXJyb3JNZXNzYWdlLFxuICAgICAgICAgIGdldEVycm9yTWVzc2FnZXM6IHRoaXMuZ2V0RXJyb3JNZXNzYWdlcyxcbiAgICAgICAgICBpc0Zvcm1EaXNhYmxlZDogdGhpcy5pc0Zvcm1EaXNhYmxlZCxcbiAgICAgICAgICBpc1ZhbGlkOiB0aGlzLmlzVmFsaWQsXG4gICAgICAgICAgaXNQcmlzdGluZTogdGhpcy5pc1ByaXN0aW5lLFxuICAgICAgICAgIGlzRm9ybVN1Ym1pdHRlZDogdGhpcy5pc0Zvcm1TdWJtaXR0ZWQsXG4gICAgICAgICAgaXNSZXF1aXJlZDogdGhpcy5pc1JlcXVpcmVkLFxuICAgICAgICAgIHNob3dSZXF1aXJlZDogdGhpcy5zaG93UmVxdWlyZWQsXG4gICAgICAgICAgc2hvd0Vycm9yOiB0aGlzLnNob3dFcnJvcixcbiAgICAgICAgICBpc1ZhbGlkVmFsdWU6IHRoaXMuaXNWYWxpZFZhbHVlXG4gICAgICAgIH0sIHRoaXMucHJvcHMpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9mb3Jtc3ktcmVhY3QvbGliL0RlY29yYXRvci5qcyIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIFJlYWN0ID0gZ2xvYmFsLlJlYWN0IHx8IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgY3JlYXRlUmVhY3RDbGFzcyA9IHJlcXVpcmUoJ2NyZWF0ZS1yZWFjdC1jbGFzcycpO1xudmFyIE1peGluID0gcmVxdWlyZSgnLi9NaXhpbi5qcycpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gIHJldHVybiBjcmVhdGVSZWFjdENsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogJ0Zvcm1zeSgnICsgZ2V0RGlzcGxheU5hbWUoQ29tcG9uZW50KSArICcpJyxcbiAgICBtaXhpbnM6IFtNaXhpbl0sXG5cbiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBpbm5lclJlZiA9IHRoaXMucHJvcHMuaW5uZXJSZWY7XG5cbiAgICAgIHZhciBwcm9wc0ZvckVsZW1lbnQgPSBfZXh0ZW5kcyh7XG4gICAgICAgIHNldFZhbGlkYXRpb25zOiB0aGlzLnNldFZhbGlkYXRpb25zLFxuICAgICAgICBzZXRWYWx1ZTogdGhpcy5zZXRWYWx1ZSxcbiAgICAgICAgcmVzZXRWYWx1ZTogdGhpcy5yZXNldFZhbHVlLFxuICAgICAgICBnZXRWYWx1ZTogdGhpcy5nZXRWYWx1ZSxcbiAgICAgICAgaGFzVmFsdWU6IHRoaXMuaGFzVmFsdWUsXG4gICAgICAgIGdldEVycm9yTWVzc2FnZTogdGhpcy5nZXRFcnJvck1lc3NhZ2UsXG4gICAgICAgIGdldEVycm9yTWVzc2FnZXM6IHRoaXMuZ2V0RXJyb3JNZXNzYWdlcyxcbiAgICAgICAgaXNGb3JtRGlzYWJsZWQ6IHRoaXMuaXNGb3JtRGlzYWJsZWQsXG4gICAgICAgIGlzVmFsaWQ6IHRoaXMuaXNWYWxpZCxcbiAgICAgICAgaXNQcmlzdGluZTogdGhpcy5pc1ByaXN0aW5lLFxuICAgICAgICBpc0Zvcm1TdWJtaXR0ZWQ6IHRoaXMuaXNGb3JtU3VibWl0dGVkLFxuICAgICAgICBpc1JlcXVpcmVkOiB0aGlzLmlzUmVxdWlyZWQsXG4gICAgICAgIHNob3dSZXF1aXJlZDogdGhpcy5zaG93UmVxdWlyZWQsXG4gICAgICAgIHNob3dFcnJvcjogdGhpcy5zaG93RXJyb3IsXG4gICAgICAgIGlzVmFsaWRWYWx1ZTogdGhpcy5pc1ZhbGlkVmFsdWVcbiAgICAgIH0sIHRoaXMucHJvcHMpO1xuXG4gICAgICBpZiAoaW5uZXJSZWYpIHtcbiAgICAgICAgcHJvcHNGb3JFbGVtZW50LnJlZiA9IGlubmVyUmVmO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29tcG9uZW50LCBwcm9wc0ZvckVsZW1lbnQpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5mdW5jdGlvbiBnZXREaXNwbGF5TmFtZShDb21wb25lbnQpIHtcbiAgcmV0dXJuIENvbXBvbmVudC5kaXNwbGF5TmFtZSB8fCBDb21wb25lbnQubmFtZSB8fCAodHlwZW9mIENvbXBvbmVudCA9PT0gJ3N0cmluZycgPyBDb21wb25lbnQgOiAnQ29tcG9uZW50Jyk7XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9mb3Jtc3ktcmVhY3QvbGliL0hPQy5qcyIsIid1c2Ugc3RyaWN0JztcblxudmFyIFByb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMuanMnKTtcbnZhciBSZWFjdCA9IGdsb2JhbC5SZWFjdCB8fCByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgY29udmVydFZhbGlkYXRpb25zVG9PYmplY3QgPSBmdW5jdGlvbiBjb252ZXJ0VmFsaWRhdGlvbnNUb09iamVjdCh2YWxpZGF0aW9ucykge1xuXG4gIGlmICh0eXBlb2YgdmFsaWRhdGlvbnMgPT09ICdzdHJpbmcnKSB7XG5cbiAgICByZXR1cm4gdmFsaWRhdGlvbnMuc3BsaXQoL1xcLCg/IVtee1xcW10qW31cXF1dKS9nKS5yZWR1Y2UoZnVuY3Rpb24gKHZhbGlkYXRpb25zLCB2YWxpZGF0aW9uKSB7XG4gICAgICB2YXIgYXJncyA9IHZhbGlkYXRpb24uc3BsaXQoJzonKTtcbiAgICAgIHZhciB2YWxpZGF0ZU1ldGhvZCA9IGFyZ3Muc2hpZnQoKTtcblxuICAgICAgYXJncyA9IGFyZ3MubWFwKGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShhcmcpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgcmV0dXJuIGFyZzsgLy8gSXQgaXMgYSBzdHJpbmcgaWYgaXQgY2FuIG5vdCBwYXJzZSBpdFxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gMSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm1zeSBkb2VzIG5vdCBzdXBwb3J0IG11bHRpcGxlIGFyZ3Mgb24gc3RyaW5nIHZhbGlkYXRpb25zLiBVc2Ugb2JqZWN0IGZvcm1hdCBvZiB2YWxpZGF0aW9ucyBpbnN0ZWFkLicpO1xuICAgICAgfVxuXG4gICAgICB2YWxpZGF0aW9uc1t2YWxpZGF0ZU1ldGhvZF0gPSBhcmdzLmxlbmd0aCA/IGFyZ3NbMF0gOiB0cnVlO1xuICAgICAgcmV0dXJuIHZhbGlkYXRpb25zO1xuICAgIH0sIHt9KTtcbiAgfVxuXG4gIHJldHVybiB2YWxpZGF0aW9ucyB8fCB7fTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgX3ZhbHVlOiB0aGlzLnByb3BzLnZhbHVlLFxuICAgICAgX2lzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgX2lzVmFsaWQ6IHRydWUsXG4gICAgICBfaXNQcmlzdGluZTogdHJ1ZSxcbiAgICAgIF9wcmlzdGluZVZhbHVlOiB0aGlzLnByb3BzLnZhbHVlLFxuICAgICAgX3ZhbGlkYXRpb25FcnJvcjogW10sXG4gICAgICBfZXh0ZXJuYWxFcnJvcjogbnVsbCxcbiAgICAgIF9mb3JtU3VibWl0dGVkOiBmYWxzZVxuICAgIH07XG4gIH0sXG4gIGNvbnRleHRUeXBlczoge1xuICAgIGZvcm1zeTogUHJvcFR5cGVzLm9iamVjdCAvLyBXaGF0IGFib3V0IHJlcXVpcmVkP1xuICB9LFxuICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWRhdGlvbkVycm9yOiAnJyxcbiAgICAgIHZhbGlkYXRpb25FcnJvcnM6IHt9XG4gICAgfTtcbiAgfSxcblxuICBjb21wb25lbnRXaWxsTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICB2YXIgY29uZmlndXJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5zZXRWYWxpZGF0aW9ucyh0aGlzLnByb3BzLnZhbGlkYXRpb25zLCB0aGlzLnByb3BzLnJlcXVpcmVkKTtcblxuICAgICAgLy8gUGFzcyBhIGZ1bmN0aW9uIGluc3RlYWQ/XG4gICAgICB0aGlzLmNvbnRleHQuZm9ybXN5LmF0dGFjaFRvRm9ybSh0aGlzKTtcbiAgICAgIC8vdGhpcy5wcm9wcy5fYXR0YWNoVG9Gb3JtKHRoaXMpO1xuICAgIH0uYmluZCh0aGlzKTtcblxuICAgIGlmICghdGhpcy5wcm9wcy5uYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm0gSW5wdXQgcmVxdWlyZXMgYSBuYW1lIHByb3BlcnR5IHdoZW4gdXNlZCcpO1xuICAgIH1cblxuICAgIC8qXG4gICAgaWYgKCF0aGlzLnByb3BzLl9hdHRhY2hUb0Zvcm0pIHtcbiAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzTW91bnRlZCgpKSByZXR1cm47XG4gICAgICAgIGlmICghdGhpcy5wcm9wcy5fYXR0YWNoVG9Gb3JtKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3JtIE1peGluIHJlcXVpcmVzIGNvbXBvbmVudCB0byBiZSBuZXN0ZWQgaW4gYSBGb3JtJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uZmlndXJlKCk7XG4gICAgICB9LmJpbmQodGhpcyksIDApO1xuICAgIH1cbiAgICAqL1xuICAgIGNvbmZpZ3VyZSgpO1xuICB9LFxuXG4gIC8vIFdlIGhhdmUgdG8gbWFrZSB0aGUgdmFsaWRhdGUgbWV0aG9kIGlzIGtlcHQgd2hlbiBuZXcgcHJvcHMgYXJlIGFkZGVkXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHM6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgdGhpcy5zZXRWYWxpZGF0aW9ucyhuZXh0UHJvcHMudmFsaWRhdGlvbnMsIG5leHRQcm9wcy5yZXF1aXJlZCk7XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzKSB7XG5cbiAgICAvLyBJZiB0aGUgdmFsdWUgcGFzc2VkIGhhcyBjaGFuZ2VkLCBzZXQgaXQuIElmIHZhbHVlIGlzIG5vdCBwYXNzZWQgaXQgd2lsbFxuICAgIC8vIGludGVybmFsbHkgdXBkYXRlLCBhbmQgdGhpcyB3aWxsIG5ldmVyIHJ1blxuICAgIGlmICghdXRpbHMuaXNTYW1lKHRoaXMucHJvcHMudmFsdWUsIHByZXZQcm9wcy52YWx1ZSkpIHtcbiAgICAgIHRoaXMuc2V0VmFsdWUodGhpcy5wcm9wcy52YWx1ZSk7XG4gICAgfVxuXG4gICAgLy8gSWYgdmFsaWRhdGlvbnMgb3IgcmVxdWlyZWQgaXMgY2hhbmdlZCwgcnVuIGEgbmV3IHZhbGlkYXRpb25cbiAgICBpZiAoIXV0aWxzLmlzU2FtZSh0aGlzLnByb3BzLnZhbGlkYXRpb25zLCBwcmV2UHJvcHMudmFsaWRhdGlvbnMpIHx8ICF1dGlscy5pc1NhbWUodGhpcy5wcm9wcy5yZXF1aXJlZCwgcHJldlByb3BzLnJlcXVpcmVkKSkge1xuICAgICAgdGhpcy5jb250ZXh0LmZvcm1zeS52YWxpZGF0ZSh0aGlzKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gRGV0YWNoIGl0IHdoZW4gY29tcG9uZW50IHVubW91bnRzXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50OiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICB0aGlzLmNvbnRleHQuZm9ybXN5LmRldGFjaEZyb21Gb3JtKHRoaXMpO1xuICAgIC8vdGhpcy5wcm9wcy5fZGV0YWNoRnJvbUZvcm0odGhpcyk7XG4gIH0sXG5cbiAgc2V0VmFsaWRhdGlvbnM6IGZ1bmN0aW9uIHNldFZhbGlkYXRpb25zKHZhbGlkYXRpb25zLCByZXF1aXJlZCkge1xuXG4gICAgLy8gQWRkIHZhbGlkYXRpb25zIHRvIHRoZSBzdG9yZSBpdHNlbGYgYXMgdGhlIHByb3BzIG9iamVjdCBjYW4gbm90IGJlIG1vZGlmaWVkXG4gICAgdGhpcy5fdmFsaWRhdGlvbnMgPSBjb252ZXJ0VmFsaWRhdGlvbnNUb09iamVjdCh2YWxpZGF0aW9ucykgfHwge307XG4gICAgdGhpcy5fcmVxdWlyZWRWYWxpZGF0aW9ucyA9IHJlcXVpcmVkID09PSB0cnVlID8geyBpc0RlZmF1bHRSZXF1aXJlZFZhbHVlOiB0cnVlIH0gOiBjb252ZXJ0VmFsaWRhdGlvbnNUb09iamVjdChyZXF1aXJlZCk7XG4gIH0sXG5cbiAgLy8gV2UgdmFsaWRhdGUgYWZ0ZXIgdGhlIHZhbHVlIGhhcyBiZWVuIHNldFxuICBzZXRWYWx1ZTogZnVuY3Rpb24gc2V0VmFsdWUodmFsdWUpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIF92YWx1ZTogdmFsdWUsXG4gICAgICBfaXNQcmlzdGluZTogZmFsc2VcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmNvbnRleHQuZm9ybXN5LnZhbGlkYXRlKHRoaXMpO1xuICAgICAgLy90aGlzLnByb3BzLl92YWxpZGF0ZSh0aGlzKTtcbiAgICB9LmJpbmQodGhpcykpO1xuICB9LFxuICByZXNldFZhbHVlOiBmdW5jdGlvbiByZXNldFZhbHVlKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgX3ZhbHVlOiB0aGlzLnN0YXRlLl9wcmlzdGluZVZhbHVlLFxuICAgICAgX2lzUHJpc3RpbmU6IHRydWVcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmNvbnRleHQuZm9ybXN5LnZhbGlkYXRlKHRoaXMpO1xuICAgICAgLy90aGlzLnByb3BzLl92YWxpZGF0ZSh0aGlzKTtcbiAgICB9KTtcbiAgfSxcbiAgZ2V0VmFsdWU6IGZ1bmN0aW9uIGdldFZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLl92YWx1ZTtcbiAgfSxcbiAgaGFzVmFsdWU6IGZ1bmN0aW9uIGhhc1ZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLl92YWx1ZSAhPT0gJyc7XG4gIH0sXG4gIGdldEVycm9yTWVzc2FnZTogZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKCkge1xuICAgIHZhciBtZXNzYWdlcyA9IHRoaXMuZ2V0RXJyb3JNZXNzYWdlcygpO1xuICAgIHJldHVybiBtZXNzYWdlcy5sZW5ndGggPyBtZXNzYWdlc1swXSA6IG51bGw7XG4gIH0sXG4gIGdldEVycm9yTWVzc2FnZXM6IGZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZXMoKSB7XG4gICAgcmV0dXJuICF0aGlzLmlzVmFsaWQoKSB8fCB0aGlzLnNob3dSZXF1aXJlZCgpID8gdGhpcy5zdGF0ZS5fZXh0ZXJuYWxFcnJvciB8fCB0aGlzLnN0YXRlLl92YWxpZGF0aW9uRXJyb3IgfHwgW10gOiBbXTtcbiAgfSxcbiAgaXNGb3JtRGlzYWJsZWQ6IGZ1bmN0aW9uIGlzRm9ybURpc2FibGVkKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHQuZm9ybXN5LmlzRm9ybURpc2FibGVkKCk7XG4gICAgLy9yZXR1cm4gdGhpcy5wcm9wcy5faXNGb3JtRGlzYWJsZWQoKTtcbiAgfSxcbiAgaXNWYWxpZDogZnVuY3Rpb24gaXNWYWxpZCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5faXNWYWxpZDtcbiAgfSxcbiAgaXNQcmlzdGluZTogZnVuY3Rpb24gaXNQcmlzdGluZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5faXNQcmlzdGluZTtcbiAgfSxcbiAgaXNGb3JtU3VibWl0dGVkOiBmdW5jdGlvbiBpc0Zvcm1TdWJtaXR0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX2Zvcm1TdWJtaXR0ZWQ7XG4gIH0sXG4gIGlzUmVxdWlyZWQ6IGZ1bmN0aW9uIGlzUmVxdWlyZWQoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5wcm9wcy5yZXF1aXJlZDtcbiAgfSxcbiAgc2hvd1JlcXVpcmVkOiBmdW5jdGlvbiBzaG93UmVxdWlyZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX2lzUmVxdWlyZWQ7XG4gIH0sXG4gIHNob3dFcnJvcjogZnVuY3Rpb24gc2hvd0Vycm9yKCkge1xuICAgIHJldHVybiAhdGhpcy5zaG93UmVxdWlyZWQoKSAmJiAhdGhpcy5pc1ZhbGlkKCk7XG4gIH0sXG4gIGlzVmFsaWRWYWx1ZTogZnVuY3Rpb24gaXNWYWxpZFZhbHVlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGV4dC5mb3Jtc3kuaXNWYWxpZFZhbHVlLmNhbGwobnVsbCwgdGhpcywgdmFsdWUpO1xuICAgIC8vcmV0dXJuIHRoaXMucHJvcHMuX2lzVmFsaWRWYWx1ZS5jYWxsKG51bGwsIHRoaXMsIHZhbHVlKTtcbiAgfVxufTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2Zvcm1zeS1yZWFjdC9saWIvTWl4aW4uanMiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKG9iaiwga2V5cykgeyB2YXIgdGFyZ2V0ID0ge307IGZvciAodmFyIGkgaW4gb2JqKSB7IGlmIChrZXlzLmluZGV4T2YoaSkgPj0gMCkgY29udGludWU7IGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgaSkpIGNvbnRpbnVlOyB0YXJnZXRbaV0gPSBvYmpbaV07IH0gcmV0dXJuIHRhcmdldDsgfVxuXG52YXIgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xudmFyIFJlYWN0ID0gZ2xvYmFsLlJlYWN0IHx8IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgY3JlYXRlUmVhY3RDbGFzcyA9IHJlcXVpcmUoJ2NyZWF0ZS1yZWFjdC1jbGFzcycpO1xudmFyIEZvcm1zeSA9IHt9O1xudmFyIHZhbGlkYXRpb25SdWxlcyA9IHJlcXVpcmUoJy4vdmFsaWRhdGlvblJ1bGVzLmpzJyk7XG52YXIgZm9ybURhdGFUb09iamVjdCA9IHJlcXVpcmUoJ2Zvcm0tZGF0YS10by1vYmplY3QnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMuanMnKTtcbnZhciBNaXhpbiA9IHJlcXVpcmUoJy4vTWl4aW4uanMnKTtcbnZhciBIT0MgPSByZXF1aXJlKCcuL0hPQy5qcycpO1xudmFyIERlY29yYXRvciA9IHJlcXVpcmUoJy4vRGVjb3JhdG9yLmpzJyk7XG52YXIgb3B0aW9ucyA9IHt9O1xudmFyIGVtcHR5QXJyYXkgPSBbXTtcblxuRm9ybXN5Lk1peGluID0gTWl4aW47XG5Gb3Jtc3kuSE9DID0gSE9DO1xuRm9ybXN5LkRlY29yYXRvciA9IERlY29yYXRvcjtcblxuRm9ybXN5LmRlZmF1bHRzID0gZnVuY3Rpb24gKHBhc3NlZE9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IHBhc3NlZE9wdGlvbnM7XG59O1xuXG5Gb3Jtc3kuYWRkVmFsaWRhdGlvblJ1bGUgPSBmdW5jdGlvbiAobmFtZSwgZnVuYykge1xuICB2YWxpZGF0aW9uUnVsZXNbbmFtZV0gPSBmdW5jO1xufTtcblxuRm9ybXN5LkZvcm0gPSBjcmVhdGVSZWFjdENsYXNzKHtcbiAgZGlzcGxheU5hbWU6ICdGb3Jtc3knLFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaXNWYWxpZDogdHJ1ZSxcbiAgICAgIGlzU3VibWl0dGluZzogZmFsc2UsXG4gICAgICBjYW5DaGFuZ2U6IGZhbHNlXG4gICAgfTtcbiAgfSxcbiAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9uU3VjY2VzczogZnVuY3Rpb24gb25TdWNjZXNzKCkge30sXG4gICAgICBvbkVycm9yOiBmdW5jdGlvbiBvbkVycm9yKCkge30sXG4gICAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoKSB7fSxcbiAgICAgIG9uVmFsaWRTdWJtaXQ6IGZ1bmN0aW9uIG9uVmFsaWRTdWJtaXQoKSB7fSxcbiAgICAgIG9uSW52YWxpZFN1Ym1pdDogZnVuY3Rpb24gb25JbnZhbGlkU3VibWl0KCkge30sXG4gICAgICBvblZhbGlkOiBmdW5jdGlvbiBvblZhbGlkKCkge30sXG4gICAgICBvbkludmFsaWQ6IGZ1bmN0aW9uIG9uSW52YWxpZCgpIHt9LFxuICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKCkge30sXG4gICAgICB2YWxpZGF0aW9uRXJyb3JzOiBudWxsLFxuICAgICAgcHJldmVudEV4dGVybmFsSW52YWxpZGF0aW9uOiBmYWxzZVxuICAgIH07XG4gIH0sXG5cbiAgY2hpbGRDb250ZXh0VHlwZXM6IHtcbiAgICBmb3Jtc3k6IFByb3BUeXBlcy5vYmplY3RcbiAgfSxcbiAgZ2V0Q2hpbGRDb250ZXh0OiBmdW5jdGlvbiBnZXRDaGlsZENvbnRleHQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHJldHVybiB7XG4gICAgICBmb3Jtc3k6IHtcbiAgICAgICAgYXR0YWNoVG9Gb3JtOiB0aGlzLmF0dGFjaFRvRm9ybSxcbiAgICAgICAgZGV0YWNoRnJvbUZvcm06IHRoaXMuZGV0YWNoRnJvbUZvcm0sXG4gICAgICAgIHZhbGlkYXRlOiB0aGlzLnZhbGlkYXRlLFxuICAgICAgICBpc0Zvcm1EaXNhYmxlZDogdGhpcy5pc0Zvcm1EaXNhYmxlZCxcbiAgICAgICAgaXNWYWxpZFZhbHVlOiBmdW5jdGlvbiBpc1ZhbGlkVmFsdWUoY29tcG9uZW50LCB2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiBfdGhpcy5ydW5WYWxpZGF0aW9uKGNvbXBvbmVudCwgdmFsdWUpLmlzVmFsaWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9LFxuXG4gIC8vIEFkZCBhIG1hcCB0byBzdG9yZSB0aGUgaW5wdXRzIG9mIHRoZSBmb3JtLCBhIG1vZGVsIHRvIHN0b3JlXG4gIC8vIHRoZSB2YWx1ZXMgb2YgdGhlIGZvcm0gYW5kIHJlZ2lzdGVyIGNoaWxkIGlucHV0c1xuICBjb21wb25lbnRXaWxsTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICB0aGlzLmlucHV0cyA9IFtdO1xuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnZhbGlkYXRlRm9ybSgpO1xuICB9LFxuXG4gIGNvbXBvbmVudFdpbGxVcGRhdGU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVcGRhdGUoKSB7XG4gICAgLy8gS2VlcCBhIHJlZmVyZW5jZSB0byBpbnB1dCBuYW1lcyBiZWZvcmUgZm9ybSB1cGRhdGVzLFxuICAgIC8vIHRvIGNoZWNrIGlmIGlucHV0cyBoYXMgY2hhbmdlZCBhZnRlciByZW5kZXJcbiAgICB0aGlzLnByZXZJbnB1dE5hbWVzID0gdGhpcy5pbnB1dHMubWFwKGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgIHJldHVybiBjb21wb25lbnQucHJvcHMubmFtZTtcbiAgICB9KTtcbiAgfSxcblxuICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcblxuICAgIGlmICh0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnMgJiYgX3R5cGVvZih0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnMpID09PSAnb2JqZWN0JyAmJiBPYmplY3Qua2V5cyh0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnMpLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuc2V0SW5wdXRWYWxpZGF0aW9uRXJyb3JzKHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9ycyk7XG4gICAgfVxuXG4gICAgdmFyIG5ld0lucHV0TmFtZXMgPSB0aGlzLmlucHV0cy5tYXAoZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgcmV0dXJuIGNvbXBvbmVudC5wcm9wcy5uYW1lO1xuICAgIH0pO1xuICAgIGlmICh1dGlscy5hcnJheXNEaWZmZXIodGhpcy5wcmV2SW5wdXROYW1lcywgbmV3SW5wdXROYW1lcykpIHtcbiAgICAgIHRoaXMudmFsaWRhdGVGb3JtKCk7XG4gICAgfVxuICB9LFxuXG4gIC8vIEFsbG93IHJlc2V0dGluZyB0byBzcGVjaWZpZWQgZGF0YVxuICByZXNldDogZnVuY3Rpb24gcmVzZXQoZGF0YSkge1xuICAgIHRoaXMuc2V0Rm9ybVByaXN0aW5lKHRydWUpO1xuICAgIHRoaXMucmVzZXRNb2RlbChkYXRhKTtcbiAgfSxcblxuICAvLyBVcGRhdGUgbW9kZWwsIHN1Ym1pdCB0byB1cmwgcHJvcCBhbmQgc2VuZCB0aGUgbW9kZWxcbiAgc3VibWl0OiBmdW5jdGlvbiBzdWJtaXQoZXZlbnQpIHtcblxuICAgIGV2ZW50ICYmIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAvLyBUcmlnZ2VyIGZvcm0gYXMgbm90IHByaXN0aW5lLlxuICAgIC8vIElmIGFueSBpbnB1dHMgaGF2ZSBub3QgYmVlbiB0b3VjaGVkIHlldCB0aGlzIHdpbGwgbWFrZSB0aGVtIGRpcnR5XG4gICAgLy8gc28gdmFsaWRhdGlvbiBiZWNvbWVzIHZpc2libGUgKGlmIGJhc2VkIG9uIGlzUHJpc3RpbmUpXG4gICAgdGhpcy5zZXRGb3JtUHJpc3RpbmUoZmFsc2UpO1xuICAgIHZhciBtb2RlbCA9IHRoaXMuZ2V0TW9kZWwoKTtcbiAgICB0aGlzLnByb3BzLm9uU3VibWl0KG1vZGVsLCB0aGlzLnJlc2V0TW9kZWwsIHRoaXMudXBkYXRlSW5wdXRzV2l0aEVycm9yKTtcbiAgICB0aGlzLnN0YXRlLmlzVmFsaWQgPyB0aGlzLnByb3BzLm9uVmFsaWRTdWJtaXQobW9kZWwsIHRoaXMucmVzZXRNb2RlbCwgdGhpcy51cGRhdGVJbnB1dHNXaXRoRXJyb3IpIDogdGhpcy5wcm9wcy5vbkludmFsaWRTdWJtaXQobW9kZWwsIHRoaXMucmVzZXRNb2RlbCwgdGhpcy51cGRhdGVJbnB1dHNXaXRoRXJyb3IpO1xuICB9LFxuXG4gIG1hcE1vZGVsOiBmdW5jdGlvbiBtYXBNb2RlbChtb2RlbCkge1xuXG4gICAgaWYgKHRoaXMucHJvcHMubWFwcGluZykge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMubWFwcGluZyhtb2RlbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmb3JtRGF0YVRvT2JqZWN0LnRvT2JqKE9iamVjdC5rZXlzKG1vZGVsKS5yZWR1Y2UoZnVuY3Rpb24gKG1hcHBlZE1vZGVsLCBrZXkpIHtcblxuICAgICAgICB2YXIga2V5QXJyYXkgPSBrZXkuc3BsaXQoJy4nKTtcbiAgICAgICAgdmFyIGJhc2UgPSBtYXBwZWRNb2RlbDtcbiAgICAgICAgd2hpbGUgKGtleUFycmF5Lmxlbmd0aCkge1xuICAgICAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5QXJyYXkuc2hpZnQoKTtcbiAgICAgICAgICBiYXNlID0gYmFzZVtjdXJyZW50S2V5XSA9IGtleUFycmF5Lmxlbmd0aCA/IGJhc2VbY3VycmVudEtleV0gfHwge30gOiBtb2RlbFtrZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1hcHBlZE1vZGVsO1xuICAgICAgfSwge30pKTtcbiAgICB9XG4gIH0sXG5cbiAgZ2V0TW9kZWw6IGZ1bmN0aW9uIGdldE1vZGVsKCkge1xuICAgIHZhciBjdXJyZW50VmFsdWVzID0gdGhpcy5nZXRDdXJyZW50VmFsdWVzKCk7XG4gICAgcmV0dXJuIHRoaXMubWFwTW9kZWwoY3VycmVudFZhbHVlcyk7XG4gIH0sXG5cbiAgLy8gUmVzZXQgZWFjaCBrZXkgaW4gdGhlIG1vZGVsIHRvIHRoZSBvcmlnaW5hbCAvIGluaXRpYWwgLyBzcGVjaWZpZWQgdmFsdWVcbiAgcmVzZXRNb2RlbDogZnVuY3Rpb24gcmVzZXRNb2RlbChkYXRhKSB7XG4gICAgdGhpcy5pbnB1dHMuZm9yRWFjaChmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICB2YXIgbmFtZSA9IGNvbXBvbmVudC5wcm9wcy5uYW1lO1xuICAgICAgaWYgKGRhdGEgJiYgZGF0YS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICBjb21wb25lbnQuc2V0VmFsdWUoZGF0YVtuYW1lXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb21wb25lbnQucmVzZXRWYWx1ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMudmFsaWRhdGVGb3JtKCk7XG4gIH0sXG5cbiAgc2V0SW5wdXRWYWxpZGF0aW9uRXJyb3JzOiBmdW5jdGlvbiBzZXRJbnB1dFZhbGlkYXRpb25FcnJvcnMoZXJyb3JzKSB7XG4gICAgdGhpcy5pbnB1dHMuZm9yRWFjaChmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICB2YXIgbmFtZSA9IGNvbXBvbmVudC5wcm9wcy5uYW1lO1xuICAgICAgdmFyIGFyZ3MgPSBbe1xuICAgICAgICBfaXNWYWxpZDogIShuYW1lIGluIGVycm9ycyksXG4gICAgICAgIF92YWxpZGF0aW9uRXJyb3I6IHR5cGVvZiBlcnJvcnNbbmFtZV0gPT09ICdzdHJpbmcnID8gW2Vycm9yc1tuYW1lXV0gOiBlcnJvcnNbbmFtZV1cbiAgICAgIH1dO1xuICAgICAgY29tcG9uZW50LnNldFN0YXRlLmFwcGx5KGNvbXBvbmVudCwgYXJncyk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLy8gQ2hlY2tzIGlmIHRoZSB2YWx1ZXMgaGF2ZSBjaGFuZ2VkIGZyb20gdGhlaXIgaW5pdGlhbCB2YWx1ZVxuICBpc0NoYW5nZWQ6IGZ1bmN0aW9uIGlzQ2hhbmdlZCgpIHtcbiAgICByZXR1cm4gIXV0aWxzLmlzU2FtZSh0aGlzLmdldFByaXN0aW5lVmFsdWVzKCksIHRoaXMuZ2V0Q3VycmVudFZhbHVlcygpKTtcbiAgfSxcblxuICBnZXRQcmlzdGluZVZhbHVlczogZnVuY3Rpb24gZ2V0UHJpc3RpbmVWYWx1ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5wdXRzLnJlZHVjZShmdW5jdGlvbiAoZGF0YSwgY29tcG9uZW50KSB7XG4gICAgICB2YXIgbmFtZSA9IGNvbXBvbmVudC5wcm9wcy5uYW1lO1xuICAgICAgZGF0YVtuYW1lXSA9IGNvbXBvbmVudC5wcm9wcy52YWx1ZTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0sIHt9KTtcbiAgfSxcblxuICAvLyBHbyB0aHJvdWdoIGVycm9ycyBmcm9tIHNlcnZlciBhbmQgZ3JhYiB0aGUgY29tcG9uZW50c1xuICAvLyBzdG9yZWQgaW4gdGhlIGlucHV0cyBtYXAuIENoYW5nZSB0aGVpciBzdGF0ZSB0byBpbnZhbGlkXG4gIC8vIGFuZCBzZXQgdGhlIHNlcnZlckVycm9yIG1lc3NhZ2VcbiAgdXBkYXRlSW5wdXRzV2l0aEVycm9yOiBmdW5jdGlvbiB1cGRhdGVJbnB1dHNXaXRoRXJyb3IoZXJyb3JzKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICBPYmplY3Qua2V5cyhlcnJvcnMpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUsIGluZGV4KSB7XG4gICAgICB2YXIgY29tcG9uZW50ID0gdXRpbHMuZmluZChfdGhpczIuaW5wdXRzLCBmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICAgIHJldHVybiBjb21wb25lbnQucHJvcHMubmFtZSA9PT0gbmFtZTtcbiAgICAgIH0pO1xuICAgICAgaWYgKCFjb21wb25lbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgYXJlIHRyeWluZyB0byB1cGRhdGUgYW4gaW5wdXQgdGhhdCBkb2VzIG5vdCBleGlzdC4gJyArICdWZXJpZnkgZXJyb3JzIG9iamVjdCB3aXRoIGlucHV0IG5hbWVzLiAnICsgSlNPTi5zdHJpbmdpZnkoZXJyb3JzKSk7XG4gICAgICB9XG4gICAgICB2YXIgYXJncyA9IFt7XG4gICAgICAgIF9pc1ZhbGlkOiBfdGhpczIucHJvcHMucHJldmVudEV4dGVybmFsSW52YWxpZGF0aW9uIHx8IGZhbHNlLFxuICAgICAgICBfZXh0ZXJuYWxFcnJvcjogdHlwZW9mIGVycm9yc1tuYW1lXSA9PT0gJ3N0cmluZycgPyBbZXJyb3JzW25hbWVdXSA6IGVycm9yc1tuYW1lXVxuICAgICAgfV07XG4gICAgICBjb21wb25lbnQuc2V0U3RhdGUuYXBwbHkoY29tcG9uZW50LCBhcmdzKTtcbiAgICB9KTtcbiAgfSxcblxuICBpc0Zvcm1EaXNhYmxlZDogZnVuY3Rpb24gaXNGb3JtRGlzYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuZGlzYWJsZWQ7XG4gIH0sXG5cbiAgZ2V0Q3VycmVudFZhbHVlczogZnVuY3Rpb24gZ2V0Q3VycmVudFZhbHVlcygpIHtcbiAgICByZXR1cm4gdGhpcy5pbnB1dHMucmVkdWNlKGZ1bmN0aW9uIChkYXRhLCBjb21wb25lbnQpIHtcbiAgICAgIHZhciBuYW1lID0gY29tcG9uZW50LnByb3BzLm5hbWU7XG4gICAgICBkYXRhW25hbWVdID0gY29tcG9uZW50LnN0YXRlLl92YWx1ZTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0sIHt9KTtcbiAgfSxcblxuICBzZXRGb3JtUHJpc3RpbmU6IGZ1bmN0aW9uIHNldEZvcm1QcmlzdGluZShpc1ByaXN0aW5lKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBfZm9ybVN1Ym1pdHRlZDogIWlzUHJpc3RpbmVcbiAgICB9KTtcblxuICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBlYWNoIGNvbXBvbmVudCBhbmQgc2V0IGl0IGFzIHByaXN0aW5lXG4gICAgLy8gb3IgXCJkaXJ0eVwiLlxuICAgIHRoaXMuaW5wdXRzLmZvckVhY2goZnVuY3Rpb24gKGNvbXBvbmVudCwgaW5kZXgpIHtcbiAgICAgIGNvbXBvbmVudC5zZXRTdGF0ZSh7XG4gICAgICAgIF9mb3JtU3VibWl0dGVkOiAhaXNQcmlzdGluZSxcbiAgICAgICAgX2lzUHJpc3RpbmU6IGlzUHJpc3RpbmVcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LFxuXG4gIC8vIFVzZSB0aGUgYmluZGVkIHZhbHVlcyBhbmQgdGhlIGFjdHVhbCBpbnB1dCB2YWx1ZSB0b1xuICAvLyB2YWxpZGF0ZSB0aGUgaW5wdXQgYW5kIHNldCBpdHMgc3RhdGUuIFRoZW4gY2hlY2sgdGhlXG4gIC8vIHN0YXRlIG9mIHRoZSBmb3JtIGl0c2VsZlxuICB2YWxpZGF0ZTogZnVuY3Rpb24gdmFsaWRhdGUoY29tcG9uZW50KSB7XG5cbiAgICAvLyBUcmlnZ2VyIG9uQ2hhbmdlXG4gICAgaWYgKHRoaXMuc3RhdGUuY2FuQ2hhbmdlKSB7XG4gICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHRoaXMuZ2V0Q3VycmVudFZhbHVlcygpLCB0aGlzLmlzQ2hhbmdlZCgpKTtcbiAgICB9XG5cbiAgICB2YXIgdmFsaWRhdGlvbiA9IHRoaXMucnVuVmFsaWRhdGlvbihjb21wb25lbnQpO1xuICAgIC8vIFJ1biB0aHJvdWdoIHRoZSB2YWxpZGF0aW9ucywgc3BsaXQgdGhlbSB1cCBhbmQgY2FsbFxuICAgIC8vIHRoZSB2YWxpZGF0b3IgSUYgdGhlcmUgaXMgYSB2YWx1ZSBvciBpdCBpcyByZXF1aXJlZFxuICAgIGNvbXBvbmVudC5zZXRTdGF0ZSh7XG4gICAgICBfaXNWYWxpZDogdmFsaWRhdGlvbi5pc1ZhbGlkLFxuICAgICAgX2lzUmVxdWlyZWQ6IHZhbGlkYXRpb24uaXNSZXF1aXJlZCxcbiAgICAgIF92YWxpZGF0aW9uRXJyb3I6IHZhbGlkYXRpb24uZXJyb3IsXG4gICAgICBfZXh0ZXJuYWxFcnJvcjogbnVsbFxuICAgIH0sIHRoaXMudmFsaWRhdGVGb3JtKTtcbiAgfSxcblxuICAvLyBDaGVja3MgdmFsaWRhdGlvbiBvbiBjdXJyZW50IHZhbHVlIG9yIGEgcGFzc2VkIHZhbHVlXG4gIHJ1blZhbGlkYXRpb246IGZ1bmN0aW9uIHJ1blZhbGlkYXRpb24oY29tcG9uZW50LCB2YWx1ZSkge1xuXG4gICAgdmFyIGN1cnJlbnRWYWx1ZXMgPSB0aGlzLmdldEN1cnJlbnRWYWx1ZXMoKTtcbiAgICB2YXIgdmFsaWRhdGlvbkVycm9ycyA9IGNvbXBvbmVudC5wcm9wcy52YWxpZGF0aW9uRXJyb3JzO1xuICAgIHZhciB2YWxpZGF0aW9uRXJyb3IgPSBjb21wb25lbnQucHJvcHMudmFsaWRhdGlvbkVycm9yO1xuICAgIHZhbHVlID0gYXJndW1lbnRzLmxlbmd0aCA9PT0gMiA/IHZhbHVlIDogY29tcG9uZW50LnN0YXRlLl92YWx1ZTtcblxuICAgIHZhciB2YWxpZGF0aW9uUmVzdWx0cyA9IHRoaXMucnVuUnVsZXModmFsdWUsIGN1cnJlbnRWYWx1ZXMsIGNvbXBvbmVudC5fdmFsaWRhdGlvbnMpO1xuICAgIHZhciByZXF1aXJlZFJlc3VsdHMgPSB0aGlzLnJ1blJ1bGVzKHZhbHVlLCBjdXJyZW50VmFsdWVzLCBjb21wb25lbnQuX3JlcXVpcmVkVmFsaWRhdGlvbnMpO1xuXG4gICAgLy8gdGhlIGNvbXBvbmVudCBkZWZpbmVzIGFuIGV4cGxpY2l0IHZhbGlkYXRlIGZ1bmN0aW9uXG4gICAgaWYgKHR5cGVvZiBjb21wb25lbnQudmFsaWRhdGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdmFsaWRhdGlvblJlc3VsdHMuZmFpbGVkID0gY29tcG9uZW50LnZhbGlkYXRlKCkgPyBbXSA6IFsnZmFpbGVkJ107XG4gICAgfVxuXG4gICAgdmFyIGlzUmVxdWlyZWQgPSBPYmplY3Qua2V5cyhjb21wb25lbnQuX3JlcXVpcmVkVmFsaWRhdGlvbnMpLmxlbmd0aCA/ICEhcmVxdWlyZWRSZXN1bHRzLnN1Y2Nlc3MubGVuZ3RoIDogZmFsc2U7XG4gICAgdmFyIGlzVmFsaWQgPSAhdmFsaWRhdGlvblJlc3VsdHMuZmFpbGVkLmxlbmd0aCAmJiAhKHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9ycyAmJiB0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnNbY29tcG9uZW50LnByb3BzLm5hbWVdKTtcblxuICAgIHJldHVybiB7XG4gICAgICBpc1JlcXVpcmVkOiBpc1JlcXVpcmVkLFxuICAgICAgaXNWYWxpZDogaXNSZXF1aXJlZCA/IGZhbHNlIDogaXNWYWxpZCxcbiAgICAgIGVycm9yOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgaWYgKGlzVmFsaWQgJiYgIWlzUmVxdWlyZWQpIHtcbiAgICAgICAgICByZXR1cm4gZW1wdHlBcnJheTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2YWxpZGF0aW9uUmVzdWx0cy5lcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbGlkYXRpb25SZXN1bHRzLmVycm9ycztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnMgJiYgdGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzW2NvbXBvbmVudC5wcm9wcy5uYW1lXSkge1xuICAgICAgICAgIHJldHVybiB0eXBlb2YgdGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzW2NvbXBvbmVudC5wcm9wcy5uYW1lXSA9PT0gJ3N0cmluZycgPyBbdGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzW2NvbXBvbmVudC5wcm9wcy5uYW1lXV0gOiB0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnNbY29tcG9uZW50LnByb3BzLm5hbWVdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzUmVxdWlyZWQpIHtcbiAgICAgICAgICB2YXIgZXJyb3IgPSB2YWxpZGF0aW9uRXJyb3JzW3JlcXVpcmVkUmVzdWx0cy5zdWNjZXNzWzBdXTtcbiAgICAgICAgICByZXR1cm4gZXJyb3IgPyBbZXJyb3JdIDogbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2YWxpZGF0aW9uUmVzdWx0cy5mYWlsZWQubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbGlkYXRpb25SZXN1bHRzLmZhaWxlZC5tYXAoZnVuY3Rpb24gKGZhaWxlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbGlkYXRpb25FcnJvcnNbZmFpbGVkXSA/IHZhbGlkYXRpb25FcnJvcnNbZmFpbGVkXSA6IHZhbGlkYXRpb25FcnJvcjtcbiAgICAgICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKHgsIHBvcywgYXJyKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgZHVwbGljYXRlc1xuICAgICAgICAgICAgcmV0dXJuIGFyci5pbmRleE9mKHgpID09PSBwb3M7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0uY2FsbCh0aGlzKVxuICAgIH07XG4gIH0sXG5cbiAgcnVuUnVsZXM6IGZ1bmN0aW9uIHJ1blJ1bGVzKHZhbHVlLCBjdXJyZW50VmFsdWVzLCB2YWxpZGF0aW9ucykge1xuXG4gICAgdmFyIHJlc3VsdHMgPSB7XG4gICAgICBlcnJvcnM6IFtdLFxuICAgICAgZmFpbGVkOiBbXSxcbiAgICAgIHN1Y2Nlc3M6IFtdXG4gICAgfTtcbiAgICBpZiAoT2JqZWN0LmtleXModmFsaWRhdGlvbnMpLmxlbmd0aCkge1xuICAgICAgT2JqZWN0LmtleXModmFsaWRhdGlvbnMpLmZvckVhY2goZnVuY3Rpb24gKHZhbGlkYXRpb25NZXRob2QpIHtcblxuICAgICAgICBpZiAodmFsaWRhdGlvblJ1bGVzW3ZhbGlkYXRpb25NZXRob2RdICYmIHR5cGVvZiB2YWxpZGF0aW9uc1t2YWxpZGF0aW9uTWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRm9ybXN5IGRvZXMgbm90IGFsbG93IHlvdSB0byBvdmVycmlkZSBkZWZhdWx0IHZhbGlkYXRpb25zOiAnICsgdmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXZhbGlkYXRpb25SdWxlc1t2YWxpZGF0aW9uTWV0aG9kXSAmJiB0eXBlb2YgdmFsaWRhdGlvbnNbdmFsaWRhdGlvbk1ldGhvZF0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm1zeSBkb2VzIG5vdCBoYXZlIHRoZSB2YWxpZGF0aW9uIHJ1bGU6ICcgKyB2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgdmFsaWRhdGlvbnNbdmFsaWRhdGlvbk1ldGhvZF0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB2YXIgdmFsaWRhdGlvbiA9IHZhbGlkYXRpb25zW3ZhbGlkYXRpb25NZXRob2RdKGN1cnJlbnRWYWx1ZXMsIHZhbHVlKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbGlkYXRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXN1bHRzLmVycm9ycy5wdXNoKHZhbGlkYXRpb24pO1xuICAgICAgICAgICAgcmVzdWx0cy5mYWlsZWQucHVzaCh2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCF2YWxpZGF0aW9uKSB7XG4gICAgICAgICAgICByZXN1bHRzLmZhaWxlZC5wdXNoKHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbGlkYXRpb25zW3ZhbGlkYXRpb25NZXRob2RdICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdmFyIHZhbGlkYXRpb24gPSB2YWxpZGF0aW9uUnVsZXNbdmFsaWRhdGlvbk1ldGhvZF0oY3VycmVudFZhbHVlcywgdmFsdWUsIHZhbGlkYXRpb25zW3ZhbGlkYXRpb25NZXRob2RdKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbGlkYXRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXN1bHRzLmVycm9ycy5wdXNoKHZhbGlkYXRpb24pO1xuICAgICAgICAgICAgcmVzdWx0cy5mYWlsZWQucHVzaCh2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCF2YWxpZGF0aW9uKSB7XG4gICAgICAgICAgICByZXN1bHRzLmZhaWxlZC5wdXNoKHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHRzLnN1Y2Nlc3MucHVzaCh2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdHMuc3VjY2Vzcy5wdXNoKHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH0sXG5cbiAgLy8gVmFsaWRhdGUgdGhlIGZvcm0gYnkgZ29pbmcgdGhyb3VnaCBhbGwgY2hpbGQgaW5wdXQgY29tcG9uZW50c1xuICAvLyBhbmQgY2hlY2sgdGhlaXIgc3RhdGVcbiAgdmFsaWRhdGVGb3JtOiBmdW5jdGlvbiB2YWxpZGF0ZUZvcm0oKSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAvLyBXZSBuZWVkIGEgY2FsbGJhY2sgYXMgd2UgYXJlIHZhbGlkYXRpbmcgYWxsIGlucHV0cyBhZ2Fpbi4gVGhpcyB3aWxsXG4gICAgLy8gcnVuIHdoZW4gdGhlIGxhc3QgY29tcG9uZW50IGhhcyBzZXQgaXRzIHN0YXRlXG4gICAgdmFyIG9uVmFsaWRhdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFsbElzVmFsaWQgPSB0aGlzLmlucHV0cy5ldmVyeShmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICAgIHJldHVybiBjb21wb25lbnQuc3RhdGUuX2lzVmFsaWQ7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGlzVmFsaWQ6IGFsbElzVmFsaWRcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoYWxsSXNWYWxpZCkge1xuICAgICAgICB0aGlzLnByb3BzLm9uVmFsaWQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucHJvcHMub25JbnZhbGlkKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFRlbGwgdGhlIGZvcm0gdGhhdCBpdCBjYW4gc3RhcnQgdG8gdHJpZ2dlciBjaGFuZ2UgZXZlbnRzXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgY2FuQ2hhbmdlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9LmJpbmQodGhpcyk7XG5cbiAgICAvLyBSdW4gdmFsaWRhdGlvbiBhZ2FpbiBpbiBjYXNlIGFmZmVjdGVkIGJ5IG90aGVyIGlucHV0cy4gVGhlXG4gICAgLy8gbGFzdCBjb21wb25lbnQgdmFsaWRhdGVkIHdpbGwgcnVuIHRoZSBvblZhbGlkYXRpb25Db21wbGV0ZSBjYWxsYmFja1xuICAgIHRoaXMuaW5wdXRzLmZvckVhY2goZnVuY3Rpb24gKGNvbXBvbmVudCwgaW5kZXgpIHtcbiAgICAgIHZhciB2YWxpZGF0aW9uID0gX3RoaXMzLnJ1blZhbGlkYXRpb24oY29tcG9uZW50KTtcbiAgICAgIGlmICh2YWxpZGF0aW9uLmlzVmFsaWQgJiYgY29tcG9uZW50LnN0YXRlLl9leHRlcm5hbEVycm9yKSB7XG4gICAgICAgIHZhbGlkYXRpb24uaXNWYWxpZCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgY29tcG9uZW50LnNldFN0YXRlKHtcbiAgICAgICAgX2lzVmFsaWQ6IHZhbGlkYXRpb24uaXNWYWxpZCxcbiAgICAgICAgX2lzUmVxdWlyZWQ6IHZhbGlkYXRpb24uaXNSZXF1aXJlZCxcbiAgICAgICAgX3ZhbGlkYXRpb25FcnJvcjogdmFsaWRhdGlvbi5lcnJvcixcbiAgICAgICAgX2V4dGVybmFsRXJyb3I6ICF2YWxpZGF0aW9uLmlzVmFsaWQgJiYgY29tcG9uZW50LnN0YXRlLl9leHRlcm5hbEVycm9yID8gY29tcG9uZW50LnN0YXRlLl9leHRlcm5hbEVycm9yIDogbnVsbFxuICAgICAgfSwgaW5kZXggPT09IF90aGlzMy5pbnB1dHMubGVuZ3RoIC0gMSA/IG9uVmFsaWRhdGlvbkNvbXBsZXRlIDogbnVsbCk7XG4gICAgfSk7XG5cbiAgICAvLyBJZiB0aGVyZSBhcmUgbm8gaW5wdXRzLCBzZXQgc3RhdGUgd2hlcmUgZm9ybSBpcyByZWFkeSB0byB0cmlnZ2VyXG4gICAgLy8gY2hhbmdlIGV2ZW50LiBOZXcgaW5wdXRzIG1pZ2h0IGJlIGFkZGVkIGxhdGVyXG4gICAgaWYgKCF0aGlzLmlucHV0cy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBjYW5DaGFuZ2U6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBNZXRob2QgcHV0IG9uIGVhY2ggaW5wdXQgY29tcG9uZW50IHRvIHJlZ2lzdGVyXG4gIC8vIGl0c2VsZiB0byB0aGUgZm9ybVxuICBhdHRhY2hUb0Zvcm06IGZ1bmN0aW9uIGF0dGFjaFRvRm9ybShjb21wb25lbnQpIHtcblxuICAgIGlmICh0aGlzLmlucHV0cy5pbmRleE9mKGNvbXBvbmVudCkgPT09IC0xKSB7XG4gICAgICB0aGlzLmlucHV0cy5wdXNoKGNvbXBvbmVudCk7XG4gICAgfVxuXG4gICAgdGhpcy52YWxpZGF0ZShjb21wb25lbnQpO1xuICB9LFxuXG4gIC8vIE1ldGhvZCBwdXQgb24gZWFjaCBpbnB1dCBjb21wb25lbnQgdG8gdW5yZWdpc3RlclxuICAvLyBpdHNlbGYgZnJvbSB0aGUgZm9ybVxuICBkZXRhY2hGcm9tRm9ybTogZnVuY3Rpb24gZGV0YWNoRnJvbUZvcm0oY29tcG9uZW50KSB7XG4gICAgdmFyIGNvbXBvbmVudFBvcyA9IHRoaXMuaW5wdXRzLmluZGV4T2YoY29tcG9uZW50KTtcblxuICAgIGlmIChjb21wb25lbnRQb3MgIT09IC0xKSB7XG4gICAgICB0aGlzLmlucHV0cyA9IHRoaXMuaW5wdXRzLnNsaWNlKDAsIGNvbXBvbmVudFBvcykuY29uY2F0KHRoaXMuaW5wdXRzLnNsaWNlKGNvbXBvbmVudFBvcyArIDEpKTtcbiAgICB9XG5cbiAgICB0aGlzLnZhbGlkYXRlRm9ybSgpO1xuICB9LFxuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgbWFwcGluZyA9IF9wcm9wcy5tYXBwaW5nLFxuICAgICAgICB2YWxpZGF0aW9uRXJyb3JzID0gX3Byb3BzLnZhbGlkYXRpb25FcnJvcnMsXG4gICAgICAgIG9uU3VibWl0ID0gX3Byb3BzLm9uU3VibWl0LFxuICAgICAgICBvblZhbGlkID0gX3Byb3BzLm9uVmFsaWQsXG4gICAgICAgIG9uVmFsaWRTdWJtaXQgPSBfcHJvcHMub25WYWxpZFN1Ym1pdCxcbiAgICAgICAgb25JbnZhbGlkID0gX3Byb3BzLm9uSW52YWxpZCxcbiAgICAgICAgb25JbnZhbGlkU3VibWl0ID0gX3Byb3BzLm9uSW52YWxpZFN1Ym1pdCxcbiAgICAgICAgb25DaGFuZ2UgPSBfcHJvcHMub25DaGFuZ2UsXG4gICAgICAgIHJlc2V0ID0gX3Byb3BzLnJlc2V0LFxuICAgICAgICBwcmV2ZW50RXh0ZXJuYWxJbnZhbGlkYXRpb24gPSBfcHJvcHMucHJldmVudEV4dGVybmFsSW52YWxpZGF0aW9uLFxuICAgICAgICBvblN1Y2Nlc3MgPSBfcHJvcHMub25TdWNjZXNzLFxuICAgICAgICBvbkVycm9yID0gX3Byb3BzLm9uRXJyb3IsXG4gICAgICAgIG5vbkZvcm1zeVByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9wcm9wcywgWydtYXBwaW5nJywgJ3ZhbGlkYXRpb25FcnJvcnMnLCAnb25TdWJtaXQnLCAnb25WYWxpZCcsICdvblZhbGlkU3VibWl0JywgJ29uSW52YWxpZCcsICdvbkludmFsaWRTdWJtaXQnLCAnb25DaGFuZ2UnLCAncmVzZXQnLCAncHJldmVudEV4dGVybmFsSW52YWxpZGF0aW9uJywgJ29uU3VjY2VzcycsICdvbkVycm9yJ10pO1xuXG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAnZm9ybScsXG4gICAgICBfZXh0ZW5kcyh7fSwgbm9uRm9ybXN5UHJvcHMsIHsgb25TdWJtaXQ6IHRoaXMuc3VibWl0IH0pLFxuICAgICAgdGhpcy5wcm9wcy5jaGlsZHJlblxuICAgICk7XG4gIH1cbn0pO1xuXG5pZiAoIWdsb2JhbC5leHBvcnRzICYmICFnbG9iYWwubW9kdWxlICYmICghZ2xvYmFsLmRlZmluZSB8fCAhZ2xvYmFsLmRlZmluZS5hbWQpKSB7XG4gIGdsb2JhbC5Gb3Jtc3kgPSBGb3Jtc3k7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRm9ybXN5O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vZm9ybXN5LXJlYWN0L2xpYi9tYWluLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhcnJheXNEaWZmZXI6IGZ1bmN0aW9uIGFycmF5c0RpZmZlcihhLCBiKSB7XG4gICAgdmFyIGlzRGlmZmVyZW50ID0gZmFsc2U7XG4gICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkge1xuICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgIGlmICghdGhpcy5pc1NhbWUoaXRlbSwgYltpbmRleF0pKSB7XG4gICAgICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzKTtcbiAgICB9XG4gICAgcmV0dXJuIGlzRGlmZmVyZW50O1xuICB9LFxuXG4gIG9iamVjdHNEaWZmZXI6IGZ1bmN0aW9uIG9iamVjdHNEaWZmZXIoYSwgYikge1xuICAgIHZhciBpc0RpZmZlcmVudCA9IGZhbHNlO1xuICAgIGlmIChPYmplY3Qua2V5cyhhKS5sZW5ndGggIT09IE9iamVjdC5rZXlzKGIpLmxlbmd0aCkge1xuICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBPYmplY3Qua2V5cyhhKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU2FtZShhW2tleV0sIGJba2V5XSkpIHtcbiAgICAgICAgICBpc0RpZmZlcmVudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0sIHRoaXMpO1xuICAgIH1cbiAgICByZXR1cm4gaXNEaWZmZXJlbnQ7XG4gIH0sXG5cbiAgaXNTYW1lOiBmdW5jdGlvbiBpc1NhbWUoYSwgYikge1xuICAgIGlmICgodHlwZW9mIGEgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGEpKSAhPT0gKHR5cGVvZiBiID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihiKSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYSkgJiYgQXJyYXkuaXNBcnJheShiKSkge1xuICAgICAgcmV0dXJuICF0aGlzLmFycmF5c0RpZmZlcihhLCBiKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gYS50b1N0cmluZygpID09PSBiLnRvU3RyaW5nKCk7XG4gICAgfSBlbHNlIGlmICgodHlwZW9mIGEgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGEpKSA9PT0gJ29iamVjdCcgJiYgYSAhPT0gbnVsbCAmJiBiICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gIXRoaXMub2JqZWN0c0RpZmZlcihhLCBiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYSA9PT0gYjtcbiAgfSxcblxuICBmaW5kOiBmdW5jdGlvbiBmaW5kKGNvbGxlY3Rpb24sIGZuKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjb2xsZWN0aW9uLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIGl0ZW0gPSBjb2xsZWN0aW9uW2ldO1xuICAgICAgaWYgKGZuKGl0ZW0pKSB7XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2Zvcm1zeS1yZWFjdC9saWIvdXRpbHMuanMiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfaXNFeGlzdHkgPSBmdW5jdGlvbiBfaXNFeGlzdHkodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQ7XG59O1xuXG52YXIgaXNFbXB0eSA9IGZ1bmN0aW9uIGlzRW1wdHkodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09PSAnJztcbn07XG5cbnZhciB2YWxpZGF0aW9ucyA9IHtcbiAgaXNEZWZhdWx0UmVxdWlyZWRWYWx1ZTogZnVuY3Rpb24gaXNEZWZhdWx0UmVxdWlyZWRWYWx1ZSh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09ICcnO1xuICB9LFxuICBpc0V4aXN0eTogZnVuY3Rpb24gaXNFeGlzdHkodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiBfaXNFeGlzdHkodmFsdWUpO1xuICB9LFxuICBtYXRjaFJlZ2V4cDogZnVuY3Rpb24gbWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgcmVnZXhwKSB7XG4gICAgcmV0dXJuICFfaXNFeGlzdHkodmFsdWUpIHx8IGlzRW1wdHkodmFsdWUpIHx8IHJlZ2V4cC50ZXN0KHZhbHVlKTtcbiAgfSxcbiAgaXNVbmRlZmluZWQ6IGZ1bmN0aW9uIGlzVW5kZWZpbmVkKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZDtcbiAgfSxcbiAgaXNFbXB0eVN0cmluZzogZnVuY3Rpb24gaXNFbXB0eVN0cmluZyh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIGlzRW1wdHkodmFsdWUpO1xuICB9LFxuICBpc0VtYWlsOiBmdW5jdGlvbiBpc0VtYWlsKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL14oKChbYS16XXxcXGR8WyEjXFwkJSYnXFwqXFwrXFwtXFwvPVxcP1xcXl9ge1xcfH1+XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkrKFxcLihbYS16XXxcXGR8WyEjXFwkJSYnXFwqXFwrXFwtXFwvPVxcP1xcXl9ge1xcfH1+XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkrKSopfCgoXFx4MjIpKCgoKFxceDIwfFxceDA5KSooXFx4MGRcXHgwYSkpPyhcXHgyMHxcXHgwOSkrKT8oKFtcXHgwMS1cXHgwOFxceDBiXFx4MGNcXHgwZS1cXHgxZlxceDdmXXxcXHgyMXxbXFx4MjMtXFx4NWJdfFtcXHg1ZC1cXHg3ZV18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfChcXFxcKFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZC1cXHg3Zl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkpKigoKFxceDIwfFxceDA5KSooXFx4MGRcXHgwYSkpPyhcXHgyMHxcXHgwOSkrKT8oXFx4MjIpKSlAKCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKVxcLikrKChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpJC9pKTtcbiAgfSxcbiAgaXNVcmw6IGZ1bmN0aW9uIGlzVXJsKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL14oaHR0cHM/fHM/ZnRwKTpcXC9cXC8oKCgoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OikqQCk/KCgoXFxkfFsxLTldXFxkfDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNV0pXFwuKFxcZHxbMS05XVxcZHwxXFxkXFxkfDJbMC00XVxcZHwyNVswLTVdKVxcLihcXGR8WzEtOV1cXGR8MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC01XSlcXC4oXFxkfFsxLTldXFxkfDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNV0pKXwoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4/KSg6XFxkKik/KShcXC8oKChbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoJVtcXGRhLWZdezJ9KXxbIVxcJCYnXFwoXFwpXFwqXFwrLDs9XXw6fEApKyhcXC8oKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCkqKSopPyk/KFxcPygoKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCl8W1xcdUUwMDAtXFx1RjhGRl18XFwvfFxcPykqKT8oIygoKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCl8XFwvfFxcPykqKT8kL2kpO1xuICB9LFxuICBpc1RydWU6IGZ1bmN0aW9uIGlzVHJ1ZSh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSB0cnVlO1xuICB9LFxuICBpc0ZhbHNlOiBmdW5jdGlvbiBpc0ZhbHNlKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IGZhbHNlO1xuICB9LFxuICBpc051bWVyaWM6IGZ1bmN0aW9uIGlzTnVtZXJpYyh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL15bLStdPyg/OlxcZCpbLl0pP1xcZCskLyk7XG4gIH0sXG4gIGlzQWxwaGE6IGZ1bmN0aW9uIGlzQWxwaGEodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXltBLVpdKyQvaSk7XG4gIH0sXG4gIGlzQWxwaGFudW1lcmljOiBmdW5jdGlvbiBpc0FscGhhbnVtZXJpYyh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eWzAtOUEtWl0rJC9pKTtcbiAgfSxcbiAgaXNJbnQ6IGZ1bmN0aW9uIGlzSW50KHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL14oPzpbLStdPyg/OjB8WzEtOV1cXGQqKSkkLyk7XG4gIH0sXG4gIGlzRmxvYXQ6IGZ1bmN0aW9uIGlzRmxvYXQodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXig/OlstK10/KD86XFxkKykpPyg/OlxcLlxcZCopPyg/OltlRV1bXFwrXFwtXT8oPzpcXGQrKSk/JC8pO1xuICB9LFxuICBpc1dvcmRzOiBmdW5jdGlvbiBpc1dvcmRzKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL15bQS1aXFxzXSskL2kpO1xuICB9LFxuICBpc1NwZWNpYWxXb3JkczogZnVuY3Rpb24gaXNTcGVjaWFsV29yZHModmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXltBLVpcXHNcXHUwMEMwLVxcdTAxN0ZdKyQvaSk7XG4gIH0sXG4gIGlzTGVuZ3RoOiBmdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZXMsIHZhbHVlLCBsZW5ndGgpIHtcbiAgICByZXR1cm4gIV9pc0V4aXN0eSh2YWx1ZSkgfHwgaXNFbXB0eSh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoID09PSBsZW5ndGg7XG4gIH0sXG4gIGVxdWFsczogZnVuY3Rpb24gZXF1YWxzKHZhbHVlcywgdmFsdWUsIGVxbCkge1xuICAgIHJldHVybiAhX2lzRXhpc3R5KHZhbHVlKSB8fCBpc0VtcHR5KHZhbHVlKSB8fCB2YWx1ZSA9PSBlcWw7XG4gIH0sXG4gIGVxdWFsc0ZpZWxkOiBmdW5jdGlvbiBlcXVhbHNGaWVsZCh2YWx1ZXMsIHZhbHVlLCBmaWVsZCkge1xuICAgIHJldHVybiB2YWx1ZSA9PSB2YWx1ZXNbZmllbGRdO1xuICB9LFxuICBtYXhMZW5ndGg6IGZ1bmN0aW9uIG1heExlbmd0aCh2YWx1ZXMsIHZhbHVlLCBsZW5ndGgpIHtcbiAgICByZXR1cm4gIV9pc0V4aXN0eSh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoIDw9IGxlbmd0aDtcbiAgfSxcbiAgbWluTGVuZ3RoOiBmdW5jdGlvbiBtaW5MZW5ndGgodmFsdWVzLCB2YWx1ZSwgbGVuZ3RoKSB7XG4gICAgcmV0dXJuICFfaXNFeGlzdHkodmFsdWUpIHx8IGlzRW1wdHkodmFsdWUpIHx8IHZhbHVlLmxlbmd0aCA+PSBsZW5ndGg7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gdmFsaWRhdGlvbnM7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9mb3Jtc3ktcmVhY3QvbGliL3ZhbGlkYXRpb25SdWxlcy5qcyIsImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBGb3Jtc3ksIHsgSE9DIH0gZnJvbSAnZm9ybXN5LXJlYWN0JztcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcclxuXHJcbmNsYXNzIEZpZWxkIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuY2hhbmdlVmFsdWUgPSAoZXZlbnQpID0+IHtcclxuICAgICAgdGhpcy5wcm9wcy5zZXRWYWx1ZShldmVudC5jdXJyZW50VGFyZ2V0W3RoaXMucHJvcHMudHlwZSA9PT0gJ2NoZWNrYm94JyA/XHJcbiAgICAgICAgJ2NoZWNrZWQnIDogJ3ZhbHVlJ10pO1xyXG4gICAgfTtcclxuICB9XHJcbiAgcmVuZGVyICgpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHRoaXMucHJvcHMuZ2V0RXJyb3JNZXNzYWdlKCk7XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaWdudXAtZmllbGQtZ3JvdXBcIj5cclxuICAgICAgICA8bGFiZWxcclxuICAgICAgICAgIGh0bWxGb3I9eyB0aGlzLnByb3BzLm5hbWUudG9Mb3dlckNhc2UoKSB9XHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJzaWdudXAtZm9ybV9fbGFiZWxcIj5cclxuICAgICAgICAgIHsgdGhpcy5wcm9wcy5uYW1lIH1cclxuICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgb25DaGFuZ2U9e3RoaXMuY2hhbmdlVmFsdWV9XHJcbiAgICAgICAgICB2YWx1ZT17dGhpcy5wcm9wcy5nZXRWYWx1ZSgpfVxyXG4gICAgICAgICAgdHlwZT17dGhpcy5wcm9wcy50eXBlIHx8ICd0ZXh0J31cclxuICAgICAgICAgIG5hbWU9eyB0aGlzLnByb3BzLm5hbWUudG9Mb3dlckNhc2UoKSB9XHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJzaWdudXAtZm9ybV9faW5wdXQtZmllbGRcIi8+XHJcbiAgICAgICAgPHAgY2xhc3NOYW1lPVwiY2FwdGlvbiBzaWdudXAtZm9ybV9fY2FwdGlvblwiPlxyXG4gICAgICAgICAgeyB0aGlzLnByb3BzLnRleHQgfVxyXG4gICAgICAgIDwvcD5cclxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJzaWdudXAtZm9ybV9fZXJyb3ItbWVzc2FnZVwiPntlcnJvck1lc3NhZ2V9PC9zcGFuPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5GaWVsZC5wcm9wVHlwZXMgPSB7XHJcbiAgbmFtZTogUHJvcFR5cGVzLnN0cmluZyxcclxuICB0ZXh0OiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZyxcclxuICB0eXBlOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIHNldFZhbHVlOiBQcm9wVHlwZXMuYW55LFxyXG4gIGdldFZhbHVlOiBQcm9wVHlwZXMuZnVuYyxcclxuICB2YWxpZGF0aW9uczogUHJvcFR5cGVzLmFueSxcclxuICBnZXRFcnJvck1lc3NhZ2U6IFByb3BUeXBlcy5mdW5jLFxyXG4gIHJlZ2lzdHJhdGlvbjogUHJvcFR5cGVzLmZ1bmNcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEhPQyhGaWVsZCk7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21wb25lbnRzL0F1dGgvRmllbGQvRmllbGQuanMiLCJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IEhlYWRlciA9IChwcm9wcykgPT4gKFxyXG4gIDxkaXYgY2xhc3NOYW1lPVwic2lnbnVwLWhlYWRlclwiPlxyXG4gICAgPGlcclxuICAgICAgY2xhc3NOYW1lPXsgYGZhICR7IHByb3BzLnBpYyB9IGZhLTN4IHNpZ251cC1oZWFkZXJfX2ljb25gIH1cclxuICAgICAgYXJpYS1oaWRkZW49XCJ0cnVlXCI+XHJcbiAgICA8L2k+XHJcbiAgICA8aDEgY2xhc3NOYW1lPVwic2lnbnVwLWhlYWRlcl9fdGl0bGVcIj57IHByb3BzLnRpdGxlIH1cclxuICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiY2FwdGlvbiBzaWdudXAtaGVhZGVyX19jYXB0aW9uXCI+XHJcbiAgICAgICAgeyBwcm9wcy50ZXh0IH1cclxuICAgICAgPC9zcGFuPlxyXG4gICAgPC9oMT5cclxuICA8L2Rpdj5cclxuKTtcclxuXHJcbkhlYWRlci5wcm9wVHlwZXMgPSB7XHJcbiAgcGljOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIHRpdGxlOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIHRleHQ6IFByb3BUeXBlcy5zdHJpbmdcclxufTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbXBvbmVudHMvQXV0aC9IZWFkZXIvSGVhZGVyLmpzIiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IEZvcm1zeSwgeyBIT0MgfSBmcm9tICdmb3Jtc3ktcmVhY3QnO1xyXG5pbXBvcnQgeyBIZWFkZXIgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL0F1dGgvSGVhZGVyL0hlYWRlcic7XHJcbmltcG9ydCBGaWVsZCBmcm9tICcuLi8uLi9jb21wb25lbnRzL0F1dGgvRmllbGQvRmllbGQnO1xyXG5pbXBvcnQgeyBNZXNzYWdlIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9NZXNzYWdlL01lc3NhZ2UnO1xyXG5pbXBvcnQgeyBOYXZMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcbmltcG9ydCB7IGxvZ2luLCBjbGVhckxvZ2luU3RhdHVzIH0gZnJvbSAnLi4vLi4vYWN0aW9ucy9hdXRoLmFjdGlvbic7XHJcbmltcG9ydCB7IGJpbmRBY3Rpb25DcmVhdG9ycyB9IGZyb20gJ3JlZHV4JztcclxuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlYWN0LXJlZHV4JztcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcclxuaW1wb3J0ICcuL0xvZ2luLnNjc3MnO1xyXG5pbXBvcnQgeyByZWdpc3RyYXRpb25TdWNjZXNzIH0gZnJvbSAnLi4vLi4vYWN0aW9ucy9hdXRoLmFjdGlvbic7XHJcblxyXG5jbGFzcyBMb2dpbiBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBjYW5TdWJtaXQ6IGZhbHNlXHJcbiAgICB9O1xyXG4gIH1cclxuICBhZGRMb2dpbiA9ICgpID0+IHtcclxuICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLmdldFZhbHVlKCksXHJcbiAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkLmdldFZhbHVlKClcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5wcm9wcy5sb2dpbihkYXRhKTtcclxuICB9O1xyXG4gIGVuYWJsZUJ1dHRvbiA9ICgpID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBjYW5TdWJtaXQ6IHRydWVcclxuICAgIH0pO1xyXG4gIH07XHJcbiAgZGlzYWJsZUJ1dHRvbiA9ICgpID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBjYW5TdWJtaXQ6IGZhbHNlXHJcbiAgICB9KTtcclxuICB9O1xyXG4gIHJlbmRlciAoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImxvZ2luLWNvbnRhaW5lclwiPlxyXG4gICAgICAgIDxIZWFkZXJcclxuICAgICAgICAgIHBpYz17J2ZhLXVubG9jayd9XHJcbiAgICAgICAgICB0aXRsZT17J0xvZ2luJ31cclxuICAgICAgICAgIHRleHQ9eydQbGVhc2UgZW50ZXIgeW91ciBjcmVkZW50aWFscyB0byBsb2dpbi4nfSAvPlxyXG4gICAgICAgIDxNZXNzYWdlXHJcbiAgICAgICAgICBjbGVhclN0YXR1cz17dGhpcy5wcm9wcy5jbGVhckxvZ2luU3RhdHVzfVxyXG4gICAgICAgICAgc3RhdHVzPXt0aGlzLnByb3BzLmxvZ2luU3RhdHVzfVxyXG4gICAgICAgICAgaGVhZGVyPXsnQXV0aG9yaXphdGlvbiBmYWlsZWQnfVxyXG4gICAgICAgICAgdGV4dD17dGhpcy5wcm9wcy5lcnJvclRleHR9IC8+XHJcbiAgICAgICAgPEZvcm1zeS5Gb3JtXHJcbiAgICAgICAgICBvblN1Ym1pdD17dGhpcy5hZGRMb2dpbn1cclxuICAgICAgICAgIG9uVmFsaWQ9e3RoaXMuZW5hYmxlQnV0dG9ufVxyXG4gICAgICAgICAgb25JbnZhbGlkPXt0aGlzLmRpc2FibGVCdXR0b259XHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJzaWdudXAtZm9ybVwiPlxyXG4gICAgICAgICAgPEZpZWxkXHJcbiAgICAgICAgICAgIG5hbWU9XCJFLW1haWxcIlxyXG4gICAgICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgIHRleHQ9eydZb3VyIHVuaXF1ZSB1c2VybmFtZSB0byBhcHAnfVxyXG4gICAgICAgICAgICByZWY9eyhpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICAgIHRoaXMuZW1haWwgPSBpbnB1dDtcclxuICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgdmFsaWRhdGlvbnM9XCJpc0VtYWlsXCJcclxuICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9yPVwiVGhpcyBpcyBub3QgYSB2YWxpZCBlbWFpbFwiXHJcbiAgICAgICAgICAgIHJlcXVpcmVkLz5cclxuICAgICAgICAgIDxGaWVsZFxyXG4gICAgICAgICAgICBuYW1lPVwiUGFzc3dvcmRcIlxyXG4gICAgICAgICAgICB0eXBlPVwicGFzc3dvcmRcIlxyXG4gICAgICAgICAgICB0ZXh0PXsnWW91ciBoYXJkIHRvIGd1ZXNzIHBhc3N3b3JkJ31cclxuICAgICAgICAgICAgcmVmPXsoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgICB0aGlzLnBhc3N3b3JkID0gaW5wdXQ7XHJcbiAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgIHZhbGlkYXRpb25zPSB7e1xyXG4gICAgICAgICAgICAgIG1pbkxlbmd0aDogNyxcclxuICAgICAgICAgICAgICBpc0FscGhhbnVtZXJpYzogdHJ1ZVxyXG4gICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3I9XCJUaGlzIGlzIG5vdCBhIHZhbGlkIHBhc3NcIlxyXG4gICAgICAgICAgICByZXF1aXJlZC8+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNpZ251cC1maWVsZC1ncm91cCBzaWdudXAtYnRuLWdyb3VwXCI+XHJcbiAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgIHR5cGU9XCJzdWJtaXRcIlxyXG4gICAgICAgICAgICAgIGRpc2FibGVkPXshdGhpcy5zdGF0ZS5jYW5TdWJtaXR9XHJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi0tc2lnbnVwIGJ0bi0tc2lnbnVwLWFjdGl2ZVwiXHJcbiAgICAgICAgICAgICAgdmFsdWU9XCJMb2dpblwiLz5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXsnY2FwdGlvbiBzaWdudXAtZm9ybV9fY2FwdGlvbiAnICtcclxuICAgICAgICAgICAgICAnc2lnbnVwLWZvcm1fX2NhcHRpb24tLXRleHQnfT5cclxuICAgICAgICAgICAgICBOZXcgaGVyZT9cclxuICAgICAgICAgICAgICA8TmF2TGluayB0bz1cIi9hdXRoL3JlZ2lzdGVyXCJcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNpZ251cC1mb3JtX19jYXB0aW9uLS1saW5rXCI+XHJcbiAgICAgICAgICAgICAgICBSZWdpc3RlclxyXG4gICAgICAgICAgICAgIDwvTmF2TGluaz5cclxuICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9Gb3Jtc3kuRm9ybT5cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzIChzdG9yZSkge1xyXG4gIHJldHVybiB7XHJcbiAgICBsb2dpblN0YXR1czogc3RvcmUuYXV0aGVudGljYXRpb24uc3RhdHVzLFxyXG4gICAgdXNlckRhdGE6IHN0b3JlLmF1dGhlbnRpY2F0aW9uLmlzTG9nZ2VkLFxyXG4gICAgZXJyb3JUZXh0OiBzdG9yZS5hdXRoZW50aWNhdGlvbi5lcnJvclRleHRcclxuICB9O1xyXG59XHJcbmZ1bmN0aW9uIG1hcERpc3BhdGNoVG9Qcm9wcyAoZGlzcGF0Y2gpIHtcclxuICByZXR1cm4ge1xyXG4gICAgbG9naW46IGJpbmRBY3Rpb25DcmVhdG9ycyhsb2dpbiwgZGlzcGF0Y2gpLFxyXG4gICAgY2xlYXJMb2dpblN0YXR1czogKCkgPT4gZGlzcGF0Y2goY2xlYXJMb2dpblN0YXR1cygpKVxyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzLCBtYXBEaXNwYXRjaFRvUHJvcHMpKExvZ2luKTtcclxuXHJcbkxvZ2luLnByb3BUeXBlcyA9IHtcclxuICBsb2dpblN0YXR1czogUHJvcFR5cGVzLnN0cmluZyxcclxuICBoaXN0b3J5OiBQcm9wVHlwZXMub2JqZWN0LFxyXG4gIGxvZ2luOiBQcm9wVHlwZXMuZnVuYyxcclxuICB1c2VyRGF0YTogUHJvcFR5cGVzLm9iamVjdCxcclxuICBlcnJvclRleHQ6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgY2xlYXJMb2dpblN0YXR1czogUHJvcFR5cGVzLmZ1bmNcclxufTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3BhZ2VzL0xvZ2luL0xvZ2luLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==