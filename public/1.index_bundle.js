webpackJsonp([1],{"./node_modules/chain-function/index.js":function(e,t,n){"use strict";e.exports=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(t=t.filter(function(e){return null!=e}),0!==t.length)return 1===t.length?t[0]:t.reduce(function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}})}},"./node_modules/dom-helpers/class/addClass.js":function(e,t,n){"use strict";function o(e,t){e.classList?e.classList.add(t):(0,i.default)(e)||(e.className=e.className+" "+t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=n("./node_modules/dom-helpers/class/hasClass.js"),i=function(e){return e&&e.__esModule?e:{default:e}}(r);e.exports=t.default},"./node_modules/dom-helpers/class/hasClass.js":function(e,t,n){"use strict";function o(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+e.className+" ").indexOf(" "+t+" ")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o,e.exports=t.default},"./node_modules/dom-helpers/class/removeClass.js":function(e,t,n){"use strict";e.exports=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}},"./node_modules/dom-helpers/transition/properties.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var o=n("./node_modules/dom-helpers/util/inDOM.js"),r=function(e){return e&&e.__esModule?e:{default:e}}(o),i="transform",a=void 0,s=void 0,u=void 0,l=void 0,c=void 0,p=void 0,d=void 0,f=void 0,m=void 0,h=void 0,y=void 0;if(r.default){var v=function(){for(var e=document.createElement("div").style,t={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},n=Object.keys(t),o=void 0,r=void 0,i="",a=0;a<n.length;a++){var s=n[a];if(s+"TransitionProperty"in e){i="-"+s.toLowerCase(),o=t[s]("TransitionEnd"),r=t[s]("AnimationEnd");break}}return!o&&"transitionProperty"in e&&(o="transitionend"),!r&&"animationName"in e&&(r="animationend"),e=null,{animationEnd:r,transitionEnd:o,prefix:i}}();a=v.prefix,t.transitionEnd=s=v.transitionEnd,t.animationEnd=u=v.animationEnd,t.transform=i=a+"-"+i,t.transitionProperty=l=a+"-transition-property",t.transitionDuration=c=a+"-transition-duration",t.transitionDelay=d=a+"-transition-delay",t.transitionTiming=p=a+"-transition-timing-function",t.animationName=f=a+"-animation-name",t.animationDuration=m=a+"-animation-duration",t.animationTiming=h=a+"-animation-delay",t.animationDelay=y=a+"-animation-timing-function"}t.transform=i,t.transitionProperty=l,t.transitionTiming=p,t.transitionDelay=d,t.transitionDuration=c,t.transitionEnd=s,t.animationName=f,t.animationDuration=m,t.animationTiming=h,t.animationDelay=y,t.animationEnd=u,t.default={transform:i,end:s,property:l,timing:p,delay:d,duration:c}},"./node_modules/dom-helpers/util/inDOM.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=!("undefined"==typeof window||!window.document||!window.document.createElement),e.exports=t.default},"./node_modules/dom-helpers/util/requestAnimationFrame.js":function(e,t,n){"use strict";function o(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-p)),o=setTimeout(e,n);return p=t,o}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/dom-helpers/util/inDOM.js"),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=["","webkit","moz","o","ms"],s="clearTimeout",u=o,l=void 0,c=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};i.default&&a.some(function(e){var t=c(e,"request");if(t in window)return s=c(e,"cancel"),u=function(e){return window[t](e)}});var p=(new Date).getTime();l=function(e){return u(e)},l.cancel=function(e){window[s]&&"function"==typeof window[s]&&window[s](e)},t.default=l,e.exports=t.default},"./node_modules/react-addons-css-transition-group/index.js":function(e,t,n){"use strict";e.exports=n("./node_modules/react-transition-group/CSSTransitionGroup.js")},"./node_modules/react-transition-group/CSSTransitionGroup.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l=n("./node_modules/react/react.js"),c=o(l),p=n("./node_modules/prop-types/index.js"),d=o(p),f=n("./node_modules/react-transition-group/TransitionGroup.js"),m=o(f),h=n("./node_modules/react-transition-group/CSSTransitionGroupChild.js"),y=o(h),v=n("./node_modules/react-transition-group/utils/PropTypes.js"),_=(v.nameShape.isRequired,d.default.bool,d.default.bool,d.default.bool,(0,v.transitionTimeout)("Appear"),(0,v.transitionTimeout)("Enter"),(0,v.transitionTimeout)("Leave"),{transitionAppear:!1,transitionEnter:!0,transitionLeave:!0}),b=function(e){function t(){var n,o,a;r(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=o=i(this,e.call.apply(e,[this].concat(u))),o._wrapChild=function(e){return c.default.createElement(y.default,{name:o.props.transitionName,appear:o.props.transitionAppear,enter:o.props.transitionEnter,leave:o.props.transitionLeave,appearTimeout:o.props.transitionAppearTimeout,enterTimeout:o.props.transitionEnterTimeout,leaveTimeout:o.props.transitionLeaveTimeout},e)},a=n,i(o,a)}return a(t,e),t.prototype.render=function(){return c.default.createElement(m.default,u({},this.props,{childFactory:this._wrapChild}))},t}(c.default.Component);b.displayName="CSSTransitionGroup",b.propTypes={},b.defaultProps=_,t.default=b,e.exports=t.default},"./node_modules/react-transition-group/CSSTransitionGroupChild.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return S.length?S.forEach(function(n){return e.addEventListener(n,t,!1)}):setTimeout(t,0),function(){S.length&&S.forEach(function(n){return e.removeEventListener(n,t,!1)})}}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},c=n("./node_modules/dom-helpers/class/addClass.js"),p=o(c),d=n("./node_modules/dom-helpers/class/removeClass.js"),f=o(d),m=n("./node_modules/dom-helpers/util/requestAnimationFrame.js"),h=o(m),y=n("./node_modules/dom-helpers/transition/properties.js"),v=n("./node_modules/react/react.js"),_=o(v),b=n("./node_modules/prop-types/index.js"),g=o(b),j=n("./node_modules/react-dom/index.js"),w=n("./node_modules/react-transition-group/utils/PropTypes.js"),S=[];y.transitionEnd&&S.push(y.transitionEnd),y.animationEnd&&S.push(y.animationEnd);var E=(g.default.node,w.nameShape.isRequired,g.default.bool,g.default.bool,g.default.bool,g.default.number,g.default.number,g.default.number,function(e){function t(){var n,o,a;r(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=o=i(this,e.call.apply(e,[this].concat(u))),o.componentWillAppear=function(e){o.props.appear?o.transition("appear",e,o.props.appearTimeout):e()},o.componentWillEnter=function(e){o.props.enter?o.transition("enter",e,o.props.enterTimeout):e()},o.componentWillLeave=function(e){o.props.leave?o.transition("leave",e,o.props.leaveTimeout):e()},a=n,i(o,a)}return a(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(e){clearTimeout(e)}),this.classNameAndNodeQueue.length=0},t.prototype.transition=function(e,t,n){var o=(0,j.findDOMNode)(this);if(!o)return void(t&&t());var r=this.props.name[e]||this.props.name+"-"+e,i=this.props.name[e+"Active"]||r+"-active",a=null,u=void 0;(0,p.default)(o,r),this.queueClassAndNode(i,o);var l=function(e){e&&e.target!==o||(clearTimeout(a),u&&u(),(0,f.default)(o,r),(0,f.default)(o,i),u&&u(),t&&t())};n?(a=setTimeout(l,n),this.transitionTimeouts.push(a)):y.transitionEnd&&(u=s(o,l))},t.prototype.queueClassAndNode=function(e,t){var n=this;this.classNameAndNodeQueue.push({className:e,node:t}),this.rafHandle||(this.rafHandle=(0,h.default)(function(){return n.flushClassNameAndNodeQueue()}))},t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach(function(e){e.node.scrollTop,(0,p.default)(e.node,e.className)}),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function(){var e=l({},this.props);return delete e.name,delete e.appear,delete e.enter,delete e.leave,delete e.appearTimeout,delete e.enterTimeout,delete e.leaveTimeout,delete e.children,_.default.cloneElement(_.default.Children.only(this.props.children),e)},t}(_.default.Component));E.displayName="CSSTransitionGroupChild",E.propTypes={},t.default=E,e.exports=t.default},"./node_modules/react-transition-group/TransitionGroup.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l=n("./node_modules/chain-function/index.js"),c=o(l),p=n("./node_modules/react/react.js"),d=o(p),f=n("./node_modules/prop-types/index.js"),m=o(f),h=n("./node_modules/warning/browser.js"),y=(o(h),n("./node_modules/react-transition-group/utils/ChildMapping.js")),v=(m.default.any,m.default.func,m.default.node,{component:"span",childFactory:function(e){return e}}),_=function(e){function t(n,o){r(this,t);var a=i(this,e.call(this,n,o));return a.performAppear=function(e,t){a.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(a._handleDoneAppearing.bind(a,e,t)):a._handleDoneAppearing(e,t)},a._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete a.currentlyTransitioningKeys[e];var n=(0,y.getChildMapping)(a.props.children);n&&n.hasOwnProperty(e)||a.performLeave(e,t)},a.performEnter=function(e,t){a.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(a._handleDoneEntering.bind(a,e,t)):a._handleDoneEntering(e,t)},a._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete a.currentlyTransitioningKeys[e];var n=(0,y.getChildMapping)(a.props.children);n&&n.hasOwnProperty(e)||a.performLeave(e,t)},a.performLeave=function(e,t){a.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(a._handleDoneLeaving.bind(a,e,t)):a._handleDoneLeaving(e,t)},a._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete a.currentlyTransitioningKeys[e];var n=(0,y.getChildMapping)(a.props.children);n&&n.hasOwnProperty(e)?a.keysToEnter.push(e):a.setState(function(t){var n=u({},t.children);return delete n[e],{children:n}})},a.childRefs=Object.create(null),a.state={children:(0,y.getChildMapping)(n.children)},a}return a(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,y.getChildMapping)(e.children),n=this.state.children;this.setState({children:(0,y.mergeChildMappings)(n,t)});for(var o in t){var r=n&&n.hasOwnProperty(o);!t[o]||r||this.currentlyTransitioningKeys[o]||this.keysToEnter.push(o)}for(var i in n){var a=t&&t.hasOwnProperty(i);!n[i]||a||this.currentlyTransitioningKeys[i]||this.keysToLeave.push(i)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach(function(t){return e.performEnter(t,e.childRefs[t])});var n=this.keysToLeave;this.keysToLeave=[],n.forEach(function(t){return e.performLeave(t,e.childRefs[t])})},t.prototype.render=function(){var e=this,t=[];for(var n in this.state.children)!function(n){var o=e.state.children[n];if(o){var r="string"!=typeof o.ref,i=e.props.childFactory(o),a=function(t){e.childRefs[n]=t};i===o&&r&&(a=(0,c.default)(o.ref,a)),t.push(d.default.cloneElement(i,{key:n,ref:a}))}}(n);var o=u({},this.props);return delete o.transitionLeave,delete o.transitionName,delete o.transitionAppear,delete o.transitionEnter,delete o.childFactory,delete o.transitionLeaveTimeout,delete o.transitionEnterTimeout,delete o.transitionAppearTimeout,delete o.component,d.default.createElement(this.props.component,o,t)},t}(d.default.Component);_.displayName="TransitionGroup",_.propTypes={},_.defaultProps=v,t.default=_,e.exports=t.default},"./node_modules/react-transition-group/utils/ChildMapping.js":function(e,t,n){"use strict";function o(e){if(!e)return e;var t={};return i.Children.map(e,function(e){return e}).forEach(function(e){t[e.key]=e}),t}function r(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var o={},r=[];for(var i in e)t.hasOwnProperty(i)?r.length&&(o[i]=r,r=[]):r.push(i);var a=void 0,s={};for(var u in t){if(o.hasOwnProperty(u))for(a=0;a<o[u].length;a++){var l=o[u][a];s[o[u][a]]=n(l)}s[u]=n(u)}for(a=0;a<r.length;a++)s[r[a]]=n(r[a]);return s}t.__esModule=!0,t.getChildMapping=o,t.mergeChildMappings=r;var i=n("./node_modules/react/react.js")},"./node_modules/react-transition-group/utils/PropTypes.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}}t.__esModule=!0,t.nameShape=void 0,t.transitionTimeout=r;var i=n("./node_modules/react/react.js"),a=(o(i),n("./node_modules/prop-types/index.js")),s=o(a);t.nameShape=s.default.oneOfType([s.default.string,s.default.shape({enter:s.default.string,leave:s.default.string,active:s.default.string}),s.default.shape({enter:s.default.string,enterActive:s.default.string,leave:s.default.string,leaveActive:s.default.string,appear:s.default.string,appearActive:s.default.string})])},"./node_modules/reselect/lib/index.js":function(e,t,n){"use strict";function o(e,t){return e===t}function r(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var o=t.length,r=0;r<o;r++)if(!e(t[r],n[r]))return!1;return!0}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=null,i=null;return function(){return r(t,n,arguments)||(i=e.apply(null,arguments)),n=arguments,i}}function a(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return void 0===e?"undefined":l(e)}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}function s(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return function(){for(var t=arguments.length,o=Array(t),r=0;r<t;r++)o[r]=arguments[r];var s=0,u=o.pop(),l=a(o),c=e.apply(void 0,[function(){return s++,u.apply(null,arguments)}].concat(n)),p=i(function(){for(var e=[],t=l.length,n=0;n<t;n++)e.push(l[n].apply(null,arguments));return c.apply(null,e)});return p.resultFunc=u,p.recomputations=function(){return s},p.resetRecomputations=function(){return s=0},p}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;if("object"!==(void 0===e?"undefined":l(e)))throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+(void 0===e?"undefined":l(e)));var n=Object.keys(e);return t(n.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return t.reduce(function(e,t,o){return e[n[o]]=t,e},{})})}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0,t.defaultMemoize=i,t.createSelectorCreator=s,t.createStructuredSelector=u;var c=t.createSelector=s(i)},"./src/components/DeviceListItem/DeviceListItem.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n("./node_modules/react/react.js"),l=o(u),c=n("./node_modules/react-router-dom/es/index.js"),p=n("./node_modules/prop-types/index.js"),d=o(p),f=n("./src/components/ToggleSettings/ToggleSettings.js"),m=o(f);n("./src/components/DeviceListItem/DeviceListItem.scss");var h=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setDeviceId=function(e){n.props.setPopupShown(n.props.data._id)},n}return a(t,e),s(t,[{key:"render",value:function(){return l.default.createElement("div",{className:"device-item"},l.default.createElement("div",{className:"device-item__info"},l.default.createElement(c.Link,{className:"device-item__info-name",to:"/devices/device/"+this.props.data._id},this.props.data.name),l.default.createElement("div",{className:"device-item__info-status"},l.default.createElement(m.default,{checked:this.props.data.status,itemId:this.props.data._id,setItemValue:this.props.changeStatus}))),l.default.createElement("div",{className:"device-item__description"},l.default.createElement("div",{className:"device-item__description-location"},this.props.location),l.default.createElement("div",{className:"device-item__description-icon"},l.default.createElement("div",{className:"device-item__description-icon-delete"},l.default.createElement("a",{className:"fa fa-trash",onClick:this.setDeviceId})))))}}]),t}(l.default.Component);h.propTypes={changeStatus:d.default.func,deleteDevice:d.default.func,setPopupShown:d.default.func,location:d.default.string,data:d.default.shape({status:d.default.boolean,_id:d.default.string,name:d.default.string,location:d.default.string})},t.default=h},"./src/components/DeviceListItem/DeviceListItem.scss":function(e,t){},"./src/components/DevisesSection/DevisesSection.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n("./node_modules/react/react.js"),l=o(u),c=(n("./node_modules/react-router-dom/es/index.js"),n("./src/components/Message/Message.js")),p=n("./src/components/Popup/Popup.js"),d=n("./src/components/Button/Button.js"),f=n("./src/components/ListHeader/ListHeader.js"),m=o(f),h=n("./node_modules/prop-types/index.js"),y=o(h),v=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props.filterOption;return void 0!==t&&this.props.filterAction(t),l.default.createElement("section",{className:"device-list"},l.default.createElement("h1",{className:"device-list__title"},this.props.locationOfDevices?this.props.locationOfDevices.toUpperCase():"Your devices"),l.default.createElement(m.default,{quantity:this.props.quantity,location:this.props.location,history:this.props.history,match:this.props.match}),l.default.createElement("section",{className:"device-list__content"},this.props.children),l.default.createElement(p.Popup,{setPopupShown:this.props.setPopupShown,popupShown:this.props.popupShown,header:"Confirm the action",text:"Are you sure you want to remove the device?"},l.default.createElement(d.Button,{setPopupShown:this.props.setPopupShown,okHandler:function(){e.props.deleteDevice(e.props.currentId),e.props.setPopupShown()},className:"btn popup__btn",innerText:"Ok"}),l.default.createElement(d.Button,{okHandler:function(){e.props.setPopupShown()},className:"btn btn--default popup__btn",innerText:"Cancel"})),l.default.createElement(c.Message,{clearStatus:this.props.clearStatus,header:"Error"}))}}]),t}(l.default.Component);v.propTypes={changeStatus:y.default.func,deleteDevice:y.default.func,loadDevices:y.default.func,filterOption:y.default.any,filterAction:y.default.func,devices:y.default.array,location:y.default.object,history:y.default.object,match:y.default.object,children:y.default.any,clearStatus:y.default.func,currentId:y.default.string,setPopupShown:y.default.func,popupShown:y.default.bool,quantity:y.default.number,locationOfDevices:y.default.string},t.default=v},"./src/components/FilterSelect/FilterSelect.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),a=n("./node_modules/prop-types/index.js"),s=o(a);n("./src/components/FilterSelect/FilterSelect.scss");var u=function(e){return i.default.createElement("div",{className:"filterBox"},i.default.createElement("select",{className:"filterBox__filter",value:e.value||"all",onChange:function(t){return e.handleSelect(t.target.value)}},e.options.map(function(e){return i.default.createElement("option",{value:e.value,key:e.value},e.innerText)})))};u.propTypes={handleSelect:s.default.func.isRequired,options:s.default.array,value:s.default.string},t.default=u},"./src/components/FilterSelect/FilterSelect.scss":function(e,t){},"./src/components/ListHeader/ListHeader.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n("./node_modules/react/react.js"),c=o(l),p=n("./node_modules/react-router-dom/es/index.js"),d=n("./node_modules/react-redux/es/index.js"),f=n("./node_modules/query-string/index.js"),m=o(f),h=n("./src/components/FilterSelect/FilterSelect.js"),y=o(h),v=n("./src/components/Search/Search.js"),_=o(v),b=n("./src/actions/devices.action.js"),g=n("./src/utils/utils.js"),j=n("./src/data/filterOptions.js"),w=n("./node_modules/prop-types/index.js"),S=o(w),E=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.initialParams={search:"",filter:"all"},n.handleFilterSelect=function(e){n.props.filterAction(e),n.updateUrl(s({},n.initialParams,{filter:e}))},n.handleSearchResult=function(e){n.props.findItems(e),n.updateUrl(s({},n.initialParams,{search:e}))},n.updateUrl=function(e){var t=n.props.match,o=n.props.history;n.initialParams=e,o.push({pathname:t.url,search:(0,g.queryFromObject)(e)})},n}return a(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this.props.location,t=m.default.parse(e.search).search,n=m.default.parse(e.search).filter;t&&this.handleSearchResult(t),n&&this.handleFilterSelect(n)}},{key:"componentWillUnmount",value:function(){this.props.filterAction("all"),this.props.findItems("")}},{key:"render",value:function(){return c.default.createElement("header",{className:"device-list__header"},c.default.createElement(_.default,{handleSearch:this.handleSearchResult,quantity:this.props.quantity,value:this.initialParams.search}),c.default.createElement("div",{className:"device-list__header--right"},c.default.createElement(y.default,{handleSelect:this.handleFilterSelect,options:j.options,value:this.initialParams.filter}),c.default.createElement(p.Link,{to:"/builder",className:"btn btn--primary add-item-button"},"New")))}}]),t}(c.default.Component),O=function(e){return{filterOption:e.searchAndFilter.filterOption,search:e.searchAndFilter.searchValue}},T=function(e){return{filterAction:function(t){return e((0,b.filterAction)(t))},findItems:function(t){return e((0,b.searchAction)(t))}}};E.propTypes={search:S.default.string,filterOption:S.default.string,filterAction:S.default.func,findItems:S.default.func,match:S.default.object,history:S.default.object,location:S.default.object,loadDevices:S.default.func,quantity:S.default.number},t.default=(0,d.connect)(O,T)(E)},"./src/components/Pagination/Pagination.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n("./node_modules/react/react.js"),l=o(u),c=n("./node_modules/prop-types/index.js"),p=o(c);n("./src/components/Pagination/Pagination.scss");var d=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),s(t,[{key:"render",value:function(){var e=this,t=[],n=this.props.currentPage;if(!this.props.totalPages||this.props.totalPages<=1)return null;for(var o=1;o<=this.props.totalPages;o++)t.push(o);return l.default.createElement("ul",{className:"pagination-pages"},t.map(function(t){return l.default.createElement("li",{className:n===t?"pagination-pages__num btn":"pagination-pages__num btn btn--default",key:t,id:t,onClick:e.props.handleClick},t)}))}}]),t}(l.default.Component);d.propTypes={handleClick:p.default.func,setPage:p.default.func,currentPage:p.default.number,totalPages:p.default.number},t.default=d},"./src/components/Pagination/Pagination.scss":function(e,t){},"./src/components/Search/Search.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/react.js"),i=o(r),a=n("./node_modules/prop-types/index.js"),s=o(a);n("./src/components/Search/search.scss");var u=function(e){return i.default.createElement("div",{className:"searchBox"},i.default.createElement("div",{className:"searchBox__results"},i.default.createElement("span",null,e.quantity)," devices"),i.default.createElement("div",null,i.default.createElement("input",{type:"text",name:"search",placeholder:"Find a device",value:e.value,className:"searchBox__field",onChange:function(t){e.handleSearch(t.target.value)}})))};u.propTypes={handleSearch:s.default.func.isRequired,quantity:s.default.number,value:s.default.string},t.default=u},"./src/components/Search/search.scss":function(e,t){},"./src/components/ToggleSettings/ToggleSettings.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n("./node_modules/react/react.js"),l=o(u),c=n("./node_modules/prop-types/index.js"),p=o(c);n("./src/components/ToggleSettings/ToggleStyle.scss");var d=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChangeValue=function(e){n.props.setItemValue(!n.props.checked,n.props.itemId,n.props.deviceId)},n}return a(t,e),s(t,[{key:"render",value:function(){return l.default.createElement("div",{className:""+this.props.styleName},l.default.createElement("label",{className:"switch"},l.default.createElement("input",{type:"checkbox",checked:this.props.checked,onChange:this.onChangeValue}),l.default.createElement("div",{className:"slider round"})))}}]),t}(l.default.Component);t.default=d,d.propTypes={device:p.default.object,styleName:p.default.string,checked:p.default.bool.isRequired,setItemValue:p.default.func,itemId:p.default.any,newValue:p.default.string,deviceId:p.default.string},d.defaultProps={checked:!1}},"./src/components/ToggleSettings/ToggleStyle.scss":function(e,t){},"./src/data/filterOptions.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.options=[{value:"all",innerText:"All"},{value:"on",innerText:"Show On"},{value:"off",innerText:"Show OFF"}]},"./src/pages/LocationList/LocationList.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n("./node_modules/react/react.js"),l=o(u),c=n("./node_modules/react-redux/es/index.js"),p=n("./src/components/Pagination/Pagination.js"),d=o(p),f=n("./src/components/DeviceListItem/DeviceListItem.js"),m=o(f),h=n("./src/components/DevisesSection/DevisesSection.js"),y=o(h),v=n("./src/actions/devices.action.js"),_=n("./src/actions/notifications.action.js"),b=n("./src/selectors/index.js"),g=n("./node_modules/react-addons-css-transition-group/index.js"),j=o(g),w=n("./node_modules/prop-types/index.js"),S=o(w),E=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={popupShown:!1,currentId:"",currentPage:1,devicesPerPage:12},n.setPopupShown=function(e){var t=n.state.popupShown;n.setState({popupShown:!t,currentId:e})},n.handleClick=function(e){n.setState({currentPage:Number(e.target.id)})},n.setPage=function(e){n.setState({currentPage:e})},n.changeStatus=function(e,t){n.props.changeStatus({status:e},t)},n.deleteDevice=function(e){n.props.deleteDevice(e)},n}return a(t,e),s(t,[{key:"componentDidMount",value:function(){this.props.loadDevices()}},{key:"renderDevices",value:function(e){var t=this;return e.map(function(e,n){return l.default.createElement(m.default,{data:e,key:n,location:"",changeStatus:t.changeStatus,setPopupShown:t.setPopupShown})})}},{key:"renderDeviceGroup",value:function(e){return l.default.createElement("div",{className:"device-group"},l.default.createElement(j.default,{className:"device-group__items",transitionName:"hide",transitionEnterTimeout:500,transitionLeaveTimeout:300},this.renderDevices(e)))}},{key:"render",value:function(){var e=this.props.match.params.filterOption,t=this.props.match.params.location,n=this.props.devices.filter(function(e){return e.location===t}),o=this.state,r=o.currentPage,i=o.devicesPerPage,a=Math.ceil(n.length/i),s=r*i,u=s-i,c=n.slice(u,s);return void 0!==e&&this.props.filterAction(e),l.default.createElement(y.default,{filterOption:this.props.match.params.filterOption,devices:this.props.devices,location:this.props.location,history:this.props.history,match:this.props.match,status:this.props.status,text:this.props.errorText,setPopupShown:this.setPopupShown,popupShown:this.state.popupShown,deleteDevice:this.deleteDevice,clearStatus:this.props.clearStatus,currentId:this.state.currentId,quantity:n.length,locationOfDevices:t},"DONE"===this.props.status&&0===this.props.devices.length?l.default.createElement("span",null,"You need to add device"):this.renderDeviceGroup(c),l.default.createElement(d.default,{handleClick:this.handleClick,setPage:this.setPage,list:this.props.devices,currentPage:this.state.currentPage,totalPages:a}))}}]),t}(l.default.Component),O=function(e){return{devices:(0,b.filterItems)(e),status:e.devicesList.uploadStatus,errorText:e.devicesList.errorText}},T=function(e){return{changeStatus:function(t,n){return e((0,v.updateDevice)(t,n))},loadDevices:function(){return e((0,v.loadDevices)())},deleteDevice:function(t){return e((0,v.deleteDevice)(t))},sendNotificationWS:function(t){return e((0,_.sendNotificationWS)(t))},clearStatus:function(){return e((0,v.clearStatus)())}}};E.propTypes={search:S.default.string,filterOption:S.default.string,match:S.default.object,changeStatus:S.default.func,devices:S.default.array,filterAction:S.default.func,findItems:S.default.func,loadDevices:S.default.func,deleteDevice:S.default.func,history:S.default.object,location:S.default.object,status:S.default.string,sendNotificationWS:S.default.func,errorText:S.default.string,clearStatus:S.default.func},t.default=(0,c.connect)(O,T)(E)},"./src/selectors/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterItems=void 0;var o=n("./node_modules/reselect/lib/index.js"),r=n("./src/utils/utils.js"),i=function(e){return e.searchAndFilter.filterOption},a=function(e){return e.devicesList.devices},s=function(e){return e.searchAndFilter.searchValue};t.filterItems=(0,o.createSelector)([i,s,a],function(e,t,n){var o=n;return"all"===e?o=n:"on"===e?o=n.filter(function(e){return!0===e.status}):"off"===e&&(o=n.filter(function(e){return!1===e.status})),o.filter(function(e){return(0,r.searchItem)(e.name,t)})})}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vMS5pbmRleF9idW5kbGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jaGFpbi1mdW5jdGlvbi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2RvbS1oZWxwZXJzL2NsYXNzL2FkZENsYXNzLmpzIiwid2VicGFjazovLy8uL34vZG9tLWhlbHBlcnMvY2xhc3MvaGFzQ2xhc3MuanMiLCJ3ZWJwYWNrOi8vLy4vfi9kb20taGVscGVycy9jbGFzcy9yZW1vdmVDbGFzcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2RvbS1oZWxwZXJzL3RyYW5zaXRpb24vcHJvcGVydGllcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2RvbS1oZWxwZXJzL3V0aWwvaW5ET00uanMiLCJ3ZWJwYWNrOi8vLy4vfi9kb20taGVscGVycy91dGlsL3JlcXVlc3RBbmltYXRpb25GcmFtZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LWFkZG9ucy1jc3MtdHJhbnNpdGlvbi1ncm91cC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXRyYW5zaXRpb24tZ3JvdXAvQ1NTVHJhbnNpdGlvbkdyb3VwLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QtdHJhbnNpdGlvbi1ncm91cC9DU1NUcmFuc2l0aW9uR3JvdXBDaGlsZC5qcyIsIndlYnBhY2s6Ly8vLi9+L3JlYWN0LXRyYW5zaXRpb24tZ3JvdXAvVHJhbnNpdGlvbkdyb3VwLmpzIiwid2VicGFjazovLy8uL34vcmVhY3QtdHJhbnNpdGlvbi1ncm91cC91dGlscy9DaGlsZE1hcHBpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yZWFjdC10cmFuc2l0aW9uLWdyb3VwL3V0aWxzL1Byb3BUeXBlcy5qcyIsIndlYnBhY2s6Ly8vLi9+L3Jlc2VsZWN0L2xpYi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9EZXZpY2VMaXN0SXRlbS9EZXZpY2VMaXN0SXRlbS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9EZXZpc2VzU2VjdGlvbi9EZXZpc2VzU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9GaWx0ZXJTZWxlY3QvRmlsdGVyU2VsZWN0LmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0xpc3RIZWFkZXIvTGlzdEhlYWRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9QYWdpbmF0aW9uL1BhZ2luYXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvU2VhcmNoL1NlYXJjaC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9Ub2dnbGVTZXR0aW5ncy9Ub2dnbGVTZXR0aW5ncy5qcz82MjFlIiwid2VicGFjazovLy8uL3NyYy9kYXRhL2ZpbHRlck9wdGlvbnMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VzL0xvY2F0aW9uTGlzdC9Mb2NhdGlvbkxpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NlbGVjdG9ycy9pbmRleC5qcyJdLCJuYW1lcyI6WyJ3ZWJwYWNrSnNvbnAiLCIuL25vZGVfbW9kdWxlcy9jaGFpbi1mdW5jdGlvbi9pbmRleC5qcyIsIm1vZHVsZSIsImV4cG9ydHMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibGVuIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiYXJncyIsImkiLCJmaWx0ZXIiLCJmbiIsInJlZHVjZSIsImN1cnJlbnQiLCJuZXh0IiwiYXBwbHkiLCJ0aGlzIiwiLi9ub2RlX21vZHVsZXMvZG9tLWhlbHBlcnMvY2xhc3MvYWRkQ2xhc3MuanMiLCJhZGRDbGFzcyIsImVsZW1lbnQiLCJjbGFzc05hbWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJfaGFzQ2xhc3MyIiwiZGVmYXVsdCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJfaGFzQ2xhc3MiLCJvYmoiLCJfX2VzTW9kdWxlIiwiLi9ub2RlX21vZHVsZXMvZG9tLWhlbHBlcnMvY2xhc3MvaGFzQ2xhc3MuanMiLCJoYXNDbGFzcyIsImNvbnRhaW5zIiwiaW5kZXhPZiIsIi4vbm9kZV9tb2R1bGVzL2RvbS1oZWxwZXJzL2NsYXNzL3JlbW92ZUNsYXNzLmpzIiwicmVtb3ZlIiwicmVwbGFjZSIsIlJlZ0V4cCIsIi4vbm9kZV9tb2R1bGVzL2RvbS1oZWxwZXJzL3RyYW5zaXRpb24vcHJvcGVydGllcy5qcyIsImFuaW1hdGlvbkVuZCIsImFuaW1hdGlvbkRlbGF5IiwiYW5pbWF0aW9uVGltaW5nIiwiYW5pbWF0aW9uRHVyYXRpb24iLCJhbmltYXRpb25OYW1lIiwidHJhbnNpdGlvbkVuZCIsInRyYW5zaXRpb25EdXJhdGlvbiIsInRyYW5zaXRpb25EZWxheSIsInRyYW5zaXRpb25UaW1pbmciLCJ0cmFuc2l0aW9uUHJvcGVydHkiLCJ0cmFuc2Zvcm0iLCJ1bmRlZmluZWQiLCJfaW5ET00iLCJfaW5ET00yIiwicHJlZml4IiwiX2dldFRyYW5zaXRpb25Qcm9wZXJ0Iiwic3R5bGUiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ2ZW5kb3JNYXAiLCJPIiwiZSIsInRvTG93ZXJDYXNlIiwiTW96IiwiV2Via2l0IiwibXMiLCJ2ZW5kb3JzIiwia2V5cyIsInZlbmRvciIsImVuZCIsInByb3BlcnR5IiwidGltaW5nIiwiZGVsYXkiLCJkdXJhdGlvbiIsIi4vbm9kZV9tb2R1bGVzL2RvbS1oZWxwZXJzL3V0aWwvaW5ET00uanMiLCJ3aW5kb3ciLCIuL25vZGVfbW9kdWxlcy9kb20taGVscGVycy91dGlsL3JlcXVlc3RBbmltYXRpb25GcmFtZS5qcyIsImZhbGxiYWNrIiwiY3VyciIsIkRhdGUiLCJnZXRUaW1lIiwiTWF0aCIsIm1heCIsInByZXYiLCJyZXEiLCJzZXRUaW1lb3V0IiwiY2FuY2VsIiwicmFmIiwiY29tcGF0UmFmIiwiZ2V0S2V5IiwiayIsInRvVXBwZXJDYXNlIiwic3Vic3RyIiwic29tZSIsInJhZktleSIsImNiIiwiaWQiLCIuL25vZGVfbW9kdWxlcy9yZWFjdC1hZGRvbnMtY3NzLXRyYW5zaXRpb24tZ3JvdXAvaW5kZXguanMiLCIuL25vZGVfbW9kdWxlcy9yZWFjdC10cmFuc2l0aW9uLWdyb3VwL0NTU1RyYW5zaXRpb25Hcm91cC5qcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJzZWxmIiwiY2FsbCIsIlJlZmVyZW5jZUVycm9yIiwiX3R5cGVvZiIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsInByb3RvdHlwZSIsImNyZWF0ZSIsImNvbnN0cnVjdG9yIiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJTeW1ib2wiLCJpdGVyYXRvciIsIl9leHRlbmRzIiwiYXNzaWduIiwidGFyZ2V0Iiwic291cmNlIiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJfcmVhY3QiLCJfcmVhY3QyIiwiX3Byb3BUeXBlcyIsIl9wcm9wVHlwZXMyIiwiX1RyYW5zaXRpb25Hcm91cCIsIl9UcmFuc2l0aW9uR3JvdXAyIiwiX0NTU1RyYW5zaXRpb25Hcm91cENoaWxkIiwiX0NTU1RyYW5zaXRpb25Hcm91cENoaWxkMiIsIl9Qcm9wVHlwZXMiLCJkZWZhdWx0UHJvcHMiLCJuYW1lU2hhcGUiLCJpc1JlcXVpcmVkIiwiYm9vbCIsInRyYW5zaXRpb25UaW1lb3V0IiwidHJhbnNpdGlvbkFwcGVhciIsInRyYW5zaXRpb25FbnRlciIsInRyYW5zaXRpb25MZWF2ZSIsIkNTU1RyYW5zaXRpb25Hcm91cCIsIl9SZWFjdCRDb21wb25lbnQiLCJfdGVtcCIsIl90aGlzIiwiX3JldCIsIl9sZW4iLCJBcnJheSIsIl9rZXkiLCJjb25jYXQiLCJfd3JhcENoaWxkIiwiY2hpbGQiLCJuYW1lIiwicHJvcHMiLCJ0cmFuc2l0aW9uTmFtZSIsImFwcGVhciIsImVudGVyIiwibGVhdmUiLCJhcHBlYXJUaW1lb3V0IiwidHJhbnNpdGlvbkFwcGVhclRpbWVvdXQiLCJlbnRlclRpbWVvdXQiLCJ0cmFuc2l0aW9uRW50ZXJUaW1lb3V0IiwibGVhdmVUaW1lb3V0IiwidHJhbnNpdGlvbkxlYXZlVGltZW91dCIsInJlbmRlciIsImNoaWxkRmFjdG9yeSIsIkNvbXBvbmVudCIsImRpc3BsYXlOYW1lIiwicHJvcFR5cGVzIiwiLi9ub2RlX21vZHVsZXMvcmVhY3QtdHJhbnNpdGlvbi1ncm91cC9DU1NUcmFuc2l0aW9uR3JvdXBDaGlsZC5qcyIsImFkZEVuZExpc3RlbmVyIiwibm9kZSIsImxpc3RlbmVyIiwiZXZlbnRzIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2FkZENsYXNzIiwiX2FkZENsYXNzMiIsIl9yZW1vdmVDbGFzcyIsIl9yZW1vdmVDbGFzczIiLCJfcmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiX3JlcXVlc3RBbmltYXRpb25GcmFtZTIiLCJfcHJvcGVydGllcyIsIl9yZWFjdERvbSIsInB1c2giLCJDU1NUcmFuc2l0aW9uR3JvdXBDaGlsZCIsIm51bWJlciIsImNvbXBvbmVudFdpbGxBcHBlYXIiLCJkb25lIiwidHJhbnNpdGlvbiIsImNvbXBvbmVudFdpbGxFbnRlciIsImNvbXBvbmVudFdpbGxMZWF2ZSIsImNvbXBvbmVudFdpbGxNb3VudCIsImNsYXNzTmFtZUFuZE5vZGVRdWV1ZSIsInRyYW5zaXRpb25UaW1lb3V0cyIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwidW5tb3VudGVkIiwidGltZW91dCIsImNsZWFyVGltZW91dCIsImFuaW1hdGlvblR5cGUiLCJmaW5pc2hDYWxsYmFjayIsImZpbmRET01Ob2RlIiwiYWN0aXZlQ2xhc3NOYW1lIiwidGltZXIiLCJyZW1vdmVMaXN0ZW5lcnMiLCJxdWV1ZUNsYXNzQW5kTm9kZSIsImZpbmlzaCIsIl90aGlzMiIsInJhZkhhbmRsZSIsImZsdXNoQ2xhc3NOYW1lQW5kTm9kZVF1ZXVlIiwic2Nyb2xsVG9wIiwiY2hpbGRyZW4iLCJjbG9uZUVsZW1lbnQiLCJDaGlsZHJlbiIsIm9ubHkiLCIuL25vZGVfbW9kdWxlcy9yZWFjdC10cmFuc2l0aW9uLWdyb3VwL1RyYW5zaXRpb25Hcm91cC5qcyIsIl9jaGFpbkZ1bmN0aW9uIiwiX2NoYWluRnVuY3Rpb24yIiwiX3dhcm5pbmciLCJfQ2hpbGRNYXBwaW5nIiwiYW55IiwiZnVuYyIsImNvbXBvbmVudCIsIlRyYW5zaXRpb25Hcm91cCIsImNvbnRleHQiLCJwZXJmb3JtQXBwZWFyIiwiY3VycmVudGx5VHJhbnNpdGlvbmluZ0tleXMiLCJfaGFuZGxlRG9uZUFwcGVhcmluZyIsImJpbmQiLCJjb21wb25lbnREaWRBcHBlYXIiLCJjdXJyZW50Q2hpbGRNYXBwaW5nIiwiZ2V0Q2hpbGRNYXBwaW5nIiwicGVyZm9ybUxlYXZlIiwicGVyZm9ybUVudGVyIiwiX2hhbmRsZURvbmVFbnRlcmluZyIsImNvbXBvbmVudERpZEVudGVyIiwiX2hhbmRsZURvbmVMZWF2aW5nIiwiY29tcG9uZW50RGlkTGVhdmUiLCJrZXlzVG9FbnRlciIsInNldFN0YXRlIiwic3RhdGUiLCJuZXdDaGlsZHJlbiIsImNoaWxkUmVmcyIsImtleXNUb0xlYXZlIiwiY29tcG9uZW50RGlkTW91bnQiLCJpbml0aWFsQ2hpbGRNYXBwaW5nIiwiY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyIsIm5leHRQcm9wcyIsIm5leHRDaGlsZE1hcHBpbmciLCJwcmV2Q2hpbGRNYXBwaW5nIiwibWVyZ2VDaGlsZE1hcHBpbmdzIiwiaGFzUHJldiIsImhhc05leHQiLCJjb21wb25lbnREaWRVcGRhdGUiLCJfdGhpczMiLCJjaGlsZHJlblRvUmVuZGVyIiwiaXNDYWxsYmFja1JlZiIsInJlZiIsImZhY3RvcnlDaGlsZCIsInIiLCIuL25vZGVfbW9kdWxlcy9yZWFjdC10cmFuc2l0aW9uLWdyb3VwL3V0aWxzL0NoaWxkTWFwcGluZy5qcyIsInJlc3VsdCIsIm1hcCIsImdldFZhbHVlRm9yS2V5IiwibmV4dEtleXNQZW5kaW5nIiwicGVuZGluZ0tleXMiLCJwcmV2S2V5IiwiY2hpbGRNYXBwaW5nIiwibmV4dEtleSIsInBlbmRpbmdOZXh0S2V5IiwiLi9ub2RlX21vZHVsZXMvcmVhY3QtdHJhbnNpdGlvbi1ncm91cC91dGlscy9Qcm9wVHlwZXMuanMiLCJ0cmFuc2l0aW9uVHlwZSIsInRpbWVvdXRQcm9wTmFtZSIsImVuYWJsZWRQcm9wTmFtZSIsIkVycm9yIiwib25lT2ZUeXBlIiwic3RyaW5nIiwic2hhcGUiLCJhY3RpdmUiLCJlbnRlckFjdGl2ZSIsImxlYXZlQWN0aXZlIiwiYXBwZWFyQWN0aXZlIiwiLi9ub2RlX21vZHVsZXMvcmVzZWxlY3QvbGliL2luZGV4LmpzIiwiZGVmYXVsdEVxdWFsaXR5Q2hlY2siLCJhIiwiYiIsImFyZUFyZ3VtZW50c1NoYWxsb3dseUVxdWFsIiwiZXF1YWxpdHlDaGVjayIsImRlZmF1bHRNZW1vaXplIiwibGFzdEFyZ3MiLCJsYXN0UmVzdWx0IiwiZ2V0RGVwZW5kZW5jaWVzIiwiZnVuY3MiLCJkZXBlbmRlbmNpZXMiLCJpc0FycmF5IiwiZXZlcnkiLCJkZXAiLCJkZXBlbmRlbmN5VHlwZXMiLCJqb2luIiwiY3JlYXRlU2VsZWN0b3JDcmVhdG9yIiwibWVtb2l6ZSIsIm1lbW9pemVPcHRpb25zIiwiX2xlbjIiLCJfa2V5MiIsInJlY29tcHV0YXRpb25zIiwicmVzdWx0RnVuYyIsInBvcCIsIm1lbW9pemVkUmVzdWx0RnVuYyIsInNlbGVjdG9yIiwicGFyYW1zIiwicmVzZXRSZWNvbXB1dGF0aW9ucyIsImNyZWF0ZVN0cnVjdHVyZWRTZWxlY3RvciIsInNlbGVjdG9ycyIsInNlbGVjdG9yQ3JlYXRvciIsImNyZWF0ZVNlbGVjdG9yIiwib2JqZWN0S2V5cyIsIl9sZW4zIiwidmFsdWVzIiwiX2tleTMiLCJjb21wb3NpdGlvbiIsImluZGV4IiwiLi9zcmMvY29tcG9uZW50cy9EZXZpY2VMaXN0SXRlbS9EZXZpY2VMaXN0SXRlbS5qcyIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJkZXNjcmlwdG9yIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiX3JlYWN0Um91dGVyRG9tIiwiX1RvZ2dsZVNldHRpbmdzIiwiX1RvZ2dsZVNldHRpbmdzMiIsIkRldmljZUxpc3RJdGVtIiwiZ2V0UHJvdG90eXBlT2YiLCJzZXREZXZpY2VJZCIsInNldFBvcHVwU2hvd24iLCJkYXRhIiwiX2lkIiwiTGluayIsInRvIiwiY2hlY2tlZCIsInN0YXR1cyIsIml0ZW1JZCIsInNldEl0ZW1WYWx1ZSIsImNoYW5nZVN0YXR1cyIsImxvY2F0aW9uIiwib25DbGljayIsImRlbGV0ZURldmljZSIsImJvb2xlYW4iLCIuL3NyYy9jb21wb25lbnRzL0RldmljZUxpc3RJdGVtL0RldmljZUxpc3RJdGVtLnNjc3MiLCIuL3NyYy9jb21wb25lbnRzL0RldmlzZXNTZWN0aW9uL0RldmlzZXNTZWN0aW9uLmpzIiwiX01lc3NhZ2UiLCJfUG9wdXAiLCJfQnV0dG9uIiwiX0xpc3RIZWFkZXIiLCJfTGlzdEhlYWRlcjIiLCJEZXZpY2VzU2VjdGlvbiIsImZpbHRlck9wdGlvbiIsImZpbHRlckFjdGlvbiIsImxvY2F0aW9uT2ZEZXZpY2VzIiwicXVhbnRpdHkiLCJoaXN0b3J5IiwibWF0Y2giLCJQb3B1cCIsInBvcHVwU2hvd24iLCJoZWFkZXIiLCJ0ZXh0IiwiQnV0dG9uIiwib2tIYW5kbGVyIiwiY3VycmVudElkIiwiaW5uZXJUZXh0IiwiTWVzc2FnZSIsImNsZWFyU3RhdHVzIiwibG9hZERldmljZXMiLCJkZXZpY2VzIiwiYXJyYXkiLCJvYmplY3QiLCIuL3NyYy9jb21wb25lbnRzL0ZpbHRlclNlbGVjdC9GaWx0ZXJTZWxlY3QuanMiLCJGaWx0ZXJTZWxlY3QiLCJvbkNoYW5nZSIsImhhbmRsZVNlbGVjdCIsIm9wdGlvbnMiLCJpdGVtIiwiLi9zcmMvY29tcG9uZW50cy9GaWx0ZXJTZWxlY3QvRmlsdGVyU2VsZWN0LnNjc3MiLCIuL3NyYy9jb21wb25lbnRzL0xpc3RIZWFkZXIvTGlzdEhlYWRlci5qcyIsIl9yZWFjdFJlZHV4IiwiX3F1ZXJ5U3RyaW5nIiwiX3F1ZXJ5U3RyaW5nMiIsIl9GaWx0ZXJTZWxlY3QiLCJfRmlsdGVyU2VsZWN0MiIsIl9TZWFyY2giLCJfU2VhcmNoMiIsIl9kZXZpY2VzIiwiX3V0aWxzIiwiX2ZpbHRlck9wdGlvbnMiLCJMaXN0SGVhZGVyIiwiaW5pdGlhbFBhcmFtcyIsInNlYXJjaCIsImhhbmRsZUZpbHRlclNlbGVjdCIsInVwZGF0ZVVybCIsImhhbmRsZVNlYXJjaFJlc3VsdCIsInNlYXJjaFZhbHVlIiwiZmluZEl0ZW1zIiwicGF0aG5hbWUiLCJ1cmwiLCJxdWVyeUZyb21PYmplY3QiLCJwYXJzZSIsImZpbHRlclZhbHVlIiwiaGFuZGxlU2VhcmNoIiwibWFwU3RhdGVUb1Byb3BzIiwic2VhcmNoQW5kRmlsdGVyIiwibWFwRGlzcGF0Y2hUb1Byb3BzIiwiZGlzcGF0Y2giLCJzZWFyY2hBY3Rpb24iLCJjb25uZWN0IiwiLi9zcmMvY29tcG9uZW50cy9QYWdpbmF0aW9uL1BhZ2luYXRpb24uanMiLCJQYWdpbmF0aW9uIiwicGFnZU51bWJlcnMiLCJjdXJyZW50UGFnZSIsInRvdGFsUGFnZXMiLCJoYW5kbGVDbGljayIsInNldFBhZ2UiLCIuL3NyYy9jb21wb25lbnRzL1BhZ2luYXRpb24vUGFnaW5hdGlvbi5zY3NzIiwiLi9zcmMvY29tcG9uZW50cy9TZWFyY2gvU2VhcmNoLmpzIiwiU2VhcmNoIiwidHlwZSIsInBsYWNlaG9sZGVyIiwiLi9zcmMvY29tcG9uZW50cy9TZWFyY2gvc2VhcmNoLnNjc3MiLCIuL3NyYy9jb21wb25lbnRzL1RvZ2dsZVNldHRpbmdzL1RvZ2dsZVNldHRpbmdzLmpzIiwiVG9nZ2xlU2V0dGluZ3MiLCJvbkNoYW5nZVZhbHVlIiwiZGV2aWNlSWQiLCJzdHlsZU5hbWUiLCJkZXZpY2UiLCJuZXdWYWx1ZSIsIi4vc3JjL2NvbXBvbmVudHMvVG9nZ2xlU2V0dGluZ3MvVG9nZ2xlU3R5bGUuc2NzcyIsIi4vc3JjL2RhdGEvZmlsdGVyT3B0aW9ucy5qcyIsIi4vc3JjL3BhZ2VzL0xvY2F0aW9uTGlzdC9Mb2NhdGlvbkxpc3QuanMiLCJfUGFnaW5hdGlvbiIsIl9QYWdpbmF0aW9uMiIsIl9EZXZpY2VMaXN0SXRlbSIsIl9EZXZpY2VMaXN0SXRlbTIiLCJfRGV2aXNlc1NlY3Rpb24iLCJfRGV2aXNlc1NlY3Rpb24yIiwiX25vdGlmaWNhdGlvbnMiLCJfc2VsZWN0b3JzIiwiX3JlYWN0QWRkb25zQ3NzVHJhbnNpdGlvbkdyb3VwIiwiX3JlYWN0QWRkb25zQ3NzVHJhbnNpdGlvbkdyb3VwMiIsIkxvY2F0aW9uTGlzdCIsImRldmljZXNQZXJQYWdlIiwiY3VycmVudFN0YXRlIiwiZXZlbnQiLCJOdW1iZXIiLCJwYWdlTnVtYmVyIiwiZGV2aWNlc0luTG9jYXRpb24iLCJyZW5kZXJEZXZpY2VzIiwiX3N0YXRlIiwiY2VpbCIsImluZGV4T2ZMYXN0RGV2aWNlIiwiaW5kZXhPZkZpcnN0RGV2aWNlIiwiY3VycmVudERldmljZXMiLCJzbGljZSIsImVycm9yVGV4dCIsInJlbmRlckRldmljZUdyb3VwIiwibGlzdCIsImZpbHRlckl0ZW1zIiwiZGV2aWNlc0xpc3QiLCJ1cGxvYWRTdGF0dXMiLCJ1cGRhdGVEZXZpY2UiLCJzZW5kTm90aWZpY2F0aW9uV1MiLCJtZXNzYWdlIiwiLi9zcmMvc2VsZWN0b3JzL2luZGV4LmpzIiwiX3Jlc2VsZWN0IiwiZ2V0RmlsdGVyT3B0aW9uIiwiZ2V0RGV2aWNlcyIsImdldFNlYXJjaFZhbHVlIiwiaXRlbXMiLCJuZXdBcnIiLCJzZWFyY2hJdGVtIl0sIm1hcHBpbmdzIjoiQUFBQUEsY0FBYyxJQUVSQyx5Q0FDQSxTQUFVQyxFQUFRQyxFQUFTQyxHQUVqQyxZQ0pBRixHQUFPQyxRQUFVLFdBSWYsSUFBSyxHQUhERSxHQUFNQyxVQUFVQyxPQUNoQkMsS0FFS0MsRUFBSSxFQUFHQSxFQUFJSixFQUFLSSxJQUN2QkQsRUFBS0MsR0FBS0gsVUFBVUcsRUFJdEIsSUFGQUQsRUFBT0EsRUFBS0UsT0FBTyxTQUFTQyxHQUFLLE1BQWEsT0FBTkEsSUFFcEIsSUFBaEJILEVB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eGQsRUFBUUMsRUFBU0MsR0FFakMsWUFHQXFCLFFBQU9DLGVBQWV2QixFQUFTLGNBQzdCd0IsT0FBTyxJQUVUeEIsRUFBUWlkLGdCQUFjamEsRXdCcnZFdEIsSUFBQXdhLEdBQUF2ZCxFQUFBLHdDQUNBd1ksRUFBQXhZLEVBQUEsd0JBRU13ZCxFQUFrQixTQUFBdk8sR0FBQSxNQUFTQSxHQUFNd0ssZ0JBQWdCckQsY0FDakRxSCxFQUFhLFNBQUF4TyxHQUFBLE1BQVNBLEdBQU1nTyxZQUFZNUYsU0FDeENxRyxFQUFpQixTQUFBek8sR0FBQSxNQUFTQSxHQUFNd0ssZ0JBQWdCVCxZQUV6Q2dFLGdCQUFjLEVBQUFPLEVBQUE1SixpQkFDeEI2SixFQUFpQkUsRUFBZ0JELEdBQ2xDLFNBQUNySCxFQUFjNEMsRUFBYTJFLEdBQzFCLEdBQUlDLEdBQVNELENBU2IsT0FQcUIsUUFBakJ2SCxFQUNGd0gsRUFBU0QsRUFDaUIsT0FBakJ2SCxFQUNUd0gsRUFBU0QsRUFBTXJkLE9BQU8sU0FBQXVYLEdBQUEsT0FBd0IsSUFBaEJBLEVBQUt6QyxTQUNULFFBQWpCZ0IsSUFDVHdILEVBQVNELEVBQU1yZCxPQUFPLFNBQUF1WCxHQUFBLE9BQXdCLElBQWhCQSxFQUFLekMsVUFFOUJ3SSxFQUFPdGQsT0FBTyxTQUFBdVgsR0FBQSxPQUFRLEVBQUFXLEVBQUFxRixZQUFXaEcsRUFBS3JPLEtBQU13UCIsImZpbGUiOiIxLmluZGV4X2J1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIndlYnBhY2tKc29ucChbMV0se1xuXG4vKioqLyBcIi4vbm9kZV9tb2R1bGVzL2NoYWluLWZ1bmN0aW9uL2luZGV4LmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY2hhaW4oKSB7XG4gIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICB2YXIgYXJncyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldO1xuICB9YXJncyA9IGFyZ3MuZmlsdGVyKGZ1bmN0aW9uIChmbikge1xuICAgIHJldHVybiBmbiAhPSBudWxsO1xuICB9KTtcblxuICBpZiAoYXJncy5sZW5ndGggPT09IDApIHJldHVybiB1bmRlZmluZWQ7XG4gIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkgcmV0dXJuIGFyZ3NbMF07XG5cbiAgcmV0dXJuIGFyZ3MucmVkdWNlKGZ1bmN0aW9uIChjdXJyZW50LCBuZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGNoYWluZWRGdW5jdGlvbigpIHtcbiAgICAgIGN1cnJlbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIG5leHQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9KTtcbn07XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbm9kZV9tb2R1bGVzL2RvbS1oZWxwZXJzL2NsYXNzL2FkZENsYXNzLmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSBhZGRDbGFzcztcblxudmFyIF9oYXNDbGFzcyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9kb20taGVscGVycy9jbGFzcy9oYXNDbGFzcy5qc1wiKTtcblxudmFyIF9oYXNDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9oYXNDbGFzcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xufVxuXG5mdW5jdGlvbiBhZGRDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUpIHtcbiAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0KSBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtlbHNlIGlmICghKDAsIF9oYXNDbGFzczIuZGVmYXVsdCkoZWxlbWVudCkpIGVsZW1lbnQuY2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWUgKyAnICcgKyBjbGFzc05hbWU7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvZG9tLWhlbHBlcnMvY2xhc3MvaGFzQ2xhc3MuanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IGhhc0NsYXNzO1xuZnVuY3Rpb24gaGFzQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gIGlmIChlbGVtZW50LmNsYXNzTGlzdCkgcmV0dXJuICEhY2xhc3NOYW1lICYmIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSk7ZWxzZSByZXR1cm4gKFwiIFwiICsgZWxlbWVudC5jbGFzc05hbWUgKyBcIiBcIikuaW5kZXhPZihcIiBcIiArIGNsYXNzTmFtZSArIFwiIFwiKSAhPT0gLTE7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL25vZGVfbW9kdWxlcy9kb20taGVscGVycy9jbGFzcy9yZW1vdmVDbGFzcy5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICBpZiAoZWxlbWVudC5jbGFzc0xpc3QpIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO2Vsc2UgZWxlbWVudC5jbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoJyhefFxcXFxzKScgKyBjbGFzc05hbWUgKyAnKD86XFxcXHN8JCknLCAnZycpLCAnJDEnKS5yZXBsYWNlKC9cXHMrL2csICcgJykucmVwbGFjZSgvXlxccyp8XFxzKiQvZywgJycpO1xufTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvZG9tLWhlbHBlcnMvdHJhbnNpdGlvbi9wcm9wZXJ0aWVzLmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmFuaW1hdGlvbkVuZCA9IGV4cG9ydHMuYW5pbWF0aW9uRGVsYXkgPSBleHBvcnRzLmFuaW1hdGlvblRpbWluZyA9IGV4cG9ydHMuYW5pbWF0aW9uRHVyYXRpb24gPSBleHBvcnRzLmFuaW1hdGlvbk5hbWUgPSBleHBvcnRzLnRyYW5zaXRpb25FbmQgPSBleHBvcnRzLnRyYW5zaXRpb25EdXJhdGlvbiA9IGV4cG9ydHMudHJhbnNpdGlvbkRlbGF5ID0gZXhwb3J0cy50cmFuc2l0aW9uVGltaW5nID0gZXhwb3J0cy50cmFuc2l0aW9uUHJvcGVydHkgPSBleHBvcnRzLnRyYW5zZm9ybSA9IHVuZGVmaW5lZDtcblxudmFyIF9pbkRPTSA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9kb20taGVscGVycy91dGlsL2luRE9NLmpzXCIpO1xuXG52YXIgX2luRE9NMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luRE9NKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG59XG5cbnZhciB0cmFuc2Zvcm0gPSAndHJhbnNmb3JtJztcbnZhciBwcmVmaXggPSB2b2lkIDAsXG4gICAgdHJhbnNpdGlvbkVuZCA9IHZvaWQgMCxcbiAgICBhbmltYXRpb25FbmQgPSB2b2lkIDA7XG52YXIgdHJhbnNpdGlvblByb3BlcnR5ID0gdm9pZCAwLFxuICAgIHRyYW5zaXRpb25EdXJhdGlvbiA9IHZvaWQgMCxcbiAgICB0cmFuc2l0aW9uVGltaW5nID0gdm9pZCAwLFxuICAgIHRyYW5zaXRpb25EZWxheSA9IHZvaWQgMDtcbnZhciBhbmltYXRpb25OYW1lID0gdm9pZCAwLFxuICAgIGFuaW1hdGlvbkR1cmF0aW9uID0gdm9pZCAwLFxuICAgIGFuaW1hdGlvblRpbWluZyA9IHZvaWQgMCxcbiAgICBhbmltYXRpb25EZWxheSA9IHZvaWQgMDtcblxuaWYgKF9pbkRPTTIuZGVmYXVsdCkge1xuICB2YXIgX2dldFRyYW5zaXRpb25Qcm9wZXJ0ID0gZ2V0VHJhbnNpdGlvblByb3BlcnRpZXMoKTtcblxuICBwcmVmaXggPSBfZ2V0VHJhbnNpdGlvblByb3BlcnQucHJlZml4O1xuICBleHBvcnRzLnRyYW5zaXRpb25FbmQgPSB0cmFuc2l0aW9uRW5kID0gX2dldFRyYW5zaXRpb25Qcm9wZXJ0LnRyYW5zaXRpb25FbmQ7XG4gIGV4cG9ydHMuYW5pbWF0aW9uRW5kID0gYW5pbWF0aW9uRW5kID0gX2dldFRyYW5zaXRpb25Qcm9wZXJ0LmFuaW1hdGlvbkVuZDtcblxuICBleHBvcnRzLnRyYW5zZm9ybSA9IHRyYW5zZm9ybSA9IHByZWZpeCArICctJyArIHRyYW5zZm9ybTtcbiAgZXhwb3J0cy50cmFuc2l0aW9uUHJvcGVydHkgPSB0cmFuc2l0aW9uUHJvcGVydHkgPSBwcmVmaXggKyAnLXRyYW5zaXRpb24tcHJvcGVydHknO1xuICBleHBvcnRzLnRyYW5zaXRpb25EdXJhdGlvbiA9IHRyYW5zaXRpb25EdXJhdGlvbiA9IHByZWZpeCArICctdHJhbnNpdGlvbi1kdXJhdGlvbic7XG4gIGV4cG9ydHMudHJhbnNpdGlvbkRlbGF5ID0gdHJhbnNpdGlvbkRlbGF5ID0gcHJlZml4ICsgJy10cmFuc2l0aW9uLWRlbGF5JztcbiAgZXhwb3J0cy50cmFuc2l0aW9uVGltaW5nID0gdHJhbnNpdGlvblRpbWluZyA9IHByZWZpeCArICctdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24nO1xuXG4gIGV4cG9ydHMuYW5pbWF0aW9uTmFtZSA9IGFuaW1hdGlvbk5hbWUgPSBwcmVmaXggKyAnLWFuaW1hdGlvbi1uYW1lJztcbiAgZXhwb3J0cy5hbmltYXRpb25EdXJhdGlvbiA9IGFuaW1hdGlvbkR1cmF0aW9uID0gcHJlZml4ICsgJy1hbmltYXRpb24tZHVyYXRpb24nO1xuICBleHBvcnRzLmFuaW1hdGlvblRpbWluZyA9IGFuaW1hdGlvblRpbWluZyA9IHByZWZpeCArICctYW5pbWF0aW9uLWRlbGF5JztcbiAgZXhwb3J0cy5hbmltYXRpb25EZWxheSA9IGFuaW1hdGlvbkRlbGF5ID0gcHJlZml4ICsgJy1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uJztcbn1cblxuZXhwb3J0cy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG5leHBvcnRzLnRyYW5zaXRpb25Qcm9wZXJ0eSA9IHRyYW5zaXRpb25Qcm9wZXJ0eTtcbmV4cG9ydHMudHJhbnNpdGlvblRpbWluZyA9IHRyYW5zaXRpb25UaW1pbmc7XG5leHBvcnRzLnRyYW5zaXRpb25EZWxheSA9IHRyYW5zaXRpb25EZWxheTtcbmV4cG9ydHMudHJhbnNpdGlvbkR1cmF0aW9uID0gdHJhbnNpdGlvbkR1cmF0aW9uO1xuZXhwb3J0cy50cmFuc2l0aW9uRW5kID0gdHJhbnNpdGlvbkVuZDtcbmV4cG9ydHMuYW5pbWF0aW9uTmFtZSA9IGFuaW1hdGlvbk5hbWU7XG5leHBvcnRzLmFuaW1hdGlvbkR1cmF0aW9uID0gYW5pbWF0aW9uRHVyYXRpb247XG5leHBvcnRzLmFuaW1hdGlvblRpbWluZyA9IGFuaW1hdGlvblRpbWluZztcbmV4cG9ydHMuYW5pbWF0aW9uRGVsYXkgPSBhbmltYXRpb25EZWxheTtcbmV4cG9ydHMuYW5pbWF0aW9uRW5kID0gYW5pbWF0aW9uRW5kO1xuZXhwb3J0cy5kZWZhdWx0ID0ge1xuICB0cmFuc2Zvcm06IHRyYW5zZm9ybSxcbiAgZW5kOiB0cmFuc2l0aW9uRW5kLFxuICBwcm9wZXJ0eTogdHJhbnNpdGlvblByb3BlcnR5LFxuICB0aW1pbmc6IHRyYW5zaXRpb25UaW1pbmcsXG4gIGRlbGF5OiB0cmFuc2l0aW9uRGVsYXksXG4gIGR1cmF0aW9uOiB0cmFuc2l0aW9uRHVyYXRpb25cbn07XG5cbmZ1bmN0aW9uIGdldFRyYW5zaXRpb25Qcm9wZXJ0aWVzKCkge1xuICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKS5zdHlsZTtcblxuICB2YXIgdmVuZG9yTWFwID0ge1xuICAgIE86IGZ1bmN0aW9uIE8oZSkge1xuICAgICAgcmV0dXJuICdvJyArIGUudG9Mb3dlckNhc2UoKTtcbiAgICB9LFxuICAgIE1vejogZnVuY3Rpb24gTW96KGUpIHtcbiAgICAgIHJldHVybiBlLnRvTG93ZXJDYXNlKCk7XG4gICAgfSxcbiAgICBXZWJraXQ6IGZ1bmN0aW9uIFdlYmtpdChlKSB7XG4gICAgICByZXR1cm4gJ3dlYmtpdCcgKyBlO1xuICAgIH0sXG4gICAgbXM6IGZ1bmN0aW9uIG1zKGUpIHtcbiAgICAgIHJldHVybiAnTVMnICsgZTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIHZlbmRvcnMgPSBPYmplY3Qua2V5cyh2ZW5kb3JNYXApO1xuXG4gIHZhciB0cmFuc2l0aW9uRW5kID0gdm9pZCAwLFxuICAgICAgYW5pbWF0aW9uRW5kID0gdm9pZCAwO1xuICB2YXIgcHJlZml4ID0gJyc7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB2ZW5kb3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHZlbmRvciA9IHZlbmRvcnNbaV07XG5cbiAgICBpZiAodmVuZG9yICsgJ1RyYW5zaXRpb25Qcm9wZXJ0eScgaW4gc3R5bGUpIHtcbiAgICAgIHByZWZpeCA9ICctJyArIHZlbmRvci50b0xvd2VyQ2FzZSgpO1xuICAgICAgdHJhbnNpdGlvbkVuZCA9IHZlbmRvck1hcFt2ZW5kb3JdKCdUcmFuc2l0aW9uRW5kJyk7XG4gICAgICBhbmltYXRpb25FbmQgPSB2ZW5kb3JNYXBbdmVuZG9yXSgnQW5pbWF0aW9uRW5kJyk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBpZiAoIXRyYW5zaXRpb25FbmQgJiYgJ3RyYW5zaXRpb25Qcm9wZXJ0eScgaW4gc3R5bGUpIHRyYW5zaXRpb25FbmQgPSAndHJhbnNpdGlvbmVuZCc7XG5cbiAgaWYgKCFhbmltYXRpb25FbmQgJiYgJ2FuaW1hdGlvbk5hbWUnIGluIHN0eWxlKSBhbmltYXRpb25FbmQgPSAnYW5pbWF0aW9uZW5kJztcblxuICBzdHlsZSA9IG51bGw7XG5cbiAgcmV0dXJuIHsgYW5pbWF0aW9uRW5kOiBhbmltYXRpb25FbmQsIHRyYW5zaXRpb25FbmQ6IHRyYW5zaXRpb25FbmQsIHByZWZpeDogcHJlZml4IH07XG59XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbm9kZV9tb2R1bGVzL2RvbS1oZWxwZXJzL3V0aWwvaW5ET00uanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9ICEhKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5kb2N1bWVudCAmJiB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCk7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvZG9tLWhlbHBlcnMvdXRpbC9yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9pbkRPTSA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9kb20taGVscGVycy91dGlsL2luRE9NLmpzXCIpO1xuXG52YXIgX2luRE9NMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luRE9NKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG59XG5cbnZhciB2ZW5kb3JzID0gWycnLCAnd2Via2l0JywgJ21veicsICdvJywgJ21zJ107XG52YXIgY2FuY2VsID0gJ2NsZWFyVGltZW91dCc7XG52YXIgcmFmID0gZmFsbGJhY2s7XG52YXIgY29tcGF0UmFmID0gdm9pZCAwO1xuXG52YXIgZ2V0S2V5ID0gZnVuY3Rpb24gZ2V0S2V5KHZlbmRvciwgaykge1xuICByZXR1cm4gdmVuZG9yICsgKCF2ZW5kb3IgPyBrIDoga1swXS50b1VwcGVyQ2FzZSgpICsgay5zdWJzdHIoMSkpICsgJ0FuaW1hdGlvbkZyYW1lJztcbn07XG5cbmlmIChfaW5ET00yLmRlZmF1bHQpIHtcbiAgdmVuZG9ycy5zb21lKGZ1bmN0aW9uICh2ZW5kb3IpIHtcbiAgICB2YXIgcmFmS2V5ID0gZ2V0S2V5KHZlbmRvciwgJ3JlcXVlc3QnKTtcblxuICAgIGlmIChyYWZLZXkgaW4gd2luZG93KSB7XG4gICAgICBjYW5jZWwgPSBnZXRLZXkodmVuZG9yLCAnY2FuY2VsJyk7XG4gICAgICByZXR1cm4gcmFmID0gZnVuY3Rpb24gcmFmKGNiKSB7XG4gICAgICAgIHJldHVybiB3aW5kb3dbcmFmS2V5XShjYik7XG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG59XG5cbi8qIGh0dHBzOi8vZ2l0aHViLmNvbS9jb21wb25lbnQvcmFmICovXG52YXIgcHJldiA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuZnVuY3Rpb24gZmFsbGJhY2soZm4pIHtcbiAgdmFyIGN1cnIgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcbiAgICAgIG1zID0gTWF0aC5tYXgoMCwgMTYgLSAoY3VyciAtIHByZXYpKSxcbiAgICAgIHJlcSA9IHNldFRpbWVvdXQoZm4sIG1zKTtcblxuICBwcmV2ID0gY3VycjtcbiAgcmV0dXJuIHJlcTtcbn1cblxuY29tcGF0UmFmID0gZnVuY3Rpb24gY29tcGF0UmFmKGNiKSB7XG4gIHJldHVybiByYWYoY2IpO1xufTtcbmNvbXBhdFJhZi5jYW5jZWwgPSBmdW5jdGlvbiAoaWQpIHtcbiAgd2luZG93W2NhbmNlbF0gJiYgdHlwZW9mIHdpbmRvd1tjYW5jZWxdID09PSAnZnVuY3Rpb24nICYmIHdpbmRvd1tjYW5jZWxdKGlkKTtcbn07XG5leHBvcnRzLmRlZmF1bHQgPSBjb21wYXRSYWY7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvcmVhY3QtYWRkb25zLWNzcy10cmFuc2l0aW9uLWdyb3VwL2luZGV4LmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKi9cblxuXG5cbm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0LXRyYW5zaXRpb24tZ3JvdXAvQ1NTVHJhbnNpdGlvbkdyb3VwLmpzXCIpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL25vZGVfbW9kdWxlcy9yZWFjdC10cmFuc2l0aW9uLWdyb3VwL0NTU1RyYW5zaXRpb25Hcm91cC5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1yZXR1cm4gdGFyZ2V0O1xufTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC9yZWFjdC5qc1wiKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHJvcFR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3Byb3AtdHlwZXMvaW5kZXguanNcIik7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbnZhciBfVHJhbnNpdGlvbkdyb3VwID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0LXRyYW5zaXRpb24tZ3JvdXAvVHJhbnNpdGlvbkdyb3VwLmpzXCIpO1xuXG52YXIgX1RyYW5zaXRpb25Hcm91cDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9UcmFuc2l0aW9uR3JvdXApO1xuXG52YXIgX0NTU1RyYW5zaXRpb25Hcm91cENoaWxkID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0LXRyYW5zaXRpb24tZ3JvdXAvQ1NTVHJhbnNpdGlvbkdyb3VwQ2hpbGQuanNcIik7XG5cbnZhciBfQ1NTVHJhbnNpdGlvbkdyb3VwQ2hpbGQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ1NTVHJhbnNpdGlvbkdyb3VwQ2hpbGQpO1xuXG52YXIgX1Byb3BUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC10cmFuc2l0aW9uLWdyb3VwL3V0aWxzL1Byb3BUeXBlcy5qc1wiKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG59XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHtcbiAgaWYgKCFzZWxmKSB7XG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuICB9cmV0dXJuIGNhbGwgJiYgKCh0eXBlb2YgY2FsbCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoY2FsbCkpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG59XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyAodHlwZW9mIHN1cGVyQ2xhc3MgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHN1cGVyQ2xhc3MpKSk7XG4gIH1zdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pO2lmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcbn1cblxudmFyIHByb3BUeXBlcyA9IHtcbiAgdHJhbnNpdGlvbk5hbWU6IF9Qcm9wVHlwZXMubmFtZVNoYXBlLmlzUmVxdWlyZWQsXG5cbiAgdHJhbnNpdGlvbkFwcGVhcjogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICB0cmFuc2l0aW9uRW50ZXI6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgdHJhbnNpdGlvbkxlYXZlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIHRyYW5zaXRpb25BcHBlYXJUaW1lb3V0OiAoMCwgX1Byb3BUeXBlcy50cmFuc2l0aW9uVGltZW91dCkoJ0FwcGVhcicpLFxuICB0cmFuc2l0aW9uRW50ZXJUaW1lb3V0OiAoMCwgX1Byb3BUeXBlcy50cmFuc2l0aW9uVGltZW91dCkoJ0VudGVyJyksXG4gIHRyYW5zaXRpb25MZWF2ZVRpbWVvdXQ6ICgwLCBfUHJvcFR5cGVzLnRyYW5zaXRpb25UaW1lb3V0KSgnTGVhdmUnKVxufTtcblxudmFyIGRlZmF1bHRQcm9wcyA9IHtcbiAgdHJhbnNpdGlvbkFwcGVhcjogZmFsc2UsXG4gIHRyYW5zaXRpb25FbnRlcjogdHJ1ZSxcbiAgdHJhbnNpdGlvbkxlYXZlOiB0cnVlXG59O1xuXG52YXIgQ1NTVHJhbnNpdGlvbkdyb3VwID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKENTU1RyYW5zaXRpb25Hcm91cCwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gQ1NTVHJhbnNpdGlvbkdyb3VwKCkge1xuICAgIHZhciBfdGVtcCwgX3RoaXMsIF9yZXQ7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ1NTVHJhbnNpdGlvbkdyb3VwKTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX1JlYWN0JENvbXBvbmVudC5jYWxsLmFwcGx5KF9SZWFjdCRDb21wb25lbnQsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5fd3JhcENoaWxkID0gZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0NTU1RyYW5zaXRpb25Hcm91cENoaWxkMi5kZWZhdWx0LCB7XG4gICAgICAgIG5hbWU6IF90aGlzLnByb3BzLnRyYW5zaXRpb25OYW1lLFxuICAgICAgICBhcHBlYXI6IF90aGlzLnByb3BzLnRyYW5zaXRpb25BcHBlYXIsXG4gICAgICAgIGVudGVyOiBfdGhpcy5wcm9wcy50cmFuc2l0aW9uRW50ZXIsXG4gICAgICAgIGxlYXZlOiBfdGhpcy5wcm9wcy50cmFuc2l0aW9uTGVhdmUsXG4gICAgICAgIGFwcGVhclRpbWVvdXQ6IF90aGlzLnByb3BzLnRyYW5zaXRpb25BcHBlYXJUaW1lb3V0LFxuICAgICAgICBlbnRlclRpbWVvdXQ6IF90aGlzLnByb3BzLnRyYW5zaXRpb25FbnRlclRpbWVvdXQsXG4gICAgICAgIGxlYXZlVGltZW91dDogX3RoaXMucHJvcHMudHJhbnNpdGlvbkxlYXZlVGltZW91dFxuICAgICAgfSwgY2hpbGQpO1xuICAgIH0sIF90ZW1wKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgLy8gV2UgbmVlZCB0byBwcm92aWRlIHRoaXMgY2hpbGRGYWN0b3J5IHNvIHRoYXRcbiAgLy8gUmVhY3RDU1NUcmFuc2l0aW9uR3JvdXBDaGlsZCBjYW4gcmVjZWl2ZSB1cGRhdGVzIHRvIG5hbWUsIGVudGVyLCBhbmRcbiAgLy8gbGVhdmUgd2hpbGUgaXQgaXMgbGVhdmluZy5cblxuXG4gIENTU1RyYW5zaXRpb25Hcm91cC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfVHJhbnNpdGlvbkdyb3VwMi5kZWZhdWx0LCBfZXh0ZW5kcyh7fSwgdGhpcy5wcm9wcywgeyBjaGlsZEZhY3Rvcnk6IHRoaXMuX3dyYXBDaGlsZCB9KSk7XG4gIH07XG5cbiAgcmV0dXJuIENTU1RyYW5zaXRpb25Hcm91cDtcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbkNTU1RyYW5zaXRpb25Hcm91cC5kaXNwbGF5TmFtZSA9ICdDU1NUcmFuc2l0aW9uR3JvdXAnO1xuXG5DU1NUcmFuc2l0aW9uR3JvdXAucHJvcFR5cGVzID0gIGZhbHNlID8gcHJvcFR5cGVzIDoge307XG5DU1NUcmFuc2l0aW9uR3JvdXAuZGVmYXVsdFByb3BzID0gZGVmYXVsdFByb3BzO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBDU1NUcmFuc2l0aW9uR3JvdXA7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvcmVhY3QtdHJhbnNpdGlvbi1ncm91cC9DU1NUcmFuc2l0aW9uR3JvdXBDaGlsZC5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1yZXR1cm4gdGFyZ2V0O1xufTtcblxudmFyIF9hZGRDbGFzcyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9kb20taGVscGVycy9jbGFzcy9hZGRDbGFzcy5qc1wiKTtcblxudmFyIF9hZGRDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hZGRDbGFzcyk7XG5cbnZhciBfcmVtb3ZlQ2xhc3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvZG9tLWhlbHBlcnMvY2xhc3MvcmVtb3ZlQ2xhc3MuanNcIik7XG5cbnZhciBfcmVtb3ZlQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVtb3ZlQ2xhc3MpO1xuXG52YXIgX3JlcXVlc3RBbmltYXRpb25GcmFtZSA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9kb20taGVscGVycy91dGlsL3JlcXVlc3RBbmltYXRpb25GcmFtZS5qc1wiKTtcblxudmFyIF9yZXF1ZXN0QW5pbWF0aW9uRnJhbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVxdWVzdEFuaW1hdGlvbkZyYW1lKTtcblxudmFyIF9wcm9wZXJ0aWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2RvbS1oZWxwZXJzL3RyYW5zaXRpb24vcHJvcGVydGllcy5qc1wiKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC9yZWFjdC5qc1wiKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHJvcFR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3Byb3AtdHlwZXMvaW5kZXguanNcIik7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbnZhciBfcmVhY3REb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcmVhY3QtZG9tL2luZGV4LmpzXCIpO1xuXG52YXIgX1Byb3BUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC10cmFuc2l0aW9uLWdyb3VwL3V0aWxzL1Byb3BUeXBlcy5qc1wiKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG59XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHtcbiAgaWYgKCFzZWxmKSB7XG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuICB9cmV0dXJuIGNhbGwgJiYgKCh0eXBlb2YgY2FsbCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoY2FsbCkpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG59XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyAodHlwZW9mIHN1cGVyQ2xhc3MgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHN1cGVyQ2xhc3MpKSk7XG4gIH1zdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pO2lmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcbn1cblxudmFyIGV2ZW50cyA9IFtdO1xuaWYgKF9wcm9wZXJ0aWVzLnRyYW5zaXRpb25FbmQpIGV2ZW50cy5wdXNoKF9wcm9wZXJ0aWVzLnRyYW5zaXRpb25FbmQpO1xuaWYgKF9wcm9wZXJ0aWVzLmFuaW1hdGlvbkVuZCkgZXZlbnRzLnB1c2goX3Byb3BlcnRpZXMuYW5pbWF0aW9uRW5kKTtcblxuZnVuY3Rpb24gYWRkRW5kTGlzdGVuZXIobm9kZSwgbGlzdGVuZXIpIHtcbiAgaWYgKGV2ZW50cy5sZW5ndGgpIHtcbiAgICBldmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihlLCBsaXN0ZW5lciwgZmFsc2UpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHNldFRpbWVvdXQobGlzdGVuZXIsIDApO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIWV2ZW50cy5sZW5ndGgpIHJldHVybjtcbiAgICBldmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLCBsaXN0ZW5lciwgZmFsc2UpO1xuICAgIH0pO1xuICB9O1xufVxuXG52YXIgcHJvcFR5cGVzID0ge1xuICBjaGlsZHJlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICBuYW1lOiBfUHJvcFR5cGVzLm5hbWVTaGFwZS5pc1JlcXVpcmVkLFxuXG4gIC8vIE9uY2Ugd2UgcmVxdWlyZSB0aW1lb3V0cyB0byBiZSBzcGVjaWZpZWQsIHdlIGNhbiByZW1vdmUgdGhlXG4gIC8vIGJvb2xlYW4gZmxhZ3MgKGFwcGVhciBldGMuKSBhbmQganVzdCBhY2NlcHQgYSBudW1iZXJcbiAgLy8gb3IgYSBib29sIGZvciB0aGUgdGltZW91dCBmbGFncyAoYXBwZWFyVGltZW91dCBldGMuKVxuICBhcHBlYXI6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgZW50ZXI6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgbGVhdmU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgYXBwZWFyVGltZW91dDogX3Byb3BUeXBlczIuZGVmYXVsdC5udW1iZXIsXG4gIGVudGVyVGltZW91dDogX3Byb3BUeXBlczIuZGVmYXVsdC5udW1iZXIsXG4gIGxlYXZlVGltZW91dDogX3Byb3BUeXBlczIuZGVmYXVsdC5udW1iZXJcbn07XG5cbnZhciBDU1NUcmFuc2l0aW9uR3JvdXBDaGlsZCA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhDU1NUcmFuc2l0aW9uR3JvdXBDaGlsZCwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gQ1NTVHJhbnNpdGlvbkdyb3VwQ2hpbGQoKSB7XG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDU1NUcmFuc2l0aW9uR3JvdXBDaGlsZCk7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9SZWFjdCRDb21wb25lbnQuY2FsbC5hcHBseShfUmVhY3QkQ29tcG9uZW50LCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuY29tcG9uZW50V2lsbEFwcGVhciA9IGZ1bmN0aW9uIChkb25lKSB7XG4gICAgICBpZiAoX3RoaXMucHJvcHMuYXBwZWFyKSB7XG4gICAgICAgIF90aGlzLnRyYW5zaXRpb24oJ2FwcGVhcicsIGRvbmUsIF90aGlzLnByb3BzLmFwcGVhclRpbWVvdXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmNvbXBvbmVudFdpbGxFbnRlciA9IGZ1bmN0aW9uIChkb25lKSB7XG4gICAgICBpZiAoX3RoaXMucHJvcHMuZW50ZXIpIHtcbiAgICAgICAgX3RoaXMudHJhbnNpdGlvbignZW50ZXInLCBkb25lLCBfdGhpcy5wcm9wcy5lbnRlclRpbWVvdXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmNvbXBvbmVudFdpbGxMZWF2ZSA9IGZ1bmN0aW9uIChkb25lKSB7XG4gICAgICBpZiAoX3RoaXMucHJvcHMubGVhdmUpIHtcbiAgICAgICAgX3RoaXMudHJhbnNpdGlvbignbGVhdmUnLCBkb25lLCBfdGhpcy5wcm9wcy5sZWF2ZVRpbWVvdXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfVxuICAgIH0sIF90ZW1wKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgQ1NTVHJhbnNpdGlvbkdyb3VwQ2hpbGQucHJvdG90eXBlLmNvbXBvbmVudFdpbGxNb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICB0aGlzLmNsYXNzTmFtZUFuZE5vZGVRdWV1ZSA9IFtdO1xuICAgIHRoaXMudHJhbnNpdGlvblRpbWVvdXRzID0gW107XG4gIH07XG5cbiAgQ1NTVHJhbnNpdGlvbkdyb3VwQ2hpbGQucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy51bm1vdW50ZWQgPSB0cnVlO1xuXG4gICAgaWYgKHRoaXMudGltZW91dCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7XG4gICAgfVxuICAgIHRoaXMudHJhbnNpdGlvblRpbWVvdXRzLmZvckVhY2goZnVuY3Rpb24gKHRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICB9KTtcblxuICAgIHRoaXMuY2xhc3NOYW1lQW5kTm9kZVF1ZXVlLmxlbmd0aCA9IDA7XG4gIH07XG5cbiAgQ1NTVHJhbnNpdGlvbkdyb3VwQ2hpbGQucHJvdG90eXBlLnRyYW5zaXRpb24gPSBmdW5jdGlvbiB0cmFuc2l0aW9uKGFuaW1hdGlvblR5cGUsIGZpbmlzaENhbGxiYWNrLCB0aW1lb3V0KSB7XG4gICAgdmFyIG5vZGUgPSAoMCwgX3JlYWN0RG9tLmZpbmRET01Ob2RlKSh0aGlzKTtcblxuICAgIGlmICghbm9kZSkge1xuICAgICAgaWYgKGZpbmlzaENhbGxiYWNrKSB7XG4gICAgICAgIGZpbmlzaENhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGNsYXNzTmFtZSA9IHRoaXMucHJvcHMubmFtZVthbmltYXRpb25UeXBlXSB8fCB0aGlzLnByb3BzLm5hbWUgKyAnLScgKyBhbmltYXRpb25UeXBlO1xuICAgIHZhciBhY3RpdmVDbGFzc05hbWUgPSB0aGlzLnByb3BzLm5hbWVbYW5pbWF0aW9uVHlwZSArICdBY3RpdmUnXSB8fCBjbGFzc05hbWUgKyAnLWFjdGl2ZSc7XG4gICAgdmFyIHRpbWVyID0gbnVsbDtcbiAgICB2YXIgcmVtb3ZlTGlzdGVuZXJzID0gdm9pZCAwO1xuXG4gICAgKDAsIF9hZGRDbGFzczIuZGVmYXVsdCkobm9kZSwgY2xhc3NOYW1lKTtcblxuICAgIC8vIE5lZWQgdG8gZG8gdGhpcyB0byBhY3R1YWxseSB0cmlnZ2VyIGEgdHJhbnNpdGlvbi5cbiAgICB0aGlzLnF1ZXVlQ2xhc3NBbmROb2RlKGFjdGl2ZUNsYXNzTmFtZSwgbm9kZSk7XG5cbiAgICAvLyBDbGVhbi11cCB0aGUgYW5pbWF0aW9uIGFmdGVyIHRoZSBzcGVjaWZpZWQgZGVsYXlcbiAgICB2YXIgZmluaXNoID0gZnVuY3Rpb24gZmluaXNoKGUpIHtcbiAgICAgIGlmIChlICYmIGUudGFyZ2V0ICE9PSBub2RlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgIGlmIChyZW1vdmVMaXN0ZW5lcnMpIHJlbW92ZUxpc3RlbmVycygpO1xuXG4gICAgICAoMCwgX3JlbW92ZUNsYXNzMi5kZWZhdWx0KShub2RlLCBjbGFzc05hbWUpO1xuICAgICAgKDAsIF9yZW1vdmVDbGFzczIuZGVmYXVsdCkobm9kZSwgYWN0aXZlQ2xhc3NOYW1lKTtcblxuICAgICAgaWYgKHJlbW92ZUxpc3RlbmVycykgcmVtb3ZlTGlzdGVuZXJzKCk7XG5cbiAgICAgIC8vIFVzdWFsbHkgdGhpcyBvcHRpb25hbCBjYWxsYmFjayBpcyB1c2VkIGZvciBpbmZvcm1pbmcgYW4gb3duZXIgb2ZcbiAgICAgIC8vIGEgbGVhdmUgYW5pbWF0aW9uIGFuZCB0ZWxsaW5nIGl0IHRvIHJlbW92ZSB0aGUgY2hpbGQuXG4gICAgICBpZiAoZmluaXNoQ2FsbGJhY2spIHtcbiAgICAgICAgZmluaXNoQ2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgIHRpbWVyID0gc2V0VGltZW91dChmaW5pc2gsIHRpbWVvdXQpO1xuICAgICAgdGhpcy50cmFuc2l0aW9uVGltZW91dHMucHVzaCh0aW1lcik7XG4gICAgfSBlbHNlIGlmIChfcHJvcGVydGllcy50cmFuc2l0aW9uRW5kKSB7XG4gICAgICByZW1vdmVMaXN0ZW5lcnMgPSBhZGRFbmRMaXN0ZW5lcihub2RlLCBmaW5pc2gpO1xuICAgIH1cbiAgfTtcblxuICBDU1NUcmFuc2l0aW9uR3JvdXBDaGlsZC5wcm90b3R5cGUucXVldWVDbGFzc0FuZE5vZGUgPSBmdW5jdGlvbiBxdWV1ZUNsYXNzQW5kTm9kZShjbGFzc05hbWUsIG5vZGUpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIHRoaXMuY2xhc3NOYW1lQW5kTm9kZVF1ZXVlLnB1c2goe1xuICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG4gICAgICBub2RlOiBub2RlXG4gICAgfSk7XG5cbiAgICBpZiAoIXRoaXMucmFmSGFuZGxlKSB7XG4gICAgICB0aGlzLnJhZkhhbmRsZSA9ICgwLCBfcmVxdWVzdEFuaW1hdGlvbkZyYW1lMi5kZWZhdWx0KShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpczIuZmx1c2hDbGFzc05hbWVBbmROb2RlUXVldWUoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBDU1NUcmFuc2l0aW9uR3JvdXBDaGlsZC5wcm90b3R5cGUuZmx1c2hDbGFzc05hbWVBbmROb2RlUXVldWUgPSBmdW5jdGlvbiBmbHVzaENsYXNzTmFtZUFuZE5vZGVRdWV1ZSgpIHtcbiAgICBpZiAoIXRoaXMudW5tb3VudGVkKSB7XG4gICAgICB0aGlzLmNsYXNzTmFtZUFuZE5vZGVRdWV1ZS5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgLy8gVGhpcyBpcyBmb3IgdG8gZm9yY2UgYSByZXBhaW50LFxuICAgICAgICAvLyB3aGljaCBpcyBuZWNlc3NhcnkgaW4gb3JkZXIgdG8gdHJhbnNpdGlvbiBzdHlsZXMgd2hlbiBhZGRpbmcgYSBjbGFzcyBuYW1lLlxuICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtZXhwcmVzc2lvbnMgKi9cbiAgICAgICAgb2JqLm5vZGUuc2Nyb2xsVG9wO1xuICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLXVudXNlZC1leHByZXNzaW9ucyAqL1xuICAgICAgICAoMCwgX2FkZENsYXNzMi5kZWZhdWx0KShvYmoubm9kZSwgb2JqLmNsYXNzTmFtZSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5jbGFzc05hbWVBbmROb2RlUXVldWUubGVuZ3RoID0gMDtcbiAgICB0aGlzLnJhZkhhbmRsZSA9IG51bGw7XG4gIH07XG5cbiAgQ1NTVHJhbnNpdGlvbkdyb3VwQ2hpbGQucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgcHJvcHMgPSBfZXh0ZW5kcyh7fSwgdGhpcy5wcm9wcyk7XG4gICAgZGVsZXRlIHByb3BzLm5hbWU7XG4gICAgZGVsZXRlIHByb3BzLmFwcGVhcjtcbiAgICBkZWxldGUgcHJvcHMuZW50ZXI7XG4gICAgZGVsZXRlIHByb3BzLmxlYXZlO1xuICAgIGRlbGV0ZSBwcm9wcy5hcHBlYXJUaW1lb3V0O1xuICAgIGRlbGV0ZSBwcm9wcy5lbnRlclRpbWVvdXQ7XG4gICAgZGVsZXRlIHByb3BzLmxlYXZlVGltZW91dDtcbiAgICBkZWxldGUgcHJvcHMuY2hpbGRyZW47XG4gICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jbG9uZUVsZW1lbnQoX3JlYWN0Mi5kZWZhdWx0LkNoaWxkcmVuLm9ubHkodGhpcy5wcm9wcy5jaGlsZHJlbiksIHByb3BzKTtcbiAgfTtcblxuICByZXR1cm4gQ1NTVHJhbnNpdGlvbkdyb3VwQ2hpbGQ7XG59KF9yZWFjdDIuZGVmYXVsdC5Db21wb25lbnQpO1xuXG5DU1NUcmFuc2l0aW9uR3JvdXBDaGlsZC5kaXNwbGF5TmFtZSA9ICdDU1NUcmFuc2l0aW9uR3JvdXBDaGlsZCc7XG5cbkNTU1RyYW5zaXRpb25Hcm91cENoaWxkLnByb3BUeXBlcyA9ICBmYWxzZSA/IHByb3BUeXBlcyA6IHt9O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBDU1NUcmFuc2l0aW9uR3JvdXBDaGlsZDtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL25vZGVfbW9kdWxlcy9yZWFjdC10cmFuc2l0aW9uLWdyb3VwL1RyYW5zaXRpb25Hcm91cC5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1yZXR1cm4gdGFyZ2V0O1xufTtcblxudmFyIF9jaGFpbkZ1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2NoYWluLWZ1bmN0aW9uL2luZGV4LmpzXCIpO1xuXG52YXIgX2NoYWluRnVuY3Rpb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hhaW5GdW5jdGlvbik7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcmVhY3QvcmVhY3QuanNcIik7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3Byb3BUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9wcm9wLXR5cGVzL2luZGV4LmpzXCIpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG52YXIgX3dhcm5pbmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvd2FybmluZy9icm93c2VyLmpzXCIpO1xuXG52YXIgX3dhcm5pbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd2FybmluZyk7XG5cbnZhciBfQ2hpbGRNYXBwaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0LXRyYW5zaXRpb24tZ3JvdXAvdXRpbHMvQ2hpbGRNYXBwaW5nLmpzXCIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcbn1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gIH1cbn1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuICBpZiAoIXNlbGYpIHtcbiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG4gIH1yZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihjYWxsKSkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcbn1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArICh0eXBlb2Ygc3VwZXJDbGFzcyA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2Yoc3VwZXJDbGFzcykpKTtcbiAgfXN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7aWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xufVxuXG52YXIgcHJvcFR5cGVzID0ge1xuICBjb21wb25lbnQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYW55LFxuICBjaGlsZEZhY3Rvcnk6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgY2hpbGRyZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQubm9kZVxufTtcblxudmFyIGRlZmF1bHRQcm9wcyA9IHtcbiAgY29tcG9uZW50OiAnc3BhbicsXG4gIGNoaWxkRmFjdG9yeTogZnVuY3Rpb24gY2hpbGRGYWN0b3J5KGNoaWxkKSB7XG4gICAgcmV0dXJuIGNoaWxkO1xuICB9XG59O1xuXG52YXIgVHJhbnNpdGlvbkdyb3VwID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFRyYW5zaXRpb25Hcm91cCwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gVHJhbnNpdGlvbkdyb3VwKHByb3BzLCBjb250ZXh0KSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRyYW5zaXRpb25Hcm91cCk7XG5cbiAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfUmVhY3QkQ29tcG9uZW50LmNhbGwodGhpcywgcHJvcHMsIGNvbnRleHQpKTtcblxuICAgIF90aGlzLnBlcmZvcm1BcHBlYXIgPSBmdW5jdGlvbiAoa2V5LCBjb21wb25lbnQpIHtcbiAgICAgIF90aGlzLmN1cnJlbnRseVRyYW5zaXRpb25pbmdLZXlzW2tleV0gPSB0cnVlO1xuXG4gICAgICBpZiAoY29tcG9uZW50LmNvbXBvbmVudFdpbGxBcHBlYXIpIHtcbiAgICAgICAgY29tcG9uZW50LmNvbXBvbmVudFdpbGxBcHBlYXIoX3RoaXMuX2hhbmRsZURvbmVBcHBlYXJpbmcuYmluZChfdGhpcywga2V5LCBjb21wb25lbnQpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF90aGlzLl9oYW5kbGVEb25lQXBwZWFyaW5nKGtleSwgY29tcG9uZW50KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3RoaXMuX2hhbmRsZURvbmVBcHBlYXJpbmcgPSBmdW5jdGlvbiAoa2V5LCBjb21wb25lbnQpIHtcbiAgICAgIGlmIChjb21wb25lbnQuY29tcG9uZW50RGlkQXBwZWFyKSB7XG4gICAgICAgIGNvbXBvbmVudC5jb21wb25lbnREaWRBcHBlYXIoKTtcbiAgICAgIH1cblxuICAgICAgZGVsZXRlIF90aGlzLmN1cnJlbnRseVRyYW5zaXRpb25pbmdLZXlzW2tleV07XG5cbiAgICAgIHZhciBjdXJyZW50Q2hpbGRNYXBwaW5nID0gKDAsIF9DaGlsZE1hcHBpbmcuZ2V0Q2hpbGRNYXBwaW5nKShfdGhpcy5wcm9wcy5jaGlsZHJlbik7XG5cbiAgICAgIGlmICghY3VycmVudENoaWxkTWFwcGluZyB8fCAhY3VycmVudENoaWxkTWFwcGluZy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIC8vIFRoaXMgd2FzIHJlbW92ZWQgYmVmb3JlIGl0IGhhZCBmdWxseSBhcHBlYXJlZC4gUmVtb3ZlIGl0LlxuICAgICAgICBfdGhpcy5wZXJmb3JtTGVhdmUoa2V5LCBjb21wb25lbnQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfdGhpcy5wZXJmb3JtRW50ZXIgPSBmdW5jdGlvbiAoa2V5LCBjb21wb25lbnQpIHtcbiAgICAgIF90aGlzLmN1cnJlbnRseVRyYW5zaXRpb25pbmdLZXlzW2tleV0gPSB0cnVlO1xuXG4gICAgICBpZiAoY29tcG9uZW50LmNvbXBvbmVudFdpbGxFbnRlcikge1xuICAgICAgICBjb21wb25lbnQuY29tcG9uZW50V2lsbEVudGVyKF90aGlzLl9oYW5kbGVEb25lRW50ZXJpbmcuYmluZChfdGhpcywga2V5LCBjb21wb25lbnQpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF90aGlzLl9oYW5kbGVEb25lRW50ZXJpbmcoa2V5LCBjb21wb25lbnQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfdGhpcy5faGFuZGxlRG9uZUVudGVyaW5nID0gZnVuY3Rpb24gKGtleSwgY29tcG9uZW50KSB7XG4gICAgICBpZiAoY29tcG9uZW50LmNvbXBvbmVudERpZEVudGVyKSB7XG4gICAgICAgIGNvbXBvbmVudC5jb21wb25lbnREaWRFbnRlcigpO1xuICAgICAgfVxuXG4gICAgICBkZWxldGUgX3RoaXMuY3VycmVudGx5VHJhbnNpdGlvbmluZ0tleXNba2V5XTtcblxuICAgICAgdmFyIGN1cnJlbnRDaGlsZE1hcHBpbmcgPSAoMCwgX0NoaWxkTWFwcGluZy5nZXRDaGlsZE1hcHBpbmcpKF90aGlzLnByb3BzLmNoaWxkcmVuKTtcblxuICAgICAgaWYgKCFjdXJyZW50Q2hpbGRNYXBwaW5nIHx8ICFjdXJyZW50Q2hpbGRNYXBwaW5nLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgLy8gVGhpcyB3YXMgcmVtb3ZlZCBiZWZvcmUgaXQgaGFkIGZ1bGx5IGVudGVyZWQuIFJlbW92ZSBpdC5cbiAgICAgICAgX3RoaXMucGVyZm9ybUxlYXZlKGtleSwgY29tcG9uZW50KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3RoaXMucGVyZm9ybUxlYXZlID0gZnVuY3Rpb24gKGtleSwgY29tcG9uZW50KSB7XG4gICAgICBfdGhpcy5jdXJyZW50bHlUcmFuc2l0aW9uaW5nS2V5c1trZXldID0gdHJ1ZTtcblxuICAgICAgaWYgKGNvbXBvbmVudC5jb21wb25lbnRXaWxsTGVhdmUpIHtcbiAgICAgICAgY29tcG9uZW50LmNvbXBvbmVudFdpbGxMZWF2ZShfdGhpcy5faGFuZGxlRG9uZUxlYXZpbmcuYmluZChfdGhpcywga2V5LCBjb21wb25lbnQpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE5vdGUgdGhhdCB0aGlzIGlzIHNvbWV3aGF0IGRhbmdlcm91cyBiL2MgaXQgY2FsbHMgc2V0U3RhdGUoKVxuICAgICAgICAvLyBhZ2FpbiwgZWZmZWN0aXZlbHkgbXV0YXRpbmcgdGhlIGNvbXBvbmVudCBiZWZvcmUgYWxsIHRoZSB3b3JrXG4gICAgICAgIC8vIGlzIGRvbmUuXG4gICAgICAgIF90aGlzLl9oYW5kbGVEb25lTGVhdmluZyhrZXksIGNvbXBvbmVudCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF90aGlzLl9oYW5kbGVEb25lTGVhdmluZyA9IGZ1bmN0aW9uIChrZXksIGNvbXBvbmVudCkge1xuICAgICAgaWYgKGNvbXBvbmVudC5jb21wb25lbnREaWRMZWF2ZSkge1xuICAgICAgICBjb21wb25lbnQuY29tcG9uZW50RGlkTGVhdmUoKTtcbiAgICAgIH1cblxuICAgICAgZGVsZXRlIF90aGlzLmN1cnJlbnRseVRyYW5zaXRpb25pbmdLZXlzW2tleV07XG5cbiAgICAgIHZhciBjdXJyZW50Q2hpbGRNYXBwaW5nID0gKDAsIF9DaGlsZE1hcHBpbmcuZ2V0Q2hpbGRNYXBwaW5nKShfdGhpcy5wcm9wcy5jaGlsZHJlbik7XG5cbiAgICAgIGlmIChjdXJyZW50Q2hpbGRNYXBwaW5nICYmIGN1cnJlbnRDaGlsZE1hcHBpbmcuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAvLyBUaGlzIGVudGVyZWQgYWdhaW4gYmVmb3JlIGl0IGZ1bGx5IGxlZnQuIEFkZCBpdCBhZ2Fpbi5cbiAgICAgICAgX3RoaXMua2V5c1RvRW50ZXIucHVzaChrZXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgICAgdmFyIG5ld0NoaWxkcmVuID0gX2V4dGVuZHMoe30sIHN0YXRlLmNoaWxkcmVuKTtcbiAgICAgICAgICBkZWxldGUgbmV3Q2hpbGRyZW5ba2V5XTtcbiAgICAgICAgICByZXR1cm4geyBjaGlsZHJlbjogbmV3Q2hpbGRyZW4gfTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF90aGlzLmNoaWxkUmVmcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGNoaWxkcmVuOiAoMCwgX0NoaWxkTWFwcGluZy5nZXRDaGlsZE1hcHBpbmcpKHByb3BzLmNoaWxkcmVuKVxuICAgIH07XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgVHJhbnNpdGlvbkdyb3VwLnByb3RvdHlwZS5jb21wb25lbnRXaWxsTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgdGhpcy5jdXJyZW50bHlUcmFuc2l0aW9uaW5nS2V5cyA9IHt9O1xuICAgIHRoaXMua2V5c1RvRW50ZXIgPSBbXTtcbiAgICB0aGlzLmtleXNUb0xlYXZlID0gW107XG4gIH07XG5cbiAgVHJhbnNpdGlvbkdyb3VwLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHZhciBpbml0aWFsQ2hpbGRNYXBwaW5nID0gdGhpcy5zdGF0ZS5jaGlsZHJlbjtcbiAgICBmb3IgKHZhciBrZXkgaW4gaW5pdGlhbENoaWxkTWFwcGluZykge1xuICAgICAgaWYgKGluaXRpYWxDaGlsZE1hcHBpbmdba2V5XSkge1xuICAgICAgICB0aGlzLnBlcmZvcm1BcHBlYXIoa2V5LCB0aGlzLmNoaWxkUmVmc1trZXldKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgVHJhbnNpdGlvbkdyb3VwLnByb3RvdHlwZS5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICB2YXIgbmV4dENoaWxkTWFwcGluZyA9ICgwLCBfQ2hpbGRNYXBwaW5nLmdldENoaWxkTWFwcGluZykobmV4dFByb3BzLmNoaWxkcmVuKTtcbiAgICB2YXIgcHJldkNoaWxkTWFwcGluZyA9IHRoaXMuc3RhdGUuY2hpbGRyZW47XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGNoaWxkcmVuOiAoMCwgX0NoaWxkTWFwcGluZy5tZXJnZUNoaWxkTWFwcGluZ3MpKHByZXZDaGlsZE1hcHBpbmcsIG5leHRDaGlsZE1hcHBpbmcpXG4gICAgfSk7XG5cbiAgICBmb3IgKHZhciBrZXkgaW4gbmV4dENoaWxkTWFwcGluZykge1xuICAgICAgdmFyIGhhc1ByZXYgPSBwcmV2Q2hpbGRNYXBwaW5nICYmIHByZXZDaGlsZE1hcHBpbmcuaGFzT3duUHJvcGVydHkoa2V5KTtcbiAgICAgIGlmIChuZXh0Q2hpbGRNYXBwaW5nW2tleV0gJiYgIWhhc1ByZXYgJiYgIXRoaXMuY3VycmVudGx5VHJhbnNpdGlvbmluZ0tleXNba2V5XSkge1xuICAgICAgICB0aGlzLmtleXNUb0VudGVyLnB1c2goa2V5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBfa2V5IGluIHByZXZDaGlsZE1hcHBpbmcpIHtcbiAgICAgIHZhciBoYXNOZXh0ID0gbmV4dENoaWxkTWFwcGluZyAmJiBuZXh0Q2hpbGRNYXBwaW5nLmhhc093blByb3BlcnR5KF9rZXkpO1xuICAgICAgaWYgKHByZXZDaGlsZE1hcHBpbmdbX2tleV0gJiYgIWhhc05leHQgJiYgIXRoaXMuY3VycmVudGx5VHJhbnNpdGlvbmluZ0tleXNbX2tleV0pIHtcbiAgICAgICAgdGhpcy5rZXlzVG9MZWF2ZS5wdXNoKF9rZXkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIHdlIHdhbnQgdG8gc29tZWRheSBjaGVjayBmb3IgcmVvcmRlcmluZywgd2UgY291bGQgZG8gaXQgaGVyZS5cbiAgfTtcblxuICBUcmFuc2l0aW9uR3JvdXAucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZSA9IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIHZhciBrZXlzVG9FbnRlciA9IHRoaXMua2V5c1RvRW50ZXI7XG4gICAgdGhpcy5rZXlzVG9FbnRlciA9IFtdO1xuICAgIGtleXNUb0VudGVyLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuIF90aGlzMi5wZXJmb3JtRW50ZXIoa2V5LCBfdGhpczIuY2hpbGRSZWZzW2tleV0pO1xuICAgIH0pO1xuXG4gICAgdmFyIGtleXNUb0xlYXZlID0gdGhpcy5rZXlzVG9MZWF2ZTtcbiAgICB0aGlzLmtleXNUb0xlYXZlID0gW107XG4gICAga2V5c1RvTGVhdmUuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICByZXR1cm4gX3RoaXMyLnBlcmZvcm1MZWF2ZShrZXksIF90aGlzMi5jaGlsZFJlZnNba2V5XSk7XG4gICAgfSk7XG4gIH07XG5cbiAgVHJhbnNpdGlvbkdyb3VwLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAvLyBUT0RPOiB3ZSBjb3VsZCBnZXQgcmlkIG9mIHRoZSBuZWVkIGZvciB0aGUgd3JhcHBlciBub2RlXG4gICAgLy8gYnkgY2xvbmluZyBhIHNpbmdsZSBjaGlsZFxuICAgIHZhciBjaGlsZHJlblRvUmVuZGVyID0gW107XG5cbiAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChrZXkpIHtcbiAgICAgIHZhciBjaGlsZCA9IF90aGlzMy5zdGF0ZS5jaGlsZHJlbltrZXldO1xuICAgICAgaWYgKGNoaWxkKSB7XG4gICAgICAgIHZhciBpc0NhbGxiYWNrUmVmID0gdHlwZW9mIGNoaWxkLnJlZiAhPT0gJ3N0cmluZyc7XG4gICAgICAgIHZhciBmYWN0b3J5Q2hpbGQgPSBfdGhpczMucHJvcHMuY2hpbGRGYWN0b3J5KGNoaWxkKTtcbiAgICAgICAgdmFyIHJlZiA9IGZ1bmN0aW9uIHJlZihyKSB7XG4gICAgICAgICAgX3RoaXMzLmNoaWxkUmVmc1trZXldID0gcjtcbiAgICAgICAgfTtcblxuICAgICAgICAgZmFsc2UgPyAoMCwgX3dhcm5pbmcyLmRlZmF1bHQpKGlzQ2FsbGJhY2tSZWYsICdzdHJpbmcgcmVmcyBhcmUgbm90IHN1cHBvcnRlZCBvbiBjaGlsZHJlbiBvZiBUcmFuc2l0aW9uR3JvdXAgYW5kIHdpbGwgYmUgaWdub3JlZC4gJyArICdQbGVhc2UgdXNlIGEgY2FsbGJhY2sgcmVmIGluc3RlYWQ6IGh0dHBzOi8vZmFjZWJvb2suZ2l0aHViLmlvL3JlYWN0L2RvY3MvcmVmcy1hbmQtdGhlLWRvbS5odG1sI3RoZS1yZWYtY2FsbGJhY2stYXR0cmlidXRlJykgOiB2b2lkIDA7XG5cbiAgICAgICAgLy8gQWx3YXlzIGNoYWluaW5nIHRoZSByZWZzIGxlYWRzIHRvIHByb2JsZW1zIHdoZW4gdGhlIGNoaWxkRmFjdG9yeVxuICAgICAgICAvLyB3cmFwcyB0aGUgY2hpbGQuIFRoZSBjaGlsZCByZWYgY2FsbGJhY2sgZ2V0cyBjYWxsZWQgdHdpY2Ugd2l0aCB0aGVcbiAgICAgICAgLy8gd3JhcHBlciBhbmQgdGhlIGNoaWxkLiBTbyB3ZSBvbmx5IG5lZWQgdG8gY2hhaW4gdGhlIHJlZiBpZiB0aGVcbiAgICAgICAgLy8gZmFjdG9yeUNoaWxkIGlzIG5vdCBkaWZmZXJlbnQgZnJvbSBjaGlsZC5cbiAgICAgICAgaWYgKGZhY3RvcnlDaGlsZCA9PT0gY2hpbGQgJiYgaXNDYWxsYmFja1JlZikge1xuICAgICAgICAgIHJlZiA9ICgwLCBfY2hhaW5GdW5jdGlvbjIuZGVmYXVsdCkoY2hpbGQucmVmLCByZWYpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gWW91IG1heSBuZWVkIHRvIGFwcGx5IHJlYWN0aXZlIHVwZGF0ZXMgdG8gYSBjaGlsZCBhcyBpdCBpcyBsZWF2aW5nLlxuICAgICAgICAvLyBUaGUgbm9ybWFsIFJlYWN0IHdheSB0byBkbyBpdCB3b24ndCB3b3JrIHNpbmNlIHRoZSBjaGlsZCB3aWxsIGhhdmVcbiAgICAgICAgLy8gYWxyZWFkeSBiZWVuIHJlbW92ZWQuIEluIGNhc2UgeW91IG5lZWQgdGhpcyBiZWhhdmlvciB5b3UgY2FuIHByb3ZpZGVcbiAgICAgICAgLy8gYSBjaGlsZEZhY3RvcnkgZnVuY3Rpb24gdG8gd3JhcCBldmVyeSBjaGlsZCwgZXZlbiB0aGUgb25lcyB0aGF0IGFyZVxuICAgICAgICAvLyBsZWF2aW5nLlxuICAgICAgICBjaGlsZHJlblRvUmVuZGVyLnB1c2goX3JlYWN0Mi5kZWZhdWx0LmNsb25lRWxlbWVudChmYWN0b3J5Q2hpbGQsIHtcbiAgICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgICByZWY6IHJlZlxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGZvciAodmFyIGtleSBpbiB0aGlzLnN0YXRlLmNoaWxkcmVuKSB7XG4gICAgICBfbG9vcChrZXkpO1xuICAgIH1cblxuICAgIC8vIERvIG5vdCBmb3J3YXJkIFRyYW5zaXRpb25Hcm91cCBwcm9wcyB0byBwcmltaXRpdmUgRE9NIG5vZGVzXG4gICAgdmFyIHByb3BzID0gX2V4dGVuZHMoe30sIHRoaXMucHJvcHMpO1xuICAgIGRlbGV0ZSBwcm9wcy50cmFuc2l0aW9uTGVhdmU7XG4gICAgZGVsZXRlIHByb3BzLnRyYW5zaXRpb25OYW1lO1xuICAgIGRlbGV0ZSBwcm9wcy50cmFuc2l0aW9uQXBwZWFyO1xuICAgIGRlbGV0ZSBwcm9wcy50cmFuc2l0aW9uRW50ZXI7XG4gICAgZGVsZXRlIHByb3BzLmNoaWxkRmFjdG9yeTtcbiAgICBkZWxldGUgcHJvcHMudHJhbnNpdGlvbkxlYXZlVGltZW91dDtcbiAgICBkZWxldGUgcHJvcHMudHJhbnNpdGlvbkVudGVyVGltZW91dDtcbiAgICBkZWxldGUgcHJvcHMudHJhbnNpdGlvbkFwcGVhclRpbWVvdXQ7XG4gICAgZGVsZXRlIHByb3BzLmNvbXBvbmVudDtcblxuICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCh0aGlzLnByb3BzLmNvbXBvbmVudCwgcHJvcHMsIGNoaWxkcmVuVG9SZW5kZXIpO1xuICB9O1xuXG4gIHJldHVybiBUcmFuc2l0aW9uR3JvdXA7XG59KF9yZWFjdDIuZGVmYXVsdC5Db21wb25lbnQpO1xuXG5UcmFuc2l0aW9uR3JvdXAuZGlzcGxheU5hbWUgPSAnVHJhbnNpdGlvbkdyb3VwJztcblxuVHJhbnNpdGlvbkdyb3VwLnByb3BUeXBlcyA9ICBmYWxzZSA/IHByb3BUeXBlcyA6IHt9O1xuVHJhbnNpdGlvbkdyb3VwLmRlZmF1bHRQcm9wcyA9IGRlZmF1bHRQcm9wcztcblxuZXhwb3J0cy5kZWZhdWx0ID0gVHJhbnNpdGlvbkdyb3VwO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbm9kZV9tb2R1bGVzL3JlYWN0LXRyYW5zaXRpb24tZ3JvdXAvdXRpbHMvQ2hpbGRNYXBwaW5nLmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmdldENoaWxkTWFwcGluZyA9IGdldENoaWxkTWFwcGluZztcbmV4cG9ydHMubWVyZ2VDaGlsZE1hcHBpbmdzID0gbWVyZ2VDaGlsZE1hcHBpbmdzO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0L3JlYWN0LmpzXCIpO1xuXG4vKipcbiAqIEdpdmVuIGB0aGlzLnByb3BzLmNoaWxkcmVuYCwgcmV0dXJuIGFuIG9iamVjdCBtYXBwaW5nIGtleSB0byBjaGlsZC5cbiAqXG4gKiBAcGFyYW0geyp9IGNoaWxkcmVuIGB0aGlzLnByb3BzLmNoaWxkcmVuYFxuICogQHJldHVybiB7b2JqZWN0fSBNYXBwaW5nIG9mIGtleSB0byBjaGlsZFxuICovXG5mdW5jdGlvbiBnZXRDaGlsZE1hcHBpbmcoY2hpbGRyZW4pIHtcbiAgaWYgKCFjaGlsZHJlbikge1xuICAgIHJldHVybiBjaGlsZHJlbjtcbiAgfVxuICB2YXIgcmVzdWx0ID0ge307XG4gIF9yZWFjdC5DaGlsZHJlbi5tYXAoY2hpbGRyZW4sIGZ1bmN0aW9uIChjaGlsZCkge1xuICAgIHJldHVybiBjaGlsZDtcbiAgfSkuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICByZXN1bHRbY2hpbGQua2V5XSA9IGNoaWxkO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBXaGVuIHlvdSdyZSBhZGRpbmcgb3IgcmVtb3ZpbmcgY2hpbGRyZW4gc29tZSBtYXkgYmUgYWRkZWQgb3IgcmVtb3ZlZCBpbiB0aGVcbiAqIHNhbWUgcmVuZGVyIHBhc3MuIFdlIHdhbnQgdG8gc2hvdyAqYm90aCogc2luY2Ugd2Ugd2FudCB0byBzaW11bHRhbmVvdXNseVxuICogYW5pbWF0ZSBlbGVtZW50cyBpbiBhbmQgb3V0LiBUaGlzIGZ1bmN0aW9uIHRha2VzIGEgcHJldmlvdXMgc2V0IG9mIGtleXNcbiAqIGFuZCBhIG5ldyBzZXQgb2Yga2V5cyBhbmQgbWVyZ2VzIHRoZW0gd2l0aCBpdHMgYmVzdCBndWVzcyBvZiB0aGUgY29ycmVjdFxuICogb3JkZXJpbmcuIEluIHRoZSBmdXR1cmUgd2UgbWF5IGV4cG9zZSBzb21lIG9mIHRoZSB1dGlsaXRpZXMgaW5cbiAqIFJlYWN0TXVsdGlDaGlsZCB0byBtYWtlIHRoaXMgZWFzeSwgYnV0IGZvciBub3cgUmVhY3QgaXRzZWxmIGRvZXMgbm90XG4gKiBkaXJlY3RseSBoYXZlIHRoaXMgY29uY2VwdCBvZiB0aGUgdW5pb24gb2YgcHJldkNoaWxkcmVuIGFuZCBuZXh0Q2hpbGRyZW5cbiAqIHNvIHdlIGltcGxlbWVudCBpdCBoZXJlLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBwcmV2IHByZXYgY2hpbGRyZW4gYXMgcmV0dXJuZWQgZnJvbVxuICogYFJlYWN0VHJhbnNpdGlvbkNoaWxkTWFwcGluZy5nZXRDaGlsZE1hcHBpbmcoKWAuXG4gKiBAcGFyYW0ge29iamVjdH0gbmV4dCBuZXh0IGNoaWxkcmVuIGFzIHJldHVybmVkIGZyb21cbiAqIGBSZWFjdFRyYW5zaXRpb25DaGlsZE1hcHBpbmcuZ2V0Q2hpbGRNYXBwaW5nKClgLlxuICogQHJldHVybiB7b2JqZWN0fSBhIGtleSBzZXQgdGhhdCBjb250YWlucyBhbGwga2V5cyBpbiBgcHJldmAgYW5kIGFsbCBrZXlzXG4gKiBpbiBgbmV4dGAgaW4gYSByZWFzb25hYmxlIG9yZGVyLlxuICovXG5mdW5jdGlvbiBtZXJnZUNoaWxkTWFwcGluZ3MocHJldiwgbmV4dCkge1xuICBwcmV2ID0gcHJldiB8fCB7fTtcbiAgbmV4dCA9IG5leHQgfHwge307XG5cbiAgZnVuY3Rpb24gZ2V0VmFsdWVGb3JLZXkoa2V5KSB7XG4gICAgaWYgKG5leHQuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgcmV0dXJuIG5leHRba2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJldltrZXldO1xuICB9XG5cbiAgLy8gRm9yIGVhY2gga2V5IG9mIGBuZXh0YCwgdGhlIGxpc3Qgb2Yga2V5cyB0byBpbnNlcnQgYmVmb3JlIHRoYXQga2V5IGluXG4gIC8vIHRoZSBjb21iaW5lZCBsaXN0XG4gIHZhciBuZXh0S2V5c1BlbmRpbmcgPSB7fTtcblxuICB2YXIgcGVuZGluZ0tleXMgPSBbXTtcbiAgZm9yICh2YXIgcHJldktleSBpbiBwcmV2KSB7XG4gICAgaWYgKG5leHQuaGFzT3duUHJvcGVydHkocHJldktleSkpIHtcbiAgICAgIGlmIChwZW5kaW5nS2V5cy5sZW5ndGgpIHtcbiAgICAgICAgbmV4dEtleXNQZW5kaW5nW3ByZXZLZXldID0gcGVuZGluZ0tleXM7XG4gICAgICAgIHBlbmRpbmdLZXlzID0gW107XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHBlbmRpbmdLZXlzLnB1c2gocHJldktleSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIGkgPSB2b2lkIDA7XG4gIHZhciBjaGlsZE1hcHBpbmcgPSB7fTtcbiAgZm9yICh2YXIgbmV4dEtleSBpbiBuZXh0KSB7XG4gICAgaWYgKG5leHRLZXlzUGVuZGluZy5oYXNPd25Qcm9wZXJ0eShuZXh0S2V5KSkge1xuICAgICAgZm9yIChpID0gMDsgaSA8IG5leHRLZXlzUGVuZGluZ1tuZXh0S2V5XS5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcGVuZGluZ05leHRLZXkgPSBuZXh0S2V5c1BlbmRpbmdbbmV4dEtleV1baV07XG4gICAgICAgIGNoaWxkTWFwcGluZ1tuZXh0S2V5c1BlbmRpbmdbbmV4dEtleV1baV1dID0gZ2V0VmFsdWVGb3JLZXkocGVuZGluZ05leHRLZXkpO1xuICAgICAgfVxuICAgIH1cbiAgICBjaGlsZE1hcHBpbmdbbmV4dEtleV0gPSBnZXRWYWx1ZUZvcktleShuZXh0S2V5KTtcbiAgfVxuXG4gIC8vIEZpbmFsbHksIGFkZCB0aGUga2V5cyB3aGljaCBkaWRuJ3QgYXBwZWFyIGJlZm9yZSBhbnkga2V5IGluIGBuZXh0YFxuICBmb3IgKGkgPSAwOyBpIDwgcGVuZGluZ0tleXMubGVuZ3RoOyBpKyspIHtcbiAgICBjaGlsZE1hcHBpbmdbcGVuZGluZ0tleXNbaV1dID0gZ2V0VmFsdWVGb3JLZXkocGVuZGluZ0tleXNbaV0pO1xuICB9XG5cbiAgcmV0dXJuIGNoaWxkTWFwcGluZztcbn1cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvcmVhY3QtdHJhbnNpdGlvbi1ncm91cC91dGlscy9Qcm9wVHlwZXMuanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMubmFtZVNoYXBlID0gdW5kZWZpbmVkO1xuZXhwb3J0cy50cmFuc2l0aW9uVGltZW91dCA9IHRyYW5zaXRpb25UaW1lb3V0O1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0L3JlYWN0LmpzXCIpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wcm9wVHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9pbmRleC5qc1wiKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG59XG5cbmZ1bmN0aW9uIHRyYW5zaXRpb25UaW1lb3V0KHRyYW5zaXRpb25UeXBlKSB7XG4gIHZhciB0aW1lb3V0UHJvcE5hbWUgPSAndHJhbnNpdGlvbicgKyB0cmFuc2l0aW9uVHlwZSArICdUaW1lb3V0JztcbiAgdmFyIGVuYWJsZWRQcm9wTmFtZSA9ICd0cmFuc2l0aW9uJyArIHRyYW5zaXRpb25UeXBlO1xuXG4gIHJldHVybiBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICAvLyBJZiB0aGUgdHJhbnNpdGlvbiBpcyBlbmFibGVkXG4gICAgaWYgKHByb3BzW2VuYWJsZWRQcm9wTmFtZV0pIHtcbiAgICAgIC8vIElmIG5vIHRpbWVvdXQgZHVyYXRpb24gaXMgcHJvdmlkZWRcbiAgICAgIGlmIChwcm9wc1t0aW1lb3V0UHJvcE5hbWVdID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBFcnJvcih0aW1lb3V0UHJvcE5hbWUgKyAnIHdhc25cXCd0IHN1cHBsaWVkIHRvIENTU1RyYW5zaXRpb25Hcm91cDogJyArICd0aGlzIGNhbiBjYXVzZSB1bnJlbGlhYmxlIGFuaW1hdGlvbnMgYW5kIHdvblxcJ3QgYmUgc3VwcG9ydGVkIGluICcgKyAnYSBmdXR1cmUgdmVyc2lvbiBvZiBSZWFjdC4gU2VlICcgKyAnaHR0cHM6Ly9mYi5tZS9yZWFjdC1hbmltYXRpb24tdHJhbnNpdGlvbi1ncm91cC10aW1lb3V0IGZvciBtb3JlICcgKyAnaW5mb3JtYXRpb24uJyk7XG5cbiAgICAgICAgLy8gSWYgdGhlIGR1cmF0aW9uIGlzbid0IGEgbnVtYmVyXG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwcm9wc1t0aW1lb3V0UHJvcE5hbWVdICE9PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm4gbmV3IEVycm9yKHRpbWVvdXRQcm9wTmFtZSArICcgbXVzdCBiZSBhIG51bWJlciAoaW4gbWlsbGlzZWNvbmRzKScpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9O1xufVxuXG52YXIgbmFtZVNoYXBlID0gZXhwb3J0cy5uYW1lU2hhcGUgPSBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9uZU9mVHlwZShbX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsIF9wcm9wVHlwZXMyLmRlZmF1bHQuc2hhcGUoe1xuICBlbnRlcjogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGxlYXZlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgYWN0aXZlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZ1xufSksIF9wcm9wVHlwZXMyLmRlZmF1bHQuc2hhcGUoe1xuICBlbnRlcjogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGVudGVyQWN0aXZlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgbGVhdmU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBsZWF2ZUFjdGl2ZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGFwcGVhcjogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGFwcGVhckFjdGl2ZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmdcbn0pXSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbm9kZV9tb2R1bGVzL3Jlc2VsZWN0L2xpYi9pbmRleC5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmRlZmF1bHRNZW1vaXplID0gZGVmYXVsdE1lbW9pemU7XG5leHBvcnRzLmNyZWF0ZVNlbGVjdG9yQ3JlYXRvciA9IGNyZWF0ZVNlbGVjdG9yQ3JlYXRvcjtcbmV4cG9ydHMuY3JlYXRlU3RydWN0dXJlZFNlbGVjdG9yID0gY3JlYXRlU3RydWN0dXJlZFNlbGVjdG9yO1xuZnVuY3Rpb24gZGVmYXVsdEVxdWFsaXR5Q2hlY2soYSwgYikge1xuICByZXR1cm4gYSA9PT0gYjtcbn1cblxuZnVuY3Rpb24gYXJlQXJndW1lbnRzU2hhbGxvd2x5RXF1YWwoZXF1YWxpdHlDaGVjaywgcHJldiwgbmV4dCkge1xuICBpZiAocHJldiA9PT0gbnVsbCB8fCBuZXh0ID09PSBudWxsIHx8IHByZXYubGVuZ3RoICE9PSBuZXh0Lmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIERvIHRoaXMgaW4gYSBmb3IgbG9vcCAoYW5kIG5vdCBhIGBmb3JFYWNoYCBvciBhbiBgZXZlcnlgKSBzbyB3ZSBjYW4gZGV0ZXJtaW5lIGVxdWFsaXR5IGFzIGZhc3QgYXMgcG9zc2libGUuXG4gIHZhciBsZW5ndGggPSBwcmV2Lmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGlmICghZXF1YWxpdHlDaGVjayhwcmV2W2ldLCBuZXh0W2ldKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBkZWZhdWx0TWVtb2l6ZShmdW5jKSB7XG4gIHZhciBlcXVhbGl0eUNoZWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBkZWZhdWx0RXF1YWxpdHlDaGVjaztcblxuICB2YXIgbGFzdEFyZ3MgPSBudWxsO1xuICB2YXIgbGFzdFJlc3VsdCA9IG51bGw7XG4gIC8vIHdlIHJlZmVyZW5jZSBhcmd1bWVudHMgaW5zdGVhZCBvZiBzcHJlYWRpbmcgdGhlbSBmb3IgcGVyZm9ybWFuY2UgcmVhc29uc1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGlmICghYXJlQXJndW1lbnRzU2hhbGxvd2x5RXF1YWwoZXF1YWxpdHlDaGVjaywgbGFzdEFyZ3MsIGFyZ3VtZW50cykpIHtcbiAgICAgIC8vIGFwcGx5IGFyZ3VtZW50cyBpbnN0ZWFkIG9mIHNwcmVhZGluZyBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICBsYXN0UmVzdWx0ID0gZnVuYy5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgIH1cblxuICAgIGxhc3RBcmdzID0gYXJndW1lbnRzO1xuICAgIHJldHVybiBsYXN0UmVzdWx0O1xuICB9O1xufVxuXG5mdW5jdGlvbiBnZXREZXBlbmRlbmNpZXMoZnVuY3MpIHtcbiAgdmFyIGRlcGVuZGVuY2llcyA9IEFycmF5LmlzQXJyYXkoZnVuY3NbMF0pID8gZnVuY3NbMF0gOiBmdW5jcztcblxuICBpZiAoIWRlcGVuZGVuY2llcy5ldmVyeShmdW5jdGlvbiAoZGVwKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBkZXAgPT09ICdmdW5jdGlvbic7XG4gIH0pKSB7XG4gICAgdmFyIGRlcGVuZGVuY3lUeXBlcyA9IGRlcGVuZGVuY2llcy5tYXAoZnVuY3Rpb24gKGRlcCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiBkZXAgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGRlcCk7XG4gICAgfSkuam9pbignLCAnKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1NlbGVjdG9yIGNyZWF0b3JzIGV4cGVjdCBhbGwgaW5wdXQtc2VsZWN0b3JzIHRvIGJlIGZ1bmN0aW9ucywgJyArICgnaW5zdGVhZCByZWNlaXZlZCB0aGUgZm9sbG93aW5nIHR5cGVzOiBbJyArIGRlcGVuZGVuY3lUeXBlcyArICddJykpO1xuICB9XG5cbiAgcmV0dXJuIGRlcGVuZGVuY2llcztcbn1cblxuZnVuY3Rpb24gY3JlYXRlU2VsZWN0b3JDcmVhdG9yKG1lbW9pemUpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIG1lbW9pemVPcHRpb25zID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIG1lbW9pemVPcHRpb25zW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBmdW5jcyA9IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICBmdW5jc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgIH1cblxuICAgIHZhciByZWNvbXB1dGF0aW9ucyA9IDA7XG4gICAgdmFyIHJlc3VsdEZ1bmMgPSBmdW5jcy5wb3AoKTtcbiAgICB2YXIgZGVwZW5kZW5jaWVzID0gZ2V0RGVwZW5kZW5jaWVzKGZ1bmNzKTtcblxuICAgIHZhciBtZW1vaXplZFJlc3VsdEZ1bmMgPSBtZW1vaXplLmFwcGx5KHVuZGVmaW5lZCwgW2Z1bmN0aW9uICgpIHtcbiAgICAgIHJlY29tcHV0YXRpb25zKys7XG4gICAgICAvLyBhcHBseSBhcmd1bWVudHMgaW5zdGVhZCBvZiBzcHJlYWRpbmcgZm9yIHBlcmZvcm1hbmNlLlxuICAgICAgcmV0dXJuIHJlc3VsdEZ1bmMuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICB9XS5jb25jYXQobWVtb2l6ZU9wdGlvbnMpKTtcblxuICAgIC8vIElmIGEgc2VsZWN0b3IgaXMgY2FsbGVkIHdpdGggdGhlIGV4YWN0IHNhbWUgYXJndW1lbnRzIHdlIGRvbid0IG5lZWQgdG8gdHJhdmVyc2Ugb3VyIGRlcGVuZGVuY2llcyBhZ2Fpbi5cbiAgICB2YXIgc2VsZWN0b3IgPSBkZWZhdWx0TWVtb2l6ZShmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcGFyYW1zID0gW107XG4gICAgICB2YXIgbGVuZ3RoID0gZGVwZW5kZW5jaWVzLmxlbmd0aDtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBhcHBseSBhcmd1bWVudHMgaW5zdGVhZCBvZiBzcHJlYWRpbmcgYW5kIG11dGF0ZSBhIGxvY2FsIGxpc3Qgb2YgcGFyYW1zIGZvciBwZXJmb3JtYW5jZS5cbiAgICAgICAgcGFyYW1zLnB1c2goZGVwZW5kZW5jaWVzW2ldLmFwcGx5KG51bGwsIGFyZ3VtZW50cykpO1xuICAgICAgfVxuXG4gICAgICAvLyBhcHBseSBhcmd1bWVudHMgaW5zdGVhZCBvZiBzcHJlYWRpbmcgZm9yIHBlcmZvcm1hbmNlLlxuICAgICAgcmV0dXJuIG1lbW9pemVkUmVzdWx0RnVuYy5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgIH0pO1xuXG4gICAgc2VsZWN0b3IucmVzdWx0RnVuYyA9IHJlc3VsdEZ1bmM7XG4gICAgc2VsZWN0b3IucmVjb21wdXRhdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gcmVjb21wdXRhdGlvbnM7XG4gICAgfTtcbiAgICBzZWxlY3Rvci5yZXNldFJlY29tcHV0YXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHJlY29tcHV0YXRpb25zID0gMDtcbiAgICB9O1xuICAgIHJldHVybiBzZWxlY3RvcjtcbiAgfTtcbn1cblxudmFyIGNyZWF0ZVNlbGVjdG9yID0gZXhwb3J0cy5jcmVhdGVTZWxlY3RvciA9IGNyZWF0ZVNlbGVjdG9yQ3JlYXRvcihkZWZhdWx0TWVtb2l6ZSk7XG5cbmZ1bmN0aW9uIGNyZWF0ZVN0cnVjdHVyZWRTZWxlY3RvcihzZWxlY3RvcnMpIHtcbiAgdmFyIHNlbGVjdG9yQ3JlYXRvciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogY3JlYXRlU2VsZWN0b3I7XG5cbiAgaWYgKCh0eXBlb2Ygc2VsZWN0b3JzID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihzZWxlY3RvcnMpKSAhPT0gJ29iamVjdCcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NyZWF0ZVN0cnVjdHVyZWRTZWxlY3RvciBleHBlY3RzIGZpcnN0IGFyZ3VtZW50IHRvIGJlIGFuIG9iamVjdCAnICsgKCd3aGVyZSBlYWNoIHByb3BlcnR5IGlzIGEgc2VsZWN0b3IsIGluc3RlYWQgcmVjZWl2ZWQgYSAnICsgKHR5cGVvZiBzZWxlY3RvcnMgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHNlbGVjdG9ycykpKSk7XG4gIH1cbiAgdmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyhzZWxlY3RvcnMpO1xuICByZXR1cm4gc2VsZWN0b3JDcmVhdG9yKG9iamVjdEtleXMubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gc2VsZWN0b3JzW2tleV07XG4gIH0pLCBmdW5jdGlvbiAoKSB7XG4gICAgZm9yICh2YXIgX2xlbjMgPSBhcmd1bWVudHMubGVuZ3RoLCB2YWx1ZXMgPSBBcnJheShfbGVuMyksIF9rZXkzID0gMDsgX2tleTMgPCBfbGVuMzsgX2tleTMrKykge1xuICAgICAgdmFsdWVzW19rZXkzXSA9IGFyZ3VtZW50c1tfa2V5M107XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlcy5yZWR1Y2UoZnVuY3Rpb24gKGNvbXBvc2l0aW9uLCB2YWx1ZSwgaW5kZXgpIHtcbiAgICAgIGNvbXBvc2l0aW9uW29iamVjdEtleXNbaW5kZXhdXSA9IHZhbHVlO1xuICAgICAgcmV0dXJuIGNvbXBvc2l0aW9uO1xuICAgIH0sIHt9KTtcbiAgfSk7XG59XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2NvbXBvbmVudHMvRGV2aWNlTGlzdEl0ZW0vRGV2aWNlTGlzdEl0ZW0uanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC9yZWFjdC5qc1wiKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3RSb3V0ZXJEb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcmVhY3Qtcm91dGVyLWRvbS9lcy9pbmRleC5qc1wiKTtcblxudmFyIF9wcm9wVHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9pbmRleC5qc1wiKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxudmFyIF9Ub2dnbGVTZXR0aW5ncyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9jb21wb25lbnRzL1RvZ2dsZVNldHRpbmdzL1RvZ2dsZVNldHRpbmdzLmpzXCIpO1xuXG52YXIgX1RvZ2dsZVNldHRpbmdzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1RvZ2dsZVNldHRpbmdzKTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2NvbXBvbmVudHMvRGV2aWNlTGlzdEl0ZW0vRGV2aWNlTGlzdEl0ZW0uc2Nzc1wiKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgRGV2aWNlTGlzdEl0ZW0gPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoRGV2aWNlTGlzdEl0ZW0sIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIERldmljZUxpc3RJdGVtKHByb3BzKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERldmljZUxpc3RJdGVtKTtcblxuICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChEZXZpY2VMaXN0SXRlbS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKERldmljZUxpc3RJdGVtKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgX3RoaXMuc2V0RGV2aWNlSWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMucHJvcHMuc2V0UG9wdXBTaG93bihfdGhpcy5wcm9wcy5kYXRhLl9pZCk7XG4gICAgfTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoRGV2aWNlTGlzdEl0ZW0sIFt7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyBjbGFzc05hbWU6ICdkZXZpY2UtaXRlbScgfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgeyBjbGFzc05hbWU6ICdkZXZpY2UtaXRlbV9faW5mbycgfSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgIF9yZWFjdFJvdXRlckRvbS5MaW5rLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdkZXZpY2UtaXRlbV9faW5mby1uYW1lJywgdG86ICcvZGV2aWNlcy9kZXZpY2UvJyArIHRoaXMucHJvcHMuZGF0YS5faWQgfSxcbiAgICAgICAgICAgIHRoaXMucHJvcHMuZGF0YS5uYW1lXG4gICAgICAgICAgKSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdkZXZpY2UtaXRlbV9faW5mby1zdGF0dXMnIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfVG9nZ2xlU2V0dGluZ3MyLmRlZmF1bHQsIHtcbiAgICAgICAgICAgICAgY2hlY2tlZDogdGhpcy5wcm9wcy5kYXRhLnN0YXR1cyxcbiAgICAgICAgICAgICAgaXRlbUlkOiB0aGlzLnByb3BzLmRhdGEuX2lkLFxuICAgICAgICAgICAgICBzZXRJdGVtVmFsdWU6IHRoaXMucHJvcHMuY2hhbmdlU3RhdHVzIH0pXG4gICAgICAgICAgKVxuICAgICAgICApLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICB7IGNsYXNzTmFtZTogJ2RldmljZS1pdGVtX19kZXNjcmlwdGlvbicgfSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdkZXZpY2UtaXRlbV9fZGVzY3JpcHRpb24tbG9jYXRpb24nIH0sXG4gICAgICAgICAgICB0aGlzLnByb3BzLmxvY2F0aW9uXG4gICAgICAgICAgKSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdkZXZpY2UtaXRlbV9fZGVzY3JpcHRpb24taWNvbicgfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdkZXZpY2UtaXRlbV9fZGVzY3JpcHRpb24taWNvbi1kZWxldGUnIH0sXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdhJywgeyBjbGFzc05hbWU6ICdmYSBmYS10cmFzaCcsXG4gICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5zZXREZXZpY2VJZCB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gRGV2aWNlTGlzdEl0ZW07XG59KF9yZWFjdDIuZGVmYXVsdC5Db21wb25lbnQpO1xuXG5EZXZpY2VMaXN0SXRlbS5wcm9wVHlwZXMgPSB7XG4gIGNoYW5nZVN0YXR1czogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBkZWxldGVEZXZpY2U6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgc2V0UG9wdXBTaG93bjogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBsb2NhdGlvbjogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGRhdGE6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc2hhcGUoe1xuICAgIHN0YXR1czogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sZWFuLFxuICAgIF9pZDogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gICAgbmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gICAgbG9jYXRpb246IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nXG4gIH0pXG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBEZXZpY2VMaXN0SXRlbTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvY29tcG9uZW50cy9EZXZpY2VMaXN0SXRlbS9EZXZpY2VMaXN0SXRlbS5zY3NzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2NvbXBvbmVudHMvRGV2aXNlc1NlY3Rpb24vRGV2aXNlc1NlY3Rpb24uanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC9yZWFjdC5qc1wiKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3RSb3V0ZXJEb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcmVhY3Qtcm91dGVyLWRvbS9lcy9pbmRleC5qc1wiKTtcblxudmFyIF9NZXNzYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2NvbXBvbmVudHMvTWVzc2FnZS9NZXNzYWdlLmpzXCIpO1xuXG52YXIgX1BvcHVwID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2NvbXBvbmVudHMvUG9wdXAvUG9wdXAuanNcIik7XG5cbnZhciBfQnV0dG9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2NvbXBvbmVudHMvQnV0dG9uL0J1dHRvbi5qc1wiKTtcblxudmFyIF9MaXN0SGVhZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2NvbXBvbmVudHMvTGlzdEhlYWRlci9MaXN0SGVhZGVyLmpzXCIpO1xuXG52YXIgX0xpc3RIZWFkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTGlzdEhlYWRlcik7XG5cbnZhciBfcHJvcFR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3Byb3AtdHlwZXMvaW5kZXguanNcIik7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIERldmljZXNTZWN0aW9uID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKERldmljZXNTZWN0aW9uLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBEZXZpY2VzU2VjdGlvbihwcm9wcykge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEZXZpY2VzU2VjdGlvbik7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKERldmljZXNTZWN0aW9uLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRGV2aWNlc1NlY3Rpb24pKS5jYWxsKHRoaXMsIHByb3BzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoRGV2aWNlc1NlY3Rpb24sIFt7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciBmaWx0ZXJPcHRpb24gPSB0aGlzLnByb3BzLmZpbHRlck9wdGlvbjtcblxuICAgICAgaWYgKHR5cGVvZiBmaWx0ZXJPcHRpb24gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMucHJvcHMuZmlsdGVyQWN0aW9uKGZpbHRlck9wdGlvbik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ3NlY3Rpb24nLFxuICAgICAgICB7IGNsYXNzTmFtZTogJ2RldmljZS1saXN0JyB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnaDEnLFxuICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZGV2aWNlLWxpc3RfX3RpdGxlJyB9LFxuICAgICAgICAgIHRoaXMucHJvcHMubG9jYXRpb25PZkRldmljZXMgPyB0aGlzLnByb3BzLmxvY2F0aW9uT2ZEZXZpY2VzLnRvVXBwZXJDYXNlKCkgOiAnWW91ciBkZXZpY2VzJ1xuICAgICAgICApLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfTGlzdEhlYWRlcjIuZGVmYXVsdCwge1xuICAgICAgICAgIHF1YW50aXR5OiB0aGlzLnByb3BzLnF1YW50aXR5LFxuICAgICAgICAgIGxvY2F0aW9uOiB0aGlzLnByb3BzLmxvY2F0aW9uLFxuICAgICAgICAgIGhpc3Rvcnk6IHRoaXMucHJvcHMuaGlzdG9yeSxcbiAgICAgICAgICBtYXRjaDogdGhpcy5wcm9wcy5tYXRjaCB9KSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ3NlY3Rpb24nLFxuICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZGV2aWNlLWxpc3RfX2NvbnRlbnQnIH0sXG4gICAgICAgICAgdGhpcy5wcm9wcy5jaGlsZHJlblxuICAgICAgICApLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICBfUG9wdXAuUG9wdXAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgc2V0UG9wdXBTaG93bjogdGhpcy5wcm9wcy5zZXRQb3B1cFNob3duLFxuICAgICAgICAgICAgcG9wdXBTaG93bjogdGhpcy5wcm9wcy5wb3B1cFNob3duLFxuICAgICAgICAgICAgaGVhZGVyOiAnQ29uZmlybSB0aGUgYWN0aW9uJyxcbiAgICAgICAgICAgIHRleHQ6ICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcmVtb3ZlIHRoZSBkZXZpY2U/JyB9LFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9CdXR0b24uQnV0dG9uLCB7XG4gICAgICAgICAgICBzZXRQb3B1cFNob3duOiB0aGlzLnByb3BzLnNldFBvcHVwU2hvd24sXG4gICAgICAgICAgICBva0hhbmRsZXI6IGZ1bmN0aW9uIG9rSGFuZGxlcigpIHtcbiAgICAgICAgICAgICAgX3RoaXMyLnByb3BzLmRlbGV0ZURldmljZShfdGhpczIucHJvcHMuY3VycmVudElkKTtcbiAgICAgICAgICAgICAgX3RoaXMyLnByb3BzLnNldFBvcHVwU2hvd24oKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbGFzc05hbWU6ICdidG4gcG9wdXBfX2J0bicsXG4gICAgICAgICAgICBpbm5lclRleHQ6ICdPaydcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfQnV0dG9uLkJ1dHRvbiwge1xuICAgICAgICAgICAgb2tIYW5kbGVyOiBmdW5jdGlvbiBva0hhbmRsZXIoKSB7XG4gICAgICAgICAgICAgIF90aGlzMi5wcm9wcy5zZXRQb3B1cFNob3duKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xhc3NOYW1lOiAnYnRuIGJ0bi0tZGVmYXVsdCBwb3B1cF9fYnRuJyxcbiAgICAgICAgICAgIGlubmVyVGV4dDogJ0NhbmNlbCdcbiAgICAgICAgICB9KVxuICAgICAgICApLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfTWVzc2FnZS5NZXNzYWdlLCB7XG4gICAgICAgICAgY2xlYXJTdGF0dXM6IHRoaXMucHJvcHMuY2xlYXJTdGF0dXMsXG4gICAgICAgICAgaGVhZGVyOiAnRXJyb3InXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBEZXZpY2VzU2VjdGlvbjtcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbkRldmljZXNTZWN0aW9uLnByb3BUeXBlcyA9IHtcbiAgY2hhbmdlU3RhdHVzOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIGRlbGV0ZURldmljZTogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBsb2FkRGV2aWNlczogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBmaWx0ZXJPcHRpb246IF9wcm9wVHlwZXMyLmRlZmF1bHQuYW55LFxuICBmaWx0ZXJBY3Rpb246IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgZGV2aWNlczogX3Byb3BUeXBlczIuZGVmYXVsdC5hcnJheSxcbiAgbG9jYXRpb246IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBoaXN0b3J5OiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgbWF0Y2g6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBjaGlsZHJlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5hbnksXG4gIGNsZWFyU3RhdHVzOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIGN1cnJlbnRJZDogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIHNldFBvcHVwU2hvd246IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgcG9wdXBTaG93bjogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICBxdWFudGl0eTogX3Byb3BUeXBlczIuZGVmYXVsdC5udW1iZXIsXG4gIGxvY2F0aW9uT2ZEZXZpY2VzOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZ1xufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gRGV2aWNlc1NlY3Rpb247XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2NvbXBvbmVudHMvRmlsdGVyU2VsZWN0L0ZpbHRlclNlbGVjdC5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0L3JlYWN0LmpzXCIpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wcm9wVHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9pbmRleC5qc1wiKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2NvbXBvbmVudHMvRmlsdGVyU2VsZWN0L0ZpbHRlclNlbGVjdC5zY3NzXCIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgRmlsdGVyU2VsZWN0ID0gZnVuY3Rpb24gRmlsdGVyU2VsZWN0KHByb3BzKSB7XG4gIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAnZGl2JyxcbiAgICB7IGNsYXNzTmFtZTogJ2ZpbHRlckJveCcgfSxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICdzZWxlY3QnLFxuICAgICAge1xuICAgICAgICBjbGFzc05hbWU6ICdmaWx0ZXJCb3hfX2ZpbHRlcicsXG4gICAgICAgIHZhbHVlOiBwcm9wcy52YWx1ZSB8fCAnYWxsJyxcbiAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgICAgICByZXR1cm4gcHJvcHMuaGFuZGxlU2VsZWN0KGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgfSB9LFxuICAgICAgcHJvcHMub3B0aW9ucy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdvcHRpb24nLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHZhbHVlOiBpdGVtLnZhbHVlLFxuICAgICAgICAgICAga2V5OiBpdGVtLnZhbHVlIH0sXG4gICAgICAgICAgaXRlbS5pbm5lclRleHRcbiAgICAgICAgKTtcbiAgICAgIH0pXG4gICAgKVxuICApO1xufTtcblxuRmlsdGVyU2VsZWN0LnByb3BUeXBlcyA9IHtcbiAgaGFuZGxlU2VsZWN0OiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMuaXNSZXF1aXJlZCxcbiAgb3B0aW9uczogX3Byb3BUeXBlczIuZGVmYXVsdC5hcnJheSxcbiAgdmFsdWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nXG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBGaWx0ZXJTZWxlY3Q7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2NvbXBvbmVudHMvRmlsdGVyU2VsZWN0L0ZpbHRlclNlbGVjdC5zY3NzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2NvbXBvbmVudHMvTGlzdEhlYWRlci9MaXN0SGVhZGVyLmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcmVhY3QvcmVhY3QuanNcIik7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3JlYWN0Um91dGVyRG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0LXJvdXRlci1kb20vZXMvaW5kZXguanNcIik7XG5cbnZhciBfcmVhY3RSZWR1eCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC1yZWR1eC9lcy9pbmRleC5qc1wiKTtcblxudmFyIF9xdWVyeVN0cmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9xdWVyeS1zdHJpbmcvaW5kZXguanNcIik7XG5cbnZhciBfcXVlcnlTdHJpbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcXVlcnlTdHJpbmcpO1xuXG52YXIgX0ZpbHRlclNlbGVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9jb21wb25lbnRzL0ZpbHRlclNlbGVjdC9GaWx0ZXJTZWxlY3QuanNcIik7XG5cbnZhciBfRmlsdGVyU2VsZWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0ZpbHRlclNlbGVjdCk7XG5cbnZhciBfU2VhcmNoID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2NvbXBvbmVudHMvU2VhcmNoL1NlYXJjaC5qc1wiKTtcblxudmFyIF9TZWFyY2gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU2VhcmNoKTtcblxudmFyIF9kZXZpY2VzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2FjdGlvbnMvZGV2aWNlcy5hY3Rpb24uanNcIik7XG5cbnZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvdXRpbHMvdXRpbHMuanNcIik7XG5cbnZhciBfZmlsdGVyT3B0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9kYXRhL2ZpbHRlck9wdGlvbnMuanNcIik7XG5cbnZhciBfcHJvcFR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3Byb3AtdHlwZXMvaW5kZXguanNcIik7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIExpc3RIZWFkZXIgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoTGlzdEhlYWRlciwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gTGlzdEhlYWRlcihwcm9wcykge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBMaXN0SGVhZGVyKTtcblxuICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChMaXN0SGVhZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTGlzdEhlYWRlcikpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgIF90aGlzLmluaXRpYWxQYXJhbXMgPSB7XG4gICAgICBzZWFyY2g6ICcnLFxuICAgICAgZmlsdGVyOiAnYWxsJ1xuICAgIH07XG5cbiAgICBfdGhpcy5oYW5kbGVGaWx0ZXJTZWxlY3QgPSBmdW5jdGlvbiAoZmlsdGVyT3B0aW9uKSB7XG4gICAgICBfdGhpcy5wcm9wcy5maWx0ZXJBY3Rpb24oZmlsdGVyT3B0aW9uKTtcbiAgICAgIF90aGlzLnVwZGF0ZVVybChfZXh0ZW5kcyh7fSwgX3RoaXMuaW5pdGlhbFBhcmFtcywgeyBmaWx0ZXI6IGZpbHRlck9wdGlvbiB9KSk7XG4gICAgfTtcbiAgICBfdGhpcy5oYW5kbGVTZWFyY2hSZXN1bHQgPSBmdW5jdGlvbiAoc2VhcmNoVmFsdWUpIHtcbiAgICAgIF90aGlzLnByb3BzLmZpbmRJdGVtcyhzZWFyY2hWYWx1ZSk7XG4gICAgICBfdGhpcy51cGRhdGVVcmwoX2V4dGVuZHMoe30sIF90aGlzLmluaXRpYWxQYXJhbXMsIHsgc2VhcmNoOiBzZWFyY2hWYWx1ZSB9KSk7XG4gICAgfTtcbiAgICBfdGhpcy51cGRhdGVVcmwgPSBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICB2YXIgbWF0Y2ggPSBfdGhpcy5wcm9wcy5tYXRjaDtcbiAgICAgIHZhciBoaXN0b3J5ID0gX3RoaXMucHJvcHMuaGlzdG9yeTtcblxuICAgICAgX3RoaXMuaW5pdGlhbFBhcmFtcyA9IHBhcmFtcztcbiAgICAgIGhpc3RvcnkucHVzaCh7XG4gICAgICAgIHBhdGhuYW1lOiBtYXRjaC51cmwsXG4gICAgICAgIHNlYXJjaDogKDAsIF91dGlscy5xdWVyeUZyb21PYmplY3QpKHBhcmFtcylcbiAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKExpc3RIZWFkZXIsIFt7XG4gICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHZhciBsb2NhdGlvbiA9IHRoaXMucHJvcHMubG9jYXRpb247XG4gICAgICB2YXIgc2VhcmNoVmFsdWUgPSBfcXVlcnlTdHJpbmcyLmRlZmF1bHQucGFyc2UobG9jYXRpb24uc2VhcmNoKS5zZWFyY2g7XG4gICAgICB2YXIgZmlsdGVyVmFsdWUgPSBfcXVlcnlTdHJpbmcyLmRlZmF1bHQucGFyc2UobG9jYXRpb24uc2VhcmNoKS5maWx0ZXI7XG5cbiAgICAgIGlmIChzZWFyY2hWYWx1ZSkge1xuICAgICAgICB0aGlzLmhhbmRsZVNlYXJjaFJlc3VsdChzZWFyY2hWYWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChmaWx0ZXJWYWx1ZSkge1xuICAgICAgICB0aGlzLmhhbmRsZUZpbHRlclNlbGVjdChmaWx0ZXJWYWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbFVubW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIHRoaXMucHJvcHMuZmlsdGVyQWN0aW9uKCdhbGwnKTtcbiAgICAgIHRoaXMucHJvcHMuZmluZEl0ZW1zKCcnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdoZWFkZXInLFxuICAgICAgICB7IGNsYXNzTmFtZTogJ2RldmljZS1saXN0X19oZWFkZXInIH0sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9TZWFyY2gyLmRlZmF1bHQsIHtcbiAgICAgICAgICBoYW5kbGVTZWFyY2g6IHRoaXMuaGFuZGxlU2VhcmNoUmVzdWx0LFxuICAgICAgICAgIHF1YW50aXR5OiB0aGlzLnByb3BzLnF1YW50aXR5LFxuICAgICAgICAgIHZhbHVlOiB0aGlzLmluaXRpYWxQYXJhbXMuc2VhcmNoXG4gICAgICAgIH0pLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICB7IGNsYXNzTmFtZTogJ2RldmljZS1saXN0X19oZWFkZXItLXJpZ2h0JyB9LFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9GaWx0ZXJTZWxlY3QyLmRlZmF1bHQsIHtcbiAgICAgICAgICAgIGhhbmRsZVNlbGVjdDogdGhpcy5oYW5kbGVGaWx0ZXJTZWxlY3QsXG4gICAgICAgICAgICBvcHRpb25zOiBfZmlsdGVyT3B0aW9ucy5vcHRpb25zLFxuICAgICAgICAgICAgdmFsdWU6IHRoaXMuaW5pdGlhbFBhcmFtcy5maWx0ZXJcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgIF9yZWFjdFJvdXRlckRvbS5MaW5rLFxuICAgICAgICAgICAgeyB0bzogJy9idWlsZGVyJywgY2xhc3NOYW1lOiAnYnRuIGJ0bi0tcHJpbWFyeSBhZGQtaXRlbS1idXR0b24nIH0sXG4gICAgICAgICAgICAnTmV3J1xuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gTGlzdEhlYWRlcjtcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbnZhciBtYXBTdGF0ZVRvUHJvcHMgPSBmdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUpIHtcbiAgcmV0dXJuIHtcbiAgICBmaWx0ZXJPcHRpb246IHN0YXRlLnNlYXJjaEFuZEZpbHRlci5maWx0ZXJPcHRpb24sXG4gICAgc2VhcmNoOiBzdGF0ZS5zZWFyY2hBbmRGaWx0ZXIuc2VhcmNoVmFsdWVcbiAgfTtcbn07XG5cbnZhciBtYXBEaXNwYXRjaFRvUHJvcHMgPSBmdW5jdGlvbiBtYXBEaXNwYXRjaFRvUHJvcHMoZGlzcGF0Y2gpIHtcbiAgcmV0dXJuIHtcbiAgICBmaWx0ZXJBY3Rpb246IGZ1bmN0aW9uIGZpbHRlckFjdGlvbihmaWx0ZXJPcHRpb24pIHtcbiAgICAgIHJldHVybiBkaXNwYXRjaCgoMCwgX2RldmljZXMuZmlsdGVyQWN0aW9uKShmaWx0ZXJPcHRpb24pKTtcbiAgICB9LFxuICAgIGZpbmRJdGVtczogZnVuY3Rpb24gZmluZEl0ZW1zKHNlYXJjaFZhbHVlKSB7XG4gICAgICByZXR1cm4gZGlzcGF0Y2goKDAsIF9kZXZpY2VzLnNlYXJjaEFjdGlvbikoc2VhcmNoVmFsdWUpKTtcbiAgICB9XG4gIH07XG59O1xuXG5MaXN0SGVhZGVyLnByb3BUeXBlcyA9IHtcbiAgc2VhcmNoOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgZmlsdGVyT3B0aW9uOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgZmlsdGVyQWN0aW9uOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIGZpbmRJdGVtczogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBtYXRjaDogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIGhpc3Rvcnk6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBsb2NhdGlvbjogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIGxvYWREZXZpY2VzOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIHF1YW50aXR5OiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm51bWJlclxufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gKDAsIF9yZWFjdFJlZHV4LmNvbm5lY3QpKG1hcFN0YXRlVG9Qcm9wcywgbWFwRGlzcGF0Y2hUb1Byb3BzKShMaXN0SGVhZGVyKTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvY29tcG9uZW50cy9QYWdpbmF0aW9uL1BhZ2luYXRpb24uanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC9yZWFjdC5qc1wiKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHJvcFR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3Byb3AtdHlwZXMvaW5kZXguanNcIik7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbl9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9jb21wb25lbnRzL1BhZ2luYXRpb24vUGFnaW5hdGlvbi5zY3NzXCIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQYWdpbmF0aW9uID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFBhZ2luYXRpb24sIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFBhZ2luYXRpb24ocHJvcHMpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGFnaW5hdGlvbik7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFBhZ2luYXRpb24uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQYWdpbmF0aW9uKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFBhZ2luYXRpb24sIFt7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciBwYWdlTnVtYmVycyA9IFtdO1xuICAgICAgdmFyIGN1cnJlbnRQYWdlID0gdGhpcy5wcm9wcy5jdXJyZW50UGFnZTtcblxuICAgICAgaWYgKCF0aGlzLnByb3BzLnRvdGFsUGFnZXMgfHwgdGhpcy5wcm9wcy50b3RhbFBhZ2VzIDw9IDEpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IHRoaXMucHJvcHMudG90YWxQYWdlczsgaSsrKSB7XG4gICAgICAgIHBhZ2VOdW1iZXJzLnB1c2goaSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ3VsJyxcbiAgICAgICAgeyBjbGFzc05hbWU6ICdwYWdpbmF0aW9uLXBhZ2VzJyB9LFxuICAgICAgICBwYWdlTnVtYmVycy5tYXAoZnVuY3Rpb24gKG51bWJlcikge1xuICAgICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdsaScsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogY3VycmVudFBhZ2UgPT09IG51bWJlciA/ICdwYWdpbmF0aW9uLXBhZ2VzX19udW0gYnRuJyA6ICdwYWdpbmF0aW9uLXBhZ2VzX19udW0gYnRuIGJ0bi0tZGVmYXVsdCcsXG4gICAgICAgICAgICAgIGtleTogbnVtYmVyLFxuICAgICAgICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICAgICAgICBvbkNsaWNrOiBfdGhpczIucHJvcHMuaGFuZGxlQ2xpY2sgfSxcbiAgICAgICAgICAgIG51bWJlclxuICAgICAgICAgICk7XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQYWdpbmF0aW9uO1xufShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTtcblxuUGFnaW5hdGlvbi5wcm9wVHlwZXMgPSB7XG4gIGhhbmRsZUNsaWNrOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIHNldFBhZ2U6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgY3VycmVudFBhZ2U6IF9wcm9wVHlwZXMyLmRlZmF1bHQubnVtYmVyLFxuICB0b3RhbFBhZ2VzOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm51bWJlclxufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gUGFnaW5hdGlvbjtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvY29tcG9uZW50cy9QYWdpbmF0aW9uL1BhZ2luYXRpb24uc2Nzc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9jb21wb25lbnRzL1NlYXJjaC9TZWFyY2guanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC9yZWFjdC5qc1wiKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHJvcFR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3Byb3AtdHlwZXMvaW5kZXguanNcIik7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbl9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9jb21wb25lbnRzL1NlYXJjaC9zZWFyY2guc2Nzc1wiKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIFNlYXJjaCA9IGZ1bmN0aW9uIFNlYXJjaChwcm9wcykge1xuICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgJ2RpdicsXG4gICAgeyBjbGFzc05hbWU6ICdzZWFyY2hCb3gnIH0sXG4gICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAnZGl2JyxcbiAgICAgIHsgY2xhc3NOYW1lOiAnc2VhcmNoQm94X19yZXN1bHRzJyB9LFxuICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdzcGFuJyxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgcHJvcHMucXVhbnRpdHlcbiAgICAgICksXG4gICAgICAnIGRldmljZXMnXG4gICAgKSxcbiAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICdkaXYnLFxuICAgICAgbnVsbCxcbiAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICBuYW1lOiAnc2VhcmNoJyxcbiAgICAgICAgcGxhY2Vob2xkZXI6ICdGaW5kIGEgZGV2aWNlJyxcbiAgICAgICAgdmFsdWU6IHByb3BzLnZhbHVlLFxuICAgICAgICBjbGFzc05hbWU6ICdzZWFyY2hCb3hfX2ZpZWxkJyxcbiAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgICAgICBwcm9wcy5oYW5kbGVTZWFyY2goZS50YXJnZXQudmFsdWUpO1xuICAgICAgICB9IH0pXG4gICAgKVxuICApO1xufTtcblxuU2VhcmNoLnByb3BUeXBlcyA9IHtcbiAgaGFuZGxlU2VhcmNoOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMuaXNSZXF1aXJlZCxcbiAgcXVhbnRpdHk6IF9wcm9wVHlwZXMyLmRlZmF1bHQubnVtYmVyLFxuICB2YWx1ZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmdcbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFNlYXJjaDtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvY29tcG9uZW50cy9TZWFyY2gvc2VhcmNoLnNjc3NcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvY29tcG9uZW50cy9Ub2dnbGVTZXR0aW5ncy9Ub2dnbGVTZXR0aW5ncy5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdW5kZWZpbmVkO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0L3JlYWN0LmpzXCIpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wcm9wVHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9pbmRleC5qc1wiKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2NvbXBvbmVudHMvVG9nZ2xlU2V0dGluZ3MvVG9nZ2xlU3R5bGUuc2Nzc1wiKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgVG9nZ2xlU2V0dGluZ3MgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoVG9nZ2xlU2V0dGluZ3MsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFRvZ2dsZVNldHRpbmdzKHByb3BzKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRvZ2dsZVNldHRpbmdzKTtcblxuICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChUb2dnbGVTZXR0aW5ncy5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFRvZ2dsZVNldHRpbmdzKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgX3RoaXMub25DaGFuZ2VWYWx1ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBfdGhpcy5wcm9wcy5zZXRJdGVtVmFsdWUoIV90aGlzLnByb3BzLmNoZWNrZWQsIF90aGlzLnByb3BzLml0ZW1JZCwgX3RoaXMucHJvcHMuZGV2aWNlSWQpO1xuICAgIH07XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoVG9nZ2xlU2V0dGluZ3MsIFt7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyBjbGFzc05hbWU6ICcnICsgdGhpcy5wcm9wcy5zdHlsZU5hbWUgfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ2xhYmVsJyxcbiAgICAgICAgICB7IGNsYXNzTmFtZTogJ3N3aXRjaCcgfSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLFxuICAgICAgICAgICAgY2hlY2tlZDogdGhpcy5wcm9wcy5jaGVja2VkLFxuICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMub25DaGFuZ2VWYWx1ZVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdkaXYnLCB7IGNsYXNzTmFtZTogJ3NsaWRlciByb3VuZCcgfSlcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gVG9nZ2xlU2V0dGluZ3M7XG59KF9yZWFjdDIuZGVmYXVsdC5Db21wb25lbnQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBUb2dnbGVTZXR0aW5ncztcblxuXG5Ub2dnbGVTZXR0aW5ncy5wcm9wVHlwZXMgPSB7XG4gIGRldmljZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIHN0eWxlTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGNoZWNrZWQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbC5pc1JlcXVpcmVkLFxuICBzZXRJdGVtVmFsdWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgaXRlbUlkOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmFueSxcbiAgbmV3VmFsdWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBkZXZpY2VJZDogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmdcbn07XG5Ub2dnbGVTZXR0aW5ncy5kZWZhdWx0UHJvcHMgPSB7XG4gIGNoZWNrZWQ6IGZhbHNlXG59O1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9jb21wb25lbnRzL1RvZ2dsZVNldHRpbmdzL1RvZ2dsZVN0eWxlLnNjc3NcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvZGF0YS9maWx0ZXJPcHRpb25zLmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG52YXIgb3B0aW9ucyA9IGV4cG9ydHMub3B0aW9ucyA9IFt7XG4gIHZhbHVlOiAnYWxsJyxcbiAgaW5uZXJUZXh0OiAnQWxsJ1xufSwge1xuICB2YWx1ZTogJ29uJyxcbiAgaW5uZXJUZXh0OiAnU2hvdyBPbidcbn0sIHtcbiAgdmFsdWU6ICdvZmYnLFxuICBpbm5lclRleHQ6ICdTaG93IE9GRidcbn1dO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9wYWdlcy9Mb2NhdGlvbkxpc3QvTG9jYXRpb25MaXN0LmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcmVhY3QvcmVhY3QuanNcIik7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3JlYWN0UmVkdXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcmVhY3QtcmVkdXgvZXMvaW5kZXguanNcIik7XG5cbnZhciBfUGFnaW5hdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9jb21wb25lbnRzL1BhZ2luYXRpb24vUGFnaW5hdGlvbi5qc1wiKTtcblxudmFyIF9QYWdpbmF0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1BhZ2luYXRpb24pO1xuXG52YXIgX0RldmljZUxpc3RJdGVtID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2NvbXBvbmVudHMvRGV2aWNlTGlzdEl0ZW0vRGV2aWNlTGlzdEl0ZW0uanNcIik7XG5cbnZhciBfRGV2aWNlTGlzdEl0ZW0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGV2aWNlTGlzdEl0ZW0pO1xuXG52YXIgX0RldmlzZXNTZWN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2NvbXBvbmVudHMvRGV2aXNlc1NlY3Rpb24vRGV2aXNlc1NlY3Rpb24uanNcIik7XG5cbnZhciBfRGV2aXNlc1NlY3Rpb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGV2aXNlc1NlY3Rpb24pO1xuXG52YXIgX2RldmljZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvYWN0aW9ucy9kZXZpY2VzLmFjdGlvbi5qc1wiKTtcblxudmFyIF9ub3RpZmljYXRpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2FjdGlvbnMvbm90aWZpY2F0aW9ucy5hY3Rpb24uanNcIik7XG5cbnZhciBfc2VsZWN0b3JzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL3NlbGVjdG9ycy9pbmRleC5qc1wiKTtcblxudmFyIF9yZWFjdEFkZG9uc0Nzc1RyYW5zaXRpb25Hcm91cCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC1hZGRvbnMtY3NzLXRyYW5zaXRpb24tZ3JvdXAvaW5kZXguanNcIik7XG5cbnZhciBfcmVhY3RBZGRvbnNDc3NUcmFuc2l0aW9uR3JvdXAyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3RBZGRvbnNDc3NUcmFuc2l0aW9uR3JvdXApO1xuXG52YXIgX3Byb3BUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9wcm9wLXR5cGVzL2luZGV4LmpzXCIpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBMb2NhdGlvbkxpc3QgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoTG9jYXRpb25MaXN0LCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBMb2NhdGlvbkxpc3QocHJvcHMpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTG9jYXRpb25MaXN0KTtcblxuICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChMb2NhdGlvbkxpc3QuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihMb2NhdGlvbkxpc3QpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHBvcHVwU2hvd246IGZhbHNlLFxuICAgICAgY3VycmVudElkOiAnJyxcbiAgICAgIGN1cnJlbnRQYWdlOiAxLFxuICAgICAgZGV2aWNlc1BlclBhZ2U6IDEyXG4gICAgfTtcblxuICAgIF90aGlzLnNldFBvcHVwU2hvd24gPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgIHZhciBjdXJyZW50U3RhdGUgPSBfdGhpcy5zdGF0ZS5wb3B1cFNob3duO1xuXG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHBvcHVwU2hvd246ICFjdXJyZW50U3RhdGUsXG4gICAgICAgIGN1cnJlbnRJZDogaWRcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfdGhpcy5oYW5kbGVDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBjdXJyZW50UGFnZTogTnVtYmVyKGV2ZW50LnRhcmdldC5pZClcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfdGhpcy5zZXRQYWdlID0gZnVuY3Rpb24gKHBhZ2VOdW1iZXIpIHtcbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgY3VycmVudFBhZ2U6IHBhZ2VOdW1iZXJcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfdGhpcy5jaGFuZ2VTdGF0dXMgPSBmdW5jdGlvbiAoc3RhdHVzLCBpZCkge1xuICAgICAgX3RoaXMucHJvcHMuY2hhbmdlU3RhdHVzKHsgc3RhdHVzOiBzdGF0dXMgfSwgaWQpO1xuICAgIH07XG4gICAgX3RoaXMuZGVsZXRlRGV2aWNlID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICBfdGhpcy5wcm9wcy5kZWxldGVEZXZpY2UoaWQpO1xuICAgIH07XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKExvY2F0aW9uTGlzdCwgW3tcbiAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgdGhpcy5wcm9wcy5sb2FkRGV2aWNlcygpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3JlbmRlckRldmljZXMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJEZXZpY2VzKGRldmljZXNJbkxvY2F0aW9uKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgcmV0dXJuIGRldmljZXNJbkxvY2F0aW9uLm1hcChmdW5jdGlvbiAoZGV2aWNlLCBpKSB7XG4gICAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfRGV2aWNlTGlzdEl0ZW0yLmRlZmF1bHQsIHtcbiAgICAgICAgICBkYXRhOiBkZXZpY2UsXG4gICAgICAgICAga2V5OiBpLFxuICAgICAgICAgIGxvY2F0aW9uOiAnJyxcbiAgICAgICAgICBjaGFuZ2VTdGF0dXM6IF90aGlzMi5jaGFuZ2VTdGF0dXMsXG4gICAgICAgICAgc2V0UG9wdXBTaG93bjogX3RoaXMyLnNldFBvcHVwU2hvd24gfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXJEZXZpY2VHcm91cCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckRldmljZUdyb3VwKGRldmljZXNJbkxvY2F0aW9uKSB7XG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7IGNsYXNzTmFtZTogJ2RldmljZS1ncm91cCcgfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgX3JlYWN0QWRkb25zQ3NzVHJhbnNpdGlvbkdyb3VwMi5kZWZhdWx0LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogJ2RldmljZS1ncm91cF9faXRlbXMnLFxuICAgICAgICAgICAgdHJhbnNpdGlvbk5hbWU6ICdoaWRlJyxcbiAgICAgICAgICAgIHRyYW5zaXRpb25FbnRlclRpbWVvdXQ6IDUwMCxcbiAgICAgICAgICAgIHRyYW5zaXRpb25MZWF2ZVRpbWVvdXQ6IDMwMCB9LFxuICAgICAgICAgIHRoaXMucmVuZGVyRGV2aWNlcyhkZXZpY2VzSW5Mb2NhdGlvbilcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgZmlsdGVyT3B0aW9uID0gdGhpcy5wcm9wcy5tYXRjaC5wYXJhbXMuZmlsdGVyT3B0aW9uO1xuICAgICAgdmFyIGxvY2F0aW9uT2ZEZXZpY2VzID0gdGhpcy5wcm9wcy5tYXRjaC5wYXJhbXMubG9jYXRpb247XG4gICAgICB2YXIgZGV2aWNlc0luTG9jYXRpb24gPSB0aGlzLnByb3BzLmRldmljZXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHJldHVybiBpdGVtLmxvY2F0aW9uID09PSBsb2NhdGlvbk9mRGV2aWNlcztcbiAgICAgIH0pO1xuICAgICAgdmFyIF9zdGF0ZSA9IHRoaXMuc3RhdGUsXG4gICAgICAgICAgY3VycmVudFBhZ2UgPSBfc3RhdGUuY3VycmVudFBhZ2UsXG4gICAgICAgICAgZGV2aWNlc1BlclBhZ2UgPSBfc3RhdGUuZGV2aWNlc1BlclBhZ2U7XG5cbiAgICAgIHZhciB0b3RhbFBhZ2VzID0gTWF0aC5jZWlsKGRldmljZXNJbkxvY2F0aW9uLmxlbmd0aCAvIGRldmljZXNQZXJQYWdlKTtcbiAgICAgIHZhciBpbmRleE9mTGFzdERldmljZSA9IGN1cnJlbnRQYWdlICogZGV2aWNlc1BlclBhZ2U7XG4gICAgICB2YXIgaW5kZXhPZkZpcnN0RGV2aWNlID0gaW5kZXhPZkxhc3REZXZpY2UgLSBkZXZpY2VzUGVyUGFnZTtcbiAgICAgIHZhciBjdXJyZW50RGV2aWNlcyA9IGRldmljZXNJbkxvY2F0aW9uLnNsaWNlKGluZGV4T2ZGaXJzdERldmljZSwgaW5kZXhPZkxhc3REZXZpY2UpO1xuXG4gICAgICBpZiAodHlwZW9mIGZpbHRlck9wdGlvbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5maWx0ZXJBY3Rpb24oZmlsdGVyT3B0aW9uKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICBfRGV2aXNlc1NlY3Rpb24yLmRlZmF1bHQsXG4gICAgICAgIHtcbiAgICAgICAgICBmaWx0ZXJPcHRpb246IHRoaXMucHJvcHMubWF0Y2gucGFyYW1zLmZpbHRlck9wdGlvbixcbiAgICAgICAgICBkZXZpY2VzOiB0aGlzLnByb3BzLmRldmljZXMsXG4gICAgICAgICAgbG9jYXRpb246IHRoaXMucHJvcHMubG9jYXRpb24sXG4gICAgICAgICAgaGlzdG9yeTogdGhpcy5wcm9wcy5oaXN0b3J5LFxuICAgICAgICAgIG1hdGNoOiB0aGlzLnByb3BzLm1hdGNoLFxuICAgICAgICAgIHN0YXR1czogdGhpcy5wcm9wcy5zdGF0dXMsXG4gICAgICAgICAgdGV4dDogdGhpcy5wcm9wcy5lcnJvclRleHQsXG4gICAgICAgICAgc2V0UG9wdXBTaG93bjogdGhpcy5zZXRQb3B1cFNob3duLFxuICAgICAgICAgIHBvcHVwU2hvd246IHRoaXMuc3RhdGUucG9wdXBTaG93bixcbiAgICAgICAgICBkZWxldGVEZXZpY2U6IHRoaXMuZGVsZXRlRGV2aWNlLFxuICAgICAgICAgIGNsZWFyU3RhdHVzOiB0aGlzLnByb3BzLmNsZWFyU3RhdHVzLFxuICAgICAgICAgIGN1cnJlbnRJZDogdGhpcy5zdGF0ZS5jdXJyZW50SWQsXG4gICAgICAgICAgcXVhbnRpdHk6IGRldmljZXNJbkxvY2F0aW9uLmxlbmd0aCxcbiAgICAgICAgICBsb2NhdGlvbk9mRGV2aWNlczogbG9jYXRpb25PZkRldmljZXMgfSxcbiAgICAgICAgdGhpcy5wcm9wcy5zdGF0dXMgPT09ICdET05FJyAmJiB0aGlzLnByb3BzLmRldmljZXMubGVuZ3RoID09PSAwID8gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgJ1lvdSBuZWVkIHRvIGFkZCBkZXZpY2UnXG4gICAgICAgICkgOiB0aGlzLnJlbmRlckRldmljZUdyb3VwKGN1cnJlbnREZXZpY2VzKSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1BhZ2luYXRpb24yLmRlZmF1bHQsIHtcbiAgICAgICAgICBoYW5kbGVDbGljazogdGhpcy5oYW5kbGVDbGljayxcbiAgICAgICAgICBzZXRQYWdlOiB0aGlzLnNldFBhZ2UsXG4gICAgICAgICAgbGlzdDogdGhpcy5wcm9wcy5kZXZpY2VzLFxuICAgICAgICAgIGN1cnJlbnRQYWdlOiB0aGlzLnN0YXRlLmN1cnJlbnRQYWdlLFxuICAgICAgICAgIHRvdGFsUGFnZXM6IHRvdGFsUGFnZXMgfSlcbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIExvY2F0aW9uTGlzdDtcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbnZhciBtYXBTdGF0ZVRvUHJvcHMgPSBmdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUpIHtcbiAgcmV0dXJuIHtcbiAgICBkZXZpY2VzOiAoMCwgX3NlbGVjdG9ycy5maWx0ZXJJdGVtcykoc3RhdGUpLFxuICAgIHN0YXR1czogc3RhdGUuZGV2aWNlc0xpc3QudXBsb2FkU3RhdHVzLFxuICAgIGVycm9yVGV4dDogc3RhdGUuZGV2aWNlc0xpc3QuZXJyb3JUZXh0XG4gIH07XG59O1xuXG52YXIgbWFwRGlzcGF0Y2hUb1Byb3BzID0gZnVuY3Rpb24gbWFwRGlzcGF0Y2hUb1Byb3BzKGRpc3BhdGNoKSB7XG4gIHJldHVybiB7XG4gICAgY2hhbmdlU3RhdHVzOiBmdW5jdGlvbiBjaGFuZ2VTdGF0dXMoZGF0YSwgaWQpIHtcbiAgICAgIHJldHVybiBkaXNwYXRjaCgoMCwgX2RldmljZXMudXBkYXRlRGV2aWNlKShkYXRhLCBpZCkpO1xuICAgIH0sXG4gICAgbG9hZERldmljZXM6IGZ1bmN0aW9uIGxvYWREZXZpY2VzKCkge1xuICAgICAgcmV0dXJuIGRpc3BhdGNoKCgwLCBfZGV2aWNlcy5sb2FkRGV2aWNlcykoKSk7XG4gICAgfSxcbiAgICBkZWxldGVEZXZpY2U6IGZ1bmN0aW9uIGRlbGV0ZURldmljZShpZCkge1xuICAgICAgcmV0dXJuIGRpc3BhdGNoKCgwLCBfZGV2aWNlcy5kZWxldGVEZXZpY2UpKGlkKSk7XG4gICAgfSxcbiAgICBzZW5kTm90aWZpY2F0aW9uV1M6IGZ1bmN0aW9uIHNlbmROb3RpZmljYXRpb25XUyhtZXNzYWdlKSB7XG4gICAgICByZXR1cm4gZGlzcGF0Y2goKDAsIF9ub3RpZmljYXRpb25zLnNlbmROb3RpZmljYXRpb25XUykobWVzc2FnZSkpO1xuICAgIH0sXG4gICAgY2xlYXJTdGF0dXM6IGZ1bmN0aW9uIGNsZWFyU3RhdHVzKCkge1xuICAgICAgcmV0dXJuIGRpc3BhdGNoKCgwLCBfZGV2aWNlcy5jbGVhclN0YXR1cykoKSk7XG4gICAgfVxuICB9O1xufTtcblxuTG9jYXRpb25MaXN0LnByb3BUeXBlcyA9IHtcbiAgc2VhcmNoOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgZmlsdGVyT3B0aW9uOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgbWF0Y2g6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBjaGFuZ2VTdGF0dXM6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgZGV2aWNlczogX3Byb3BUeXBlczIuZGVmYXVsdC5hcnJheSxcbiAgZmlsdGVyQWN0aW9uOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIGZpbmRJdGVtczogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBsb2FkRGV2aWNlczogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBkZWxldGVEZXZpY2U6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgaGlzdG9yeTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIGxvY2F0aW9uOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgc3RhdHVzOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgc2VuZE5vdGlmaWNhdGlvbldTOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIGVycm9yVGV4dDogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGNsZWFyU3RhdHVzOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmNcbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9ICgwLCBfcmVhY3RSZWR1eC5jb25uZWN0KShtYXBTdGF0ZVRvUHJvcHMsIG1hcERpc3BhdGNoVG9Qcm9wcykoTG9jYXRpb25MaXN0KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvc2VsZWN0b3JzL2luZGV4LmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmZpbHRlckl0ZW1zID0gdW5kZWZpbmVkO1xuXG52YXIgX3Jlc2VsZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3Jlc2VsZWN0L2xpYi9pbmRleC5qc1wiKTtcblxudmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy91dGlscy91dGlscy5qc1wiKTtcblxudmFyIGdldEZpbHRlck9wdGlvbiA9IGZ1bmN0aW9uIGdldEZpbHRlck9wdGlvbihzdGF0ZSkge1xuICByZXR1cm4gc3RhdGUuc2VhcmNoQW5kRmlsdGVyLmZpbHRlck9wdGlvbjtcbn07XG52YXIgZ2V0RGV2aWNlcyA9IGZ1bmN0aW9uIGdldERldmljZXMoc3RhdGUpIHtcbiAgcmV0dXJuIHN0YXRlLmRldmljZXNMaXN0LmRldmljZXM7XG59O1xudmFyIGdldFNlYXJjaFZhbHVlID0gZnVuY3Rpb24gZ2V0U2VhcmNoVmFsdWUoc3RhdGUpIHtcbiAgcmV0dXJuIHN0YXRlLnNlYXJjaEFuZEZpbHRlci5zZWFyY2hWYWx1ZTtcbn07XG5cbnZhciBmaWx0ZXJJdGVtcyA9IGV4cG9ydHMuZmlsdGVySXRlbXMgPSAoMCwgX3Jlc2VsZWN0LmNyZWF0ZVNlbGVjdG9yKShbZ2V0RmlsdGVyT3B0aW9uLCBnZXRTZWFyY2hWYWx1ZSwgZ2V0RGV2aWNlc10sIGZ1bmN0aW9uIChmaWx0ZXJPcHRpb24sIHNlYXJjaFZhbHVlLCBpdGVtcykge1xuICB2YXIgbmV3QXJyID0gaXRlbXM7XG5cbiAgaWYgKGZpbHRlck9wdGlvbiA9PT0gJ2FsbCcpIHtcbiAgICBuZXdBcnIgPSBpdGVtcztcbiAgfSBlbHNlIGlmIChmaWx0ZXJPcHRpb24gPT09ICdvbicpIHtcbiAgICBuZXdBcnIgPSBpdGVtcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHJldHVybiBpdGVtLnN0YXR1cyA9PT0gdHJ1ZTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmIChmaWx0ZXJPcHRpb24gPT09ICdvZmYnKSB7XG4gICAgbmV3QXJyID0gaXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICByZXR1cm4gaXRlbS5zdGF0dXMgPT09IGZhbHNlO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBuZXdBcnIuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgcmV0dXJuICgwLCBfdXRpbHMuc2VhcmNoSXRlbSkoaXRlbS5uYW1lLCBzZWFyY2hWYWx1ZSk7XG4gIH0pO1xufSk7XG5cbi8qKiovIH0pXG5cbn0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAxLmluZGV4X2J1bmRsZS5qcyIsIlxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNoYWluKCl7XHJcbiAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGhcclxuICB2YXIgYXJncyA9IFtdO1xyXG5cclxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKVxyXG4gICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXVxyXG5cclxuICBhcmdzID0gYXJncy5maWx0ZXIoZnVuY3Rpb24oZm4peyByZXR1cm4gZm4gIT0gbnVsbCB9KVxyXG5cclxuICBpZiAoYXJncy5sZW5ndGggPT09IDApIHJldHVybiB1bmRlZmluZWRcclxuICBpZiAoYXJncy5sZW5ndGggPT09IDEpIHJldHVybiBhcmdzWzBdXHJcblxyXG4gIHJldHVybiBhcmdzLnJlZHVjZShmdW5jdGlvbihjdXJyZW50LCBuZXh0KXtcclxuICAgIHJldHVybiBmdW5jdGlvbiBjaGFpbmVkRnVuY3Rpb24oKSB7XHJcbiAgICAgIGN1cnJlbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgbmV4dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuICB9KVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vY2hhaW4tZnVuY3Rpb24vaW5kZXguanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSBhZGRDbGFzcztcblxudmFyIF9oYXNDbGFzcyA9IHJlcXVpcmUoJy4vaGFzQ2xhc3MnKTtcblxudmFyIF9oYXNDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9oYXNDbGFzcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIGFkZENsYXNzKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICBpZiAoZWxlbWVudC5jbGFzc0xpc3QpIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO2Vsc2UgaWYgKCEoMCwgX2hhc0NsYXNzMi5kZWZhdWx0KShlbGVtZW50KSkgZWxlbWVudC5jbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZSArICcgJyArIGNsYXNzTmFtZTtcbn1cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vZG9tLWhlbHBlcnMvY2xhc3MvYWRkQ2xhc3MuanMiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IGhhc0NsYXNzO1xuZnVuY3Rpb24gaGFzQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gIGlmIChlbGVtZW50LmNsYXNzTGlzdCkgcmV0dXJuICEhY2xhc3NOYW1lICYmIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSk7ZWxzZSByZXR1cm4gKFwiIFwiICsgZWxlbWVudC5jbGFzc05hbWUgKyBcIiBcIikuaW5kZXhPZihcIiBcIiArIGNsYXNzTmFtZSArIFwiIFwiKSAhPT0gLTE7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vZG9tLWhlbHBlcnMvY2xhc3MvaGFzQ2xhc3MuanMiLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gIGlmIChlbGVtZW50LmNsYXNzTGlzdCkgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7ZWxzZSBlbGVtZW50LmNsYXNzTmFtZSA9IGVsZW1lbnQuY2xhc3NOYW1lLnJlcGxhY2UobmV3IFJlZ0V4cCgnKF58XFxcXHMpJyArIGNsYXNzTmFtZSArICcoPzpcXFxcc3wkKScsICdnJyksICckMScpLnJlcGxhY2UoL1xccysvZywgJyAnKS5yZXBsYWNlKC9eXFxzKnxcXHMqJC9nLCAnJyk7XG59O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vZG9tLWhlbHBlcnMvY2xhc3MvcmVtb3ZlQ2xhc3MuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmFuaW1hdGlvbkVuZCA9IGV4cG9ydHMuYW5pbWF0aW9uRGVsYXkgPSBleHBvcnRzLmFuaW1hdGlvblRpbWluZyA9IGV4cG9ydHMuYW5pbWF0aW9uRHVyYXRpb24gPSBleHBvcnRzLmFuaW1hdGlvbk5hbWUgPSBleHBvcnRzLnRyYW5zaXRpb25FbmQgPSBleHBvcnRzLnRyYW5zaXRpb25EdXJhdGlvbiA9IGV4cG9ydHMudHJhbnNpdGlvbkRlbGF5ID0gZXhwb3J0cy50cmFuc2l0aW9uVGltaW5nID0gZXhwb3J0cy50cmFuc2l0aW9uUHJvcGVydHkgPSBleHBvcnRzLnRyYW5zZm9ybSA9IHVuZGVmaW5lZDtcblxudmFyIF9pbkRPTSA9IHJlcXVpcmUoJy4uL3V0aWwvaW5ET00nKTtcblxudmFyIF9pbkRPTTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbkRPTSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciB0cmFuc2Zvcm0gPSAndHJhbnNmb3JtJztcbnZhciBwcmVmaXggPSB2b2lkIDAsXG4gICAgdHJhbnNpdGlvbkVuZCA9IHZvaWQgMCxcbiAgICBhbmltYXRpb25FbmQgPSB2b2lkIDA7XG52YXIgdHJhbnNpdGlvblByb3BlcnR5ID0gdm9pZCAwLFxuICAgIHRyYW5zaXRpb25EdXJhdGlvbiA9IHZvaWQgMCxcbiAgICB0cmFuc2l0aW9uVGltaW5nID0gdm9pZCAwLFxuICAgIHRyYW5zaXRpb25EZWxheSA9IHZvaWQgMDtcbnZhciBhbmltYXRpb25OYW1lID0gdm9pZCAwLFxuICAgIGFuaW1hdGlvbkR1cmF0aW9uID0gdm9pZCAwLFxuICAgIGFuaW1hdGlvblRpbWluZyA9IHZvaWQgMCxcbiAgICBhbmltYXRpb25EZWxheSA9IHZvaWQgMDtcblxuaWYgKF9pbkRPTTIuZGVmYXVsdCkge1xuICB2YXIgX2dldFRyYW5zaXRpb25Qcm9wZXJ0ID0gZ2V0VHJhbnNpdGlvblByb3BlcnRpZXMoKTtcblxuICBwcmVmaXggPSBfZ2V0VHJhbnNpdGlvblByb3BlcnQucHJlZml4O1xuICBleHBvcnRzLnRyYW5zaXRpb25FbmQgPSB0cmFuc2l0aW9uRW5kID0gX2dldFRyYW5zaXRpb25Qcm9wZXJ0LnRyYW5zaXRpb25FbmQ7XG4gIGV4cG9ydHMuYW5pbWF0aW9uRW5kID0gYW5pbWF0aW9uRW5kID0gX2dldFRyYW5zaXRpb25Qcm9wZXJ0LmFuaW1hdGlvbkVuZDtcblxuXG4gIGV4cG9ydHMudHJhbnNmb3JtID0gdHJhbnNmb3JtID0gcHJlZml4ICsgJy0nICsgdHJhbnNmb3JtO1xuICBleHBvcnRzLnRyYW5zaXRpb25Qcm9wZXJ0eSA9IHRyYW5zaXRpb25Qcm9wZXJ0eSA9IHByZWZpeCArICctdHJhbnNpdGlvbi1wcm9wZXJ0eSc7XG4gIGV4cG9ydHMudHJhbnNpdGlvbkR1cmF0aW9uID0gdHJhbnNpdGlvbkR1cmF0aW9uID0gcHJlZml4ICsgJy10cmFuc2l0aW9uLWR1cmF0aW9uJztcbiAgZXhwb3J0cy50cmFuc2l0aW9uRGVsYXkgPSB0cmFuc2l0aW9uRGVsYXkgPSBwcmVmaXggKyAnLXRyYW5zaXRpb24tZGVsYXknO1xuICBleHBvcnRzLnRyYW5zaXRpb25UaW1pbmcgPSB0cmFuc2l0aW9uVGltaW5nID0gcHJlZml4ICsgJy10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbic7XG5cbiAgZXhwb3J0cy5hbmltYXRpb25OYW1lID0gYW5pbWF0aW9uTmFtZSA9IHByZWZpeCArICctYW5pbWF0aW9uLW5hbWUnO1xuICBleHBvcnRzLmFuaW1hdGlvbkR1cmF0aW9uID0gYW5pbWF0aW9uRHVyYXRpb24gPSBwcmVmaXggKyAnLWFuaW1hdGlvbi1kdXJhdGlvbic7XG4gIGV4cG9ydHMuYW5pbWF0aW9uVGltaW5nID0gYW5pbWF0aW9uVGltaW5nID0gcHJlZml4ICsgJy1hbmltYXRpb24tZGVsYXknO1xuICBleHBvcnRzLmFuaW1hdGlvbkRlbGF5ID0gYW5pbWF0aW9uRGVsYXkgPSBwcmVmaXggKyAnLWFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb24nO1xufVxuXG5leHBvcnRzLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbmV4cG9ydHMudHJhbnNpdGlvblByb3BlcnR5ID0gdHJhbnNpdGlvblByb3BlcnR5O1xuZXhwb3J0cy50cmFuc2l0aW9uVGltaW5nID0gdHJhbnNpdGlvblRpbWluZztcbmV4cG9ydHMudHJhbnNpdGlvbkRlbGF5ID0gdHJhbnNpdGlvbkRlbGF5O1xuZXhwb3J0cy50cmFuc2l0aW9uRHVyYXRpb24gPSB0cmFuc2l0aW9uRHVyYXRpb247XG5leHBvcnRzLnRyYW5zaXRpb25FbmQgPSB0cmFuc2l0aW9uRW5kO1xuZXhwb3J0cy5hbmltYXRpb25OYW1lID0gYW5pbWF0aW9uTmFtZTtcbmV4cG9ydHMuYW5pbWF0aW9uRHVyYXRpb24gPSBhbmltYXRpb25EdXJhdGlvbjtcbmV4cG9ydHMuYW5pbWF0aW9uVGltaW5nID0gYW5pbWF0aW9uVGltaW5nO1xuZXhwb3J0cy5hbmltYXRpb25EZWxheSA9IGFuaW1hdGlvbkRlbGF5O1xuZXhwb3J0cy5hbmltYXRpb25FbmQgPSBhbmltYXRpb25FbmQ7XG5leHBvcnRzLmRlZmF1bHQgPSB7XG4gIHRyYW5zZm9ybTogdHJhbnNmb3JtLFxuICBlbmQ6IHRyYW5zaXRpb25FbmQsXG4gIHByb3BlcnR5OiB0cmFuc2l0aW9uUHJvcGVydHksXG4gIHRpbWluZzogdHJhbnNpdGlvblRpbWluZyxcbiAgZGVsYXk6IHRyYW5zaXRpb25EZWxheSxcbiAgZHVyYXRpb246IHRyYW5zaXRpb25EdXJhdGlvblxufTtcblxuXG5mdW5jdGlvbiBnZXRUcmFuc2l0aW9uUHJvcGVydGllcygpIHtcbiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jykuc3R5bGU7XG5cbiAgdmFyIHZlbmRvck1hcCA9IHtcbiAgICBPOiBmdW5jdGlvbiBPKGUpIHtcbiAgICAgIHJldHVybiAnbycgKyBlLnRvTG93ZXJDYXNlKCk7XG4gICAgfSxcbiAgICBNb3o6IGZ1bmN0aW9uIE1veihlKSB7XG4gICAgICByZXR1cm4gZS50b0xvd2VyQ2FzZSgpO1xuICAgIH0sXG4gICAgV2Via2l0OiBmdW5jdGlvbiBXZWJraXQoZSkge1xuICAgICAgcmV0dXJuICd3ZWJraXQnICsgZTtcbiAgICB9LFxuICAgIG1zOiBmdW5jdGlvbiBtcyhlKSB7XG4gICAgICByZXR1cm4gJ01TJyArIGU7XG4gICAgfVxuICB9O1xuXG4gIHZhciB2ZW5kb3JzID0gT2JqZWN0LmtleXModmVuZG9yTWFwKTtcblxuICB2YXIgdHJhbnNpdGlvbkVuZCA9IHZvaWQgMCxcbiAgICAgIGFuaW1hdGlvbkVuZCA9IHZvaWQgMDtcbiAgdmFyIHByZWZpeCA9ICcnO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdmVuZG9ycy5sZW5ndGg7IGkrKykge1xuICAgIHZhciB2ZW5kb3IgPSB2ZW5kb3JzW2ldO1xuXG4gICAgaWYgKHZlbmRvciArICdUcmFuc2l0aW9uUHJvcGVydHknIGluIHN0eWxlKSB7XG4gICAgICBwcmVmaXggPSAnLScgKyB2ZW5kb3IudG9Mb3dlckNhc2UoKTtcbiAgICAgIHRyYW5zaXRpb25FbmQgPSB2ZW5kb3JNYXBbdmVuZG9yXSgnVHJhbnNpdGlvbkVuZCcpO1xuICAgICAgYW5pbWF0aW9uRW5kID0gdmVuZG9yTWFwW3ZlbmRvcl0oJ0FuaW1hdGlvbkVuZCcpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKCF0cmFuc2l0aW9uRW5kICYmICd0cmFuc2l0aW9uUHJvcGVydHknIGluIHN0eWxlKSB0cmFuc2l0aW9uRW5kID0gJ3RyYW5zaXRpb25lbmQnO1xuXG4gIGlmICghYW5pbWF0aW9uRW5kICYmICdhbmltYXRpb25OYW1lJyBpbiBzdHlsZSkgYW5pbWF0aW9uRW5kID0gJ2FuaW1hdGlvbmVuZCc7XG5cbiAgc3R5bGUgPSBudWxsO1xuXG4gIHJldHVybiB7IGFuaW1hdGlvbkVuZDogYW5pbWF0aW9uRW5kLCB0cmFuc2l0aW9uRW5kOiB0cmFuc2l0aW9uRW5kLCBwcmVmaXg6IHByZWZpeCB9O1xufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vZG9tLWhlbHBlcnMvdHJhbnNpdGlvbi9wcm9wZXJ0aWVzLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gISEodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmRvY3VtZW50ICYmIHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KTtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vZG9tLWhlbHBlcnMvdXRpbC9pbkRPTS5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9pbkRPTSA9IHJlcXVpcmUoJy4vaW5ET00nKTtcblxudmFyIF9pbkRPTTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbkRPTSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciB2ZW5kb3JzID0gWycnLCAnd2Via2l0JywgJ21veicsICdvJywgJ21zJ107XG52YXIgY2FuY2VsID0gJ2NsZWFyVGltZW91dCc7XG52YXIgcmFmID0gZmFsbGJhY2s7XG52YXIgY29tcGF0UmFmID0gdm9pZCAwO1xuXG52YXIgZ2V0S2V5ID0gZnVuY3Rpb24gZ2V0S2V5KHZlbmRvciwgaykge1xuICByZXR1cm4gdmVuZG9yICsgKCF2ZW5kb3IgPyBrIDoga1swXS50b1VwcGVyQ2FzZSgpICsgay5zdWJzdHIoMSkpICsgJ0FuaW1hdGlvbkZyYW1lJztcbn07XG5cbmlmIChfaW5ET00yLmRlZmF1bHQpIHtcbiAgdmVuZG9ycy5zb21lKGZ1bmN0aW9uICh2ZW5kb3IpIHtcbiAgICB2YXIgcmFmS2V5ID0gZ2V0S2V5KHZlbmRvciwgJ3JlcXVlc3QnKTtcblxuICAgIGlmIChyYWZLZXkgaW4gd2luZG93KSB7XG4gICAgICBjYW5jZWwgPSBnZXRLZXkodmVuZG9yLCAnY2FuY2VsJyk7XG4gICAgICByZXR1cm4gcmFmID0gZnVuY3Rpb24gcmFmKGNiKSB7XG4gICAgICAgIHJldHVybiB3aW5kb3dbcmFmS2V5XShjYik7XG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG59XG5cbi8qIGh0dHBzOi8vZ2l0aHViLmNvbS9jb21wb25lbnQvcmFmICovXG52YXIgcHJldiA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuZnVuY3Rpb24gZmFsbGJhY2soZm4pIHtcbiAgdmFyIGN1cnIgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcbiAgICAgIG1zID0gTWF0aC5tYXgoMCwgMTYgLSAoY3VyciAtIHByZXYpKSxcbiAgICAgIHJlcSA9IHNldFRpbWVvdXQoZm4sIG1zKTtcblxuICBwcmV2ID0gY3VycjtcbiAgcmV0dXJuIHJlcTtcbn1cblxuY29tcGF0UmFmID0gZnVuY3Rpb24gY29tcGF0UmFmKGNiKSB7XG4gIHJldHVybiByYWYoY2IpO1xufTtcbmNvbXBhdFJhZi5jYW5jZWwgPSBmdW5jdGlvbiAoaWQpIHtcbiAgd2luZG93W2NhbmNlbF0gJiYgdHlwZW9mIHdpbmRvd1tjYW5jZWxdID09PSAnZnVuY3Rpb24nICYmIHdpbmRvd1tjYW5jZWxdKGlkKTtcbn07XG5leHBvcnRzLmRlZmF1bHQgPSBjb21wYXRSYWY7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2RvbS1oZWxwZXJzL3V0aWwvcmVxdWVzdEFuaW1hdGlvbkZyYW1lLmpzIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJ3JlYWN0LXRyYW5zaXRpb24tZ3JvdXAvQ1NTVHJhbnNpdGlvbkdyb3VwJyk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3JlYWN0LWFkZG9ucy1jc3MtdHJhbnNpdGlvbi1ncm91cC9pbmRleC5qcyIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3Byb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxudmFyIF9UcmFuc2l0aW9uR3JvdXAgPSByZXF1aXJlKCcuL1RyYW5zaXRpb25Hcm91cCcpO1xuXG52YXIgX1RyYW5zaXRpb25Hcm91cDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9UcmFuc2l0aW9uR3JvdXApO1xuXG52YXIgX0NTU1RyYW5zaXRpb25Hcm91cENoaWxkID0gcmVxdWlyZSgnLi9DU1NUcmFuc2l0aW9uR3JvdXBDaGlsZCcpO1xuXG52YXIgX0NTU1RyYW5zaXRpb25Hcm91cENoaWxkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NTU1RyYW5zaXRpb25Hcm91cENoaWxkKTtcblxudmFyIF9Qcm9wVHlwZXMgPSByZXF1aXJlKCcuL3V0aWxzL1Byb3BUeXBlcycpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBwcm9wVHlwZXMgPSB7XG4gIHRyYW5zaXRpb25OYW1lOiBfUHJvcFR5cGVzLm5hbWVTaGFwZS5pc1JlcXVpcmVkLFxuXG4gIHRyYW5zaXRpb25BcHBlYXI6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgdHJhbnNpdGlvbkVudGVyOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIHRyYW5zaXRpb25MZWF2ZTogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICB0cmFuc2l0aW9uQXBwZWFyVGltZW91dDogKDAsIF9Qcm9wVHlwZXMudHJhbnNpdGlvblRpbWVvdXQpKCdBcHBlYXInKSxcbiAgdHJhbnNpdGlvbkVudGVyVGltZW91dDogKDAsIF9Qcm9wVHlwZXMudHJhbnNpdGlvblRpbWVvdXQpKCdFbnRlcicpLFxuICB0cmFuc2l0aW9uTGVhdmVUaW1lb3V0OiAoMCwgX1Byb3BUeXBlcy50cmFuc2l0aW9uVGltZW91dCkoJ0xlYXZlJylcbn07XG5cbnZhciBkZWZhdWx0UHJvcHMgPSB7XG4gIHRyYW5zaXRpb25BcHBlYXI6IGZhbHNlLFxuICB0cmFuc2l0aW9uRW50ZXI6IHRydWUsXG4gIHRyYW5zaXRpb25MZWF2ZTogdHJ1ZVxufTtcblxudmFyIENTU1RyYW5zaXRpb25Hcm91cCA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhDU1NUcmFuc2l0aW9uR3JvdXAsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIENTU1RyYW5zaXRpb25Hcm91cCgpIHtcbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENTU1RyYW5zaXRpb25Hcm91cCk7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9SZWFjdCRDb21wb25lbnQuY2FsbC5hcHBseShfUmVhY3QkQ29tcG9uZW50LCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuX3dyYXBDaGlsZCA9IGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9DU1NUcmFuc2l0aW9uR3JvdXBDaGlsZDIuZGVmYXVsdCwge1xuICAgICAgICBuYW1lOiBfdGhpcy5wcm9wcy50cmFuc2l0aW9uTmFtZSxcbiAgICAgICAgYXBwZWFyOiBfdGhpcy5wcm9wcy50cmFuc2l0aW9uQXBwZWFyLFxuICAgICAgICBlbnRlcjogX3RoaXMucHJvcHMudHJhbnNpdGlvbkVudGVyLFxuICAgICAgICBsZWF2ZTogX3RoaXMucHJvcHMudHJhbnNpdGlvbkxlYXZlLFxuICAgICAgICBhcHBlYXJUaW1lb3V0OiBfdGhpcy5wcm9wcy50cmFuc2l0aW9uQXBwZWFyVGltZW91dCxcbiAgICAgICAgZW50ZXJUaW1lb3V0OiBfdGhpcy5wcm9wcy50cmFuc2l0aW9uRW50ZXJUaW1lb3V0LFxuICAgICAgICBsZWF2ZVRpbWVvdXQ6IF90aGlzLnByb3BzLnRyYW5zaXRpb25MZWF2ZVRpbWVvdXRcbiAgICAgIH0sIGNoaWxkKTtcbiAgICB9LCBfdGVtcCksIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gIC8vIFdlIG5lZWQgdG8gcHJvdmlkZSB0aGlzIGNoaWxkRmFjdG9yeSBzbyB0aGF0XG4gIC8vIFJlYWN0Q1NTVHJhbnNpdGlvbkdyb3VwQ2hpbGQgY2FuIHJlY2VpdmUgdXBkYXRlcyB0byBuYW1lLCBlbnRlciwgYW5kXG4gIC8vIGxlYXZlIHdoaWxlIGl0IGlzIGxlYXZpbmcuXG5cblxuICBDU1NUcmFuc2l0aW9uR3JvdXAucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1RyYW5zaXRpb25Hcm91cDIuZGVmYXVsdCwgX2V4dGVuZHMoe30sIHRoaXMucHJvcHMsIHsgY2hpbGRGYWN0b3J5OiB0aGlzLl93cmFwQ2hpbGQgfSkpO1xuICB9O1xuXG4gIHJldHVybiBDU1NUcmFuc2l0aW9uR3JvdXA7XG59KF9yZWFjdDIuZGVmYXVsdC5Db21wb25lbnQpO1xuXG5DU1NUcmFuc2l0aW9uR3JvdXAuZGlzcGxheU5hbWUgPSAnQ1NTVHJhbnNpdGlvbkdyb3VwJztcblxuXG5DU1NUcmFuc2l0aW9uR3JvdXAucHJvcFR5cGVzID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8gcHJvcFR5cGVzIDoge307XG5DU1NUcmFuc2l0aW9uR3JvdXAuZGVmYXVsdFByb3BzID0gZGVmYXVsdFByb3BzO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBDU1NUcmFuc2l0aW9uR3JvdXA7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3JlYWN0LXRyYW5zaXRpb24tZ3JvdXAvQ1NTVHJhbnNpdGlvbkdyb3VwLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX2FkZENsYXNzID0gcmVxdWlyZSgnZG9tLWhlbHBlcnMvY2xhc3MvYWRkQ2xhc3MnKTtcblxudmFyIF9hZGRDbGFzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hZGRDbGFzcyk7XG5cbnZhciBfcmVtb3ZlQ2xhc3MgPSByZXF1aXJlKCdkb20taGVscGVycy9jbGFzcy9yZW1vdmVDbGFzcycpO1xuXG52YXIgX3JlbW92ZUNsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlbW92ZUNsYXNzKTtcblxudmFyIF9yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSByZXF1aXJlKCdkb20taGVscGVycy91dGlsL3JlcXVlc3RBbmltYXRpb25GcmFtZScpO1xuXG52YXIgX3JlcXVlc3RBbmltYXRpb25GcmFtZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpO1xuXG52YXIgX3Byb3BlcnRpZXMgPSByZXF1aXJlKCdkb20taGVscGVycy90cmFuc2l0aW9uL3Byb3BlcnRpZXMnKTtcblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3Byb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxudmFyIF9yZWFjdERvbSA9IHJlcXVpcmUoJ3JlYWN0LWRvbScpO1xuXG52YXIgX1Byb3BUeXBlcyA9IHJlcXVpcmUoJy4vdXRpbHMvUHJvcFR5cGVzJyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIGV2ZW50cyA9IFtdO1xuaWYgKF9wcm9wZXJ0aWVzLnRyYW5zaXRpb25FbmQpIGV2ZW50cy5wdXNoKF9wcm9wZXJ0aWVzLnRyYW5zaXRpb25FbmQpO1xuaWYgKF9wcm9wZXJ0aWVzLmFuaW1hdGlvbkVuZCkgZXZlbnRzLnB1c2goX3Byb3BlcnRpZXMuYW5pbWF0aW9uRW5kKTtcblxuZnVuY3Rpb24gYWRkRW5kTGlzdGVuZXIobm9kZSwgbGlzdGVuZXIpIHtcbiAgaWYgKGV2ZW50cy5sZW5ndGgpIHtcbiAgICBldmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihlLCBsaXN0ZW5lciwgZmFsc2UpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHNldFRpbWVvdXQobGlzdGVuZXIsIDApO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIWV2ZW50cy5sZW5ndGgpIHJldHVybjtcbiAgICBldmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLCBsaXN0ZW5lciwgZmFsc2UpO1xuICAgIH0pO1xuICB9O1xufVxuXG52YXIgcHJvcFR5cGVzID0ge1xuICBjaGlsZHJlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ub2RlLFxuICBuYW1lOiBfUHJvcFR5cGVzLm5hbWVTaGFwZS5pc1JlcXVpcmVkLFxuXG4gIC8vIE9uY2Ugd2UgcmVxdWlyZSB0aW1lb3V0cyB0byBiZSBzcGVjaWZpZWQsIHdlIGNhbiByZW1vdmUgdGhlXG4gIC8vIGJvb2xlYW4gZmxhZ3MgKGFwcGVhciBldGMuKSBhbmQganVzdCBhY2NlcHQgYSBudW1iZXJcbiAgLy8gb3IgYSBib29sIGZvciB0aGUgdGltZW91dCBmbGFncyAoYXBwZWFyVGltZW91dCBldGMuKVxuICBhcHBlYXI6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgZW50ZXI6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgbGVhdmU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgYXBwZWFyVGltZW91dDogX3Byb3BUeXBlczIuZGVmYXVsdC5udW1iZXIsXG4gIGVudGVyVGltZW91dDogX3Byb3BUeXBlczIuZGVmYXVsdC5udW1iZXIsXG4gIGxlYXZlVGltZW91dDogX3Byb3BUeXBlczIuZGVmYXVsdC5udW1iZXJcbn07XG5cbnZhciBDU1NUcmFuc2l0aW9uR3JvdXBDaGlsZCA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhDU1NUcmFuc2l0aW9uR3JvdXBDaGlsZCwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gQ1NTVHJhbnNpdGlvbkdyb3VwQ2hpbGQoKSB7XG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDU1NUcmFuc2l0aW9uR3JvdXBDaGlsZCk7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9SZWFjdCRDb21wb25lbnQuY2FsbC5hcHBseShfUmVhY3QkQ29tcG9uZW50LCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMuY29tcG9uZW50V2lsbEFwcGVhciA9IGZ1bmN0aW9uIChkb25lKSB7XG4gICAgICBpZiAoX3RoaXMucHJvcHMuYXBwZWFyKSB7XG4gICAgICAgIF90aGlzLnRyYW5zaXRpb24oJ2FwcGVhcicsIGRvbmUsIF90aGlzLnByb3BzLmFwcGVhclRpbWVvdXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmNvbXBvbmVudFdpbGxFbnRlciA9IGZ1bmN0aW9uIChkb25lKSB7XG4gICAgICBpZiAoX3RoaXMucHJvcHMuZW50ZXIpIHtcbiAgICAgICAgX3RoaXMudHJhbnNpdGlvbignZW50ZXInLCBkb25lLCBfdGhpcy5wcm9wcy5lbnRlclRpbWVvdXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLmNvbXBvbmVudFdpbGxMZWF2ZSA9IGZ1bmN0aW9uIChkb25lKSB7XG4gICAgICBpZiAoX3RoaXMucHJvcHMubGVhdmUpIHtcbiAgICAgICAgX3RoaXMudHJhbnNpdGlvbignbGVhdmUnLCBkb25lLCBfdGhpcy5wcm9wcy5sZWF2ZVRpbWVvdXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfVxuICAgIH0sIF90ZW1wKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgQ1NTVHJhbnNpdGlvbkdyb3VwQ2hpbGQucHJvdG90eXBlLmNvbXBvbmVudFdpbGxNb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICB0aGlzLmNsYXNzTmFtZUFuZE5vZGVRdWV1ZSA9IFtdO1xuICAgIHRoaXMudHJhbnNpdGlvblRpbWVvdXRzID0gW107XG4gIH07XG5cbiAgQ1NTVHJhbnNpdGlvbkdyb3VwQ2hpbGQucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy51bm1vdW50ZWQgPSB0cnVlO1xuXG4gICAgaWYgKHRoaXMudGltZW91dCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7XG4gICAgfVxuICAgIHRoaXMudHJhbnNpdGlvblRpbWVvdXRzLmZvckVhY2goZnVuY3Rpb24gKHRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICB9KTtcblxuICAgIHRoaXMuY2xhc3NOYW1lQW5kTm9kZVF1ZXVlLmxlbmd0aCA9IDA7XG4gIH07XG5cbiAgQ1NTVHJhbnNpdGlvbkdyb3VwQ2hpbGQucHJvdG90eXBlLnRyYW5zaXRpb24gPSBmdW5jdGlvbiB0cmFuc2l0aW9uKGFuaW1hdGlvblR5cGUsIGZpbmlzaENhbGxiYWNrLCB0aW1lb3V0KSB7XG4gICAgdmFyIG5vZGUgPSAoMCwgX3JlYWN0RG9tLmZpbmRET01Ob2RlKSh0aGlzKTtcblxuICAgIGlmICghbm9kZSkge1xuICAgICAgaWYgKGZpbmlzaENhbGxiYWNrKSB7XG4gICAgICAgIGZpbmlzaENhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGNsYXNzTmFtZSA9IHRoaXMucHJvcHMubmFtZVthbmltYXRpb25UeXBlXSB8fCB0aGlzLnByb3BzLm5hbWUgKyAnLScgKyBhbmltYXRpb25UeXBlO1xuICAgIHZhciBhY3RpdmVDbGFzc05hbWUgPSB0aGlzLnByb3BzLm5hbWVbYW5pbWF0aW9uVHlwZSArICdBY3RpdmUnXSB8fCBjbGFzc05hbWUgKyAnLWFjdGl2ZSc7XG4gICAgdmFyIHRpbWVyID0gbnVsbDtcbiAgICB2YXIgcmVtb3ZlTGlzdGVuZXJzID0gdm9pZCAwO1xuXG4gICAgKDAsIF9hZGRDbGFzczIuZGVmYXVsdCkobm9kZSwgY2xhc3NOYW1lKTtcblxuICAgIC8vIE5lZWQgdG8gZG8gdGhpcyB0byBhY3R1YWxseSB0cmlnZ2VyIGEgdHJhbnNpdGlvbi5cbiAgICB0aGlzLnF1ZXVlQ2xhc3NBbmROb2RlKGFjdGl2ZUNsYXNzTmFtZSwgbm9kZSk7XG5cbiAgICAvLyBDbGVhbi11cCB0aGUgYW5pbWF0aW9uIGFmdGVyIHRoZSBzcGVjaWZpZWQgZGVsYXlcbiAgICB2YXIgZmluaXNoID0gZnVuY3Rpb24gZmluaXNoKGUpIHtcbiAgICAgIGlmIChlICYmIGUudGFyZ2V0ICE9PSBub2RlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgIGlmIChyZW1vdmVMaXN0ZW5lcnMpIHJlbW92ZUxpc3RlbmVycygpO1xuXG4gICAgICAoMCwgX3JlbW92ZUNsYXNzMi5kZWZhdWx0KShub2RlLCBjbGFzc05hbWUpO1xuICAgICAgKDAsIF9yZW1vdmVDbGFzczIuZGVmYXVsdCkobm9kZSwgYWN0aXZlQ2xhc3NOYW1lKTtcblxuICAgICAgaWYgKHJlbW92ZUxpc3RlbmVycykgcmVtb3ZlTGlzdGVuZXJzKCk7XG5cbiAgICAgIC8vIFVzdWFsbHkgdGhpcyBvcHRpb25hbCBjYWxsYmFjayBpcyB1c2VkIGZvciBpbmZvcm1pbmcgYW4gb3duZXIgb2ZcbiAgICAgIC8vIGEgbGVhdmUgYW5pbWF0aW9uIGFuZCB0ZWxsaW5nIGl0IHRvIHJlbW92ZSB0aGUgY2hpbGQuXG4gICAgICBpZiAoZmluaXNoQ2FsbGJhY2spIHtcbiAgICAgICAgZmluaXNoQ2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgIHRpbWVyID0gc2V0VGltZW91dChmaW5pc2gsIHRpbWVvdXQpO1xuICAgICAgdGhpcy50cmFuc2l0aW9uVGltZW91dHMucHVzaCh0aW1lcik7XG4gICAgfSBlbHNlIGlmIChfcHJvcGVydGllcy50cmFuc2l0aW9uRW5kKSB7XG4gICAgICByZW1vdmVMaXN0ZW5lcnMgPSBhZGRFbmRMaXN0ZW5lcihub2RlLCBmaW5pc2gpO1xuICAgIH1cbiAgfTtcblxuICBDU1NUcmFuc2l0aW9uR3JvdXBDaGlsZC5wcm90b3R5cGUucXVldWVDbGFzc0FuZE5vZGUgPSBmdW5jdGlvbiBxdWV1ZUNsYXNzQW5kTm9kZShjbGFzc05hbWUsIG5vZGUpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIHRoaXMuY2xhc3NOYW1lQW5kTm9kZVF1ZXVlLnB1c2goe1xuICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG4gICAgICBub2RlOiBub2RlXG4gICAgfSk7XG5cbiAgICBpZiAoIXRoaXMucmFmSGFuZGxlKSB7XG4gICAgICB0aGlzLnJhZkhhbmRsZSA9ICgwLCBfcmVxdWVzdEFuaW1hdGlvbkZyYW1lMi5kZWZhdWx0KShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpczIuZmx1c2hDbGFzc05hbWVBbmROb2RlUXVldWUoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBDU1NUcmFuc2l0aW9uR3JvdXBDaGlsZC5wcm90b3R5cGUuZmx1c2hDbGFzc05hbWVBbmROb2RlUXVldWUgPSBmdW5jdGlvbiBmbHVzaENsYXNzTmFtZUFuZE5vZGVRdWV1ZSgpIHtcbiAgICBpZiAoIXRoaXMudW5tb3VudGVkKSB7XG4gICAgICB0aGlzLmNsYXNzTmFtZUFuZE5vZGVRdWV1ZS5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgLy8gVGhpcyBpcyBmb3IgdG8gZm9yY2UgYSByZXBhaW50LFxuICAgICAgICAvLyB3aGljaCBpcyBuZWNlc3NhcnkgaW4gb3JkZXIgdG8gdHJhbnNpdGlvbiBzdHlsZXMgd2hlbiBhZGRpbmcgYSBjbGFzcyBuYW1lLlxuICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtZXhwcmVzc2lvbnMgKi9cbiAgICAgICAgb2JqLm5vZGUuc2Nyb2xsVG9wO1xuICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLXVudXNlZC1leHByZXNzaW9ucyAqL1xuICAgICAgICAoMCwgX2FkZENsYXNzMi5kZWZhdWx0KShvYmoubm9kZSwgb2JqLmNsYXNzTmFtZSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5jbGFzc05hbWVBbmROb2RlUXVldWUubGVuZ3RoID0gMDtcbiAgICB0aGlzLnJhZkhhbmRsZSA9IG51bGw7XG4gIH07XG5cbiAgQ1NTVHJhbnNpdGlvbkdyb3VwQ2hpbGQucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgcHJvcHMgPSBfZXh0ZW5kcyh7fSwgdGhpcy5wcm9wcyk7XG4gICAgZGVsZXRlIHByb3BzLm5hbWU7XG4gICAgZGVsZXRlIHByb3BzLmFwcGVhcjtcbiAgICBkZWxldGUgcHJvcHMuZW50ZXI7XG4gICAgZGVsZXRlIHByb3BzLmxlYXZlO1xuICAgIGRlbGV0ZSBwcm9wcy5hcHBlYXJUaW1lb3V0O1xuICAgIGRlbGV0ZSBwcm9wcy5lbnRlclRpbWVvdXQ7XG4gICAgZGVsZXRlIHByb3BzLmxlYXZlVGltZW91dDtcbiAgICBkZWxldGUgcHJvcHMuY2hpbGRyZW47XG4gICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jbG9uZUVsZW1lbnQoX3JlYWN0Mi5kZWZhdWx0LkNoaWxkcmVuLm9ubHkodGhpcy5wcm9wcy5jaGlsZHJlbiksIHByb3BzKTtcbiAgfTtcblxuICByZXR1cm4gQ1NTVHJhbnNpdGlvbkdyb3VwQ2hpbGQ7XG59KF9yZWFjdDIuZGVmYXVsdC5Db21wb25lbnQpO1xuXG5DU1NUcmFuc2l0aW9uR3JvdXBDaGlsZC5kaXNwbGF5TmFtZSA9ICdDU1NUcmFuc2l0aW9uR3JvdXBDaGlsZCc7XG5cblxuQ1NTVHJhbnNpdGlvbkdyb3VwQ2hpbGQucHJvcFR5cGVzID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8gcHJvcFR5cGVzIDoge307XG5cbmV4cG9ydHMuZGVmYXVsdCA9IENTU1RyYW5zaXRpb25Hcm91cENoaWxkO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9yZWFjdC10cmFuc2l0aW9uLWdyb3VwL0NTU1RyYW5zaXRpb25Hcm91cENoaWxkLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX2NoYWluRnVuY3Rpb24gPSByZXF1aXJlKCdjaGFpbi1mdW5jdGlvbicpO1xuXG52YXIgX2NoYWluRnVuY3Rpb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hhaW5GdW5jdGlvbik7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9wcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbnZhciBfd2FybmluZyA9IHJlcXVpcmUoJ3dhcm5pbmcnKTtcblxudmFyIF93YXJuaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dhcm5pbmcpO1xuXG52YXIgX0NoaWxkTWFwcGluZyA9IHJlcXVpcmUoJy4vdXRpbHMvQ2hpbGRNYXBwaW5nJyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIHByb3BUeXBlcyA9IHtcbiAgY29tcG9uZW50OiBfcHJvcFR5cGVzMi5kZWZhdWx0LmFueSxcbiAgY2hpbGRGYWN0b3J5OiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIGNoaWxkcmVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGVcbn07XG5cbnZhciBkZWZhdWx0UHJvcHMgPSB7XG4gIGNvbXBvbmVudDogJ3NwYW4nLFxuICBjaGlsZEZhY3Rvcnk6IGZ1bmN0aW9uIGNoaWxkRmFjdG9yeShjaGlsZCkge1xuICAgIHJldHVybiBjaGlsZDtcbiAgfVxufTtcblxudmFyIFRyYW5zaXRpb25Hcm91cCA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhUcmFuc2l0aW9uR3JvdXAsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFRyYW5zaXRpb25Hcm91cChwcm9wcywgY29udGV4dCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUcmFuc2l0aW9uR3JvdXApO1xuXG4gICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX1JlYWN0JENvbXBvbmVudC5jYWxsKHRoaXMsIHByb3BzLCBjb250ZXh0KSk7XG5cbiAgICBfdGhpcy5wZXJmb3JtQXBwZWFyID0gZnVuY3Rpb24gKGtleSwgY29tcG9uZW50KSB7XG4gICAgICBfdGhpcy5jdXJyZW50bHlUcmFuc2l0aW9uaW5nS2V5c1trZXldID0gdHJ1ZTtcblxuICAgICAgaWYgKGNvbXBvbmVudC5jb21wb25lbnRXaWxsQXBwZWFyKSB7XG4gICAgICAgIGNvbXBvbmVudC5jb21wb25lbnRXaWxsQXBwZWFyKF90aGlzLl9oYW5kbGVEb25lQXBwZWFyaW5nLmJpbmQoX3RoaXMsIGtleSwgY29tcG9uZW50KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfdGhpcy5faGFuZGxlRG9uZUFwcGVhcmluZyhrZXksIGNvbXBvbmVudCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF90aGlzLl9oYW5kbGVEb25lQXBwZWFyaW5nID0gZnVuY3Rpb24gKGtleSwgY29tcG9uZW50KSB7XG4gICAgICBpZiAoY29tcG9uZW50LmNvbXBvbmVudERpZEFwcGVhcikge1xuICAgICAgICBjb21wb25lbnQuY29tcG9uZW50RGlkQXBwZWFyKCk7XG4gICAgICB9XG5cbiAgICAgIGRlbGV0ZSBfdGhpcy5jdXJyZW50bHlUcmFuc2l0aW9uaW5nS2V5c1trZXldO1xuXG4gICAgICB2YXIgY3VycmVudENoaWxkTWFwcGluZyA9ICgwLCBfQ2hpbGRNYXBwaW5nLmdldENoaWxkTWFwcGluZykoX3RoaXMucHJvcHMuY2hpbGRyZW4pO1xuXG4gICAgICBpZiAoIWN1cnJlbnRDaGlsZE1hcHBpbmcgfHwgIWN1cnJlbnRDaGlsZE1hcHBpbmcuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAvLyBUaGlzIHdhcyByZW1vdmVkIGJlZm9yZSBpdCBoYWQgZnVsbHkgYXBwZWFyZWQuIFJlbW92ZSBpdC5cbiAgICAgICAgX3RoaXMucGVyZm9ybUxlYXZlKGtleSwgY29tcG9uZW50KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3RoaXMucGVyZm9ybUVudGVyID0gZnVuY3Rpb24gKGtleSwgY29tcG9uZW50KSB7XG4gICAgICBfdGhpcy5jdXJyZW50bHlUcmFuc2l0aW9uaW5nS2V5c1trZXldID0gdHJ1ZTtcblxuICAgICAgaWYgKGNvbXBvbmVudC5jb21wb25lbnRXaWxsRW50ZXIpIHtcbiAgICAgICAgY29tcG9uZW50LmNvbXBvbmVudFdpbGxFbnRlcihfdGhpcy5faGFuZGxlRG9uZUVudGVyaW5nLmJpbmQoX3RoaXMsIGtleSwgY29tcG9uZW50KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfdGhpcy5faGFuZGxlRG9uZUVudGVyaW5nKGtleSwgY29tcG9uZW50KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3RoaXMuX2hhbmRsZURvbmVFbnRlcmluZyA9IGZ1bmN0aW9uIChrZXksIGNvbXBvbmVudCkge1xuICAgICAgaWYgKGNvbXBvbmVudC5jb21wb25lbnREaWRFbnRlcikge1xuICAgICAgICBjb21wb25lbnQuY29tcG9uZW50RGlkRW50ZXIoKTtcbiAgICAgIH1cblxuICAgICAgZGVsZXRlIF90aGlzLmN1cnJlbnRseVRyYW5zaXRpb25pbmdLZXlzW2tleV07XG5cbiAgICAgIHZhciBjdXJyZW50Q2hpbGRNYXBwaW5nID0gKDAsIF9DaGlsZE1hcHBpbmcuZ2V0Q2hpbGRNYXBwaW5nKShfdGhpcy5wcm9wcy5jaGlsZHJlbik7XG5cbiAgICAgIGlmICghY3VycmVudENoaWxkTWFwcGluZyB8fCAhY3VycmVudENoaWxkTWFwcGluZy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIC8vIFRoaXMgd2FzIHJlbW92ZWQgYmVmb3JlIGl0IGhhZCBmdWxseSBlbnRlcmVkLiBSZW1vdmUgaXQuXG4gICAgICAgIF90aGlzLnBlcmZvcm1MZWF2ZShrZXksIGNvbXBvbmVudCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF90aGlzLnBlcmZvcm1MZWF2ZSA9IGZ1bmN0aW9uIChrZXksIGNvbXBvbmVudCkge1xuICAgICAgX3RoaXMuY3VycmVudGx5VHJhbnNpdGlvbmluZ0tleXNba2V5XSA9IHRydWU7XG5cbiAgICAgIGlmIChjb21wb25lbnQuY29tcG9uZW50V2lsbExlYXZlKSB7XG4gICAgICAgIGNvbXBvbmVudC5jb21wb25lbnRXaWxsTGVhdmUoX3RoaXMuX2hhbmRsZURvbmVMZWF2aW5nLmJpbmQoX3RoaXMsIGtleSwgY29tcG9uZW50KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBOb3RlIHRoYXQgdGhpcyBpcyBzb21ld2hhdCBkYW5nZXJvdXMgYi9jIGl0IGNhbGxzIHNldFN0YXRlKClcbiAgICAgICAgLy8gYWdhaW4sIGVmZmVjdGl2ZWx5IG11dGF0aW5nIHRoZSBjb21wb25lbnQgYmVmb3JlIGFsbCB0aGUgd29ya1xuICAgICAgICAvLyBpcyBkb25lLlxuICAgICAgICBfdGhpcy5faGFuZGxlRG9uZUxlYXZpbmcoa2V5LCBjb21wb25lbnQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfdGhpcy5faGFuZGxlRG9uZUxlYXZpbmcgPSBmdW5jdGlvbiAoa2V5LCBjb21wb25lbnQpIHtcbiAgICAgIGlmIChjb21wb25lbnQuY29tcG9uZW50RGlkTGVhdmUpIHtcbiAgICAgICAgY29tcG9uZW50LmNvbXBvbmVudERpZExlYXZlKCk7XG4gICAgICB9XG5cbiAgICAgIGRlbGV0ZSBfdGhpcy5jdXJyZW50bHlUcmFuc2l0aW9uaW5nS2V5c1trZXldO1xuXG4gICAgICB2YXIgY3VycmVudENoaWxkTWFwcGluZyA9ICgwLCBfQ2hpbGRNYXBwaW5nLmdldENoaWxkTWFwcGluZykoX3RoaXMucHJvcHMuY2hpbGRyZW4pO1xuXG4gICAgICBpZiAoY3VycmVudENoaWxkTWFwcGluZyAmJiBjdXJyZW50Q2hpbGRNYXBwaW5nLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgLy8gVGhpcyBlbnRlcmVkIGFnYWluIGJlZm9yZSBpdCBmdWxseSBsZWZ0LiBBZGQgaXQgYWdhaW4uXG4gICAgICAgIF90aGlzLmtleXNUb0VudGVyLnB1c2goa2V5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF90aGlzLnNldFN0YXRlKGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICAgIHZhciBuZXdDaGlsZHJlbiA9IF9leHRlbmRzKHt9LCBzdGF0ZS5jaGlsZHJlbik7XG4gICAgICAgICAgZGVsZXRlIG5ld0NoaWxkcmVuW2tleV07XG4gICAgICAgICAgcmV0dXJuIHsgY2hpbGRyZW46IG5ld0NoaWxkcmVuIH07XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfdGhpcy5jaGlsZFJlZnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBjaGlsZHJlbjogKDAsIF9DaGlsZE1hcHBpbmcuZ2V0Q2hpbGRNYXBwaW5nKShwcm9wcy5jaGlsZHJlbilcbiAgICB9O1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIFRyYW5zaXRpb25Hcm91cC5wcm90b3R5cGUuY29tcG9uZW50V2lsbE1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIHRoaXMuY3VycmVudGx5VHJhbnNpdGlvbmluZ0tleXMgPSB7fTtcbiAgICB0aGlzLmtleXNUb0VudGVyID0gW107XG4gICAgdGhpcy5rZXlzVG9MZWF2ZSA9IFtdO1xuICB9O1xuXG4gIFRyYW5zaXRpb25Hcm91cC5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB2YXIgaW5pdGlhbENoaWxkTWFwcGluZyA9IHRoaXMuc3RhdGUuY2hpbGRyZW47XG4gICAgZm9yICh2YXIga2V5IGluIGluaXRpYWxDaGlsZE1hcHBpbmcpIHtcbiAgICAgIGlmIChpbml0aWFsQ2hpbGRNYXBwaW5nW2tleV0pIHtcbiAgICAgICAgdGhpcy5wZXJmb3JtQXBwZWFyKGtleSwgdGhpcy5jaGlsZFJlZnNba2V5XSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIFRyYW5zaXRpb25Hcm91cC5wcm90b3R5cGUuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgdmFyIG5leHRDaGlsZE1hcHBpbmcgPSAoMCwgX0NoaWxkTWFwcGluZy5nZXRDaGlsZE1hcHBpbmcpKG5leHRQcm9wcy5jaGlsZHJlbik7XG4gICAgdmFyIHByZXZDaGlsZE1hcHBpbmcgPSB0aGlzLnN0YXRlLmNoaWxkcmVuO1xuXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBjaGlsZHJlbjogKDAsIF9DaGlsZE1hcHBpbmcubWVyZ2VDaGlsZE1hcHBpbmdzKShwcmV2Q2hpbGRNYXBwaW5nLCBuZXh0Q2hpbGRNYXBwaW5nKVxuICAgIH0pO1xuXG4gICAgZm9yICh2YXIga2V5IGluIG5leHRDaGlsZE1hcHBpbmcpIHtcbiAgICAgIHZhciBoYXNQcmV2ID0gcHJldkNoaWxkTWFwcGluZyAmJiBwcmV2Q2hpbGRNYXBwaW5nLmhhc093blByb3BlcnR5KGtleSk7XG4gICAgICBpZiAobmV4dENoaWxkTWFwcGluZ1trZXldICYmICFoYXNQcmV2ICYmICF0aGlzLmN1cnJlbnRseVRyYW5zaXRpb25pbmdLZXlzW2tleV0pIHtcbiAgICAgICAgdGhpcy5rZXlzVG9FbnRlci5wdXNoKGtleSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2tleSBpbiBwcmV2Q2hpbGRNYXBwaW5nKSB7XG4gICAgICB2YXIgaGFzTmV4dCA9IG5leHRDaGlsZE1hcHBpbmcgJiYgbmV4dENoaWxkTWFwcGluZy5oYXNPd25Qcm9wZXJ0eShfa2V5KTtcbiAgICAgIGlmIChwcmV2Q2hpbGRNYXBwaW5nW19rZXldICYmICFoYXNOZXh0ICYmICF0aGlzLmN1cnJlbnRseVRyYW5zaXRpb25pbmdLZXlzW19rZXldKSB7XG4gICAgICAgIHRoaXMua2V5c1RvTGVhdmUucHVzaChfa2V5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiB3ZSB3YW50IHRvIHNvbWVkYXkgY2hlY2sgZm9yIHJlb3JkZXJpbmcsIHdlIGNvdWxkIGRvIGl0IGhlcmUuXG4gIH07XG5cbiAgVHJhbnNpdGlvbkdyb3VwLnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGUgPSBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB2YXIga2V5c1RvRW50ZXIgPSB0aGlzLmtleXNUb0VudGVyO1xuICAgIHRoaXMua2V5c1RvRW50ZXIgPSBbXTtcbiAgICBrZXlzVG9FbnRlci5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHJldHVybiBfdGhpczIucGVyZm9ybUVudGVyKGtleSwgX3RoaXMyLmNoaWxkUmVmc1trZXldKTtcbiAgICB9KTtcblxuICAgIHZhciBrZXlzVG9MZWF2ZSA9IHRoaXMua2V5c1RvTGVhdmU7XG4gICAgdGhpcy5rZXlzVG9MZWF2ZSA9IFtdO1xuICAgIGtleXNUb0xlYXZlLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuIF90aGlzMi5wZXJmb3JtTGVhdmUoa2V5LCBfdGhpczIuY2hpbGRSZWZzW2tleV0pO1xuICAgIH0pO1xuICB9O1xuXG4gIFRyYW5zaXRpb25Hcm91cC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgLy8gVE9ETzogd2UgY291bGQgZ2V0IHJpZCBvZiB0aGUgbmVlZCBmb3IgdGhlIHdyYXBwZXIgbm9kZVxuICAgIC8vIGJ5IGNsb25pbmcgYSBzaW5nbGUgY2hpbGRcbiAgICB2YXIgY2hpbGRyZW5Ub1JlbmRlciA9IFtdO1xuXG4gICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3Aoa2V5KSB7XG4gICAgICB2YXIgY2hpbGQgPSBfdGhpczMuc3RhdGUuY2hpbGRyZW5ba2V5XTtcbiAgICAgIGlmIChjaGlsZCkge1xuICAgICAgICB2YXIgaXNDYWxsYmFja1JlZiA9IHR5cGVvZiBjaGlsZC5yZWYgIT09ICdzdHJpbmcnO1xuICAgICAgICB2YXIgZmFjdG9yeUNoaWxkID0gX3RoaXMzLnByb3BzLmNoaWxkRmFjdG9yeShjaGlsZCk7XG4gICAgICAgIHZhciByZWYgPSBmdW5jdGlvbiByZWYocikge1xuICAgICAgICAgIF90aGlzMy5jaGlsZFJlZnNba2V5XSA9IHI7XG4gICAgICAgIH07XG5cbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/ICgwLCBfd2FybmluZzIuZGVmYXVsdCkoaXNDYWxsYmFja1JlZiwgJ3N0cmluZyByZWZzIGFyZSBub3Qgc3VwcG9ydGVkIG9uIGNoaWxkcmVuIG9mIFRyYW5zaXRpb25Hcm91cCBhbmQgd2lsbCBiZSBpZ25vcmVkLiAnICsgJ1BsZWFzZSB1c2UgYSBjYWxsYmFjayByZWYgaW5zdGVhZDogaHR0cHM6Ly9mYWNlYm9vay5naXRodWIuaW8vcmVhY3QvZG9jcy9yZWZzLWFuZC10aGUtZG9tLmh0bWwjdGhlLXJlZi1jYWxsYmFjay1hdHRyaWJ1dGUnKSA6IHZvaWQgMDtcblxuICAgICAgICAvLyBBbHdheXMgY2hhaW5pbmcgdGhlIHJlZnMgbGVhZHMgdG8gcHJvYmxlbXMgd2hlbiB0aGUgY2hpbGRGYWN0b3J5XG4gICAgICAgIC8vIHdyYXBzIHRoZSBjaGlsZC4gVGhlIGNoaWxkIHJlZiBjYWxsYmFjayBnZXRzIGNhbGxlZCB0d2ljZSB3aXRoIHRoZVxuICAgICAgICAvLyB3cmFwcGVyIGFuZCB0aGUgY2hpbGQuIFNvIHdlIG9ubHkgbmVlZCB0byBjaGFpbiB0aGUgcmVmIGlmIHRoZVxuICAgICAgICAvLyBmYWN0b3J5Q2hpbGQgaXMgbm90IGRpZmZlcmVudCBmcm9tIGNoaWxkLlxuICAgICAgICBpZiAoZmFjdG9yeUNoaWxkID09PSBjaGlsZCAmJiBpc0NhbGxiYWNrUmVmKSB7XG4gICAgICAgICAgcmVmID0gKDAsIF9jaGFpbkZ1bmN0aW9uMi5kZWZhdWx0KShjaGlsZC5yZWYsIHJlZik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBZb3UgbWF5IG5lZWQgdG8gYXBwbHkgcmVhY3RpdmUgdXBkYXRlcyB0byBhIGNoaWxkIGFzIGl0IGlzIGxlYXZpbmcuXG4gICAgICAgIC8vIFRoZSBub3JtYWwgUmVhY3Qgd2F5IHRvIGRvIGl0IHdvbid0IHdvcmsgc2luY2UgdGhlIGNoaWxkIHdpbGwgaGF2ZVxuICAgICAgICAvLyBhbHJlYWR5IGJlZW4gcmVtb3ZlZC4gSW4gY2FzZSB5b3UgbmVlZCB0aGlzIGJlaGF2aW9yIHlvdSBjYW4gcHJvdmlkZVxuICAgICAgICAvLyBhIGNoaWxkRmFjdG9yeSBmdW5jdGlvbiB0byB3cmFwIGV2ZXJ5IGNoaWxkLCBldmVuIHRoZSBvbmVzIHRoYXQgYXJlXG4gICAgICAgIC8vIGxlYXZpbmcuXG4gICAgICAgIGNoaWxkcmVuVG9SZW5kZXIucHVzaChfcmVhY3QyLmRlZmF1bHQuY2xvbmVFbGVtZW50KGZhY3RvcnlDaGlsZCwge1xuICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgIHJlZjogcmVmXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZm9yICh2YXIga2V5IGluIHRoaXMuc3RhdGUuY2hpbGRyZW4pIHtcbiAgICAgIF9sb29wKGtleSk7XG4gICAgfVxuXG4gICAgLy8gRG8gbm90IGZvcndhcmQgVHJhbnNpdGlvbkdyb3VwIHByb3BzIHRvIHByaW1pdGl2ZSBET00gbm9kZXNcbiAgICB2YXIgcHJvcHMgPSBfZXh0ZW5kcyh7fSwgdGhpcy5wcm9wcyk7XG4gICAgZGVsZXRlIHByb3BzLnRyYW5zaXRpb25MZWF2ZTtcbiAgICBkZWxldGUgcHJvcHMudHJhbnNpdGlvbk5hbWU7XG4gICAgZGVsZXRlIHByb3BzLnRyYW5zaXRpb25BcHBlYXI7XG4gICAgZGVsZXRlIHByb3BzLnRyYW5zaXRpb25FbnRlcjtcbiAgICBkZWxldGUgcHJvcHMuY2hpbGRGYWN0b3J5O1xuICAgIGRlbGV0ZSBwcm9wcy50cmFuc2l0aW9uTGVhdmVUaW1lb3V0O1xuICAgIGRlbGV0ZSBwcm9wcy50cmFuc2l0aW9uRW50ZXJUaW1lb3V0O1xuICAgIGRlbGV0ZSBwcm9wcy50cmFuc2l0aW9uQXBwZWFyVGltZW91dDtcbiAgICBkZWxldGUgcHJvcHMuY29tcG9uZW50O1xuXG4gICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KHRoaXMucHJvcHMuY29tcG9uZW50LCBwcm9wcywgY2hpbGRyZW5Ub1JlbmRlcik7XG4gIH07XG5cbiAgcmV0dXJuIFRyYW5zaXRpb25Hcm91cDtcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cblRyYW5zaXRpb25Hcm91cC5kaXNwbGF5TmFtZSA9ICdUcmFuc2l0aW9uR3JvdXAnO1xuXG5cblRyYW5zaXRpb25Hcm91cC5wcm9wVHlwZXMgPSBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyBwcm9wVHlwZXMgOiB7fTtcblRyYW5zaXRpb25Hcm91cC5kZWZhdWx0UHJvcHMgPSBkZWZhdWx0UHJvcHM7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFRyYW5zaXRpb25Hcm91cDtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vcmVhY3QtdHJhbnNpdGlvbi1ncm91cC9UcmFuc2l0aW9uR3JvdXAuanMiLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmdldENoaWxkTWFwcGluZyA9IGdldENoaWxkTWFwcGluZztcbmV4cG9ydHMubWVyZ2VDaGlsZE1hcHBpbmdzID0gbWVyZ2VDaGlsZE1hcHBpbmdzO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxuLyoqXG4gKiBHaXZlbiBgdGhpcy5wcm9wcy5jaGlsZHJlbmAsIHJldHVybiBhbiBvYmplY3QgbWFwcGluZyBrZXkgdG8gY2hpbGQuXG4gKlxuICogQHBhcmFtIHsqfSBjaGlsZHJlbiBgdGhpcy5wcm9wcy5jaGlsZHJlbmBcbiAqIEByZXR1cm4ge29iamVjdH0gTWFwcGluZyBvZiBrZXkgdG8gY2hpbGRcbiAqL1xuZnVuY3Rpb24gZ2V0Q2hpbGRNYXBwaW5nKGNoaWxkcmVuKSB7XG4gIGlmICghY2hpbGRyZW4pIHtcbiAgICByZXR1cm4gY2hpbGRyZW47XG4gIH1cbiAgdmFyIHJlc3VsdCA9IHt9O1xuICBfcmVhY3QuQ2hpbGRyZW4ubWFwKGNoaWxkcmVuLCBmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICByZXR1cm4gY2hpbGQ7XG4gIH0pLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgcmVzdWx0W2NoaWxkLmtleV0gPSBjaGlsZDtcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogV2hlbiB5b3UncmUgYWRkaW5nIG9yIHJlbW92aW5nIGNoaWxkcmVuIHNvbWUgbWF5IGJlIGFkZGVkIG9yIHJlbW92ZWQgaW4gdGhlXG4gKiBzYW1lIHJlbmRlciBwYXNzLiBXZSB3YW50IHRvIHNob3cgKmJvdGgqIHNpbmNlIHdlIHdhbnQgdG8gc2ltdWx0YW5lb3VzbHlcbiAqIGFuaW1hdGUgZWxlbWVudHMgaW4gYW5kIG91dC4gVGhpcyBmdW5jdGlvbiB0YWtlcyBhIHByZXZpb3VzIHNldCBvZiBrZXlzXG4gKiBhbmQgYSBuZXcgc2V0IG9mIGtleXMgYW5kIG1lcmdlcyB0aGVtIHdpdGggaXRzIGJlc3QgZ3Vlc3Mgb2YgdGhlIGNvcnJlY3RcbiAqIG9yZGVyaW5nLiBJbiB0aGUgZnV0dXJlIHdlIG1heSBleHBvc2Ugc29tZSBvZiB0aGUgdXRpbGl0aWVzIGluXG4gKiBSZWFjdE11bHRpQ2hpbGQgdG8gbWFrZSB0aGlzIGVhc3ksIGJ1dCBmb3Igbm93IFJlYWN0IGl0c2VsZiBkb2VzIG5vdFxuICogZGlyZWN0bHkgaGF2ZSB0aGlzIGNvbmNlcHQgb2YgdGhlIHVuaW9uIG9mIHByZXZDaGlsZHJlbiBhbmQgbmV4dENoaWxkcmVuXG4gKiBzbyB3ZSBpbXBsZW1lbnQgaXQgaGVyZS5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gcHJldiBwcmV2IGNoaWxkcmVuIGFzIHJldHVybmVkIGZyb21cbiAqIGBSZWFjdFRyYW5zaXRpb25DaGlsZE1hcHBpbmcuZ2V0Q2hpbGRNYXBwaW5nKClgLlxuICogQHBhcmFtIHtvYmplY3R9IG5leHQgbmV4dCBjaGlsZHJlbiBhcyByZXR1cm5lZCBmcm9tXG4gKiBgUmVhY3RUcmFuc2l0aW9uQ2hpbGRNYXBwaW5nLmdldENoaWxkTWFwcGluZygpYC5cbiAqIEByZXR1cm4ge29iamVjdH0gYSBrZXkgc2V0IHRoYXQgY29udGFpbnMgYWxsIGtleXMgaW4gYHByZXZgIGFuZCBhbGwga2V5c1xuICogaW4gYG5leHRgIGluIGEgcmVhc29uYWJsZSBvcmRlci5cbiAqL1xuZnVuY3Rpb24gbWVyZ2VDaGlsZE1hcHBpbmdzKHByZXYsIG5leHQpIHtcbiAgcHJldiA9IHByZXYgfHwge307XG4gIG5leHQgPSBuZXh0IHx8IHt9O1xuXG4gIGZ1bmN0aW9uIGdldFZhbHVlRm9yS2V5KGtleSkge1xuICAgIGlmIChuZXh0Lmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIHJldHVybiBuZXh0W2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHByZXZba2V5XTtcbiAgfVxuXG4gIC8vIEZvciBlYWNoIGtleSBvZiBgbmV4dGAsIHRoZSBsaXN0IG9mIGtleXMgdG8gaW5zZXJ0IGJlZm9yZSB0aGF0IGtleSBpblxuICAvLyB0aGUgY29tYmluZWQgbGlzdFxuICB2YXIgbmV4dEtleXNQZW5kaW5nID0ge307XG5cbiAgdmFyIHBlbmRpbmdLZXlzID0gW107XG4gIGZvciAodmFyIHByZXZLZXkgaW4gcHJldikge1xuICAgIGlmIChuZXh0Lmhhc093blByb3BlcnR5KHByZXZLZXkpKSB7XG4gICAgICBpZiAocGVuZGluZ0tleXMubGVuZ3RoKSB7XG4gICAgICAgIG5leHRLZXlzUGVuZGluZ1twcmV2S2V5XSA9IHBlbmRpbmdLZXlzO1xuICAgICAgICBwZW5kaW5nS2V5cyA9IFtdO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBwZW5kaW5nS2V5cy5wdXNoKHByZXZLZXkpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBpID0gdm9pZCAwO1xuICB2YXIgY2hpbGRNYXBwaW5nID0ge307XG4gIGZvciAodmFyIG5leHRLZXkgaW4gbmV4dCkge1xuICAgIGlmIChuZXh0S2V5c1BlbmRpbmcuaGFzT3duUHJvcGVydHkobmV4dEtleSkpIHtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBuZXh0S2V5c1BlbmRpbmdbbmV4dEtleV0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHBlbmRpbmdOZXh0S2V5ID0gbmV4dEtleXNQZW5kaW5nW25leHRLZXldW2ldO1xuICAgICAgICBjaGlsZE1hcHBpbmdbbmV4dEtleXNQZW5kaW5nW25leHRLZXldW2ldXSA9IGdldFZhbHVlRm9yS2V5KHBlbmRpbmdOZXh0S2V5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgY2hpbGRNYXBwaW5nW25leHRLZXldID0gZ2V0VmFsdWVGb3JLZXkobmV4dEtleSk7XG4gIH1cblxuICAvLyBGaW5hbGx5LCBhZGQgdGhlIGtleXMgd2hpY2ggZGlkbid0IGFwcGVhciBiZWZvcmUgYW55IGtleSBpbiBgbmV4dGBcbiAgZm9yIChpID0gMDsgaSA8IHBlbmRpbmdLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgY2hpbGRNYXBwaW5nW3BlbmRpbmdLZXlzW2ldXSA9IGdldFZhbHVlRm9yS2V5KHBlbmRpbmdLZXlzW2ldKTtcbiAgfVxuXG4gIHJldHVybiBjaGlsZE1hcHBpbmc7XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9yZWFjdC10cmFuc2l0aW9uLWdyb3VwL3V0aWxzL0NoaWxkTWFwcGluZy5qcyIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMubmFtZVNoYXBlID0gdW5kZWZpbmVkO1xuZXhwb3J0cy50cmFuc2l0aW9uVGltZW91dCA9IHRyYW5zaXRpb25UaW1lb3V0O1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiB0cmFuc2l0aW9uVGltZW91dCh0cmFuc2l0aW9uVHlwZSkge1xuICB2YXIgdGltZW91dFByb3BOYW1lID0gJ3RyYW5zaXRpb24nICsgdHJhbnNpdGlvblR5cGUgKyAnVGltZW91dCc7XG4gIHZhciBlbmFibGVkUHJvcE5hbWUgPSAndHJhbnNpdGlvbicgKyB0cmFuc2l0aW9uVHlwZTtcblxuICByZXR1cm4gZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgLy8gSWYgdGhlIHRyYW5zaXRpb24gaXMgZW5hYmxlZFxuICAgIGlmIChwcm9wc1tlbmFibGVkUHJvcE5hbWVdKSB7XG4gICAgICAvLyBJZiBubyB0aW1lb3V0IGR1cmF0aW9uIGlzIHByb3ZpZGVkXG4gICAgICBpZiAocHJvcHNbdGltZW91dFByb3BOYW1lXSA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBuZXcgRXJyb3IodGltZW91dFByb3BOYW1lICsgJyB3YXNuXFwndCBzdXBwbGllZCB0byBDU1NUcmFuc2l0aW9uR3JvdXA6ICcgKyAndGhpcyBjYW4gY2F1c2UgdW5yZWxpYWJsZSBhbmltYXRpb25zIGFuZCB3b25cXCd0IGJlIHN1cHBvcnRlZCBpbiAnICsgJ2EgZnV0dXJlIHZlcnNpb24gb2YgUmVhY3QuIFNlZSAnICsgJ2h0dHBzOi8vZmIubWUvcmVhY3QtYW5pbWF0aW9uLXRyYW5zaXRpb24tZ3JvdXAtdGltZW91dCBmb3IgbW9yZSAnICsgJ2luZm9ybWF0aW9uLicpO1xuXG4gICAgICAgIC8vIElmIHRoZSBkdXJhdGlvbiBpc24ndCBhIG51bWJlclxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJvcHNbdGltZW91dFByb3BOYW1lXSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBFcnJvcih0aW1lb3V0UHJvcE5hbWUgKyAnIG11c3QgYmUgYSBudW1iZXIgKGluIG1pbGxpc2Vjb25kcyknKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcbn1cblxudmFyIG5hbWVTaGFwZSA9IGV4cG9ydHMubmFtZVNoYXBlID0gX3Byb3BUeXBlczIuZGVmYXVsdC5vbmVPZlR5cGUoW19wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLCBfcHJvcFR5cGVzMi5kZWZhdWx0LnNoYXBlKHtcbiAgZW50ZXI6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBsZWF2ZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGFjdGl2ZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmdcbn0pLCBfcHJvcFR5cGVzMi5kZWZhdWx0LnNoYXBlKHtcbiAgZW50ZXI6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBlbnRlckFjdGl2ZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGxlYXZlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgbGVhdmVBY3RpdmU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBhcHBlYXI6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBhcHBlYXJBY3RpdmU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nXG59KV0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vcmVhY3QtdHJhbnNpdGlvbi1ncm91cC91dGlscy9Qcm9wVHlwZXMuanMiLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmRlZmF1bHRNZW1vaXplID0gZGVmYXVsdE1lbW9pemU7XG5leHBvcnRzLmNyZWF0ZVNlbGVjdG9yQ3JlYXRvciA9IGNyZWF0ZVNlbGVjdG9yQ3JlYXRvcjtcbmV4cG9ydHMuY3JlYXRlU3RydWN0dXJlZFNlbGVjdG9yID0gY3JlYXRlU3RydWN0dXJlZFNlbGVjdG9yO1xuZnVuY3Rpb24gZGVmYXVsdEVxdWFsaXR5Q2hlY2soYSwgYikge1xuICByZXR1cm4gYSA9PT0gYjtcbn1cblxuZnVuY3Rpb24gYXJlQXJndW1lbnRzU2hhbGxvd2x5RXF1YWwoZXF1YWxpdHlDaGVjaywgcHJldiwgbmV4dCkge1xuICBpZiAocHJldiA9PT0gbnVsbCB8fCBuZXh0ID09PSBudWxsIHx8IHByZXYubGVuZ3RoICE9PSBuZXh0Lmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIERvIHRoaXMgaW4gYSBmb3IgbG9vcCAoYW5kIG5vdCBhIGBmb3JFYWNoYCBvciBhbiBgZXZlcnlgKSBzbyB3ZSBjYW4gZGV0ZXJtaW5lIGVxdWFsaXR5IGFzIGZhc3QgYXMgcG9zc2libGUuXG4gIHZhciBsZW5ndGggPSBwcmV2Lmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGlmICghZXF1YWxpdHlDaGVjayhwcmV2W2ldLCBuZXh0W2ldKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBkZWZhdWx0TWVtb2l6ZShmdW5jKSB7XG4gIHZhciBlcXVhbGl0eUNoZWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBkZWZhdWx0RXF1YWxpdHlDaGVjaztcblxuICB2YXIgbGFzdEFyZ3MgPSBudWxsO1xuICB2YXIgbGFzdFJlc3VsdCA9IG51bGw7XG4gIC8vIHdlIHJlZmVyZW5jZSBhcmd1bWVudHMgaW5zdGVhZCBvZiBzcHJlYWRpbmcgdGhlbSBmb3IgcGVyZm9ybWFuY2UgcmVhc29uc1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGlmICghYXJlQXJndW1lbnRzU2hhbGxvd2x5RXF1YWwoZXF1YWxpdHlDaGVjaywgbGFzdEFyZ3MsIGFyZ3VtZW50cykpIHtcbiAgICAgIC8vIGFwcGx5IGFyZ3VtZW50cyBpbnN0ZWFkIG9mIHNwcmVhZGluZyBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICBsYXN0UmVzdWx0ID0gZnVuYy5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgIH1cblxuICAgIGxhc3RBcmdzID0gYXJndW1lbnRzO1xuICAgIHJldHVybiBsYXN0UmVzdWx0O1xuICB9O1xufVxuXG5mdW5jdGlvbiBnZXREZXBlbmRlbmNpZXMoZnVuY3MpIHtcbiAgdmFyIGRlcGVuZGVuY2llcyA9IEFycmF5LmlzQXJyYXkoZnVuY3NbMF0pID8gZnVuY3NbMF0gOiBmdW5jcztcblxuICBpZiAoIWRlcGVuZGVuY2llcy5ldmVyeShmdW5jdGlvbiAoZGVwKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBkZXAgPT09ICdmdW5jdGlvbic7XG4gIH0pKSB7XG4gICAgdmFyIGRlcGVuZGVuY3lUeXBlcyA9IGRlcGVuZGVuY2llcy5tYXAoZnVuY3Rpb24gKGRlcCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiBkZXA7XG4gICAgfSkuam9pbignLCAnKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1NlbGVjdG9yIGNyZWF0b3JzIGV4cGVjdCBhbGwgaW5wdXQtc2VsZWN0b3JzIHRvIGJlIGZ1bmN0aW9ucywgJyArICgnaW5zdGVhZCByZWNlaXZlZCB0aGUgZm9sbG93aW5nIHR5cGVzOiBbJyArIGRlcGVuZGVuY3lUeXBlcyArICddJykpO1xuICB9XG5cbiAgcmV0dXJuIGRlcGVuZGVuY2llcztcbn1cblxuZnVuY3Rpb24gY3JlYXRlU2VsZWN0b3JDcmVhdG9yKG1lbW9pemUpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIG1lbW9pemVPcHRpb25zID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIG1lbW9pemVPcHRpb25zW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBmdW5jcyA9IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICBmdW5jc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgIH1cblxuICAgIHZhciByZWNvbXB1dGF0aW9ucyA9IDA7XG4gICAgdmFyIHJlc3VsdEZ1bmMgPSBmdW5jcy5wb3AoKTtcbiAgICB2YXIgZGVwZW5kZW5jaWVzID0gZ2V0RGVwZW5kZW5jaWVzKGZ1bmNzKTtcblxuICAgIHZhciBtZW1vaXplZFJlc3VsdEZ1bmMgPSBtZW1vaXplLmFwcGx5KHVuZGVmaW5lZCwgW2Z1bmN0aW9uICgpIHtcbiAgICAgIHJlY29tcHV0YXRpb25zKys7XG4gICAgICAvLyBhcHBseSBhcmd1bWVudHMgaW5zdGVhZCBvZiBzcHJlYWRpbmcgZm9yIHBlcmZvcm1hbmNlLlxuICAgICAgcmV0dXJuIHJlc3VsdEZ1bmMuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICB9XS5jb25jYXQobWVtb2l6ZU9wdGlvbnMpKTtcblxuICAgIC8vIElmIGEgc2VsZWN0b3IgaXMgY2FsbGVkIHdpdGggdGhlIGV4YWN0IHNhbWUgYXJndW1lbnRzIHdlIGRvbid0IG5lZWQgdG8gdHJhdmVyc2Ugb3VyIGRlcGVuZGVuY2llcyBhZ2Fpbi5cbiAgICB2YXIgc2VsZWN0b3IgPSBkZWZhdWx0TWVtb2l6ZShmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcGFyYW1zID0gW107XG4gICAgICB2YXIgbGVuZ3RoID0gZGVwZW5kZW5jaWVzLmxlbmd0aDtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBhcHBseSBhcmd1bWVudHMgaW5zdGVhZCBvZiBzcHJlYWRpbmcgYW5kIG11dGF0ZSBhIGxvY2FsIGxpc3Qgb2YgcGFyYW1zIGZvciBwZXJmb3JtYW5jZS5cbiAgICAgICAgcGFyYW1zLnB1c2goZGVwZW5kZW5jaWVzW2ldLmFwcGx5KG51bGwsIGFyZ3VtZW50cykpO1xuICAgICAgfVxuXG4gICAgICAvLyBhcHBseSBhcmd1bWVudHMgaW5zdGVhZCBvZiBzcHJlYWRpbmcgZm9yIHBlcmZvcm1hbmNlLlxuICAgICAgcmV0dXJuIG1lbW9pemVkUmVzdWx0RnVuYy5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgIH0pO1xuXG4gICAgc2VsZWN0b3IucmVzdWx0RnVuYyA9IHJlc3VsdEZ1bmM7XG4gICAgc2VsZWN0b3IucmVjb21wdXRhdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gcmVjb21wdXRhdGlvbnM7XG4gICAgfTtcbiAgICBzZWxlY3Rvci5yZXNldFJlY29tcHV0YXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHJlY29tcHV0YXRpb25zID0gMDtcbiAgICB9O1xuICAgIHJldHVybiBzZWxlY3RvcjtcbiAgfTtcbn1cblxudmFyIGNyZWF0ZVNlbGVjdG9yID0gZXhwb3J0cy5jcmVhdGVTZWxlY3RvciA9IGNyZWF0ZVNlbGVjdG9yQ3JlYXRvcihkZWZhdWx0TWVtb2l6ZSk7XG5cbmZ1bmN0aW9uIGNyZWF0ZVN0cnVjdHVyZWRTZWxlY3RvcihzZWxlY3RvcnMpIHtcbiAgdmFyIHNlbGVjdG9yQ3JlYXRvciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogY3JlYXRlU2VsZWN0b3I7XG5cbiAgaWYgKHR5cGVvZiBzZWxlY3RvcnMgIT09ICdvYmplY3QnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjcmVhdGVTdHJ1Y3R1cmVkU2VsZWN0b3IgZXhwZWN0cyBmaXJzdCBhcmd1bWVudCB0byBiZSBhbiBvYmplY3QgJyArICgnd2hlcmUgZWFjaCBwcm9wZXJ0eSBpcyBhIHNlbGVjdG9yLCBpbnN0ZWFkIHJlY2VpdmVkIGEgJyArIHR5cGVvZiBzZWxlY3RvcnMpKTtcbiAgfVxuICB2YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzKHNlbGVjdG9ycyk7XG4gIHJldHVybiBzZWxlY3RvckNyZWF0b3Iob2JqZWN0S2V5cy5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiBzZWxlY3RvcnNba2V5XTtcbiAgfSksIGZ1bmN0aW9uICgpIHtcbiAgICBmb3IgKHZhciBfbGVuMyA9IGFyZ3VtZW50cy5sZW5ndGgsIHZhbHVlcyA9IEFycmF5KF9sZW4zKSwgX2tleTMgPSAwOyBfa2V5MyA8IF9sZW4zOyBfa2V5MysrKSB7XG4gICAgICB2YWx1ZXNbX2tleTNdID0gYXJndW1lbnRzW19rZXkzXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWVzLnJlZHVjZShmdW5jdGlvbiAoY29tcG9zaXRpb24sIHZhbHVlLCBpbmRleCkge1xuICAgICAgY29tcG9zaXRpb25bb2JqZWN0S2V5c1tpbmRleF1dID0gdmFsdWU7XG4gICAgICByZXR1cm4gY29tcG9zaXRpb247XG4gICAgfSwge30pO1xuICB9KTtcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3Jlc2VsZWN0L2xpYi9pbmRleC5qcyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IExpbmsgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcclxuaW1wb3J0IFRvZ2dsZVNldHRpbmdzIGZyb20gJy4uL1RvZ2dsZVNldHRpbmdzL1RvZ2dsZVNldHRpbmdzJztcclxuaW1wb3J0ICcuL0RldmljZUxpc3RJdGVtLnNjc3MnO1xyXG5cclxuY2xhc3MgRGV2aWNlTGlzdEl0ZW0gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG5cclxuICAgIHRoaXMuc2V0RGV2aWNlSWQgPSAoZSkgPT57XHJcbiAgICAgIHRoaXMucHJvcHMuc2V0UG9wdXBTaG93bih0aGlzLnByb3BzLmRhdGEuX2lkKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICByZW5kZXIgKCkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJkZXZpY2UtaXRlbVwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGV2aWNlLWl0ZW1fX2luZm9cIj5cclxuICAgICAgICAgIDxMaW5rIGNsYXNzTmFtZT1cImRldmljZS1pdGVtX19pbmZvLW5hbWVcIiB0bz17XHJcbiAgICAgICAgICAgIGAvZGV2aWNlcy9kZXZpY2UvJHt0aGlzLnByb3BzLmRhdGEuX2lkfWBcclxuICAgICAgICAgIH0+XHJcbiAgICAgICAgICAgIHt0aGlzLnByb3BzLmRhdGEubmFtZX1cclxuICAgICAgICAgIDwvTGluaz5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGV2aWNlLWl0ZW1fX2luZm8tc3RhdHVzXCI+XHJcbiAgICAgICAgICAgIDxUb2dnbGVTZXR0aW5nc1xyXG4gICAgICAgICAgICAgIGNoZWNrZWQ9e3RoaXMucHJvcHMuZGF0YS5zdGF0dXN9XHJcbiAgICAgICAgICAgICAgaXRlbUlkPXt0aGlzLnByb3BzLmRhdGEuX2lkfVxyXG4gICAgICAgICAgICAgIHNldEl0ZW1WYWx1ZT17dGhpcy5wcm9wcy5jaGFuZ2VTdGF0dXN9Lz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGV2aWNlLWl0ZW1fX2Rlc2NyaXB0aW9uXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGV2aWNlLWl0ZW1fX2Rlc2NyaXB0aW9uLWxvY2F0aW9uXCI+XHJcbiAgICAgICAgICAgICAge3RoaXMucHJvcHMubG9jYXRpb259PC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGV2aWNlLWl0ZW1fX2Rlc2NyaXB0aW9uLWljb25cIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRldmljZS1pdGVtX19kZXNjcmlwdGlvbi1pY29uLWRlbGV0ZVwiPlxyXG4gICAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwiZmEgZmEtdHJhc2hcIlxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuc2V0RGV2aWNlSWR9PlxyXG4gICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuRGV2aWNlTGlzdEl0ZW0ucHJvcFR5cGVzID0ge1xyXG4gIGNoYW5nZVN0YXR1czogUHJvcFR5cGVzLmZ1bmMsXHJcbiAgZGVsZXRlRGV2aWNlOiBQcm9wVHlwZXMuZnVuYyxcclxuICBzZXRQb3B1cFNob3duOiBQcm9wVHlwZXMuZnVuYyxcclxuICBsb2NhdGlvbjogUHJvcFR5cGVzLnN0cmluZyxcclxuICBkYXRhOiBQcm9wVHlwZXMuc2hhcGUoe1xyXG4gICAgc3RhdHVzOiBQcm9wVHlwZXMuYm9vbGVhbixcclxuICAgIF9pZDogUHJvcFR5cGVzLnN0cmluZyxcclxuICAgIG5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgICBsb2NhdGlvbjogUHJvcFR5cGVzLnN0cmluZ1xyXG4gIH0pXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBEZXZpY2VMaXN0SXRlbTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbXBvbmVudHMvRGV2aWNlTGlzdEl0ZW0vRGV2aWNlTGlzdEl0ZW0uanMiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcbmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL01lc3NhZ2UvTWVzc2FnZSc7XHJcbmltcG9ydCB7IFBvcHVwIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9Qb3B1cC9Qb3B1cCc7XHJcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvQnV0dG9uL0J1dHRvbic7XHJcbmltcG9ydCBMaXN0SGVhZGVyIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvTGlzdEhlYWRlci9MaXN0SGVhZGVyJztcclxuXHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XHJcblxyXG5jbGFzcyBEZXZpY2VzU2VjdGlvbiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIgKCkge1xyXG4gICAgY29uc3QgZmlsdGVyT3B0aW9uID0gdGhpcy5wcm9wcy5maWx0ZXJPcHRpb247XHJcblxyXG4gICAgaWYgKHR5cGVvZiBmaWx0ZXJPcHRpb24gIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIHRoaXMucHJvcHMuZmlsdGVyQWN0aW9uKGZpbHRlck9wdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwiZGV2aWNlLWxpc3RcIj5cclxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwiZGV2aWNlLWxpc3RfX3RpdGxlXCI+XHJcbiAgICAgICAgICB7dGhpcy5wcm9wcy5sb2NhdGlvbk9mRGV2aWNlcyA/XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMubG9jYXRpb25PZkRldmljZXMudG9VcHBlckNhc2UoKVxyXG4gICAgICAgICAgICA6ICdZb3VyIGRldmljZXMnfVxyXG4gICAgICAgIDwvaDE+XHJcbiAgICAgICAgPExpc3RIZWFkZXJcclxuICAgICAgICAgIHF1YW50aXR5PXt0aGlzLnByb3BzLnF1YW50aXR5fVxyXG4gICAgICAgICAgbG9jYXRpb249e3RoaXMucHJvcHMubG9jYXRpb259XHJcbiAgICAgICAgICBoaXN0b3J5PXt0aGlzLnByb3BzLmhpc3Rvcnl9XHJcbiAgICAgICAgICBtYXRjaD17dGhpcy5wcm9wcy5tYXRjaH0gLz5cclxuICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9XCJkZXZpY2UtbGlzdF9fY29udGVudFwiPlxyXG4gICAgICAgICAgeyB0aGlzLnByb3BzLmNoaWxkcmVuIH1cclxuICAgICAgICA8L3NlY3Rpb24+XHJcbiAgICAgICAgPFBvcHVwXHJcbiAgICAgICAgICBzZXRQb3B1cFNob3duPXt0aGlzLnByb3BzLnNldFBvcHVwU2hvd259XHJcbiAgICAgICAgICBwb3B1cFNob3duPXt0aGlzLnByb3BzLnBvcHVwU2hvd259XHJcbiAgICAgICAgICBoZWFkZXI9XCJDb25maXJtIHRoZSBhY3Rpb25cIlxyXG4gICAgICAgICAgdGV4dD1cIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byByZW1vdmUgdGhlIGRldmljZT9cIj5cclxuICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgc2V0UG9wdXBTaG93bj17dGhpcy5wcm9wcy5zZXRQb3B1cFNob3dufVxyXG4gICAgICAgICAgICBva0hhbmRsZXI9eygpID0+IHtcclxuICAgICAgICAgICAgICB0aGlzLnByb3BzLmRlbGV0ZURldmljZSh0aGlzLnByb3BzLmN1cnJlbnRJZCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zZXRQb3B1cFNob3duKCk7XHJcbiAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT17J2J0biBwb3B1cF9fYnRuJ31cclxuICAgICAgICAgICAgaW5uZXJUZXh0PXsnT2snfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgb2tIYW5kbGVyPXsoKSA9PiB7XHJcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zZXRQb3B1cFNob3duKCk7XHJcbiAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT17J2J0biBidG4tLWRlZmF1bHQgcG9wdXBfX2J0bid9XHJcbiAgICAgICAgICAgIGlubmVyVGV4dD17J0NhbmNlbCd9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgIDwvUG9wdXA+XHJcbiAgICAgICAgPE1lc3NhZ2VcclxuICAgICAgICAgIGNsZWFyU3RhdHVzPXt0aGlzLnByb3BzLmNsZWFyU3RhdHVzfVxyXG4gICAgICAgICAgaGVhZGVyPXsnRXJyb3InfVxyXG4gICAgICAgIC8+XHJcbiAgICAgIDwvc2VjdGlvbj5cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuRGV2aWNlc1NlY3Rpb24ucHJvcFR5cGVzID0ge1xyXG4gIGNoYW5nZVN0YXR1czogUHJvcFR5cGVzLmZ1bmMsXHJcbiAgZGVsZXRlRGV2aWNlOiBQcm9wVHlwZXMuZnVuYyxcclxuICBsb2FkRGV2aWNlczogUHJvcFR5cGVzLmZ1bmMsXHJcbiAgZmlsdGVyT3B0aW9uOiBQcm9wVHlwZXMuYW55LFxyXG4gIGZpbHRlckFjdGlvbjogUHJvcFR5cGVzLmZ1bmMsXHJcbiAgZGV2aWNlczogUHJvcFR5cGVzLmFycmF5LFxyXG4gIGxvY2F0aW9uOiBQcm9wVHlwZXMub2JqZWN0LFxyXG4gIGhpc3Rvcnk6IFByb3BUeXBlcy5vYmplY3QsXHJcbiAgbWF0Y2g6IFByb3BUeXBlcy5vYmplY3QsXHJcbiAgY2hpbGRyZW46IFByb3BUeXBlcy5hbnksXHJcbiAgY2xlYXJTdGF0dXM6IFByb3BUeXBlcy5mdW5jLFxyXG4gIGN1cnJlbnRJZDogUHJvcFR5cGVzLnN0cmluZyxcclxuICBzZXRQb3B1cFNob3duOiBQcm9wVHlwZXMuZnVuYyxcclxuICBwb3B1cFNob3duOiBQcm9wVHlwZXMuYm9vbCxcclxuICBxdWFudGl0eTogUHJvcFR5cGVzLm51bWJlcixcclxuICBsb2NhdGlvbk9mRGV2aWNlczogUHJvcFR5cGVzLnN0cmluZ1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgRGV2aWNlc1NlY3Rpb247XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21wb25lbnRzL0RldmlzZXNTZWN0aW9uL0RldmlzZXNTZWN0aW9uLmpzIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcclxuaW1wb3J0ICcuL0ZpbHRlclNlbGVjdC5zY3NzJztcclxuXHJcbmNvbnN0IEZpbHRlclNlbGVjdCA9IChwcm9wcykgPT4ge1xyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZpbHRlckJveFwiPlxyXG4gICAgICA8c2VsZWN0XHJcbiAgICAgICAgY2xhc3NOYW1lPVwiZmlsdGVyQm94X19maWx0ZXJcIlxyXG4gICAgICAgIHZhbHVlPXtwcm9wcy52YWx1ZSB8fCAnYWxsJ31cclxuICAgICAgICBvbkNoYW5nZT17ZSA9PiBwcm9wcy5oYW5kbGVTZWxlY3QoZS50YXJnZXQudmFsdWUpfT5cclxuICAgICAgICAgIHtwcm9wcy5vcHRpb25zLm1hcChpdGVtID0+XHJcbiAgICAgICAgICAgIDxvcHRpb25cclxuICAgICAgICAgICAgICB2YWx1ZT17IGl0ZW0udmFsdWV9XHJcbiAgICAgICAgICAgICAga2V5PXtpdGVtLnZhbHVlfT5cclxuICAgICAgICAgICAgICAgIHtpdGVtLmlubmVyVGV4dH1cclxuICAgICAgICAgICAgICA8L29wdGlvbj5cclxuICAgICAgICAgICl9XHJcbiAgICAgIDwvc2VsZWN0PlxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufTtcclxuXHJcbkZpbHRlclNlbGVjdC5wcm9wVHlwZXMgPSB7XHJcbiAgaGFuZGxlU2VsZWN0OiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxyXG4gIG9wdGlvbnM6IFByb3BUeXBlcy5hcnJheSxcclxuICB2YWx1ZTogUHJvcFR5cGVzLnN0cmluZ1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgRmlsdGVyU2VsZWN0O1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy9GaWx0ZXJTZWxlY3QvRmlsdGVyU2VsZWN0LmpzIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnO1xyXG5pbXBvcnQgcXVlcnlTdHJpbmcgZnJvbSAncXVlcnktc3RyaW5nJztcclxuaW1wb3J0IEZpbHRlclNlbGVjdCBmcm9tICcuLi9GaWx0ZXJTZWxlY3QvRmlsdGVyU2VsZWN0JztcclxuaW1wb3J0IFNlYXJjaCBmcm9tICcuLi9TZWFyY2gvU2VhcmNoJztcclxuaW1wb3J0IHtcclxuICBmaWx0ZXJBY3Rpb24sXHJcbiAgc2VhcmNoQWN0aW9uIH0gZnJvbSAnLi4vLi4vYWN0aW9ucy9kZXZpY2VzLmFjdGlvbic7XHJcbmltcG9ydCB7IHF1ZXJ5RnJvbU9iamVjdCB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgb3B0aW9ucyB9IGZyb20gJy4uLy4uL2RhdGEvZmlsdGVyT3B0aW9ucyc7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XHJcblxyXG5jbGFzcyBMaXN0SGVhZGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuaW5pdGlhbFBhcmFtcyA9IHtcclxuICAgICAgc2VhcmNoOiAnJyxcclxuICAgICAgZmlsdGVyOiAnYWxsJ1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmhhbmRsZUZpbHRlclNlbGVjdCA9IChmaWx0ZXJPcHRpb24pID0+IHtcclxuICAgICAgdGhpcy5wcm9wcy5maWx0ZXJBY3Rpb24oZmlsdGVyT3B0aW9uKTtcclxuICAgICAgdGhpcy51cGRhdGVVcmwoeyAuLi50aGlzLmluaXRpYWxQYXJhbXMsIGZpbHRlcjogZmlsdGVyT3B0aW9uIH0pO1xyXG4gICAgfTtcclxuICAgIHRoaXMuaGFuZGxlU2VhcmNoUmVzdWx0ID0gKHNlYXJjaFZhbHVlKSA9PiB7XHJcbiAgICAgIHRoaXMucHJvcHMuZmluZEl0ZW1zKHNlYXJjaFZhbHVlKTtcclxuICAgICAgdGhpcy51cGRhdGVVcmwoeyAuLi50aGlzLmluaXRpYWxQYXJhbXMsIHNlYXJjaDogc2VhcmNoVmFsdWUgfSk7XHJcbiAgICB9O1xyXG4gICAgdGhpcy51cGRhdGVVcmwgPSAocGFyYW1zKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1hdGNoID0gdGhpcy5wcm9wcy5tYXRjaDtcclxuICAgICAgY29uc3QgaGlzdG9yeSA9IHRoaXMucHJvcHMuaGlzdG9yeTtcclxuXHJcbiAgICAgIHRoaXMuaW5pdGlhbFBhcmFtcyA9IHBhcmFtcztcclxuICAgICAgaGlzdG9yeS5wdXNoKHtcclxuICAgICAgICBwYXRobmFtZTogbWF0Y2gudXJsLFxyXG4gICAgICAgIHNlYXJjaDogcXVlcnlGcm9tT2JqZWN0KHBhcmFtcylcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG4gIH1cclxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XHJcbiAgICBjb25zdCBsb2NhdGlvbiA9IHRoaXMucHJvcHMubG9jYXRpb247XHJcbiAgICBjb25zdCBzZWFyY2hWYWx1ZSA9IHF1ZXJ5U3RyaW5nLnBhcnNlKGxvY2F0aW9uLnNlYXJjaCkuc2VhcmNoO1xyXG4gICAgY29uc3QgZmlsdGVyVmFsdWUgPSBxdWVyeVN0cmluZy5wYXJzZShsb2NhdGlvbi5zZWFyY2gpLmZpbHRlcjtcclxuXHJcbiAgICBpZiAoc2VhcmNoVmFsdWUpIHtcclxuICAgICAgdGhpcy5oYW5kbGVTZWFyY2hSZXN1bHQoc2VhcmNoVmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChmaWx0ZXJWYWx1ZSkge1xyXG4gICAgICB0aGlzLmhhbmRsZUZpbHRlclNlbGVjdChmaWx0ZXJWYWx1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50ICgpIHtcclxuICAgIHRoaXMucHJvcHMuZmlsdGVyQWN0aW9uKCdhbGwnKTtcclxuICAgIHRoaXMucHJvcHMuZmluZEl0ZW1zKCcnKTtcclxuICB9XHJcblxyXG4gIHJlbmRlciAoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8aGVhZGVyIGNsYXNzTmFtZT1cImRldmljZS1saXN0X19oZWFkZXJcIj5cclxuICAgICAgICA8U2VhcmNoXHJcbiAgICAgICAgICBoYW5kbGVTZWFyY2g9e3RoaXMuaGFuZGxlU2VhcmNoUmVzdWx0fVxyXG4gICAgICAgICAgcXVhbnRpdHk9e3RoaXMucHJvcHMucXVhbnRpdHl9XHJcbiAgICAgICAgICB2YWx1ZT17dGhpcy5pbml0aWFsUGFyYW1zLnNlYXJjaH1cclxuICAgICAgICAvPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGV2aWNlLWxpc3RfX2hlYWRlci0tcmlnaHRcIj5cclxuICAgICAgICAgIDxGaWx0ZXJTZWxlY3RcclxuICAgICAgICAgICAgaGFuZGxlU2VsZWN0PXt0aGlzLmhhbmRsZUZpbHRlclNlbGVjdH1cclxuICAgICAgICAgICAgb3B0aW9ucz17b3B0aW9uc31cclxuICAgICAgICAgICAgdmFsdWU9e3RoaXMuaW5pdGlhbFBhcmFtcy5maWx0ZXJ9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICAgPExpbmsgdG89eycvYnVpbGRlcid9IGNsYXNzTmFtZT1cImJ0biBidG4tLXByaW1hcnkgYWRkLWl0ZW0tYnV0dG9uXCI+XHJcbiAgICAgICAgICAgIE5ld1xyXG4gICAgICAgICAgPC9MaW5rPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2hlYWRlcj5cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBtYXBTdGF0ZVRvUHJvcHMgPSBzdGF0ZSA9Pih7XHJcbiAgZmlsdGVyT3B0aW9uOiBzdGF0ZS5zZWFyY2hBbmRGaWx0ZXIuZmlsdGVyT3B0aW9uLFxyXG4gIHNlYXJjaDogc3RhdGUuc2VhcmNoQW5kRmlsdGVyLnNlYXJjaFZhbHVlXHJcbn0pO1xyXG5cclxuY29uc3QgbWFwRGlzcGF0Y2hUb1Byb3BzID0gKGRpc3BhdGNoKSA9PiAoe1xyXG4gIGZpbHRlckFjdGlvbjogKGZpbHRlck9wdGlvbikgPT4gZGlzcGF0Y2goZmlsdGVyQWN0aW9uKGZpbHRlck9wdGlvbikpLFxyXG4gIGZpbmRJdGVtczogKHNlYXJjaFZhbHVlKSA9PiBkaXNwYXRjaChzZWFyY2hBY3Rpb24oc2VhcmNoVmFsdWUpKVxyXG59KTtcclxuXHJcbkxpc3RIZWFkZXIucHJvcFR5cGVzID0ge1xyXG4gIHNlYXJjaDogUHJvcFR5cGVzLnN0cmluZyxcclxuICBmaWx0ZXJPcHRpb246IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgZmlsdGVyQWN0aW9uOiBQcm9wVHlwZXMuZnVuYyxcclxuICBmaW5kSXRlbXM6IFByb3BUeXBlcy5mdW5jLFxyXG4gIG1hdGNoOiBQcm9wVHlwZXMub2JqZWN0LFxyXG4gIGhpc3Rvcnk6IFByb3BUeXBlcy5vYmplY3QsXHJcbiAgbG9jYXRpb246IFByb3BUeXBlcy5vYmplY3QsXHJcbiAgbG9hZERldmljZXM6IFByb3BUeXBlcy5mdW5jLFxyXG4gIHF1YW50aXR5OiBQcm9wVHlwZXMubnVtYmVyXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcywgbWFwRGlzcGF0Y2hUb1Byb3BzKShMaXN0SGVhZGVyKTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbXBvbmVudHMvTGlzdEhlYWRlci9MaXN0SGVhZGVyLmpzIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcclxuaW1wb3J0ICcuL1BhZ2luYXRpb24uc2Nzcyc7XHJcblxyXG5jbGFzcyBQYWdpbmF0aW9uIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICB9XHJcblxyXG4gIHJlbmRlciAoKSB7XHJcbiAgICBjb25zdCBwYWdlTnVtYmVycyA9IFtdO1xyXG4gICAgY29uc3QgY3VycmVudFBhZ2UgPSB0aGlzLnByb3BzLmN1cnJlbnRQYWdlO1xyXG5cclxuICAgIGlmICghdGhpcy5wcm9wcy50b3RhbFBhZ2VzIHx8IHRoaXMucHJvcHMudG90YWxQYWdlcyA8PSAxKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHRoaXMucHJvcHMudG90YWxQYWdlczsgaSsrKSB7XHJcbiAgICAgIHBhZ2VOdW1iZXJzLnB1c2goaSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPHVsIGNsYXNzTmFtZT1cInBhZ2luYXRpb24tcGFnZXNcIj5cclxuICAgICAgICB7XHJcbiAgICAgICAgICBwYWdlTnVtYmVycy5tYXAobnVtYmVyID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICA8bGlcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y3VycmVudFBhZ2UgPT09IG51bWJlciA/XHJcbiAgICAgICAgICAgICAgICAncGFnaW5hdGlvbi1wYWdlc19fbnVtIGJ0bicgOlxyXG4gICAgICAgICAgICAgICAgJ3BhZ2luYXRpb24tcGFnZXNfX251bSBidG4gYnRuLS1kZWZhdWx0J1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAga2V5PXtudW1iZXJ9XHJcbiAgICAgICAgICAgICAgICBpZD17bnVtYmVyfVxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5oYW5kbGVDbGlja30+XHJcbiAgICAgICAgICAgICAgICB7bnVtYmVyfVxyXG4gICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgPC91bD5cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5QYWdpbmF0aW9uLnByb3BUeXBlcyA9IHtcclxuICBoYW5kbGVDbGljazogUHJvcFR5cGVzLmZ1bmMsXHJcbiAgc2V0UGFnZTogUHJvcFR5cGVzLmZ1bmMsXHJcbiAgY3VycmVudFBhZ2U6IFByb3BUeXBlcy5udW1iZXIsXHJcbiAgdG90YWxQYWdlczogUHJvcFR5cGVzLm51bWJlclxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgUGFnaW5hdGlvbjtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbXBvbmVudHMvUGFnaW5hdGlvbi9QYWdpbmF0aW9uLmpzIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcclxuaW1wb3J0ICcuL3NlYXJjaC5zY3NzJztcclxuXHJcbmNvbnN0IFNlYXJjaCA9IChwcm9wcykgPT4ge1xyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInNlYXJjaEJveFwiPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNlYXJjaEJveF9fcmVzdWx0c1wiPlxyXG4gICAgICAgIDxzcGFuPntwcm9wcy5xdWFudGl0eX08L3NwYW4+IGRldmljZXNcclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXY+XHJcbiAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICBuYW1lPVwic2VhcmNoXCJcclxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRmluZCBhIGRldmljZVwiXHJcbiAgICAgICAgICB2YWx1ZT17cHJvcHMudmFsdWV9XHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJzZWFyY2hCb3hfX2ZpZWxkXCJcclxuICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHtcclxuICAgICAgICAgICAgcHJvcHMuaGFuZGxlU2VhcmNoKGUudGFyZ2V0LnZhbHVlKTtcclxuICAgICAgICAgIH19Lz5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG59O1xyXG5cclxuU2VhcmNoLnByb3BUeXBlcyA9IHtcclxuICBoYW5kbGVTZWFyY2g6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXHJcbiAgcXVhbnRpdHk6IFByb3BUeXBlcy5udW1iZXIsXHJcbiAgdmFsdWU6IFByb3BUeXBlcy5zdHJpbmdcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNlYXJjaDtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbXBvbmVudHMvU2VhcmNoL1NlYXJjaC5qcyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XHJcbmltcG9ydCAnLi9Ub2dnbGVTdHlsZS5zY3NzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRvZ2dsZVNldHRpbmdzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuXHJcbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgfVxyXG5cclxuICBvbkNoYW5nZVZhbHVlID0gKGUpID0+IHtcclxuICAgIHRoaXMucHJvcHMuc2V0SXRlbVZhbHVlKCF0aGlzLnByb3BzLmNoZWNrZWQsXHJcbiAgICAgIHRoaXMucHJvcHMuaXRlbUlkLFxyXG4gICAgICB0aGlzLnByb3BzLmRldmljZUlkKTtcclxuICB9XHJcblxyXG4gIHJlbmRlciAoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17IGAkeyB0aGlzLnByb3BzLnN0eWxlTmFtZSB9YCB9PlxyXG4gICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJzd2l0Y2hcIj5cclxuICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxyXG4gICAgICAgICAgICBjaGVja2VkPXt0aGlzLnByb3BzLmNoZWNrZWR9XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uQ2hhbmdlVmFsdWV9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbGlkZXIgcm91bmRcIj48L2Rpdj5cclxuICAgICAgICA8L2xhYmVsPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5Ub2dnbGVTZXR0aW5ncy5wcm9wVHlwZXMgPSB7XHJcbiAgZGV2aWNlOiBQcm9wVHlwZXMub2JqZWN0LFxyXG4gIHN0eWxlTmFtZTogUHJvcFR5cGVzLnN0cmluZyxcclxuICBjaGVja2VkOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxyXG4gIHNldEl0ZW1WYWx1ZTogUHJvcFR5cGVzLmZ1bmMsXHJcbiAgaXRlbUlkOiBQcm9wVHlwZXMuYW55LFxyXG4gIG5ld1ZhbHVlOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIGRldmljZUlkOiBQcm9wVHlwZXMuc3RyaW5nXHJcbn07XHJcblRvZ2dsZVNldHRpbmdzLmRlZmF1bHRQcm9wcyA9IHtcclxuICBjaGVja2VkOiBmYWxzZVxyXG59O1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy9Ub2dnbGVTZXR0aW5ncy9Ub2dnbGVTZXR0aW5ncy5qcyIsImV4cG9ydCBjb25zdCBvcHRpb25zID0gW1xyXG4gIHtcclxuICAgIHZhbHVlOiAnYWxsJyxcclxuICAgIGlubmVyVGV4dDogJ0FsbCdcclxuICB9LFxyXG4gIHtcclxuICAgIHZhbHVlOiAnb24nLFxyXG4gICAgaW5uZXJUZXh0OiAnU2hvdyBPbidcclxuICB9LFxyXG4gIHtcclxuICAgIHZhbHVlOiAnb2ZmJyxcclxuICAgIGlubmVyVGV4dDogJ1Nob3cgT0ZGJ1xyXG4gIH1cclxuXTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2RhdGEvZmlsdGVyT3B0aW9ucy5qcyIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCc7XHJcbmltcG9ydCBQYWdpbmF0aW9uIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvUGFnaW5hdGlvbi9QYWdpbmF0aW9uJztcclxuaW1wb3J0IERldmljZUxpc3RJdGVtIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvRGV2aWNlTGlzdEl0ZW0vRGV2aWNlTGlzdEl0ZW0nO1xyXG5pbXBvcnQgRGV2aWNlc1NlY3Rpb24gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9EZXZpc2VzU2VjdGlvbi9EZXZpc2VzU2VjdGlvbic7XHJcbmltcG9ydCB7XHJcbiAgbG9hZERldmljZXMsXHJcbiAgY2hhbmdlU3RhdHVzLFxyXG4gIGRlbGV0ZURldmljZSxcclxuICB1cGRhdGVEZXZpY2UsXHJcbiAgY2xlYXJTdGF0dXMgfSBmcm9tICcuLi8uLi9hY3Rpb25zL2RldmljZXMuYWN0aW9uJztcclxuaW1wb3J0IHsgc2VuZE5vdGlmaWNhdGlvbldTIH0gZnJvbSAnLi4vLi4vYWN0aW9ucy9ub3RpZmljYXRpb25zLmFjdGlvbic7XHJcbmltcG9ydCB7IGZpbHRlckl0ZW1zIH0gZnJvbSAnLi4vLi4vc2VsZWN0b3JzJztcclxuaW1wb3J0IFJlYWN0Q1NTVHJhbnNpdGlvbkdyb3VwIGZyb20gJ3JlYWN0LWFkZG9ucy1jc3MtdHJhbnNpdGlvbi1ncm91cCc7XHJcblxyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xyXG5cclxuY2xhc3MgTG9jYXRpb25MaXN0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuXHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBwb3B1cFNob3duOiBmYWxzZSxcclxuICAgICAgY3VycmVudElkOiAnJyxcclxuICAgICAgY3VycmVudFBhZ2U6IDEsXHJcbiAgICAgIGRldmljZXNQZXJQYWdlOiAxMlxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNldFBvcHVwU2hvd24gPSAoaWQpID0+IHtcclxuICAgICAgY29uc3QgY3VycmVudFN0YXRlID0gdGhpcy5zdGF0ZS5wb3B1cFNob3duO1xyXG5cclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgcG9wdXBTaG93bjogIWN1cnJlbnRTdGF0ZSxcclxuICAgICAgICBjdXJyZW50SWQ6IGlkXHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmhhbmRsZUNsaWNrID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIGN1cnJlbnRQYWdlOiBOdW1iZXIoZXZlbnQudGFyZ2V0LmlkKVxyXG4gICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zZXRQYWdlID0gKHBhZ2VOdW1iZXIpID0+IHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgY3VycmVudFBhZ2U6IHBhZ2VOdW1iZXJcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuY2hhbmdlU3RhdHVzID0gKHN0YXR1cywgaWQpID0+IHtcclxuICAgICAgdGhpcy5wcm9wcy5jaGFuZ2VTdGF0dXMoeyBzdGF0dXMgfSwgaWQpO1xyXG4gICAgfTtcclxuICAgIHRoaXMuZGVsZXRlRGV2aWNlID0gKGlkKSA9PiB7XHJcbiAgICAgIHRoaXMucHJvcHMuZGVsZXRlRGV2aWNlKGlkKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XHJcbiAgICB0aGlzLnByb3BzLmxvYWREZXZpY2VzKCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJEZXZpY2VzIChkZXZpY2VzSW5Mb2NhdGlvbikge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgZGV2aWNlc0luTG9jYXRpb24ubWFwKChkZXZpY2UsIGkpID0+IHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgPERldmljZUxpc3RJdGVtXHJcbiAgICAgICAgICAgIGRhdGE9e2RldmljZX1cclxuICAgICAgICAgICAga2V5PXtpfVxyXG4gICAgICAgICAgICBsb2NhdGlvbj17Jyd9XHJcbiAgICAgICAgICAgIGNoYW5nZVN0YXR1cz17dGhpcy5jaGFuZ2VTdGF0dXN9XHJcbiAgICAgICAgICAgIHNldFBvcHVwU2hvd249e3RoaXMuc2V0UG9wdXBTaG93bn0vPlxyXG4gICAgICAgICk7XHJcbiAgICAgIH0pXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyRGV2aWNlR3JvdXAgKGRldmljZXNJbkxvY2F0aW9uKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImRldmljZS1ncm91cFwiPlxyXG4gICAgICAgIDxSZWFjdENTU1RyYW5zaXRpb25Hcm91cFxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwiZGV2aWNlLWdyb3VwX19pdGVtc1wiXHJcbiAgICAgICAgICB0cmFuc2l0aW9uTmFtZT1cImhpZGVcIlxyXG4gICAgICAgICAgdHJhbnNpdGlvbkVudGVyVGltZW91dD17NTAwfVxyXG4gICAgICAgICAgdHJhbnNpdGlvbkxlYXZlVGltZW91dD17MzAwfT5cclxuICAgICAgICAgIHt0aGlzLnJlbmRlckRldmljZXMoZGV2aWNlc0luTG9jYXRpb24pfVxyXG4gICAgICAgIDwvUmVhY3RDU1NUcmFuc2l0aW9uR3JvdXA+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHJlbmRlciAoKSB7XHJcbiAgICBjb25zdCBmaWx0ZXJPcHRpb24gPSB0aGlzLnByb3BzLm1hdGNoLnBhcmFtcy5maWx0ZXJPcHRpb247XHJcbiAgICBjb25zdCBsb2NhdGlvbk9mRGV2aWNlcyA9IHRoaXMucHJvcHMubWF0Y2gucGFyYW1zLmxvY2F0aW9uO1xyXG4gICAgY29uc3QgZGV2aWNlc0luTG9jYXRpb24gPSB0aGlzLnByb3BzLmRldmljZXNcclxuICAgICAgLmZpbHRlcihpdGVtID0+IGl0ZW0ubG9jYXRpb24gPT09IGxvY2F0aW9uT2ZEZXZpY2VzKTtcclxuICAgIGNvbnN0IHsgY3VycmVudFBhZ2UsIGRldmljZXNQZXJQYWdlIH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgY29uc3QgdG90YWxQYWdlcyA9IE1hdGguY2VpbChcclxuICAgICAgZGV2aWNlc0luTG9jYXRpb24ubGVuZ3RoIC8gZGV2aWNlc1BlclBhZ2UpO1xyXG4gICAgY29uc3QgaW5kZXhPZkxhc3REZXZpY2UgPSBjdXJyZW50UGFnZSAqIGRldmljZXNQZXJQYWdlO1xyXG4gICAgY29uc3QgaW5kZXhPZkZpcnN0RGV2aWNlID0gaW5kZXhPZkxhc3REZXZpY2UgLSBkZXZpY2VzUGVyUGFnZTtcclxuICAgIGNvbnN0IGN1cnJlbnREZXZpY2VzID0gZGV2aWNlc0luTG9jYXRpb25cclxuICAgICAgLnNsaWNlKGluZGV4T2ZGaXJzdERldmljZSwgaW5kZXhPZkxhc3REZXZpY2UpO1xyXG5cclxuICAgIGlmICh0eXBlb2YgZmlsdGVyT3B0aW9uICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICB0aGlzLnByb3BzLmZpbHRlckFjdGlvbihmaWx0ZXJPcHRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxEZXZpY2VzU2VjdGlvblxyXG4gICAgICAgIGZpbHRlck9wdGlvbj17dGhpcy5wcm9wcy5tYXRjaC5wYXJhbXMuZmlsdGVyT3B0aW9ufVxyXG4gICAgICAgIGRldmljZXM9e3RoaXMucHJvcHMuZGV2aWNlc31cclxuICAgICAgICBsb2NhdGlvbj17dGhpcy5wcm9wcy5sb2NhdGlvbn1cclxuICAgICAgICBoaXN0b3J5PXt0aGlzLnByb3BzLmhpc3Rvcnl9XHJcbiAgICAgICAgbWF0Y2g9e3RoaXMucHJvcHMubWF0Y2h9XHJcbiAgICAgICAgc3RhdHVzPXt0aGlzLnByb3BzLnN0YXR1c31cclxuICAgICAgICB0ZXh0PXt0aGlzLnByb3BzLmVycm9yVGV4dH1cclxuICAgICAgICBzZXRQb3B1cFNob3duPXt0aGlzLnNldFBvcHVwU2hvd259XHJcbiAgICAgICAgcG9wdXBTaG93bj17dGhpcy5zdGF0ZS5wb3B1cFNob3dufVxyXG4gICAgICAgIGRlbGV0ZURldmljZT17dGhpcy5kZWxldGVEZXZpY2V9XHJcbiAgICAgICAgY2xlYXJTdGF0dXM9e3RoaXMucHJvcHMuY2xlYXJTdGF0dXN9XHJcbiAgICAgICAgY3VycmVudElkPXt0aGlzLnN0YXRlLmN1cnJlbnRJZH1cclxuICAgICAgICBxdWFudGl0eT17ZGV2aWNlc0luTG9jYXRpb24ubGVuZ3RofVxyXG4gICAgICAgIGxvY2F0aW9uT2ZEZXZpY2VzPXtsb2NhdGlvbk9mRGV2aWNlc30+XHJcblxyXG4gICAgICAgIHsgdGhpcy5wcm9wcy5zdGF0dXMgPT09ICdET05FJyAmJiB0aGlzLnByb3BzLmRldmljZXMubGVuZ3RoID09PSAwID9cclxuICAgICAgICAgIDxzcGFuPllvdSBuZWVkIHRvIGFkZCBkZXZpY2U8L3NwYW4+IDpcclxuICAgICAgICAgIHRoaXMucmVuZGVyRGV2aWNlR3JvdXAoY3VycmVudERldmljZXMpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIDxQYWdpbmF0aW9uXHJcbiAgICAgICAgICBoYW5kbGVDbGljaz17dGhpcy5oYW5kbGVDbGlja31cclxuICAgICAgICAgIHNldFBhZ2U9e3RoaXMuc2V0UGFnZX1cclxuICAgICAgICAgIGxpc3Q9e3RoaXMucHJvcHMuZGV2aWNlc31cclxuICAgICAgICAgIGN1cnJlbnRQYWdlPXt0aGlzLnN0YXRlLmN1cnJlbnRQYWdlfVxyXG4gICAgICAgICAgdG90YWxQYWdlcz17dG90YWxQYWdlc30vPlxyXG4gICAgICA8L0RldmljZXNTZWN0aW9uPlxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IG1hcFN0YXRlVG9Qcm9wcyA9IHN0YXRlID0+KHtcclxuICBkZXZpY2VzOiBmaWx0ZXJJdGVtcyhzdGF0ZSksXHJcbiAgc3RhdHVzOiBzdGF0ZS5kZXZpY2VzTGlzdC51cGxvYWRTdGF0dXMsXHJcbiAgZXJyb3JUZXh0OiBzdGF0ZS5kZXZpY2VzTGlzdC5lcnJvclRleHRcclxufSk7XHJcblxyXG5jb25zdCBtYXBEaXNwYXRjaFRvUHJvcHMgPSAoZGlzcGF0Y2gpID0+ICh7XHJcbiAgY2hhbmdlU3RhdHVzOiAoZGF0YSwgaWQpID0+IGRpc3BhdGNoKHVwZGF0ZURldmljZShkYXRhLCBpZCkpLFxyXG4gIGxvYWREZXZpY2VzOiAoKSA9PiBkaXNwYXRjaChsb2FkRGV2aWNlcygpKSxcclxuICBkZWxldGVEZXZpY2U6IChpZCkgPT4gZGlzcGF0Y2goZGVsZXRlRGV2aWNlKGlkKSksXHJcbiAgc2VuZE5vdGlmaWNhdGlvbldTOiAobWVzc2FnZSkgPT4gZGlzcGF0Y2goc2VuZE5vdGlmaWNhdGlvbldTKG1lc3NhZ2UpKSxcclxuICBjbGVhclN0YXR1czogKCkgPT4gZGlzcGF0Y2goY2xlYXJTdGF0dXMoKSlcclxufSk7XHJcblxyXG5Mb2NhdGlvbkxpc3QucHJvcFR5cGVzID0ge1xyXG4gIHNlYXJjaDogUHJvcFR5cGVzLnN0cmluZyxcclxuICBmaWx0ZXJPcHRpb246ICBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIG1hdGNoOiBQcm9wVHlwZXMub2JqZWN0LFxyXG4gIGNoYW5nZVN0YXR1czogUHJvcFR5cGVzLmZ1bmMsXHJcbiAgZGV2aWNlczogUHJvcFR5cGVzLmFycmF5LFxyXG4gIGZpbHRlckFjdGlvbjogUHJvcFR5cGVzLmZ1bmMsXHJcbiAgZmluZEl0ZW1zOiBQcm9wVHlwZXMuZnVuYyxcclxuICBsb2FkRGV2aWNlczogUHJvcFR5cGVzLmZ1bmMsXHJcbiAgZGVsZXRlRGV2aWNlOiBQcm9wVHlwZXMuZnVuYyxcclxuICBoaXN0b3J5OiBQcm9wVHlwZXMub2JqZWN0LFxyXG4gIGxvY2F0aW9uOiBQcm9wVHlwZXMub2JqZWN0LFxyXG4gIHN0YXR1czogUHJvcFR5cGVzLnN0cmluZyxcclxuICBzZW5kTm90aWZpY2F0aW9uV1M6IFByb3BUeXBlcy5mdW5jLFxyXG4gIGVycm9yVGV4dDogUHJvcFR5cGVzLnN0cmluZyxcclxuICBjbGVhclN0YXR1czogUHJvcFR5cGVzLmZ1bmNcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzLCBtYXBEaXNwYXRjaFRvUHJvcHMpKExvY2F0aW9uTGlzdCk7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9wYWdlcy9Mb2NhdGlvbkxpc3QvTG9jYXRpb25MaXN0LmpzIiwiaW1wb3J0IHsgY3JlYXRlU2VsZWN0b3IgfSBmcm9tICdyZXNlbGVjdCc7XHJcbmltcG9ydCB7IHNlYXJjaEl0ZW0gfSBmcm9tICcuLi91dGlscy91dGlscyc7XHJcblxyXG5jb25zdCBnZXRGaWx0ZXJPcHRpb24gPSBzdGF0ZSA9PiBzdGF0ZS5zZWFyY2hBbmRGaWx0ZXIuZmlsdGVyT3B0aW9uO1xyXG5jb25zdCBnZXREZXZpY2VzID0gc3RhdGUgPT4gc3RhdGUuZGV2aWNlc0xpc3QuZGV2aWNlcztcclxuY29uc3QgZ2V0U2VhcmNoVmFsdWUgPSBzdGF0ZSA9PiBzdGF0ZS5zZWFyY2hBbmRGaWx0ZXIuc2VhcmNoVmFsdWU7XHJcblxyXG5leHBvcnQgY29uc3QgZmlsdGVySXRlbXMgPSBjcmVhdGVTZWxlY3RvcihcclxuICBbZ2V0RmlsdGVyT3B0aW9uLCBnZXRTZWFyY2hWYWx1ZSwgZ2V0RGV2aWNlc10sXHJcbiAgKGZpbHRlck9wdGlvbiwgc2VhcmNoVmFsdWUsIGl0ZW1zKSA9PiB7XHJcbiAgICBsZXQgbmV3QXJyID0gaXRlbXM7XHJcblxyXG4gICAgaWYgKGZpbHRlck9wdGlvbiA9PT0gJ2FsbCcpIHtcclxuICAgICAgbmV3QXJyID0gaXRlbXM7XHJcbiAgICB9IGVsc2UgaWYgKGZpbHRlck9wdGlvbiA9PT0gJ29uJykge1xyXG4gICAgICBuZXdBcnIgPSBpdGVtcy5maWx0ZXIoaXRlbSA9PiBpdGVtLnN0YXR1cyA9PT0gdHJ1ZSk7XHJcbiAgICB9IGVsc2UgaWYgKGZpbHRlck9wdGlvbiA9PT0gJ29mZicpIHtcclxuICAgICAgbmV3QXJyID0gaXRlbXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5zdGF0dXMgPT09IGZhbHNlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXdBcnIuZmlsdGVyKGl0ZW0gPT4gc2VhcmNoSXRlbShpdGVtLm5hbWUsIHNlYXJjaFZhbHVlKSk7XHJcbiAgfVxyXG4pO1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvc2VsZWN0b3JzL2luZGV4LmpzIl0sInNvdXJjZVJvb3QiOiIifQ==