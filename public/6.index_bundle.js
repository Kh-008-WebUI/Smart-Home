webpackJsonp([6],{"./node_modules/create-react-class/index.js":function(e,t,r){"use strict";var n=r("./node_modules/react/react.js"),i=r("./node_modules/create-react-class/factory.js");if(void 0===n)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var a=(new n.Component).updater;e.exports=i(n.Component,n.isValidElement,a)},"./node_modules/form-data-to-object/index.js":function(e,t,r){"use strict";function n(e){return Object.keys(e).reduce(function(t,r){var n=r.match(/[^\[]*/i),i=r.match(/\[.*?\]/g)||[];i=[n[0]].concat(i).map(function(e){return e.replace(/\[|\]/g,"")});for(var a=t;i.length;){var o=i.shift();o in a?a=a[o]:(a[o]=i.length?isNaN(i[0])?{}:[]:e[r],a=a[o])}return t},{})}function i(e){function t(e,r,n){return Array.isArray(n)||"[object Object]"===Object.prototype.toString.call(n)?(Object.keys(n).forEach(function(i){t(e,r+"["+i+"]",n[i])}),e):(e[r]=n,e)}return Object.keys(e).reduce(function(r,n){return t(r,n,e[n])},{})}e.exports={fromObj:i,toObj:n}},"./node_modules/formsy-react/lib/Decorator.js":function(e,t,r){"use strict";(function(t){var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=t.React||r("./node_modules/react/react.js"),a=r("./node_modules/create-react-class/index.js"),o=r("./node_modules/formsy-react/lib/Mixin.js");e.exports=function(){return function(e){return a({mixins:[o],render:function(){return i.createElement(e,n({setValidations:this.setValidations,setValue:this.setValue,resetValue:this.resetValue,getValue:this.getValue,hasValue:this.hasValue,getErrorMessage:this.getErrorMessage,getErrorMessages:this.getErrorMessages,isFormDisabled:this.isFormDisabled,isValid:this.isValid,isPristine:this.isPristine,isFormSubmitted:this.isFormSubmitted,isRequired:this.isRequired,showRequired:this.showRequired,showError:this.showError,isValidValue:this.isValidValue},this.props))}})}}}).call(t,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/formsy-react/lib/HOC.js":function(e,t,r){"use strict";(function(t){function n(e){return e.displayName||e.name||("string"==typeof e?e:"Component")}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=t.React||r("./node_modules/react/react.js"),o=r("./node_modules/create-react-class/index.js"),s=r("./node_modules/formsy-react/lib/Mixin.js");e.exports=function(e){return o({displayName:"Formsy("+n(e)+")",mixins:[s],render:function(){var t=this.props.innerRef,r=i({setValidations:this.setValidations,setValue:this.setValue,resetValue:this.resetValue,getValue:this.getValue,hasValue:this.hasValue,getErrorMessage:this.getErrorMessage,getErrorMessages:this.getErrorMessages,isFormDisabled:this.isFormDisabled,isValid:this.isValid,isPristine:this.isPristine,isFormSubmitted:this.isFormSubmitted,isRequired:this.isRequired,showRequired:this.showRequired,showError:this.showError,isValidValue:this.isValidValue},this.props);return t&&(r.ref=t),a.createElement(e,r)}})}}).call(t,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/formsy-react/lib/Mixin.js":function(e,t,r){"use strict";(function(t){var n=r("./node_modules/prop-types/index.js"),i=r("./node_modules/formsy-react/lib/utils.js"),a=(t.React||r("./node_modules/react/react.js"),function(e){return"string"==typeof e?e.split(/\,(?![^{\[]*[}\]])/g).reduce(function(e,t){var r=t.split(":"),n=r.shift();if(r=r.map(function(e){try{return JSON.parse(e)}catch(t){return e}}),r.length>1)throw new Error("Formsy does not support multiple args on string validations. Use object format of validations instead.");return e[n]=!r.length||r[0],e},{}):e||{}});e.exports={getInitialState:function(){return{_value:this.props.value,_isRequired:!1,_isValid:!0,_isPristine:!0,_pristineValue:this.props.value,_validationError:[],_externalError:null,_formSubmitted:!1}},contextTypes:{formsy:n.object},getDefaultProps:function(){return{validationError:"",validationErrors:{}}},componentWillMount:function(){var e=function(){this.setValidations(this.props.validations,this.props.required),this.context.formsy.attachToForm(this)}.bind(this);if(!this.props.name)throw new Error("Form Input requires a name property when used");e()},componentWillReceiveProps:function(e){this.setValidations(e.validations,e.required)},componentDidUpdate:function(e){i.isSame(this.props.value,e.value)||this.setValue(this.props.value),i.isSame(this.props.validations,e.validations)&&i.isSame(this.props.required,e.required)||this.context.formsy.validate(this)},componentWillUnmount:function(){this.context.formsy.detachFromForm(this)},setValidations:function(e,t){this._validations=a(e)||{},this._requiredValidations=!0===t?{isDefaultRequiredValue:!0}:a(t)},setValue:function(e){this.setState({_value:e,_isPristine:!1},function(){this.context.formsy.validate(this)}.bind(this))},resetValue:function(){this.setState({_value:this.state._pristineValue,_isPristine:!0},function(){this.context.formsy.validate(this)})},getValue:function(){return this.state._value},hasValue:function(){return""!==this.state._value},getErrorMessage:function(){var e=this.getErrorMessages();return e.length?e[0]:null},getErrorMessages:function(){return!this.isValid()||this.showRequired()?this.state._externalError||this.state._validationError||[]:[]},isFormDisabled:function(){return this.context.formsy.isFormDisabled()},isValid:function(){return this.state._isValid},isPristine:function(){return this.state._isPristine},isFormSubmitted:function(){return this.state._formSubmitted},isRequired:function(){return!!this.props.required},showRequired:function(){return this.state._isRequired},showError:function(){return!this.showRequired()&&!this.isValid()},isValidValue:function(e){return this.context.formsy.isValidValue.call(null,this,e)}}}).call(t,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/formsy-react/lib/main.js":function(e,t,r){"use strict";(function(t){function n(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)},s=r("./node_modules/prop-types/index.js"),u=t.React||r("./node_modules/react/react.js"),l=r("./node_modules/create-react-class/index.js"),d={},c=r("./node_modules/formsy-react/lib/validationRules.js"),p=r("./node_modules/form-data-to-object/index.js"),f=r("./node_modules/formsy-react/lib/utils.js"),h=r("./node_modules/formsy-react/lib/Mixin.js"),m=r("./node_modules/formsy-react/lib/HOC.js"),F=r("./node_modules/formsy-react/lib/Decorator.js"),b={},v=[];d.Mixin=h,d.HOC=m,d.Decorator=F,d.defaults=function(e){b=e},d.addValidationRule=function(e,t){c[e]=t},d.Form=l({displayName:"Formsy",getInitialState:function(){return{isValid:!0,isSubmitting:!1,canChange:!1}},getDefaultProps:function(){return{onSuccess:function(){},onError:function(){},onSubmit:function(){},onValidSubmit:function(){},onInvalidSubmit:function(){},onValid:function(){},onInvalid:function(){},onChange:function(){},validationErrors:null,preventExternalInvalidation:!1}},childContextTypes:{formsy:s.object},getChildContext:function(){var e=this;return{formsy:{attachToForm:this.attachToForm,detachFromForm:this.detachFromForm,validate:this.validate,isFormDisabled:this.isFormDisabled,isValidValue:function(t,r){return e.runValidation(t,r).isValid}}}},componentWillMount:function(){this.inputs=[]},componentDidMount:function(){this.validateForm()},componentWillUpdate:function(){this.prevInputNames=this.inputs.map(function(e){return e.props.name})},componentDidUpdate:function(){this.props.validationErrors&&"object"===o(this.props.validationErrors)&&Object.keys(this.props.validationErrors).length>0&&this.setInputValidationErrors(this.props.validationErrors);var e=this.inputs.map(function(e){return e.props.name});f.arraysDiffer(this.prevInputNames,e)&&this.validateForm()},reset:function(e){this.setFormPristine(!0),this.resetModel(e)},submit:function(e){e&&e.preventDefault(),this.setFormPristine(!1);var t=this.getModel();this.props.onSubmit(t,this.resetModel,this.updateInputsWithError),this.state.isValid?this.props.onValidSubmit(t,this.resetModel,this.updateInputsWithError):this.props.onInvalidSubmit(t,this.resetModel,this.updateInputsWithError)},mapModel:function(e){return this.props.mapping?this.props.mapping(e):p.toObj(Object.keys(e).reduce(function(t,r){for(var n=r.split("."),i=t;n.length;){var a=n.shift();i=i[a]=n.length?i[a]||{}:e[r]}return t},{}))},getModel:function(){var e=this.getCurrentValues();return this.mapModel(e)},resetModel:function(e){this.inputs.forEach(function(t){var r=t.props.name;e&&e.hasOwnProperty(r)?t.setValue(e[r]):t.resetValue()}),this.validateForm()},setInputValidationErrors:function(e){this.inputs.forEach(function(t){var r=t.props.name,n=[{_isValid:!(r in e),_validationError:"string"==typeof e[r]?[e[r]]:e[r]}];t.setState.apply(t,n)})},isChanged:function(){return!f.isSame(this.getPristineValues(),this.getCurrentValues())},getPristineValues:function(){return this.inputs.reduce(function(e,t){return e[t.props.name]=t.props.value,e},{})},updateInputsWithError:function(e){var t=this;Object.keys(e).forEach(function(r,n){var i=f.find(t.inputs,function(e){return e.props.name===r});if(!i)throw new Error("You are trying to update an input that does not exist. Verify errors object with input names. "+JSON.stringify(e));var a=[{_isValid:t.props.preventExternalInvalidation||!1,_externalError:"string"==typeof e[r]?[e[r]]:e[r]}];i.setState.apply(i,a)})},isFormDisabled:function(){return this.props.disabled},getCurrentValues:function(){return this.inputs.reduce(function(e,t){return e[t.props.name]=t.state._value,e},{})},setFormPristine:function(e){this.setState({_formSubmitted:!e}),this.inputs.forEach(function(t,r){t.setState({_formSubmitted:!e,_isPristine:e})})},validate:function(e){this.state.canChange&&this.props.onChange(this.getCurrentValues(),this.isChanged());var t=this.runValidation(e);e.setState({_isValid:t.isValid,_isRequired:t.isRequired,_validationError:t.error,_externalError:null},this.validateForm)},runValidation:function(e,t){var r=this.getCurrentValues(),n=e.props.validationErrors,i=e.props.validationError;t=2===arguments.length?t:e.state._value;var a=this.runRules(t,r,e._validations),o=this.runRules(t,r,e._requiredValidations);"function"==typeof e.validate&&(a.failed=e.validate()?[]:["failed"]);var s=!!Object.keys(e._requiredValidations).length&&!!o.success.length,u=!(a.failed.length||this.props.validationErrors&&this.props.validationErrors[e.props.name]);return{isRequired:s,isValid:!s&&u,error:function(){if(u&&!s)return v;if(a.errors.length)return a.errors;if(this.props.validationErrors&&this.props.validationErrors[e.props.name])return"string"==typeof this.props.validationErrors[e.props.name]?[this.props.validationErrors[e.props.name]]:this.props.validationErrors[e.props.name];if(s){var t=n[o.success[0]];return t?[t]:null}return a.failed.length?a.failed.map(function(e){return n[e]?n[e]:i}).filter(function(e,t,r){return r.indexOf(e)===t}):void 0}.call(this)}},runRules:function(e,t,r){var n={errors:[],failed:[],success:[]};return Object.keys(r).length&&Object.keys(r).forEach(function(i){if(c[i]&&"function"==typeof r[i])throw new Error("Formsy does not allow you to override default validations: "+i);if(!c[i]&&"function"!=typeof r[i])throw new Error("Formsy does not have the validation rule: "+i);if("function"==typeof r[i]){var a=r[i](t,e);return void("string"==typeof a?(n.errors.push(a),n.failed.push(i)):a||n.failed.push(i))}if("function"!=typeof r[i]){var a=c[i](t,e,r[i]);return void("string"==typeof a?(n.errors.push(a),n.failed.push(i)):a?n.success.push(i):n.failed.push(i))}return n.success.push(i)}),n},validateForm:function(){var e=this,t=function(){var e=this.inputs.every(function(e){return e.state._isValid});this.setState({isValid:e}),e?this.props.onValid():this.props.onInvalid(),this.setState({canChange:!0})}.bind(this);this.inputs.forEach(function(r,n){var i=e.runValidation(r);i.isValid&&r.state._externalError&&(i.isValid=!1),r.setState({_isValid:i.isValid,_isRequired:i.isRequired,_validationError:i.error,_externalError:!i.isValid&&r.state._externalError?r.state._externalError:null},n===e.inputs.length-1?t:null)}),this.inputs.length||this.setState({canChange:!0})},attachToForm:function(e){-1===this.inputs.indexOf(e)&&this.inputs.push(e),this.validate(e)},detachFromForm:function(e){var t=this.inputs.indexOf(e);-1!==t&&(this.inputs=this.inputs.slice(0,t).concat(this.inputs.slice(t+1))),this.validateForm()},render:function(){var e=this.props,t=(e.mapping,e.validationErrors,e.onSubmit,e.onValid,e.onValidSubmit,e.onInvalid,e.onInvalidSubmit,e.onChange,e.reset,e.preventExternalInvalidation,e.onSuccess,e.onError,n(e,["mapping","validationErrors","onSubmit","onValid","onValidSubmit","onInvalid","onInvalidSubmit","onChange","reset","preventExternalInvalidation","onSuccess","onError"]));return u.createElement("form",a({},t,{onSubmit:this.submit}),this.props.children)}}),t.exports||t.module||t.define&&t.define.amd||(t.Formsy=d),e.exports=d}).call(t,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/formsy-react/lib/utils.js":function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":n(e)};e.exports={arraysDiffer:function(e,t){var r=!1;return e.length!==t.length?r=!0:e.forEach(function(e,n){this.isSame(e,t[n])||(r=!0)},this),r},objectsDiffer:function(e,t){var r=!1;return Object.keys(e).length!==Object.keys(t).length?r=!0:Object.keys(e).forEach(function(n){this.isSame(e[n],t[n])||(r=!0)},this),r},isSame:function(e,t){return(void 0===e?"undefined":i(e))===(void 0===t?"undefined":i(t))&&(Array.isArray(e)&&Array.isArray(t)?!this.arraysDiffer(e,t):"function"==typeof e?e.toString()===t.toString():"object"===(void 0===e?"undefined":i(e))&&null!==e&&null!==t?!this.objectsDiffer(e,t):e===t)},find:function(e,t){for(var r=0,n=e.length;r<n;r++){var i=e[r];if(t(i))return i}return null}}},"./node_modules/formsy-react/lib/validationRules.js":function(e,t,r){"use strict";var n=function(e){return null!==e&&void 0!==e},i=function(e){return""===e},a={isDefaultRequiredValue:function(e,t){return void 0===t||""===t},isExisty:function(e,t){return n(t)},matchRegexp:function(e,t,r){return!n(t)||i(t)||r.test(t)},isUndefined:function(e,t){return void 0===t},isEmptyString:function(e,t){return i(t)},isEmail:function(e,t){return a.matchRegexp(e,t,/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i)},isUrl:function(e,t){return a.matchRegexp(e,t,/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i)},isTrue:function(e,t){return!0===t},isFalse:function(e,t){return!1===t},isNumeric:function(e,t){return"number"==typeof t||a.matchRegexp(e,t,/^[-+]?(?:\d*[.])?\d+$/)},isAlpha:function(e,t){return a.matchRegexp(e,t,/^[A-Z]+$/i)},isAlphanumeric:function(e,t){return a.matchRegexp(e,t,/^[0-9A-Z]+$/i)},isInt:function(e,t){return a.matchRegexp(e,t,/^(?:[-+]?(?:0|[1-9]\d*))$/)},isFloat:function(e,t){return a.matchRegexp(e,t,/^(?:[-+]?(?:\d+))?(?:\.\d*)?(?:[eE][\+\-]?(?:\d+))?$/)},isWords:function(e,t){return a.matchRegexp(e,t,/^[A-Z\s]+$/i)},isSpecialWords:function(e,t){return a.matchRegexp(e,t,/^[A-Z\s\u00C0-\u017F]+$/i)},isLength:function(e,t,r){return!n(t)||i(t)||t.length===r},equals:function(e,t,r){return!n(t)||i(t)||t==r},equalsField:function(e,t,r){return t==e[r]},maxLength:function(e,t,r){return!n(t)||t.length<=r},minLength:function(e,t,r){return!n(t)||i(t)||t.length>=r}};e.exports=a},"./src/components/Input/Input.js":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r("./node_modules/react/react.js"),l=n(u),d=r("./node_modules/formsy-react/lib/main.js"),c=(n(d),r("./node_modules/prop-types/index.js")),p=n(c),f=function(e){function t(e){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.changeValue=function(e){r.props.setValue(e.currentTarget["checkbox"===r.props.type?"checked":"value"])},r}return o(t,e),s(t,[{key:"render",value:function(){var e=this.props.getErrorMessage();return l.default.createElement("div",{className:"profile-field"},l.default.createElement("span",{className:"profile-field__label"},this.props.label),this.props.disabled?l.default.createElement("span",{className:"profile-field__value"},this.props.value):l.default.createElement("label",null,l.default.createElement("input",{name:this.props.name.toLowerCase(),type:this.props.type||"text",onChange:this.changeValue,value:this.props.getValue(),placeholder:this.props.placeholder||""}),l.default.createElement("i",{className:"profile-field__input-icon fa-pencil fa "}),l.default.createElement("span",{className:"signup-form__error-message"},e)))}}]),t}(l.default.Component);f.propTypes={value:p.default.string,label:p.default.string,name:p.default.string,className:p.default.string,type:p.default.string,setValue:p.default.any,getValue:p.default.func,getErrorMessage:p.default.func,disabled:p.default.bool,placeholder:p.default.string},t.default=(0,d.HOC)(f)},"./src/pages/Profile/Profile.js":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return{updateProfileStatus:e.users.updateProfileStatus,deleteProfileStatus:e.users.deleteProfileStatus,errorText:e.users.user.errorText,user:e.users.user}}function u(e){return{updateProfileRequest:(0,b.bindActionCreators)(F.updateProfileRequest,e),deleteUserRequest:(0,b.bindActionCreators)(F.deleteUserRequest,e),clearStatus:(0,b.bindActionCreators)(F.clearUpdateProfileStatus,e),uploadPhotoFailure:(0,b.bindActionCreators)(F.uploadPhotoFailure,e)}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),d=r("./node_modules/react/react.js"),c=n(d),p=r("./node_modules/formsy-react/lib/main.js"),f=n(p),h=r("./src/components/Input/Input.js"),m=n(h),F=r("./src/actions/users.action.js"),b=r("./node_modules/redux/es/index.js"),v=r("./src/components/Message/Message.js"),y=r("./src/components/Popup/Popup.js"),g=r("./src/components/Button/Button.js"),E=r("./node_modules/react-redux/es/index.js"),_=r("./node_modules/prop-types/index.js"),S=n(_);r("./src/pages/Profile/Profile.scss");var x=function(e){function t(e){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.setPopupShown=function(e){var t=r.state.popupShown;r.setState({popupShown:!t})},r.updateProfile=function(){var e={name:r.name.getValue(),email:r.email.getValue(),passwordOld:r.passwordOld.getValue(),password:r.password.getValue(),passwordRepeat:r.passwordRepeat.getValue(),avatar:r.base64Str,_id:r.props.user._id};r.props.updateProfileRequest(e)},r.enableButton=function(){r.setState({canSubmit:!0})},r.disableButton=function(){r.setState({canSubmit:!1})},r.editData=function(){r.setState({disabled:!r.state.disabled})},r.deleteUser=function(){r.props.deleteUserRequest(r.props.user)},r.handleFileSelect=function(e){e.preventDefault(),r.setState({updateImageStatus:"Loading..."});var t=e.target.files?e.target.files:e.dataTransfer.files;if(t){var n=t[0];if(n){if(n.size>1048576)return r.props.uploadPhotoFailure("Exceeding 1MB limit"),void r.setState({updateImageStatus:"Exceeding 1MB limit",setPopupShown:!0});var i=new FileReader;i.onload=function(e){var t=e.target.result;r.base64Str="data:image/jpeg;base64,"+btoa(t),r.setState({imageBase64:r.base64Str,updateImageStatus:""})},i.readAsBinaryString(n)}}},r.preventDefault=function(e){e.preventDefault()},r.render=function(){return window.addEventListener("dragover",function(e){(e||event).preventDefault()},!1),window.addEventListener("drop",function(e){(e||event).preventDefault()},!1),c.default.createElement("section",{className:"profile"},c.default.createElement("header",{className:"profile__header"},c.default.createElement("h1",{className:"profile__header-title"},"Profile"),c.default.createElement("button",{className:"profile__delete btn btn--danger",onClick:r.setPopupShown},"Delete profile")),c.default.createElement("section",{className:"profile-info"},c.default.createElement(f.default.Form,{className:"profile-form clearfix",onSubmit:r.updateProfile,onValid:r.enableButton,onInvalid:r.disableButton},c.default.createElement("div",{className:r.state.imageBase64||r.props.user.avatar?"profile__photo":"profile__photo profile__photo--noavatar"},r.state.imageBase64||r.props.user.avatar?c.default.createElement("img",{src:r.state.imageBase64||r.props.user.avatar,alt:"avatar"}):null),c.default.createElement("div",{className:"profile-info__fields"},c.default.createElement(m.default,{label:"NAME",name:"name",value:r.props.user.name,disabled:r.state.disabled,ref:function(e){r.name=e},required:!0,validations:"isAlpha",validationError:"Name must contain only letters"}),c.default.createElement(m.default,{label:"EMAIL",name:"email",value:r.props.user.email,disabled:r.state.disabled,ref:function(e){r.email=e},required:!0,validations:"isEmail",validationError:"This is not a valid email"}),r.state.disabled?null:c.default.createElement("fieldset",{className:"profile-info__fields--fieldset"},c.default.createElement("legend",null,c.default.createElement("h3",{className:"profile-heading"},"Change password:")),c.default.createElement(m.default,{label:"Old",name:"old-psw",type:"password",placeholder:"Enter the old password",disabled:r.state.disabled,ref:function(e){r.passwordOld=e},validations:{minLength:7,isAlphanumeric:!0},validationError:"Password is not valid"}),c.default.createElement(m.default,{label:"New",name:"new-psw",type:"password",placeholder:"Enter the new password",disabled:r.state.disabled,ref:function(e){r.password=e},validations:{minLength:7,isAlphanumeric:!0},validationError:"Password is not valid"}),c.default.createElement(m.default,{label:"Repeat",name:"repeat-psw",type:"password",placeholder:"Repeat the password",disabled:r.state.disabled,ref:function(e){r.passwordRepeat=e},validations:"equalsField:new-psw",validationError:"Password does not match"}),c.default.createElement("div",null)),r.state.disabled?null:c.default.createElement("div",{className:"profile-info__upload-photo"},c.default.createElement("h3",{className:"profile-heading"},"Upload new photo"),c.default.createElement("div",{className:"profile__upload-photo--drop",ref:function(e){r.fieldImage=e},onDrop:r.handleFileSelect,onDragOver:r.preventDefault},c.default.createElement("span",null,"Drop your photo")),c.default.createElement("div",{className:"profile__upload-photo--btn"},c.default.createElement("label",{htmlFor:"add-photo",className:"btn add-photo-btn"},"Choose file to upload",c.default.createElement("input",{type:"file",id:"add-photo",onChange:r.handleFileSelect,className:"hide"})))),c.default.createElement("div",{className:"profile-btn-group"},r.state.disabled?c.default.createElement("button",{className:"profile__update btn",onClick:r.editData},"Update info"):c.default.createElement("input",{type:"submit",disabled:!r.state.canSubmit,className:"btn btn--success",value:"Save changes"}),r.state.disabled?null:c.default.createElement("button",{className:"profile__delete btn",onClick:r.editData},"Cancel"))))),c.default.createElement(v.Message,{clearStatus:r.props.clearStatus,status:r.props.updateProfileStatus,text:r.props.errorText,header:"Error"}),c.default.createElement(y.Popup,{setPopupShown:r.setPopupShown,popupShown:r.state.popupShown,header:"Confirm the action",text:"Are you sure you want to delete your account?"},c.default.createElement(g.Button,{setPopupShown:r.setPopupShown,okHandler:function(){r.deleteUser(),r.setPopupShown()},className:"btn popup__btn",innerText:"Ok"}),c.default.createElement(g.Button,{okHandler:function(){r.setPopupShown()},className:"btn btn--default popup__btn",innerText:"Cancel"})))},r.state={disabled:!0,canSubmit:!1,imageBase64:null,popupShown:!1,updateImageStatus:""},r}return o(t,e),l(t,[{key:"componentDidUpdate",value:function(){var e=this;"DONE"===this.props.updateProfileStatus&&setTimeout(function(){e.props.history.push("/")},1e3),"DONE"===this.props.deleteProfileStatus&&setTimeout(function(){e.props.history.push("/auth")},1e3)}}]),t}(d.Component);t.default=(0,E.connect)(s,u)(x),x.propTypes={updateProfileStatus:S.default.string,updateProfileRequest:S.default.func,deleteUserRequest:S.default.func,deleteProfileStatus:S.default.string,user:S.default.object,email:S.default.object,password:S.default.object,passwordOld:S.default.object,passwordRepeat:S.default.object,errorText:S.default.string,value:S.default.object,history:S.default.object,clearStatus:S.default.func,type:S.default.string,setValue:S.default.any,uploadPhotoFailure:S.default.func}},"./src/pages/Profile/Profile.scss":function(e,t){}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vNi5pbmRleF9idW5kbGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jcmVhdGUtcmVhY3QtY2xhc3MvaW5kZXguanM/ODBhNCoiLCJ3ZWJwYWNrOi8vLy4vfi9mb3JtLWRhdGEtdG8tb2JqZWN0L2luZGV4LmpzPzliYjUqIiwid2VicGFjazovLy8uL34vZm9ybXN5LXJlYWN0L2xpYi9EZWNvcmF0b3IuanM/NTFmYyoiLCJ3ZWJwYWNrOi8vLy4vfi9mb3Jtc3ktcmVhY3QvbGliL0hPQy5qcz9iZWY4KiIsIndlYnBhY2s6Ly8vLi9+L2Zvcm1zeS1yZWFjdC9saWIvTWl4aW4uanM/OTM1NyoiLCJ3ZWJwYWNrOi8vLy4vfi9mb3Jtc3ktcmVhY3QvbGliL21haW4uanM/ZTgxNCoiLCJ3ZWJwYWNrOi8vLy4vfi9mb3Jtc3ktcmVhY3QvbGliL3V0aWxzLmpzP2ZkMjYqIiwid2VicGFjazovLy8uL34vZm9ybXN5LXJlYWN0L2xpYi92YWxpZGF0aW9uUnVsZXMuanM/YzBhNSoiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvSW5wdXQvSW5wdXQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VzL1Byb2ZpbGUvUHJvZmlsZS5qcyJdLCJuYW1lcyI6WyJ3ZWJwYWNrSnNvbnAiLCIuL25vZGVfbW9kdWxlcy9jcmVhdGUtcmVhY3QtY2xhc3MvaW5kZXguanMiLCJtb2R1bGUiLCJleHBvcnRzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIlJlYWN0IiwiZmFjdG9yeSIsIkVycm9yIiwiUmVhY3ROb29wVXBkYXRlUXVldWUiLCJDb21wb25lbnQiLCJ1cGRhdGVyIiwiaXNWYWxpZEVsZW1lbnQiLCIuL25vZGVfbW9kdWxlcy9mb3JtLWRhdGEtdG8tb2JqZWN0L2luZGV4LmpzIiwidG9PYmoiLCJzb3VyY2UiLCJPYmplY3QiLCJrZXlzIiwicmVkdWNlIiwib3V0cHV0Iiwia2V5IiwicGFyZW50S2V5IiwibWF0Y2giLCJwYXRocyIsImNvbmNhdCIsIm1hcCIsInJlcGxhY2UiLCJjdXJyZW50UGF0aCIsImxlbmd0aCIsInBhdGhLZXkiLCJzaGlmdCIsImlzTmFOIiwiZnJvbU9iaiIsIm9iaiIsInJlY3VyIiwibmV3T2JqIiwicHJvcE5hbWUiLCJjdXJyVmFsIiwiQXJyYXkiLCJpc0FycmF5IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwiZm9yRWFjaCIsInYiLCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL0RlY29yYXRvci5qcyIsImdsb2JhbCIsIl9leHRlbmRzIiwiYXNzaWduIiwidGFyZ2V0IiwiaSIsImFyZ3VtZW50cyIsImhhc093blByb3BlcnR5IiwiY3JlYXRlUmVhY3RDbGFzcyIsIk1peGluIiwibWl4aW5zIiwicmVuZGVyIiwiY3JlYXRlRWxlbWVudCIsInNldFZhbGlkYXRpb25zIiwidGhpcyIsInNldFZhbHVlIiwicmVzZXRWYWx1ZSIsImdldFZhbHVlIiwiaGFzVmFsdWUiLCJnZXRFcnJvck1lc3NhZ2UiLCJnZXRFcnJvck1lc3NhZ2VzIiwiaXNGb3JtRGlzYWJsZWQiLCJpc1ZhbGlkIiwiaXNQcmlzdGluZSIsImlzRm9ybVN1Ym1pdHRlZCIsImlzUmVxdWlyZWQiLCJzaG93UmVxdWlyZWQiLCJzaG93RXJyb3IiLCJpc1ZhbGlkVmFsdWUiLCJwcm9wcyIsIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvSE9DLmpzIiwiZ2V0RGlzcGxheU5hbWUiLCJkaXNwbGF5TmFtZSIsIm5hbWUiLCJpbm5lclJlZiIsInByb3BzRm9yRWxlbWVudCIsInJlZiIsIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvTWl4aW4uanMiLCJQcm9wVHlwZXMiLCJ1dGlscyIsImNvbnZlcnRWYWxpZGF0aW9uc1RvT2JqZWN0IiwidmFsaWRhdGlvbnMiLCJzcGxpdCIsInZhbGlkYXRpb24iLCJhcmdzIiwidmFsaWRhdGVNZXRob2QiLCJhcmciLCJKU09OIiwicGFyc2UiLCJlIiwiZ2V0SW5pdGlhbFN0YXRlIiwiX3ZhbHVlIiwidmFsdWUiLCJfaXNSZXF1aXJlZCIsIl9pc1ZhbGlkIiwiX2lzUHJpc3RpbmUiLCJfcHJpc3RpbmVWYWx1ZSIsIl92YWxpZGF0aW9uRXJyb3IiLCJfZXh0ZXJuYWxFcnJvciIsIl9mb3JtU3VibWl0dGVkIiwiY29udGV4dFR5cGVzIiwiZm9ybXN5Iiwib2JqZWN0IiwiZ2V0RGVmYXVsdFByb3BzIiwidmFsaWRhdGlvbkVycm9yIiwidmFsaWRhdGlvbkVycm9ycyIsImNvbXBvbmVudFdpbGxNb3VudCIsImNvbmZpZ3VyZSIsInJlcXVpcmVkIiwiY29udGV4dCIsImF0dGFjaFRvRm9ybSIsImJpbmQiLCJjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzIiwibmV4dFByb3BzIiwiY29tcG9uZW50RGlkVXBkYXRlIiwicHJldlByb3BzIiwiaXNTYW1lIiwidmFsaWRhdGUiLCJjb21wb25lbnRXaWxsVW5tb3VudCIsImRldGFjaEZyb21Gb3JtIiwiX3ZhbGlkYXRpb25zIiwiX3JlcXVpcmVkVmFsaWRhdGlvbnMiLCJpc0RlZmF1bHRSZXF1aXJlZFZhbHVlIiwic2V0U3RhdGUiLCJzdGF0ZSIsIm1lc3NhZ2VzIiwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9tYWluLmpzIiwiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIiwiaW5kZXhPZiIsIl90eXBlb2YyIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJjb25zdHJ1Y3RvciIsIl90eXBlb2YiLCJGb3Jtc3kiLCJ2YWxpZGF0aW9uUnVsZXMiLCJmb3JtRGF0YVRvT2JqZWN0IiwiSE9DIiwiRGVjb3JhdG9yIiwib3B0aW9ucyIsImVtcHR5QXJyYXkiLCJkZWZhdWx0cyIsInBhc3NlZE9wdGlvbnMiLCJhZGRWYWxpZGF0aW9uUnVsZSIsImZ1bmMiLCJGb3JtIiwiaXNTdWJtaXR0aW5nIiwiY2FuQ2hhbmdlIiwib25TdWNjZXNzIiwib25FcnJvciIsIm9uU3VibWl0Iiwib25WYWxpZFN1Ym1pdCIsIm9uSW52YWxpZFN1Ym1pdCIsIm9uVmFsaWQiLCJvbkludmFsaWQiLCJvbkNoYW5nZSIsInByZXZlbnRFeHRlcm5hbEludmFsaWRhdGlvbiIsImNoaWxkQ29udGV4dFR5cGVzIiwiZ2V0Q2hpbGRDb250ZXh0IiwiX3RoaXMiLCJjb21wb25lbnQiLCJydW5WYWxpZGF0aW9uIiwiaW5wdXRzIiwiY29tcG9uZW50RGlkTW91bnQiLCJ2YWxpZGF0ZUZvcm0iLCJjb21wb25lbnRXaWxsVXBkYXRlIiwicHJldklucHV0TmFtZXMiLCJzZXRJbnB1dFZhbGlkYXRpb25FcnJvcnMiLCJuZXdJbnB1dE5hbWVzIiwiYXJyYXlzRGlmZmVyIiwicmVzZXQiLCJkYXRhIiwic2V0Rm9ybVByaXN0aW5lIiwicmVzZXRNb2RlbCIsInN1Ym1pdCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJtb2RlbCIsImdldE1vZGVsIiwidXBkYXRlSW5wdXRzV2l0aEVycm9yIiwibWFwTW9kZWwiLCJtYXBwaW5nIiwibWFwcGVkTW9kZWwiLCJrZXlBcnJheSIsImJhc2UiLCJjdXJyZW50S2V5IiwiY3VycmVudFZhbHVlcyIsImdldEN1cnJlbnRWYWx1ZXMiLCJlcnJvcnMiLCJhcHBseSIsImlzQ2hhbmdlZCIsImdldFByaXN0aW5lVmFsdWVzIiwiX3RoaXMyIiwiaW5kZXgiLCJmaW5kIiwic3RyaW5naWZ5IiwiZGlzYWJsZWQiLCJlcnJvciIsInZhbGlkYXRpb25SZXN1bHRzIiwicnVuUnVsZXMiLCJyZXF1aXJlZFJlc3VsdHMiLCJmYWlsZWQiLCJzdWNjZXNzIiwiZmlsdGVyIiwieCIsInBvcyIsImFyciIsInJlc3VsdHMiLCJ2YWxpZGF0aW9uTWV0aG9kIiwicHVzaCIsIl90aGlzMyIsIm9uVmFsaWRhdGlvbkNvbXBsZXRlIiwiYWxsSXNWYWxpZCIsImV2ZXJ5IiwiY29tcG9uZW50UG9zIiwic2xpY2UiLCJfcHJvcHMiLCJub25Gb3Jtc3lQcm9wcyIsImNoaWxkcmVuIiwiZGVmaW5lIiwiYW1kIiwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi91dGlscy5qcyIsImEiLCJiIiwiaXNEaWZmZXJlbnQiLCJpdGVtIiwib2JqZWN0c0RpZmZlciIsImNvbGxlY3Rpb24iLCJmbiIsImwiLCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL3ZhbGlkYXRpb25SdWxlcy5qcyIsIl9pc0V4aXN0eSIsInVuZGVmaW5lZCIsImlzRW1wdHkiLCJ2YWx1ZXMiLCJpc0V4aXN0eSIsIm1hdGNoUmVnZXhwIiwicmVnZXhwIiwidGVzdCIsImlzVW5kZWZpbmVkIiwiaXNFbXB0eVN0cmluZyIsImlzRW1haWwiLCJpc1VybCIsImlzVHJ1ZSIsImlzRmFsc2UiLCJpc051bWVyaWMiLCJpc0FscGhhIiwiaXNBbHBoYW51bWVyaWMiLCJpc0ludCIsImlzRmxvYXQiLCJpc1dvcmRzIiwiaXNTcGVjaWFsV29yZHMiLCJpc0xlbmd0aCIsImVxdWFscyIsImVxbCIsImVxdWFsc0ZpZWxkIiwiZmllbGQiLCJtYXhMZW5ndGgiLCJtaW5MZW5ndGgiLCIuL3NyYy9jb21wb25lbnRzL0lucHV0L0lucHV0LmpzIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwic2VsZiIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiY3JlYXRlIiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJkZWZpbmVQcm9wZXJ0eSIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJkZXNjcmlwdG9yIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiX3JlYWN0IiwiX3JlYWN0MiIsIl9mb3Jtc3lSZWFjdCIsIl9wcm9wVHlwZXMiLCJfcHJvcFR5cGVzMiIsIklucHV0IiwiX1JlYWN0JENvbXBvbmVudCIsImdldFByb3RvdHlwZU9mIiwiY2hhbmdlVmFsdWUiLCJjdXJyZW50VGFyZ2V0IiwidHlwZSIsImVycm9yTWVzc2FnZSIsImNsYXNzTmFtZSIsImxhYmVsIiwidG9Mb3dlckNhc2UiLCJwbGFjZWhvbGRlciIsInByb3BUeXBlcyIsInN0cmluZyIsImFueSIsImJvb2wiLCIuL3NyYy9wYWdlcy9Qcm9maWxlL1Byb2ZpbGUuanMiLCJtYXBTdGF0ZVRvUHJvcHMiLCJzdG9yZSIsInVwZGF0ZVByb2ZpbGVTdGF0dXMiLCJ1c2VycyIsImRlbGV0ZVByb2ZpbGVTdGF0dXMiLCJlcnJvclRleHQiLCJ1c2VyIiwibWFwRGlzcGF0Y2hUb1Byb3BzIiwiZGlzcGF0Y2giLCJ1cGRhdGVQcm9maWxlUmVxdWVzdCIsIl9yZWR1eCIsImJpbmRBY3Rpb25DcmVhdG9ycyIsIl91c2VycyIsImRlbGV0ZVVzZXJSZXF1ZXN0IiwiY2xlYXJTdGF0dXMiLCJjbGVhclVwZGF0ZVByb2ZpbGVTdGF0dXMiLCJ1cGxvYWRQaG90b0ZhaWx1cmUiLCJfZm9ybXN5UmVhY3QyIiwiX0lucHV0IiwiX0lucHV0MiIsIl9NZXNzYWdlIiwiX1BvcHVwIiwiX0J1dHRvbiIsIl9yZWFjdFJlZHV4IiwiUHJvZmlsZSIsIl9Db21wb25lbnQiLCJzZXRQb3B1cFNob3duIiwiaWQiLCJjdXJyZW50U3RhdGUiLCJwb3B1cFNob3duIiwidXBkYXRlUHJvZmlsZSIsImVtYWlsIiwicGFzc3dvcmRPbGQiLCJwYXNzd29yZCIsInBhc3N3b3JkUmVwZWF0IiwiYXZhdGFyIiwiYmFzZTY0U3RyIiwiX2lkIiwiZW5hYmxlQnV0dG9uIiwiY2FuU3VibWl0IiwiZGlzYWJsZUJ1dHRvbiIsImVkaXREYXRhIiwiZGVsZXRlVXNlciIsImhhbmRsZUZpbGVTZWxlY3QiLCJ1cGRhdGVJbWFnZVN0YXR1cyIsImZpbGVzIiwiZGF0YVRyYW5zZmVyIiwiZmlsZSIsInNpemUiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwicmVhZGVyRXZlbnQiLCJiaW5hcnlTdHJpbmciLCJyZXN1bHQiLCJidG9hIiwiaW1hZ2VCYXNlNjQiLCJyZWFkQXNCaW5hcnlTdHJpbmciLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwib25DbGljayIsInNyYyIsImFsdCIsImlucHV0IiwiZWwiLCJmaWVsZEltYWdlIiwib25Ecm9wIiwib25EcmFnT3ZlciIsImh0bWxGb3IiLCJNZXNzYWdlIiwic3RhdHVzIiwidGV4dCIsImhlYWRlciIsIlBvcHVwIiwiQnV0dG9uIiwib2tIYW5kbGVyIiwiaW5uZXJUZXh0Iiwic2V0VGltZW91dCIsImhpc3RvcnkiLCJjb25uZWN0IiwiLi9zcmMvcGFnZXMvUHJvZmlsZS9Qcm9maWxlLnNjc3MiXSwibWFwcGluZ3MiOiJBQUFBQSxjQUFjLElBRVJDLDZDQUNBLFNBQVVDLEVBQVFDLEVBQVNDLEdBRWpDLFlDT0EsSUFBSUMsR0FBUUQsRUFBUSxpQ0FDaEJFLEVBQVVGLEVBQVEsK0NBRXRCLFFBQXFCLEtBQVZDLEVBQ1QsS0FBTUUsT0FDSixvSkFNSixJQUFJQyxJQUF1QixHQUFJSCxHQUFNSSxXQUFZQyxPQUVqRFIsR0FBT0MsUUFBVUcsRUFDZkQsRUFBTUksVUFDTkosRUFBTU0sZUFDTkgsSURJSUksOENBQ0EsU0FBVVYsRUFBUUMsRUFBU0MsR0FFakMsWUVuQ0EsU0FBU1MsR0FBTUMsR0FDYixNQUFPQyxRQUFPQyxLQUFLRixHQUFRRyxPQUFPLFNBQVVDLEVBQVFDLEdBQ2xELEdBQUlDLEdBQVlELEVBQUlFLE1BQU0sV0FDdEJDLEVBQVFILEVBQUlFLE1BQU0sZUFDdEJDLElBQVNGLEVBQVUsSUFBSUcsT0FBT0QsR0FBT0UsSUFBSSxTQUFVTCxHQUNqRCxNQUFPQSxHQUFJTSxRQUFRLFNBQVUsS0FHL0IsS0FEQSxHQUFJQyxHQUFjUixFQUNYSSxFQUFNSyxRQUFRLENBQ25CLEdBQUlDLEdBQVVOLEVBQU1PLE9BRWhCRCxLQUFXRixHQUNiQSxFQUFjQSxFQUFZRSxJQUUxQkYsRUFBWUUsR0FBV04sRUFBTUssT0FBU0csTUFBTVIsRUFBTSxVQUFnQlIsRUFBT0ss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QVVoSyxPQUNqQjZPLFNBQVVsRCxFQUFBM0IsUUFBVWhLLE9BQ3BCNE8sWUFBYWpELEVBQUEzQixRQUFVaEssT0FDdkI4TyxlQUFnQm5ELEVBQUEzQixRQUFVaEssT0FDMUJpTixVQUFXdEIsRUFBQTNCLFFBQVV3QyxPQUNyQmxOLE1BQU9xTSxFQUFBM0IsUUFBVWhLLE9BQ2pCMFIsUUFBUy9GLEVBQUEzQixRQUFVaEssT0FDbkIwTixZQUFhL0IsRUFBQTNCLFFBQVV0SCxLQUN2QnVKLEtBQU1OLEVBQUEzQixRQUFVd0MsT0FDaEJ2UCxTQUFVME8sRUFBQTNCLFFBQVV5QyxJQUNwQm1CLG1CQUFvQmpDLEVBQUEzQixRQUFVdEgsT1Z3ckMxQmtQLG1DQUNBLFNBQVVwWSxFQUFRQyIsImZpbGUiOiI2LmluZGV4X2J1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIndlYnBhY2tKc29ucChbNl0se1xuXG4vKioqLyBcIi4vbm9kZV9tb2R1bGVzL2NyZWF0ZS1yZWFjdC1jbGFzcy9pbmRleC5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQ29weXJpZ2h0IDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqL1xuXG5cblxudmFyIFJlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0L3JlYWN0LmpzXCIpO1xudmFyIGZhY3RvcnkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvY3JlYXRlLXJlYWN0LWNsYXNzL2ZhY3RvcnkuanNcIik7XG5cbmlmICh0eXBlb2YgUmVhY3QgPT09ICd1bmRlZmluZWQnKSB7XG4gIHRocm93IEVycm9yKCdjcmVhdGUtcmVhY3QtY2xhc3MgY291bGQgbm90IGZpbmQgdGhlIFJlYWN0IG9iamVjdC4gSWYgeW91IGFyZSB1c2luZyBzY3JpcHQgdGFncywgJyArICdtYWtlIHN1cmUgdGhhdCBSZWFjdCBpcyBiZWluZyBsb2FkZWQgYmVmb3JlIGNyZWF0ZS1yZWFjdC1jbGFzcy4nKTtcbn1cblxuLy8gSGFjayB0byBncmFiIE5vb3BVcGRhdGVRdWV1ZSBmcm9tIGlzb21vcnBoaWMgUmVhY3RcbnZhciBSZWFjdE5vb3BVcGRhdGVRdWV1ZSA9IG5ldyBSZWFjdC5Db21wb25lbnQoKS51cGRhdGVyO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoUmVhY3QuQ29tcG9uZW50LCBSZWFjdC5pc1ZhbGlkRWxlbWVudCwgUmVhY3ROb29wVXBkYXRlUXVldWUpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL25vZGVfbW9kdWxlcy9mb3JtLWRhdGEtdG8tb2JqZWN0L2luZGV4LmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbmZ1bmN0aW9uIHRvT2JqKHNvdXJjZSkge1xuICByZXR1cm4gT2JqZWN0LmtleXMoc291cmNlKS5yZWR1Y2UoZnVuY3Rpb24gKG91dHB1dCwga2V5KSB7XG4gICAgdmFyIHBhcmVudEtleSA9IGtleS5tYXRjaCgvW15cXFtdKi9pKTtcbiAgICB2YXIgcGF0aHMgPSBrZXkubWF0Y2goL1xcWy4qP1xcXS9nKSB8fCBbXTtcbiAgICBwYXRocyA9IFtwYXJlbnRLZXlbMF1dLmNvbmNhdChwYXRocykubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHJldHVybiBrZXkucmVwbGFjZSgvXFxbfFxcXS9nLCAnJyk7XG4gICAgfSk7XG4gICAgdmFyIGN1cnJlbnRQYXRoID0gb3V0cHV0O1xuICAgIHdoaWxlIChwYXRocy5sZW5ndGgpIHtcbiAgICAgIHZhciBwYXRoS2V5ID0gcGF0aHMuc2hpZnQoKTtcblxuICAgICAgaWYgKHBhdGhLZXkgaW4gY3VycmVudFBhdGgpIHtcbiAgICAgICAgY3VycmVudFBhdGggPSBjdXJyZW50UGF0aFtwYXRoS2V5XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnRQYXRoW3BhdGhLZXldID0gcGF0aHMubGVuZ3RoID8gaXNOYU4ocGF0aHNbMF0pID8ge30gOiBbXSA6IHNvdXJjZVtrZXldO1xuICAgICAgICBjdXJyZW50UGF0aCA9IGN1cnJlbnRQYXRoW3BhdGhLZXldO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBvdXRwdXQ7XG4gIH0sIHt9KTtcbn1cblxuZnVuY3Rpb24gZnJvbU9iaihvYmopIHtcbiAgZnVuY3Rpb24gcmVjdXIobmV3T2JqLCBwcm9wTmFtZSwgY3VyclZhbCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGN1cnJWYWwpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChjdXJyVmFsKSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICAgIE9iamVjdC5rZXlzKGN1cnJWYWwpLmZvckVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgcmVjdXIobmV3T2JqLCBwcm9wTmFtZSArIFwiW1wiICsgdiArIFwiXVwiLCBjdXJyVmFsW3ZdKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG5ld09iajtcbiAgICB9XG5cbiAgICBuZXdPYmpbcHJvcE5hbWVdID0gY3VyclZhbDtcbiAgICByZXR1cm4gbmV3T2JqO1xuICB9XG5cbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuICByZXR1cm4ga2V5cy5yZWR1Y2UoZnVuY3Rpb24gKG5ld09iaiwgcHJvcE5hbWUpIHtcbiAgICByZXR1cm4gcmVjdXIobmV3T2JqLCBwcm9wTmFtZSwgb2JqW3Byb3BOYW1lXSk7XG4gIH0sIHt9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGZyb21PYmo6IGZyb21PYmosXG4gIHRvT2JqOiB0b09ialxufTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9EZWNvcmF0b3IuanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1yZXR1cm4gdGFyZ2V0O1xufTtcblxudmFyIFJlYWN0ID0gZ2xvYmFsLlJlYWN0IHx8IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC9yZWFjdC5qc1wiKTtcbnZhciBjcmVhdGVSZWFjdENsYXNzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2NyZWF0ZS1yZWFjdC1jbGFzcy9pbmRleC5qc1wiKTtcbnZhciBNaXhpbiA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL01peGluLmpzXCIpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gICAgcmV0dXJuIGNyZWF0ZVJlYWN0Q2xhc3Moe1xuICAgICAgbWl4aW5zOiBbTWl4aW5dLFxuICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KENvbXBvbmVudCwgX2V4dGVuZHMoe1xuICAgICAgICAgIHNldFZhbGlkYXRpb25zOiB0aGlzLnNldFZhbGlkYXRpb25zLFxuICAgICAgICAgIHNldFZhbHVlOiB0aGlzLnNldFZhbHVlLFxuICAgICAgICAgIHJlc2V0VmFsdWU6IHRoaXMucmVzZXRWYWx1ZSxcbiAgICAgICAgICBnZXRWYWx1ZTogdGhpcy5nZXRWYWx1ZSxcbiAgICAgICAgICBoYXNWYWx1ZTogdGhpcy5oYXNWYWx1ZSxcbiAgICAgICAgICBnZXRFcnJvck1lc3NhZ2U6IHRoaXMuZ2V0RXJyb3JNZXNzYWdlLFxuICAgICAgICAgIGdldEVycm9yTWVzc2FnZXM6IHRoaXMuZ2V0RXJyb3JNZXNzYWdlcyxcbiAgICAgICAgICBpc0Zvcm1EaXNhYmxlZDogdGhpcy5pc0Zvcm1EaXNhYmxlZCxcbiAgICAgICAgICBpc1ZhbGlkOiB0aGlzLmlzVmFsaWQsXG4gICAgICAgICAgaXNQcmlzdGluZTogdGhpcy5pc1ByaXN0aW5lLFxuICAgICAgICAgIGlzRm9ybVN1Ym1pdHRlZDogdGhpcy5pc0Zvcm1TdWJtaXR0ZWQsXG4gICAgICAgICAgaXNSZXF1aXJlZDogdGhpcy5pc1JlcXVpcmVkLFxuICAgICAgICAgIHNob3dSZXF1aXJlZDogdGhpcy5zaG93UmVxdWlyZWQsXG4gICAgICAgICAgc2hvd0Vycm9yOiB0aGlzLnNob3dFcnJvcixcbiAgICAgICAgICBpc1ZhbGlkVmFsdWU6IHRoaXMuaXNWYWxpZFZhbHVlXG4gICAgICAgIH0sIHRoaXMucHJvcHMpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn07XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3dlYnBhY2svYnVpbGRpbi9nbG9iYWwuanNcIikpKVxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL0hPQy5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfXJldHVybiB0YXJnZXQ7XG59O1xuXG52YXIgUmVhY3QgPSBnbG9iYWwuUmVhY3QgfHwgX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0L3JlYWN0LmpzXCIpO1xudmFyIGNyZWF0ZVJlYWN0Q2xhc3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvY3JlYXRlLXJlYWN0LWNsYXNzL2luZGV4LmpzXCIpO1xudmFyIE1peGluID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvTWl4aW4uanNcIik7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChDb21wb25lbnQpIHtcbiAgcmV0dXJuIGNyZWF0ZVJlYWN0Q2xhc3Moe1xuICAgIGRpc3BsYXlOYW1lOiAnRm9ybXN5KCcgKyBnZXREaXNwbGF5TmFtZShDb21wb25lbnQpICsgJyknLFxuICAgIG1peGluczogW01peGluXSxcblxuICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIGlubmVyUmVmID0gdGhpcy5wcm9wcy5pbm5lclJlZjtcblxuICAgICAgdmFyIHByb3BzRm9yRWxlbWVudCA9IF9leHRlbmRzKHtcbiAgICAgICAgc2V0VmFsaWRhdGlvbnM6IHRoaXMuc2V0VmFsaWRhdGlvbnMsXG4gICAgICAgIHNldFZhbHVlOiB0aGlzLnNldFZhbHVlLFxuICAgICAgICByZXNldFZhbHVlOiB0aGlzLnJlc2V0VmFsdWUsXG4gICAgICAgIGdldFZhbHVlOiB0aGlzLmdldFZhbHVlLFxuICAgICAgICBoYXNWYWx1ZTogdGhpcy5oYXNWYWx1ZSxcbiAgICAgICAgZ2V0RXJyb3JNZXNzYWdlOiB0aGlzLmdldEVycm9yTWVzc2FnZSxcbiAgICAgICAgZ2V0RXJyb3JNZXNzYWdlczogdGhpcy5nZXRFcnJvck1lc3NhZ2VzLFxuICAgICAgICBpc0Zvcm1EaXNhYmxlZDogdGhpcy5pc0Zvcm1EaXNhYmxlZCxcbiAgICAgICAgaXNWYWxpZDogdGhpcy5pc1ZhbGlkLFxuICAgICAgICBpc1ByaXN0aW5lOiB0aGlzLmlzUHJpc3RpbmUsXG4gICAgICAgIGlzRm9ybVN1Ym1pdHRlZDogdGhpcy5pc0Zvcm1TdWJtaXR0ZWQsXG4gICAgICAgIGlzUmVxdWlyZWQ6IHRoaXMuaXNSZXF1aXJlZCxcbiAgICAgICAgc2hvd1JlcXVpcmVkOiB0aGlzLnNob3dSZXF1aXJlZCxcbiAgICAgICAgc2hvd0Vycm9yOiB0aGlzLnNob3dFcnJvcixcbiAgICAgICAgaXNWYWxpZFZhbHVlOiB0aGlzLmlzVmFsaWRWYWx1ZVxuICAgICAgfSwgdGhpcy5wcm9wcyk7XG5cbiAgICAgIGlmIChpbm5lclJlZikge1xuICAgICAgICBwcm9wc0ZvckVsZW1lbnQucmVmID0gaW5uZXJSZWY7XG4gICAgICB9XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDb21wb25lbnQsIHByb3BzRm9yRWxlbWVudCk7XG4gICAgfVxuICB9KTtcbn07XG5cbmZ1bmN0aW9uIGdldERpc3BsYXlOYW1lKENvbXBvbmVudCkge1xuICByZXR1cm4gQ29tcG9uZW50LmRpc3BsYXlOYW1lIHx8IENvbXBvbmVudC5uYW1lIHx8ICh0eXBlb2YgQ29tcG9uZW50ID09PSAnc3RyaW5nJyA/IENvbXBvbmVudCA6ICdDb21wb25lbnQnKTtcbn1cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvd2VicGFjay9idWlsZGluL2dsb2JhbC5qc1wiKSkpXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvTWl4aW4uanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XG5cbnZhciBQcm9wVHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9pbmRleC5qc1wiKTtcbnZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL3V0aWxzLmpzXCIpO1xudmFyIFJlYWN0ID0gZ2xvYmFsLlJlYWN0IHx8IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC9yZWFjdC5qc1wiKTtcblxudmFyIGNvbnZlcnRWYWxpZGF0aW9uc1RvT2JqZWN0ID0gZnVuY3Rpb24gY29udmVydFZhbGlkYXRpb25zVG9PYmplY3QodmFsaWRhdGlvbnMpIHtcblxuICBpZiAodHlwZW9mIHZhbGlkYXRpb25zID09PSAnc3RyaW5nJykge1xuXG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLnNwbGl0KC9cXCwoPyFbXntcXFtdKlt9XFxdXSkvZykucmVkdWNlKGZ1bmN0aW9uICh2YWxpZGF0aW9ucywgdmFsaWRhdGlvbikge1xuICAgICAgdmFyIGFyZ3MgPSB2YWxpZGF0aW9uLnNwbGl0KCc6Jyk7XG4gICAgICB2YXIgdmFsaWRhdGVNZXRob2QgPSBhcmdzLnNoaWZ0KCk7XG5cbiAgICAgIGFyZ3MgPSBhcmdzLm1hcChmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoYXJnKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHJldHVybiBhcmc7IC8vIEl0IGlzIGEgc3RyaW5nIGlmIGl0IGNhbiBub3QgcGFyc2UgaXRcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3Jtc3kgZG9lcyBub3Qgc3VwcG9ydCBtdWx0aXBsZSBhcmdzIG9uIHN0cmluZyB2YWxpZGF0aW9ucy4gVXNlIG9iamVjdCBmb3JtYXQgb2YgdmFsaWRhdGlvbnMgaW5zdGVhZC4nKTtcbiAgICAgIH1cblxuICAgICAgdmFsaWRhdGlvbnNbdmFsaWRhdGVNZXRob2RdID0gYXJncy5sZW5ndGggPyBhcmdzWzBdIDogdHJ1ZTtcbiAgICAgIHJldHVybiB2YWxpZGF0aW9ucztcbiAgICB9LCB7fSk7XG4gIH1cblxuICByZXR1cm4gdmFsaWRhdGlvbnMgfHwge307XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIF92YWx1ZTogdGhpcy5wcm9wcy52YWx1ZSxcbiAgICAgIF9pc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgIF9pc1ZhbGlkOiB0cnVlLFxuICAgICAgX2lzUHJpc3RpbmU6IHRydWUsXG4gICAgICBfcHJpc3RpbmVWYWx1ZTogdGhpcy5wcm9wcy52YWx1ZSxcbiAgICAgIF92YWxpZGF0aW9uRXJyb3I6IFtdLFxuICAgICAgX2V4dGVybmFsRXJyb3I6IG51bGwsXG4gICAgICBfZm9ybVN1Ym1pdHRlZDogZmFsc2VcbiAgICB9O1xuICB9LFxuICBjb250ZXh0VHlwZXM6IHtcbiAgICBmb3Jtc3k6IFByb3BUeXBlcy5vYmplY3QgLy8gV2hhdCBhYm91dCByZXF1aXJlZD9cbiAgfSxcbiAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkYXRpb25FcnJvcjogJycsXG4gICAgICB2YWxpZGF0aW9uRXJyb3JzOiB7fVxuICAgIH07XG4gIH0sXG5cbiAgY29tcG9uZW50V2lsbE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgdmFyIGNvbmZpZ3VyZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuc2V0VmFsaWRhdGlvbnModGhpcy5wcm9wcy52YWxpZGF0aW9ucywgdGhpcy5wcm9wcy5yZXF1aXJlZCk7XG5cbiAgICAgIC8vIFBhc3MgYSBmdW5jdGlvbiBpbnN0ZWFkP1xuICAgICAgdGhpcy5jb250ZXh0LmZvcm1zeS5hdHRhY2hUb0Zvcm0odGhpcyk7XG4gICAgICAvL3RoaXMucHJvcHMuX2F0dGFjaFRvRm9ybSh0aGlzKTtcbiAgICB9LmJpbmQodGhpcyk7XG5cbiAgICBpZiAoIXRoaXMucHJvcHMubmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3JtIElucHV0IHJlcXVpcmVzIGEgbmFtZSBwcm9wZXJ0eSB3aGVuIHVzZWQnKTtcbiAgICB9XG5cbiAgICAvKlxuICAgIGlmICghdGhpcy5wcm9wcy5fYXR0YWNoVG9Gb3JtKSB7XG4gICAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc01vdW50ZWQoKSkgcmV0dXJuO1xuICAgICAgICBpZiAoIXRoaXMucHJvcHMuX2F0dGFjaFRvRm9ybSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRm9ybSBNaXhpbiByZXF1aXJlcyBjb21wb25lbnQgdG8gYmUgbmVzdGVkIGluIGEgRm9ybScpO1xuICAgICAgICB9XG4gICAgICAgIGNvbmZpZ3VyZSgpO1xuICAgICAgfS5iaW5kKHRoaXMpLCAwKTtcbiAgICB9XG4gICAgKi9cbiAgICBjb25maWd1cmUoKTtcbiAgfSxcblxuICAvLyBXZSBoYXZlIHRvIG1ha2UgdGhlIHZhbGlkYXRlIG1ldGhvZCBpcyBrZXB0IHdoZW4gbmV3IHByb3BzIGFyZSBhZGRlZFxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgIHRoaXMuc2V0VmFsaWRhdGlvbnMobmV4dFByb3BzLnZhbGlkYXRpb25zLCBuZXh0UHJvcHMucmVxdWlyZWQpO1xuICB9LFxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykge1xuXG4gICAgLy8gSWYgdGhlIHZhbHVlIHBhc3NlZCBoYXMgY2hhbmdlZCwgc2V0IGl0LiBJZiB2YWx1ZSBpcyBub3QgcGFzc2VkIGl0IHdpbGxcbiAgICAvLyBpbnRlcm5hbGx5IHVwZGF0ZSwgYW5kIHRoaXMgd2lsbCBuZXZlciBydW5cbiAgICBpZiAoIXV0aWxzLmlzU2FtZSh0aGlzLnByb3BzLnZhbHVlLCBwcmV2UHJvcHMudmFsdWUpKSB7XG4gICAgICB0aGlzLnNldFZhbHVlKHRoaXMucHJvcHMudmFsdWUpO1xuICAgIH1cblxuICAgIC8vIElmIHZhbGlkYXRpb25zIG9yIHJlcXVpcmVkIGlzIGNoYW5nZWQsIHJ1biBhIG5ldyB2YWxpZGF0aW9uXG4gICAgaWYgKCF1dGlscy5pc1NhbWUodGhpcy5wcm9wcy52YWxpZGF0aW9ucywgcHJldlByb3BzLnZhbGlkYXRpb25zKSB8fCAhdXRpbHMuaXNTYW1lKHRoaXMucHJvcHMucmVxdWlyZWQsIHByZXZQcm9wcy5yZXF1aXJlZCkpIHtcbiAgICAgIHRoaXMuY29udGV4dC5mb3Jtc3kudmFsaWRhdGUodGhpcyk7XG4gICAgfVxuICB9LFxuXG4gIC8vIERldGFjaCBpdCB3aGVuIGNvbXBvbmVudCB1bm1vdW50c1xuICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy5jb250ZXh0LmZvcm1zeS5kZXRhY2hGcm9tRm9ybSh0aGlzKTtcbiAgICAvL3RoaXMucHJvcHMuX2RldGFjaEZyb21Gb3JtKHRoaXMpO1xuICB9LFxuXG4gIHNldFZhbGlkYXRpb25zOiBmdW5jdGlvbiBzZXRWYWxpZGF0aW9ucyh2YWxpZGF0aW9ucywgcmVxdWlyZWQpIHtcblxuICAgIC8vIEFkZCB2YWxpZGF0aW9ucyB0byB0aGUgc3RvcmUgaXRzZWxmIGFzIHRoZSBwcm9wcyBvYmplY3QgY2FuIG5vdCBiZSBtb2RpZmllZFxuICAgIHRoaXMuX3ZhbGlkYXRpb25zID0gY29udmVydFZhbGlkYXRpb25zVG9PYmplY3QodmFsaWRhdGlvbnMpIHx8IHt9O1xuICAgIHRoaXMuX3JlcXVpcmVkVmFsaWRhdGlvbnMgPSByZXF1aXJlZCA9PT0gdHJ1ZSA/IHsgaXNEZWZhdWx0UmVxdWlyZWRWYWx1ZTogdHJ1ZSB9IDogY29udmVydFZhbGlkYXRpb25zVG9PYmplY3QocmVxdWlyZWQpO1xuICB9LFxuXG4gIC8vIFdlIHZhbGlkYXRlIGFmdGVyIHRoZSB2YWx1ZSBoYXMgYmVlbiBzZXRcbiAgc2V0VmFsdWU6IGZ1bmN0aW9uIHNldFZhbHVlKHZhbHVlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBfdmFsdWU6IHZhbHVlLFxuICAgICAgX2lzUHJpc3RpbmU6IGZhbHNlXG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5jb250ZXh0LmZvcm1zeS52YWxpZGF0ZSh0aGlzKTtcbiAgICAgIC8vdGhpcy5wcm9wcy5fdmFsaWRhdGUodGhpcyk7XG4gICAgfS5iaW5kKHRoaXMpKTtcbiAgfSxcbiAgcmVzZXRWYWx1ZTogZnVuY3Rpb24gcmVzZXRWYWx1ZSgpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIF92YWx1ZTogdGhpcy5zdGF0ZS5fcHJpc3RpbmVWYWx1ZSxcbiAgICAgIF9pc1ByaXN0aW5lOiB0cnVlXG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5jb250ZXh0LmZvcm1zeS52YWxpZGF0ZSh0aGlzKTtcbiAgICAgIC8vdGhpcy5wcm9wcy5fdmFsaWRhdGUodGhpcyk7XG4gICAgfSk7XG4gIH0sXG4gIGdldFZhbHVlOiBmdW5jdGlvbiBnZXRWYWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5fdmFsdWU7XG4gIH0sXG4gIGhhc1ZhbHVlOiBmdW5jdGlvbiBoYXNWYWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5fdmFsdWUgIT09ICcnO1xuICB9LFxuICBnZXRFcnJvck1lc3NhZ2U6IGZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSgpIHtcbiAgICB2YXIgbWVzc2FnZXMgPSB0aGlzLmdldEVycm9yTWVzc2FnZXMoKTtcbiAgICByZXR1cm4gbWVzc2FnZXMubGVuZ3RoID8gbWVzc2FnZXNbMF0gOiBudWxsO1xuICB9LFxuICBnZXRFcnJvck1lc3NhZ2VzOiBmdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2VzKCkge1xuICAgIHJldHVybiAhdGhpcy5pc1ZhbGlkKCkgfHwgdGhpcy5zaG93UmVxdWlyZWQoKSA/IHRoaXMuc3RhdGUuX2V4dGVybmFsRXJyb3IgfHwgdGhpcy5zdGF0ZS5fdmFsaWRhdGlvbkVycm9yIHx8IFtdIDogW107XG4gIH0sXG4gIGlzRm9ybURpc2FibGVkOiBmdW5jdGlvbiBpc0Zvcm1EaXNhYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZXh0LmZvcm1zeS5pc0Zvcm1EaXNhYmxlZCgpO1xuICAgIC8vcmV0dXJuIHRoaXMucHJvcHMuX2lzRm9ybURpc2FibGVkKCk7XG4gIH0sXG4gIGlzVmFsaWQ6IGZ1bmN0aW9uIGlzVmFsaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX2lzVmFsaWQ7XG4gIH0sXG4gIGlzUHJpc3RpbmU6IGZ1bmN0aW9uIGlzUHJpc3RpbmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX2lzUHJpc3RpbmU7XG4gIH0sXG4gIGlzRm9ybVN1Ym1pdHRlZDogZnVuY3Rpb24gaXNGb3JtU3VibWl0dGVkKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLl9mb3JtU3VibWl0dGVkO1xuICB9LFxuICBpc1JlcXVpcmVkOiBmdW5jdGlvbiBpc1JlcXVpcmVkKCkge1xuICAgIHJldHVybiAhIXRoaXMucHJvcHMucmVxdWlyZWQ7XG4gIH0sXG4gIHNob3dSZXF1aXJlZDogZnVuY3Rpb24gc2hvd1JlcXVpcmVkKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLl9pc1JlcXVpcmVkO1xuICB9LFxuICBzaG93RXJyb3I6IGZ1bmN0aW9uIHNob3dFcnJvcigpIHtcbiAgICByZXR1cm4gIXRoaXMuc2hvd1JlcXVpcmVkKCkgJiYgIXRoaXMuaXNWYWxpZCgpO1xuICB9LFxuICBpc1ZhbGlkVmFsdWU6IGZ1bmN0aW9uIGlzVmFsaWRWYWx1ZSh2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHQuZm9ybXN5LmlzVmFsaWRWYWx1ZS5jYWxsKG51bGwsIHRoaXMsIHZhbHVlKTtcbiAgICAvL3JldHVybiB0aGlzLnByb3BzLl9pc1ZhbGlkVmFsdWUuY2FsbChudWxsLCB0aGlzLCB2YWx1ZSk7XG4gIH1cbn07XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3dlYnBhY2svYnVpbGRpbi9nbG9iYWwuanNcIikpKVxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL21haW4uanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XG5cbnZhciBfdHlwZW9mMiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1yZXR1cm4gdGFyZ2V0O1xufTtcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgX3R5cGVvZjIoU3ltYm9sLml0ZXJhdG9yKSA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZjIob2JqKTtcbn0gOiBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YyKG9iaik7XG59O1xuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMob2JqLCBrZXlzKSB7XG4gIHZhciB0YXJnZXQgPSB7fTtmb3IgKHZhciBpIGluIG9iaikge1xuICAgIGlmIChrZXlzLmluZGV4T2YoaSkgPj0gMCkgY29udGludWU7aWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBpKSkgY29udGludWU7dGFyZ2V0W2ldID0gb2JqW2ldO1xuICB9cmV0dXJuIHRhcmdldDtcbn1cblxudmFyIFByb3BUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9wcm9wLXR5cGVzL2luZGV4LmpzXCIpO1xudmFyIFJlYWN0ID0gZ2xvYmFsLlJlYWN0IHx8IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC9yZWFjdC5qc1wiKTtcbnZhciBjcmVhdGVSZWFjdENsYXNzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2NyZWF0ZS1yZWFjdC1jbGFzcy9pbmRleC5qc1wiKTtcbnZhciBGb3Jtc3kgPSB7fTtcbnZhciB2YWxpZGF0aW9uUnVsZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi92YWxpZGF0aW9uUnVsZXMuanNcIik7XG52YXIgZm9ybURhdGFUb09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9mb3JtLWRhdGEtdG8tb2JqZWN0L2luZGV4LmpzXCIpO1xudmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvdXRpbHMuanNcIik7XG52YXIgTWl4aW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9NaXhpbi5qc1wiKTtcbnZhciBIT0MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9IT0MuanNcIik7XG52YXIgRGVjb3JhdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvRGVjb3JhdG9yLmpzXCIpO1xudmFyIG9wdGlvbnMgPSB7fTtcbnZhciBlbXB0eUFycmF5ID0gW107XG5cbkZvcm1zeS5NaXhpbiA9IE1peGluO1xuRm9ybXN5LkhPQyA9IEhPQztcbkZvcm1zeS5EZWNvcmF0b3IgPSBEZWNvcmF0b3I7XG5cbkZvcm1zeS5kZWZhdWx0cyA9IGZ1bmN0aW9uIChwYXNzZWRPcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBwYXNzZWRPcHRpb25zO1xufTtcblxuRm9ybXN5LmFkZFZhbGlkYXRpb25SdWxlID0gZnVuY3Rpb24gKG5hbWUsIGZ1bmMpIHtcbiAgdmFsaWRhdGlvblJ1bGVzW25hbWVdID0gZnVuYztcbn07XG5cbkZvcm1zeS5Gb3JtID0gY3JlYXRlUmVhY3RDbGFzcyh7XG4gIGRpc3BsYXlOYW1lOiAnRm9ybXN5JyxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzVmFsaWQ6IHRydWUsXG4gICAgICBpc1N1Ym1pdHRpbmc6IGZhbHNlLFxuICAgICAgY2FuQ2hhbmdlOiBmYWxzZVxuICAgIH07XG4gIH0sXG4gIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24gZ2V0RGVmYXVsdFByb3BzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBvblN1Y2Nlc3M6IGZ1bmN0aW9uIG9uU3VjY2VzcygpIHt9LFxuICAgICAgb25FcnJvcjogZnVuY3Rpb24gb25FcnJvcigpIHt9LFxuICAgICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KCkge30sXG4gICAgICBvblZhbGlkU3VibWl0OiBmdW5jdGlvbiBvblZhbGlkU3VibWl0KCkge30sXG4gICAgICBvbkludmFsaWRTdWJtaXQ6IGZ1bmN0aW9uIG9uSW52YWxpZFN1Ym1pdCgpIHt9LFxuICAgICAgb25WYWxpZDogZnVuY3Rpb24gb25WYWxpZCgpIHt9LFxuICAgICAgb25JbnZhbGlkOiBmdW5jdGlvbiBvbkludmFsaWQoKSB7fSxcbiAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZSgpIHt9LFxuICAgICAgdmFsaWRhdGlvbkVycm9yczogbnVsbCxcbiAgICAgIHByZXZlbnRFeHRlcm5hbEludmFsaWRhdGlvbjogZmFsc2VcbiAgICB9O1xuICB9LFxuXG4gIGNoaWxkQ29udGV4dFR5cGVzOiB7XG4gICAgZm9ybXN5OiBQcm9wVHlwZXMub2JqZWN0XG4gIH0sXG4gIGdldENoaWxkQ29udGV4dDogZnVuY3Rpb24gZ2V0Q2hpbGRDb250ZXh0KCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICByZXR1cm4ge1xuICAgICAgZm9ybXN5OiB7XG4gICAgICAgIGF0dGFjaFRvRm9ybTogdGhpcy5hdHRhY2hUb0Zvcm0sXG4gICAgICAgIGRldGFjaEZyb21Gb3JtOiB0aGlzLmRldGFjaEZyb21Gb3JtLFxuICAgICAgICB2YWxpZGF0ZTogdGhpcy52YWxpZGF0ZSxcbiAgICAgICAgaXNGb3JtRGlzYWJsZWQ6IHRoaXMuaXNGb3JtRGlzYWJsZWQsXG4gICAgICAgIGlzVmFsaWRWYWx1ZTogZnVuY3Rpb24gaXNWYWxpZFZhbHVlKGNvbXBvbmVudCwgdmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMucnVuVmFsaWRhdGlvbihjb21wb25lbnQsIHZhbHVlKS5pc1ZhbGlkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfSxcblxuICAvLyBBZGQgYSBtYXAgdG8gc3RvcmUgdGhlIGlucHV0cyBvZiB0aGUgZm9ybSwgYSBtb2RlbCB0byBzdG9yZVxuICAvLyB0aGUgdmFsdWVzIG9mIHRoZSBmb3JtIGFuZCByZWdpc3RlciBjaGlsZCBpbnB1dHNcbiAgY29tcG9uZW50V2lsbE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgdGhpcy5pbnB1dHMgPSBbXTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy52YWxpZGF0ZUZvcm0oKTtcbiAgfSxcblxuICBjb21wb25lbnRXaWxsVXBkYXRlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVXBkYXRlKCkge1xuICAgIC8vIEtlZXAgYSByZWZlcmVuY2UgdG8gaW5wdXQgbmFtZXMgYmVmb3JlIGZvcm0gdXBkYXRlcyxcbiAgICAvLyB0byBjaGVjayBpZiBpbnB1dHMgaGFzIGNoYW5nZWQgYWZ0ZXIgcmVuZGVyXG4gICAgdGhpcy5wcmV2SW5wdXROYW1lcyA9IHRoaXMuaW5wdXRzLm1hcChmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICByZXR1cm4gY29tcG9uZW50LnByb3BzLm5hbWU7XG4gICAgfSk7XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG5cbiAgICBpZiAodGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzICYmIF90eXBlb2YodGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzKSA9PT0gJ29iamVjdCcgJiYgT2JqZWN0LmtleXModGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzKS5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLnNldElucHV0VmFsaWRhdGlvbkVycm9ycyh0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnMpO1xuICAgIH1cblxuICAgIHZhciBuZXdJbnB1dE5hbWVzID0gdGhpcy5pbnB1dHMubWFwKGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgIHJldHVybiBjb21wb25lbnQucHJvcHMubmFtZTtcbiAgICB9KTtcbiAgICBpZiAodXRpbHMuYXJyYXlzRGlmZmVyKHRoaXMucHJldklucHV0TmFtZXMsIG5ld0lucHV0TmFtZXMpKSB7XG4gICAgICB0aGlzLnZhbGlkYXRlRm9ybSgpO1xuICAgIH1cbiAgfSxcblxuICAvLyBBbGxvdyByZXNldHRpbmcgdG8gc3BlY2lmaWVkIGRhdGFcbiAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KGRhdGEpIHtcbiAgICB0aGlzLnNldEZvcm1QcmlzdGluZSh0cnVlKTtcbiAgICB0aGlzLnJlc2V0TW9kZWwoZGF0YSk7XG4gIH0sXG5cbiAgLy8gVXBkYXRlIG1vZGVsLCBzdWJtaXQgdG8gdXJsIHByb3AgYW5kIHNlbmQgdGhlIG1vZGVsXG4gIHN1Ym1pdDogZnVuY3Rpb24gc3VibWl0KGV2ZW50KSB7XG5cbiAgICBldmVudCAmJiBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgLy8gVHJpZ2dlciBmb3JtIGFzIG5vdCBwcmlzdGluZS5cbiAgICAvLyBJZiBhbnkgaW5wdXRzIGhhdmUgbm90IGJlZW4gdG91Y2hlZCB5ZXQgdGhpcyB3aWxsIG1ha2UgdGhlbSBkaXJ0eVxuICAgIC8vIHNvIHZhbGlkYXRpb24gYmVjb21lcyB2aXNpYmxlIChpZiBiYXNlZCBvbiBpc1ByaXN0aW5lKVxuICAgIHRoaXMuc2V0Rm9ybVByaXN0aW5lKGZhbHNlKTtcbiAgICB2YXIgbW9kZWwgPSB0aGlzLmdldE1vZGVsKCk7XG4gICAgdGhpcy5wcm9wcy5vblN1Ym1pdChtb2RlbCwgdGhpcy5yZXNldE1vZGVsLCB0aGlzLnVwZGF0ZUlucHV0c1dpdGhFcnJvcik7XG4gICAgdGhpcy5zdGF0ZS5pc1ZhbGlkID8gdGhpcy5wcm9wcy5vblZhbGlkU3VibWl0KG1vZGVsLCB0aGlzLnJlc2V0TW9kZWwsIHRoaXMudXBkYXRlSW5wdXRzV2l0aEVycm9yKSA6IHRoaXMucHJvcHMub25JbnZhbGlkU3VibWl0KG1vZGVsLCB0aGlzLnJlc2V0TW9kZWwsIHRoaXMudXBkYXRlSW5wdXRzV2l0aEVycm9yKTtcbiAgfSxcblxuICBtYXBNb2RlbDogZnVuY3Rpb24gbWFwTW9kZWwobW9kZWwpIHtcblxuICAgIGlmICh0aGlzLnByb3BzLm1hcHBpbmcpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLm1hcHBpbmcobW9kZWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZm9ybURhdGFUb09iamVjdC50b09iaihPYmplY3Qua2V5cyhtb2RlbCkucmVkdWNlKGZ1bmN0aW9uIChtYXBwZWRNb2RlbCwga2V5KSB7XG5cbiAgICAgICAgdmFyIGtleUFycmF5ID0ga2V5LnNwbGl0KCcuJyk7XG4gICAgICAgIHZhciBiYXNlID0gbWFwcGVkTW9kZWw7XG4gICAgICAgIHdoaWxlIChrZXlBcnJheS5sZW5ndGgpIHtcbiAgICAgICAgICB2YXIgY3VycmVudEtleSA9IGtleUFycmF5LnNoaWZ0KCk7XG4gICAgICAgICAgYmFzZSA9IGJhc2VbY3VycmVudEtleV0gPSBrZXlBcnJheS5sZW5ndGggPyBiYXNlW2N1cnJlbnRLZXldIHx8IHt9IDogbW9kZWxba2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtYXBwZWRNb2RlbDtcbiAgICAgIH0sIHt9KSk7XG4gICAgfVxuICB9LFxuXG4gIGdldE1vZGVsOiBmdW5jdGlvbiBnZXRNb2RlbCgpIHtcbiAgICB2YXIgY3VycmVudFZhbHVlcyA9IHRoaXMuZ2V0Q3VycmVudFZhbHVlcygpO1xuICAgIHJldHVybiB0aGlzLm1hcE1vZGVsKGN1cnJlbnRWYWx1ZXMpO1xuICB9LFxuXG4gIC8vIFJlc2V0IGVhY2gga2V5IGluIHRoZSBtb2RlbCB0byB0aGUgb3JpZ2luYWwgLyBpbml0aWFsIC8gc3BlY2lmaWVkIHZhbHVlXG4gIHJlc2V0TW9kZWw6IGZ1bmN0aW9uIHJlc2V0TW9kZWwoZGF0YSkge1xuICAgIHRoaXMuaW5wdXRzLmZvckVhY2goZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgdmFyIG5hbWUgPSBjb21wb25lbnQucHJvcHMubmFtZTtcbiAgICAgIGlmIChkYXRhICYmIGRhdGEuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgY29tcG9uZW50LnNldFZhbHVlKGRhdGFbbmFtZV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29tcG9uZW50LnJlc2V0VmFsdWUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLnZhbGlkYXRlRm9ybSgpO1xuICB9LFxuXG4gIHNldElucHV0VmFsaWRhdGlvbkVycm9yczogZnVuY3Rpb24gc2V0SW5wdXRWYWxpZGF0aW9uRXJyb3JzKGVycm9ycykge1xuICAgIHRoaXMuaW5wdXRzLmZvckVhY2goZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgdmFyIG5hbWUgPSBjb21wb25lbnQucHJvcHMubmFtZTtcbiAgICAgIHZhciBhcmdzID0gW3tcbiAgICAgICAgX2lzVmFsaWQ6ICEobmFtZSBpbiBlcnJvcnMpLFxuICAgICAgICBfdmFsaWRhdGlvbkVycm9yOiB0eXBlb2YgZXJyb3JzW25hbWVdID09PSAnc3RyaW5nJyA/IFtlcnJvcnNbbmFtZV1dIDogZXJyb3JzW25hbWVdXG4gICAgICB9XTtcbiAgICAgIGNvbXBvbmVudC5zZXRTdGF0ZS5hcHBseShjb21wb25lbnQsIGFyZ3MpO1xuICAgIH0pO1xuICB9LFxuXG4gIC8vIENoZWNrcyBpZiB0aGUgdmFsdWVzIGhhdmUgY2hhbmdlZCBmcm9tIHRoZWlyIGluaXRpYWwgdmFsdWVcbiAgaXNDaGFuZ2VkOiBmdW5jdGlvbiBpc0NoYW5nZWQoKSB7XG4gICAgcmV0dXJuICF1dGlscy5pc1NhbWUodGhpcy5nZXRQcmlzdGluZVZhbHVlcygpLCB0aGlzLmdldEN1cnJlbnRWYWx1ZXMoKSk7XG4gIH0sXG5cbiAgZ2V0UHJpc3RpbmVWYWx1ZXM6IGZ1bmN0aW9uIGdldFByaXN0aW5lVmFsdWVzKCkge1xuICAgIHJldHVybiB0aGlzLmlucHV0cy5yZWR1Y2UoZnVuY3Rpb24gKGRhdGEsIGNvbXBvbmVudCkge1xuICAgICAgdmFyIG5hbWUgPSBjb21wb25lbnQucHJvcHMubmFtZTtcbiAgICAgIGRhdGFbbmFtZV0gPSBjb21wb25lbnQucHJvcHMudmFsdWU7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9LCB7fSk7XG4gIH0sXG5cbiAgLy8gR28gdGhyb3VnaCBlcnJvcnMgZnJvbSBzZXJ2ZXIgYW5kIGdyYWIgdGhlIGNvbXBvbmVudHNcbiAgLy8gc3RvcmVkIGluIHRoZSBpbnB1dHMgbWFwLiBDaGFuZ2UgdGhlaXIgc3RhdGUgdG8gaW52YWxpZFxuICAvLyBhbmQgc2V0IHRoZSBzZXJ2ZXJFcnJvciBtZXNzYWdlXG4gIHVwZGF0ZUlucHV0c1dpdGhFcnJvcjogZnVuY3Rpb24gdXBkYXRlSW5wdXRzV2l0aEVycm9yKGVycm9ycykge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgT2JqZWN0LmtleXMoZXJyb3JzKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lLCBpbmRleCkge1xuICAgICAgdmFyIGNvbXBvbmVudCA9IHV0aWxzLmZpbmQoX3RoaXMyLmlucHV0cywgZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgICByZXR1cm4gY29tcG9uZW50LnByb3BzLm5hbWUgPT09IG5hbWU7XG4gICAgICB9KTtcbiAgICAgIGlmICghY29tcG9uZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignWW91IGFyZSB0cnlpbmcgdG8gdXBkYXRlIGFuIGlucHV0IHRoYXQgZG9lcyBub3QgZXhpc3QuICcgKyAnVmVyaWZ5IGVycm9ycyBvYmplY3Qgd2l0aCBpbnB1dCBuYW1lcy4gJyArIEpTT04uc3RyaW5naWZ5KGVycm9ycykpO1xuICAgICAgfVxuICAgICAgdmFyIGFyZ3MgPSBbe1xuICAgICAgICBfaXNWYWxpZDogX3RoaXMyLnByb3BzLnByZXZlbnRFeHRlcm5hbEludmFsaWRhdGlvbiB8fCBmYWxzZSxcbiAgICAgICAgX2V4dGVybmFsRXJyb3I6IHR5cGVvZiBlcnJvcnNbbmFtZV0gPT09ICdzdHJpbmcnID8gW2Vycm9yc1tuYW1lXV0gOiBlcnJvcnNbbmFtZV1cbiAgICAgIH1dO1xuICAgICAgY29tcG9uZW50LnNldFN0YXRlLmFwcGx5KGNvbXBvbmVudCwgYXJncyk7XG4gICAgfSk7XG4gIH0sXG5cbiAgaXNGb3JtRGlzYWJsZWQ6IGZ1bmN0aW9uIGlzRm9ybURpc2FibGVkKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmRpc2FibGVkO1xuICB9LFxuXG4gIGdldEN1cnJlbnRWYWx1ZXM6IGZ1bmN0aW9uIGdldEN1cnJlbnRWYWx1ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5wdXRzLnJlZHVjZShmdW5jdGlvbiAoZGF0YSwgY29tcG9uZW50KSB7XG4gICAgICB2YXIgbmFtZSA9IGNvbXBvbmVudC5wcm9wcy5uYW1lO1xuICAgICAgZGF0YVtuYW1lXSA9IGNvbXBvbmVudC5zdGF0ZS5fdmFsdWU7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9LCB7fSk7XG4gIH0sXG5cbiAgc2V0Rm9ybVByaXN0aW5lOiBmdW5jdGlvbiBzZXRGb3JtUHJpc3RpbmUoaXNQcmlzdGluZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgX2Zvcm1TdWJtaXR0ZWQ6ICFpc1ByaXN0aW5lXG4gICAgfSk7XG5cbiAgICAvLyBJdGVyYXRlIHRocm91Z2ggZWFjaCBjb21wb25lbnQgYW5kIHNldCBpdCBhcyBwcmlzdGluZVxuICAgIC8vIG9yIFwiZGlydHlcIi5cbiAgICB0aGlzLmlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChjb21wb25lbnQsIGluZGV4KSB7XG4gICAgICBjb21wb25lbnQuc2V0U3RhdGUoe1xuICAgICAgICBfZm9ybVN1Ym1pdHRlZDogIWlzUHJpc3RpbmUsXG4gICAgICAgIF9pc1ByaXN0aW5lOiBpc1ByaXN0aW5lXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSxcblxuICAvLyBVc2UgdGhlIGJpbmRlZCB2YWx1ZXMgYW5kIHRoZSBhY3R1YWwgaW5wdXQgdmFsdWUgdG9cbiAgLy8gdmFsaWRhdGUgdGhlIGlucHV0IGFuZCBzZXQgaXRzIHN0YXRlLiBUaGVuIGNoZWNrIHRoZVxuICAvLyBzdGF0ZSBvZiB0aGUgZm9ybSBpdHNlbGZcbiAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKGNvbXBvbmVudCkge1xuXG4gICAgLy8gVHJpZ2dlciBvbkNoYW5nZVxuICAgIGlmICh0aGlzLnN0YXRlLmNhbkNoYW5nZSkge1xuICAgICAgdGhpcy5wcm9wcy5vbkNoYW5nZSh0aGlzLmdldEN1cnJlbnRWYWx1ZXMoKSwgdGhpcy5pc0NoYW5nZWQoKSk7XG4gICAgfVxuXG4gICAgdmFyIHZhbGlkYXRpb24gPSB0aGlzLnJ1blZhbGlkYXRpb24oY29tcG9uZW50KTtcbiAgICAvLyBSdW4gdGhyb3VnaCB0aGUgdmFsaWRhdGlvbnMsIHNwbGl0IHRoZW0gdXAgYW5kIGNhbGxcbiAgICAvLyB0aGUgdmFsaWRhdG9yIElGIHRoZXJlIGlzIGEgdmFsdWUgb3IgaXQgaXMgcmVxdWlyZWRcbiAgICBjb21wb25lbnQuc2V0U3RhdGUoe1xuICAgICAgX2lzVmFsaWQ6IHZhbGlkYXRpb24uaXNWYWxpZCxcbiAgICAgIF9pc1JlcXVpcmVkOiB2YWxpZGF0aW9uLmlzUmVxdWlyZWQsXG4gICAgICBfdmFsaWRhdGlvbkVycm9yOiB2YWxpZGF0aW9uLmVycm9yLFxuICAgICAgX2V4dGVybmFsRXJyb3I6IG51bGxcbiAgICB9LCB0aGlzLnZhbGlkYXRlRm9ybSk7XG4gIH0sXG5cbiAgLy8gQ2hlY2tzIHZhbGlkYXRpb24gb24gY3VycmVudCB2YWx1ZSBvciBhIHBhc3NlZCB2YWx1ZVxuICBydW5WYWxpZGF0aW9uOiBmdW5jdGlvbiBydW5WYWxpZGF0aW9uKGNvbXBvbmVudCwgdmFsdWUpIHtcblxuICAgIHZhciBjdXJyZW50VmFsdWVzID0gdGhpcy5nZXRDdXJyZW50VmFsdWVzKCk7XG4gICAgdmFyIHZhbGlkYXRpb25FcnJvcnMgPSBjb21wb25lbnQucHJvcHMudmFsaWRhdGlvbkVycm9ycztcbiAgICB2YXIgdmFsaWRhdGlvbkVycm9yID0gY29tcG9uZW50LnByb3BzLnZhbGlkYXRpb25FcnJvcjtcbiAgICB2YWx1ZSA9IGFyZ3VtZW50cy5sZW5ndGggPT09IDIgPyB2YWx1ZSA6IGNvbXBvbmVudC5zdGF0ZS5fdmFsdWU7XG5cbiAgICB2YXIgdmFsaWRhdGlvblJlc3VsdHMgPSB0aGlzLnJ1blJ1bGVzKHZhbHVlLCBjdXJyZW50VmFsdWVzLCBjb21wb25lbnQuX3ZhbGlkYXRpb25zKTtcbiAgICB2YXIgcmVxdWlyZWRSZXN1bHRzID0gdGhpcy5ydW5SdWxlcyh2YWx1ZSwgY3VycmVudFZhbHVlcywgY29tcG9uZW50Ll9yZXF1aXJlZFZhbGlkYXRpb25zKTtcblxuICAgIC8vIHRoZSBjb21wb25lbnQgZGVmaW5lcyBhbiBleHBsaWNpdCB2YWxpZGF0ZSBmdW5jdGlvblxuICAgIGlmICh0eXBlb2YgY29tcG9uZW50LnZhbGlkYXRlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHZhbGlkYXRpb25SZXN1bHRzLmZhaWxlZCA9IGNvbXBvbmVudC52YWxpZGF0ZSgpID8gW10gOiBbJ2ZhaWxlZCddO1xuICAgIH1cblxuICAgIHZhciBpc1JlcXVpcmVkID0gT2JqZWN0LmtleXMoY29tcG9uZW50Ll9yZXF1aXJlZFZhbGlkYXRpb25zKS5sZW5ndGggPyAhIXJlcXVpcmVkUmVzdWx0cy5zdWNjZXNzLmxlbmd0aCA6IGZhbHNlO1xuICAgIHZhciBpc1ZhbGlkID0gIXZhbGlkYXRpb25SZXN1bHRzLmZhaWxlZC5sZW5ndGggJiYgISh0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnMgJiYgdGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzW2NvbXBvbmVudC5wcm9wcy5uYW1lXSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXNSZXF1aXJlZDogaXNSZXF1aXJlZCxcbiAgICAgIGlzVmFsaWQ6IGlzUmVxdWlyZWQgPyBmYWxzZSA6IGlzVmFsaWQsXG4gICAgICBlcnJvcjogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIGlmIChpc1ZhbGlkICYmICFpc1JlcXVpcmVkKSB7XG4gICAgICAgICAgcmV0dXJuIGVtcHR5QXJyYXk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmFsaWRhdGlvblJlc3VsdHMuZXJyb3JzLmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybiB2YWxpZGF0aW9uUmVzdWx0cy5lcnJvcnM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzICYmIHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9yc1tjb21wb25lbnQucHJvcHMubmFtZV0pIHtcbiAgICAgICAgICByZXR1cm4gdHlwZW9mIHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9yc1tjb21wb25lbnQucHJvcHMubmFtZV0gPT09ICdzdHJpbmcnID8gW3RoaXMucHJvcHMudmFsaWRhdGlvbkVycm9yc1tjb21wb25lbnQucHJvcHMubmFtZV1dIDogdGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzW2NvbXBvbmVudC5wcm9wcy5uYW1lXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1JlcXVpcmVkKSB7XG4gICAgICAgICAgdmFyIGVycm9yID0gdmFsaWRhdGlvbkVycm9yc1tyZXF1aXJlZFJlc3VsdHMuc3VjY2Vzc1swXV07XG4gICAgICAgICAgcmV0dXJuIGVycm9yID8gW2Vycm9yXSA6IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmFsaWRhdGlvblJlc3VsdHMuZmFpbGVkLmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybiB2YWxpZGF0aW9uUmVzdWx0cy5mYWlsZWQubWFwKGZ1bmN0aW9uIChmYWlsZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWxpZGF0aW9uRXJyb3JzW2ZhaWxlZF0gPyB2YWxpZGF0aW9uRXJyb3JzW2ZhaWxlZF0gOiB2YWxpZGF0aW9uRXJyb3I7XG4gICAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uICh4LCBwb3MsIGFycikge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIGR1cGxpY2F0ZXNcbiAgICAgICAgICAgIHJldHVybiBhcnIuaW5kZXhPZih4KSA9PT0gcG9zO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LmNhbGwodGhpcylcbiAgICB9O1xuICB9LFxuXG4gIHJ1blJ1bGVzOiBmdW5jdGlvbiBydW5SdWxlcyh2YWx1ZSwgY3VycmVudFZhbHVlcywgdmFsaWRhdGlvbnMpIHtcblxuICAgIHZhciByZXN1bHRzID0ge1xuICAgICAgZXJyb3JzOiBbXSxcbiAgICAgIGZhaWxlZDogW10sXG4gICAgICBzdWNjZXNzOiBbXVxuICAgIH07XG4gICAgaWYgKE9iamVjdC5rZXlzKHZhbGlkYXRpb25zKS5sZW5ndGgpIHtcbiAgICAgIE9iamVjdC5rZXlzKHZhbGlkYXRpb25zKS5mb3JFYWNoKGZ1bmN0aW9uICh2YWxpZGF0aW9uTWV0aG9kKSB7XG5cbiAgICAgICAgaWYgKHZhbGlkYXRpb25SdWxlc1t2YWxpZGF0aW9uTWV0aG9kXSAmJiB0eXBlb2YgdmFsaWRhdGlvbnNbdmFsaWRhdGlvbk1ldGhvZF0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm1zeSBkb2VzIG5vdCBhbGxvdyB5b3UgdG8gb3ZlcnJpZGUgZGVmYXVsdCB2YWxpZGF0aW9uczogJyArIHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF2YWxpZGF0aW9uUnVsZXNbdmFsaWRhdGlvbk1ldGhvZF0gJiYgdHlwZW9mIHZhbGlkYXRpb25zW3ZhbGlkYXRpb25NZXRob2RdICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3Jtc3kgZG9lcyBub3QgaGF2ZSB0aGUgdmFsaWRhdGlvbiBydWxlOiAnICsgdmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIHZhbGlkYXRpb25zW3ZhbGlkYXRpb25NZXRob2RdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdmFyIHZhbGlkYXRpb24gPSB2YWxpZGF0aW9uc1t2YWxpZGF0aW9uTWV0aG9kXShjdXJyZW50VmFsdWVzLCB2YWx1ZSk7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2YWxpZGF0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmVzdWx0cy5lcnJvcnMucHVzaCh2YWxpZGF0aW9uKTtcbiAgICAgICAgICAgIHJlc3VsdHMuZmFpbGVkLnB1c2godmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgICAgfSBlbHNlIGlmICghdmFsaWRhdGlvbikge1xuICAgICAgICAgICAgcmVzdWx0cy5mYWlsZWQucHVzaCh2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWxpZGF0aW9uc1t2YWxpZGF0aW9uTWV0aG9kXSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHZhciB2YWxpZGF0aW9uID0gdmFsaWRhdGlvblJ1bGVzW3ZhbGlkYXRpb25NZXRob2RdKGN1cnJlbnRWYWx1ZXMsIHZhbHVlLCB2YWxpZGF0aW9uc1t2YWxpZGF0aW9uTWV0aG9kXSk7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2YWxpZGF0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmVzdWx0cy5lcnJvcnMucHVzaCh2YWxpZGF0aW9uKTtcbiAgICAgICAgICAgIHJlc3VsdHMuZmFpbGVkLnB1c2godmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgICAgfSBlbHNlIGlmICghdmFsaWRhdGlvbikge1xuICAgICAgICAgICAgcmVzdWx0cy5mYWlsZWQucHVzaCh2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0cy5zdWNjZXNzLnB1c2godmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHRzLnN1Y2Nlc3MucHVzaCh2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzO1xuICB9LFxuXG4gIC8vIFZhbGlkYXRlIHRoZSBmb3JtIGJ5IGdvaW5nIHRocm91Z2ggYWxsIGNoaWxkIGlucHV0IGNvbXBvbmVudHNcbiAgLy8gYW5kIGNoZWNrIHRoZWlyIHN0YXRlXG4gIHZhbGlkYXRlRm9ybTogZnVuY3Rpb24gdmFsaWRhdGVGb3JtKCkge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgLy8gV2UgbmVlZCBhIGNhbGxiYWNrIGFzIHdlIGFyZSB2YWxpZGF0aW5nIGFsbCBpbnB1dHMgYWdhaW4uIFRoaXMgd2lsbFxuICAgIC8vIHJ1biB3aGVuIHRoZSBsYXN0IGNvbXBvbmVudCBoYXMgc2V0IGl0cyBzdGF0ZVxuICAgIHZhciBvblZhbGlkYXRpb25Db21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhbGxJc1ZhbGlkID0gdGhpcy5pbnB1dHMuZXZlcnkoZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgICByZXR1cm4gY29tcG9uZW50LnN0YXRlLl9pc1ZhbGlkO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBpc1ZhbGlkOiBhbGxJc1ZhbGlkXG4gICAgICB9KTtcblxuICAgICAgaWYgKGFsbElzVmFsaWQpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vblZhbGlkKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnByb3BzLm9uSW52YWxpZCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBUZWxsIHRoZSBmb3JtIHRoYXQgaXQgY2FuIHN0YXJ0IHRvIHRyaWdnZXIgY2hhbmdlIGV2ZW50c1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGNhbkNoYW5nZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfS5iaW5kKHRoaXMpO1xuXG4gICAgLy8gUnVuIHZhbGlkYXRpb24gYWdhaW4gaW4gY2FzZSBhZmZlY3RlZCBieSBvdGhlciBpbnB1dHMuIFRoZVxuICAgIC8vIGxhc3QgY29tcG9uZW50IHZhbGlkYXRlZCB3aWxsIHJ1biB0aGUgb25WYWxpZGF0aW9uQ29tcGxldGUgY2FsbGJhY2tcbiAgICB0aGlzLmlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChjb21wb25lbnQsIGluZGV4KSB7XG4gICAgICB2YXIgdmFsaWRhdGlvbiA9IF90aGlzMy5ydW5WYWxpZGF0aW9uKGNvbXBvbmVudCk7XG4gICAgICBpZiAodmFsaWRhdGlvbi5pc1ZhbGlkICYmIGNvbXBvbmVudC5zdGF0ZS5fZXh0ZXJuYWxFcnJvcikge1xuICAgICAgICB2YWxpZGF0aW9uLmlzVmFsaWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGNvbXBvbmVudC5zZXRTdGF0ZSh7XG4gICAgICAgIF9pc1ZhbGlkOiB2YWxpZGF0aW9uLmlzVmFsaWQsXG4gICAgICAgIF9pc1JlcXVpcmVkOiB2YWxpZGF0aW9uLmlzUmVxdWlyZWQsXG4gICAgICAgIF92YWxpZGF0aW9uRXJyb3I6IHZhbGlkYXRpb24uZXJyb3IsXG4gICAgICAgIF9leHRlcm5hbEVycm9yOiAhdmFsaWRhdGlvbi5pc1ZhbGlkICYmIGNvbXBvbmVudC5zdGF0ZS5fZXh0ZXJuYWxFcnJvciA/IGNvbXBvbmVudC5zdGF0ZS5fZXh0ZXJuYWxFcnJvciA6IG51bGxcbiAgICAgIH0sIGluZGV4ID09PSBfdGhpczMuaW5wdXRzLmxlbmd0aCAtIDEgPyBvblZhbGlkYXRpb25Db21wbGV0ZSA6IG51bGwpO1xuICAgIH0pO1xuXG4gICAgLy8gSWYgdGhlcmUgYXJlIG5vIGlucHV0cywgc2V0IHN0YXRlIHdoZXJlIGZvcm0gaXMgcmVhZHkgdG8gdHJpZ2dlclxuICAgIC8vIGNoYW5nZSBldmVudC4gTmV3IGlucHV0cyBtaWdodCBiZSBhZGRlZCBsYXRlclxuICAgIGlmICghdGhpcy5pbnB1dHMubGVuZ3RoKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgY2FuQ2hhbmdlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gTWV0aG9kIHB1dCBvbiBlYWNoIGlucHV0IGNvbXBvbmVudCB0byByZWdpc3RlclxuICAvLyBpdHNlbGYgdG8gdGhlIGZvcm1cbiAgYXR0YWNoVG9Gb3JtOiBmdW5jdGlvbiBhdHRhY2hUb0Zvcm0oY29tcG9uZW50KSB7XG5cbiAgICBpZiAodGhpcy5pbnB1dHMuaW5kZXhPZihjb21wb25lbnQpID09PSAtMSkge1xuICAgICAgdGhpcy5pbnB1dHMucHVzaChjb21wb25lbnQpO1xuICAgIH1cblxuICAgIHRoaXMudmFsaWRhdGUoY29tcG9uZW50KTtcbiAgfSxcblxuICAvLyBNZXRob2QgcHV0IG9uIGVhY2ggaW5wdXQgY29tcG9uZW50IHRvIHVucmVnaXN0ZXJcbiAgLy8gaXRzZWxmIGZyb20gdGhlIGZvcm1cbiAgZGV0YWNoRnJvbUZvcm06IGZ1bmN0aW9uIGRldGFjaEZyb21Gb3JtKGNvbXBvbmVudCkge1xuICAgIHZhciBjb21wb25lbnRQb3MgPSB0aGlzLmlucHV0cy5pbmRleE9mKGNvbXBvbmVudCk7XG5cbiAgICBpZiAoY29tcG9uZW50UG9zICE9PSAtMSkge1xuICAgICAgdGhpcy5pbnB1dHMgPSB0aGlzLmlucHV0cy5zbGljZSgwLCBjb21wb25lbnRQb3MpLmNvbmNhdCh0aGlzLmlucHV0cy5zbGljZShjb21wb25lbnRQb3MgKyAxKSk7XG4gICAgfVxuXG4gICAgdGhpcy52YWxpZGF0ZUZvcm0oKTtcbiAgfSxcbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgIG1hcHBpbmcgPSBfcHJvcHMubWFwcGluZyxcbiAgICAgICAgdmFsaWRhdGlvbkVycm9ycyA9IF9wcm9wcy52YWxpZGF0aW9uRXJyb3JzLFxuICAgICAgICBvblN1Ym1pdCA9IF9wcm9wcy5vblN1Ym1pdCxcbiAgICAgICAgb25WYWxpZCA9IF9wcm9wcy5vblZhbGlkLFxuICAgICAgICBvblZhbGlkU3VibWl0ID0gX3Byb3BzLm9uVmFsaWRTdWJtaXQsXG4gICAgICAgIG9uSW52YWxpZCA9IF9wcm9wcy5vbkludmFsaWQsXG4gICAgICAgIG9uSW52YWxpZFN1Ym1pdCA9IF9wcm9wcy5vbkludmFsaWRTdWJtaXQsXG4gICAgICAgIG9uQ2hhbmdlID0gX3Byb3BzLm9uQ2hhbmdlLFxuICAgICAgICByZXNldCA9IF9wcm9wcy5yZXNldCxcbiAgICAgICAgcHJldmVudEV4dGVybmFsSW52YWxpZGF0aW9uID0gX3Byb3BzLnByZXZlbnRFeHRlcm5hbEludmFsaWRhdGlvbixcbiAgICAgICAgb25TdWNjZXNzID0gX3Byb3BzLm9uU3VjY2VzcyxcbiAgICAgICAgb25FcnJvciA9IF9wcm9wcy5vbkVycm9yLFxuICAgICAgICBub25Gb3Jtc3lQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcHJvcHMsIFsnbWFwcGluZycsICd2YWxpZGF0aW9uRXJyb3JzJywgJ29uU3VibWl0JywgJ29uVmFsaWQnLCAnb25WYWxpZFN1Ym1pdCcsICdvbkludmFsaWQnLCAnb25JbnZhbGlkU3VibWl0JywgJ29uQ2hhbmdlJywgJ3Jlc2V0JywgJ3ByZXZlbnRFeHRlcm5hbEludmFsaWRhdGlvbicsICdvblN1Y2Nlc3MnLCAnb25FcnJvciddKTtcblxuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KCdmb3JtJywgX2V4dGVuZHMoe30sIG5vbkZvcm1zeVByb3BzLCB7IG9uU3VibWl0OiB0aGlzLnN1Ym1pdCB9KSwgdGhpcy5wcm9wcy5jaGlsZHJlbik7XG4gIH1cbn0pO1xuXG5pZiAoIWdsb2JhbC5leHBvcnRzICYmICFnbG9iYWwubW9kdWxlICYmICghZ2xvYmFsLmRlZmluZSB8fCAhZ2xvYmFsLmRlZmluZS5hbWQpKSB7XG4gIGdsb2JhbC5Gb3Jtc3kgPSBGb3Jtc3k7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRm9ybXN5O1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy93ZWJwYWNrL2J1aWxkaW4vZ2xvYmFsLmpzXCIpKSlcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi91dGlscy5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX3R5cGVvZjIgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mMihvYmopO1xufSA6IGZ1bmN0aW9uIChvYmopIHtcbiAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmogPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZjIob2JqKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhcnJheXNEaWZmZXI6IGZ1bmN0aW9uIGFycmF5c0RpZmZlcihhLCBiKSB7XG4gICAgdmFyIGlzRGlmZmVyZW50ID0gZmFsc2U7XG4gICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkge1xuICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgIGlmICghdGhpcy5pc1NhbWUoaXRlbSwgYltpbmRleF0pKSB7XG4gICAgICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzKTtcbiAgICB9XG4gICAgcmV0dXJuIGlzRGlmZmVyZW50O1xuICB9LFxuXG4gIG9iamVjdHNEaWZmZXI6IGZ1bmN0aW9uIG9iamVjdHNEaWZmZXIoYSwgYikge1xuICAgIHZhciBpc0RpZmZlcmVudCA9IGZhbHNlO1xuICAgIGlmIChPYmplY3Qua2V5cyhhKS5sZW5ndGggIT09IE9iamVjdC5rZXlzKGIpLmxlbmd0aCkge1xuICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBPYmplY3Qua2V5cyhhKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU2FtZShhW2tleV0sIGJba2V5XSkpIHtcbiAgICAgICAgICBpc0RpZmZlcmVudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0sIHRoaXMpO1xuICAgIH1cbiAgICByZXR1cm4gaXNEaWZmZXJlbnQ7XG4gIH0sXG5cbiAgaXNTYW1lOiBmdW5jdGlvbiBpc1NhbWUoYSwgYikge1xuICAgIGlmICgodHlwZW9mIGEgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGEpKSAhPT0gKHR5cGVvZiBiID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihiKSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYSkgJiYgQXJyYXkuaXNBcnJheShiKSkge1xuICAgICAgcmV0dXJuICF0aGlzLmFycmF5c0RpZmZlcihhLCBiKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gYS50b1N0cmluZygpID09PSBiLnRvU3RyaW5nKCk7XG4gICAgfSBlbHNlIGlmICgodHlwZW9mIGEgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGEpKSA9PT0gJ29iamVjdCcgJiYgYSAhPT0gbnVsbCAmJiBiICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gIXRoaXMub2JqZWN0c0RpZmZlcihhLCBiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYSA9PT0gYjtcbiAgfSxcblxuICBmaW5kOiBmdW5jdGlvbiBmaW5kKGNvbGxlY3Rpb24sIGZuKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjb2xsZWN0aW9uLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIGl0ZW0gPSBjb2xsZWN0aW9uW2ldO1xuICAgICAgaWYgKGZuKGl0ZW0pKSB7XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi92YWxpZGF0aW9uUnVsZXMuanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9pc0V4aXN0eSA9IGZ1bmN0aW9uIF9pc0V4aXN0eSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZDtcbn07XG5cbnZhciBpc0VtcHR5ID0gZnVuY3Rpb24gaXNFbXB0eSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT09ICcnO1xufTtcblxudmFyIHZhbGlkYXRpb25zID0ge1xuICBpc0RlZmF1bHRSZXF1aXJlZFZhbHVlOiBmdW5jdGlvbiBpc0RlZmF1bHRSZXF1aXJlZFZhbHVlKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gJyc7XG4gIH0sXG4gIGlzRXhpc3R5OiBmdW5jdGlvbiBpc0V4aXN0eSh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIF9pc0V4aXN0eSh2YWx1ZSk7XG4gIH0sXG4gIG1hdGNoUmVnZXhwOiBmdW5jdGlvbiBtYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCByZWdleHApIHtcbiAgICByZXR1cm4gIV9pc0V4aXN0eSh2YWx1ZSkgfHwgaXNFbXB0eSh2YWx1ZSkgfHwgcmVnZXhwLnRlc3QodmFsdWUpO1xuICB9LFxuICBpc1VuZGVmaW5lZDogZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkO1xuICB9LFxuICBpc0VtcHR5U3RyaW5nOiBmdW5jdGlvbiBpc0VtcHR5U3RyaW5nKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gaXNFbXB0eSh2YWx1ZSk7XG4gIH0sXG4gIGlzRW1haWw6IGZ1bmN0aW9uIGlzRW1haWwodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXigoKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSsoXFwuKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSspKil8KChcXHgyMikoKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPygoW1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4N2ZdfFxceDIxfFtcXHgyMy1cXHg1Yl18W1xceDVkLVxceDdlXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KFxcXFwoW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBkLVxceDdmXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSkqKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPyhcXHgyMikpKUAoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkkL2kpO1xuICB9LFxuICBpc1VybDogZnVuY3Rpb24gaXNVcmwodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXihodHRwcz98cz9mdHApOlxcL1xcLygoKChbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoJVtcXGRhLWZdezJ9KXxbIVxcJCYnXFwoXFwpXFwqXFwrLDs9XXw6KSpAKT8oKChcXGR8WzEtOV1cXGR8MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC01XSlcXC4oXFxkfFsxLTldXFxkfDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNV0pXFwuKFxcZHxbMS05XVxcZHwxXFxkXFxkfDJbMC00XVxcZHwyNVswLTVdKVxcLihcXGR8WzEtOV1cXGR8MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC01XSkpfCgoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4pKygoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKVxcLj8pKDpcXGQqKT8pKFxcLygoKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCkrKFxcLygoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OnxAKSopKik/KT8oXFw/KCgoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OnxAKXxbXFx1RTAwMC1cXHVGOEZGXXxcXC98XFw/KSopPygjKCgoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OnxAKXxcXC98XFw/KSopPyQvaSk7XG4gIH0sXG4gIGlzVHJ1ZTogZnVuY3Rpb24gaXNUcnVlKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IHRydWU7XG4gIH0sXG4gIGlzRmFsc2U6IGZ1bmN0aW9uIGlzRmFsc2UodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gZmFsc2U7XG4gIH0sXG4gIGlzTnVtZXJpYzogZnVuY3Rpb24gaXNOdW1lcmljKHZhbHVlcywgdmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXlstK10/KD86XFxkKlsuXSk/XFxkKyQvKTtcbiAgfSxcbiAgaXNBbHBoYTogZnVuY3Rpb24gaXNBbHBoYSh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eW0EtWl0rJC9pKTtcbiAgfSxcbiAgaXNBbHBoYW51bWVyaWM6IGZ1bmN0aW9uIGlzQWxwaGFudW1lcmljKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL15bMC05QS1aXSskL2kpO1xuICB9LFxuICBpc0ludDogZnVuY3Rpb24gaXNJbnQodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXig/OlstK10/KD86MHxbMS05XVxcZCopKSQvKTtcbiAgfSxcbiAgaXNGbG9hdDogZnVuY3Rpb24gaXNGbG9hdCh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eKD86Wy0rXT8oPzpcXGQrKSk/KD86XFwuXFxkKik/KD86W2VFXVtcXCtcXC1dPyg/OlxcZCspKT8kLyk7XG4gIH0sXG4gIGlzV29yZHM6IGZ1bmN0aW9uIGlzV29yZHModmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXltBLVpcXHNdKyQvaSk7XG4gIH0sXG4gIGlzU3BlY2lhbFdvcmRzOiBmdW5jdGlvbiBpc1NwZWNpYWxXb3Jkcyh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eW0EtWlxcc1xcdTAwQzAtXFx1MDE3Rl0rJC9pKTtcbiAgfSxcbiAgaXNMZW5ndGg6IGZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlcywgdmFsdWUsIGxlbmd0aCkge1xuICAgIHJldHVybiAhX2lzRXhpc3R5KHZhbHVlKSB8fCBpc0VtcHR5KHZhbHVlKSB8fCB2YWx1ZS5sZW5ndGggPT09IGxlbmd0aDtcbiAgfSxcbiAgZXF1YWxzOiBmdW5jdGlvbiBlcXVhbHModmFsdWVzLCB2YWx1ZSwgZXFsKSB7XG4gICAgcmV0dXJuICFfaXNFeGlzdHkodmFsdWUpIHx8IGlzRW1wdHkodmFsdWUpIHx8IHZhbHVlID09IGVxbDtcbiAgfSxcbiAgZXF1YWxzRmllbGQ6IGZ1bmN0aW9uIGVxdWFsc0ZpZWxkKHZhbHVlcywgdmFsdWUsIGZpZWxkKSB7XG4gICAgcmV0dXJuIHZhbHVlID09IHZhbHVlc1tmaWVsZF07XG4gIH0sXG4gIG1heExlbmd0aDogZnVuY3Rpb24gbWF4TGVuZ3RoKHZhbHVlcywgdmFsdWUsIGxlbmd0aCkge1xuICAgIHJldHVybiAhX2lzRXhpc3R5KHZhbHVlKSB8fCB2YWx1ZS5sZW5ndGggPD0gbGVuZ3RoO1xuICB9LFxuICBtaW5MZW5ndGg6IGZ1bmN0aW9uIG1pbkxlbmd0aCh2YWx1ZXMsIHZhbHVlLCBsZW5ndGgpIHtcbiAgICByZXR1cm4gIV9pc0V4aXN0eSh2YWx1ZSkgfHwgaXNFbXB0eSh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoID49IGxlbmd0aDtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB2YWxpZGF0aW9ucztcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvY29tcG9uZW50cy9JbnB1dC9JbnB1dC5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0L3JlYWN0LmpzXCIpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9mb3Jtc3lSZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL21haW4uanNcIik7XG5cbnZhciBfZm9ybXN5UmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZm9ybXN5UmVhY3QpO1xuXG52YXIgX3Byb3BUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9wcm9wLXR5cGVzL2luZGV4LmpzXCIpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBJbnB1dCA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhJbnB1dCwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gSW5wdXQocHJvcHMpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSW5wdXQpO1xuXG4gICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKElucHV0Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoSW5wdXQpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICBfdGhpcy5jaGFuZ2VWYWx1ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgX3RoaXMucHJvcHMuc2V0VmFsdWUoZXZlbnQuY3VycmVudFRhcmdldFtfdGhpcy5wcm9wcy50eXBlID09PSAnY2hlY2tib3gnID8gJ2NoZWNrZWQnIDogJ3ZhbHVlJ10pO1xuICAgIH07XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKElucHV0LCBbe1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSB0aGlzLnByb3BzLmdldEVycm9yTWVzc2FnZSgpO1xuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2ZpbGUtZmllbGQnIH0sXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2ZpbGUtZmllbGRfX2xhYmVsJyB9LFxuICAgICAgICAgIHRoaXMucHJvcHMubGFiZWxcbiAgICAgICAgKSxcbiAgICAgICAgdGhpcy5wcm9wcy5kaXNhYmxlZCA/IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2ZpbGUtZmllbGRfX3ZhbHVlJyB9LFxuICAgICAgICAgIHRoaXMucHJvcHMudmFsdWVcbiAgICAgICAgKSA6IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdsYWJlbCcsXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLnByb3BzLm5hbWUudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgIHR5cGU6IHRoaXMucHJvcHMudHlwZSB8fCAndGV4dCcsXG4gICAgICAgICAgICBvbkNoYW5nZTogdGhpcy5jaGFuZ2VWYWx1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnByb3BzLmdldFZhbHVlKCksXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogdGhpcy5wcm9wcy5wbGFjZWhvbGRlciB8fCAnJyB9KSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaScsIHsgY2xhc3NOYW1lOiAncHJvZmlsZS1maWVsZF9faW5wdXQtaWNvbiBmYS1wZW5jaWwgZmEgJyB9KSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnc2lnbnVwLWZvcm1fX2Vycm9yLW1lc3NhZ2UnIH0sXG4gICAgICAgICAgICBlcnJvck1lc3NhZ2VcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIElucHV0O1xufShfcmVhY3QyLmRlZmF1bHQuQ29tcG9uZW50KTtcblxuSW5wdXQucHJvcFR5cGVzID0ge1xuICB2YWx1ZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGxhYmVsOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgbmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIHR5cGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBzZXRWYWx1ZTogX3Byb3BUeXBlczIuZGVmYXVsdC5hbnksXG4gIGdldFZhbHVlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIGdldEVycm9yTWVzc2FnZTogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBkaXNhYmxlZDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICBwbGFjZWhvbGRlcjogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmdcbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9ICgwLCBfZm9ybXN5UmVhY3QuSE9DKShJbnB1dCk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3BhZ2VzL1Byb2ZpbGUvUHJvZmlsZS5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0L3JlYWN0LmpzXCIpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9mb3Jtc3lSZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL21haW4uanNcIik7XG5cbnZhciBfZm9ybXN5UmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZm9ybXN5UmVhY3QpO1xuXG52YXIgX0lucHV0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2NvbXBvbmVudHMvSW5wdXQvSW5wdXQuanNcIik7XG5cbnZhciBfSW5wdXQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSW5wdXQpO1xuXG52YXIgX3VzZXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2FjdGlvbnMvdXNlcnMuYWN0aW9uLmpzXCIpO1xuXG52YXIgX3JlZHV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlZHV4L2VzL2luZGV4LmpzXCIpO1xuXG52YXIgX01lc3NhZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvY29tcG9uZW50cy9NZXNzYWdlL01lc3NhZ2UuanNcIik7XG5cbnZhciBfUG9wdXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvY29tcG9uZW50cy9Qb3B1cC9Qb3B1cC5qc1wiKTtcblxudmFyIF9CdXR0b24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvY29tcG9uZW50cy9CdXR0b24vQnV0dG9uLmpzXCIpO1xuXG52YXIgX3JlYWN0UmVkdXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcmVhY3QtcmVkdXgvZXMvaW5kZXguanNcIik7XG5cbnZhciBfcHJvcFR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3Byb3AtdHlwZXMvaW5kZXguanNcIik7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbl9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9wYWdlcy9Qcm9maWxlL1Byb2ZpbGUuc2Nzc1wiKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvZmlsZSA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhQcm9maWxlLCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBQcm9maWxlKHByb3BzKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb2ZpbGUpO1xuXG4gICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb2ZpbGUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm9maWxlKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgX3RoaXMuc2V0UG9wdXBTaG93biA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IF90aGlzLnN0YXRlLnBvcHVwU2hvd247XG5cbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgcG9wdXBTaG93bjogIWN1cnJlbnRTdGF0ZVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF90aGlzLnVwZGF0ZVByb2ZpbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgbmFtZTogX3RoaXMubmFtZS5nZXRWYWx1ZSgpLFxuICAgICAgICBlbWFpbDogX3RoaXMuZW1haWwuZ2V0VmFsdWUoKSxcbiAgICAgICAgcGFzc3dvcmRPbGQ6IF90aGlzLnBhc3N3b3JkT2xkLmdldFZhbHVlKCksXG4gICAgICAgIHBhc3N3b3JkOiBfdGhpcy5wYXNzd29yZC5nZXRWYWx1ZSgpLFxuICAgICAgICBwYXNzd29yZFJlcGVhdDogX3RoaXMucGFzc3dvcmRSZXBlYXQuZ2V0VmFsdWUoKSxcbiAgICAgICAgYXZhdGFyOiBfdGhpcy5iYXNlNjRTdHIsXG4gICAgICAgIF9pZDogX3RoaXMucHJvcHMudXNlci5faWRcbiAgICAgIH07XG5cbiAgICAgIF90aGlzLnByb3BzLnVwZGF0ZVByb2ZpbGVSZXF1ZXN0KGRhdGEpO1xuICAgIH07XG5cbiAgICBfdGhpcy5lbmFibGVCdXR0b24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGNhblN1Ym1pdDogdHJ1ZVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF90aGlzLmRpc2FibGVCdXR0b24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGNhblN1Ym1pdDogZmFsc2VcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfdGhpcy5lZGl0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgZGlzYWJsZWQ6ICFfdGhpcy5zdGF0ZS5kaXNhYmxlZFxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF90aGlzLmRlbGV0ZVVzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5wcm9wcy5kZWxldGVVc2VyUmVxdWVzdChfdGhpcy5wcm9wcy51c2VyKTtcbiAgICB9O1xuXG4gICAgX3RoaXMuaGFuZGxlRmlsZVNlbGVjdCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7IHVwZGF0ZUltYWdlU3RhdHVzOiAnTG9hZGluZy4uLicgfSk7XG4gICAgICB2YXIgZmlsZXMgPSBlLnRhcmdldC5maWxlcyA/IGUudGFyZ2V0LmZpbGVzIDogZS5kYXRhVHJhbnNmZXIuZmlsZXM7XG5cbiAgICAgIGlmIChmaWxlcykge1xuICAgICAgICB2YXIgZmlsZSA9IGZpbGVzWzBdO1xuXG4gICAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgICAgdmFyIG1heEZpbGVTaXplID0gMTAyNCAqIDEwMjQ7XG5cbiAgICAgICAgICBpZiAoZmlsZS5zaXplID4gbWF4RmlsZVNpemUpIHtcbiAgICAgICAgICAgIF90aGlzLnByb3BzLnVwbG9hZFBob3RvRmFpbHVyZSgnRXhjZWVkaW5nIDFNQiBsaW1pdCcpO1xuICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICB1cGRhdGVJbWFnZVN0YXR1czogJ0V4Y2VlZGluZyAxTUIgbGltaXQnLFxuICAgICAgICAgICAgICBzZXRQb3B1cFNob3duOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcblxuICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAocmVhZGVyRXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBiaW5hcnlTdHJpbmcgPSByZWFkZXJFdmVudC50YXJnZXQucmVzdWx0O1xuXG4gICAgICAgICAgICBfdGhpcy5iYXNlNjRTdHIgPSAnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCwnICsgYnRvYShiaW5hcnlTdHJpbmcpO1xuICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBpbWFnZUJhc2U2NDogX3RoaXMuYmFzZTY0U3RyLCB1cGRhdGVJbWFnZVN0YXR1czogJycgfSk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHJlYWRlci5yZWFkQXNCaW5hcnlTdHJpbmcoZmlsZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3RoaXMucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfTtcblxuICAgIF90aGlzLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBkcmFnb3ZlckZvckJvZHkgPSBlIHx8IGV2ZW50O1xuXG4gICAgICAgIGRyYWdvdmVyRm9yQm9keS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSwgZmFsc2UpO1xuXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBkcm9wRm9yQm9keSA9IGUgfHwgZXZlbnQ7XG5cbiAgICAgICAgZHJvcEZvckJvZHkucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnc2VjdGlvbicsXG4gICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZmlsZScgfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ2hlYWRlcicsXG4gICAgICAgICAgeyBjbGFzc05hbWU6ICdwcm9maWxlX19oZWFkZXInIH0sXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnaDEnLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwcm9maWxlX19oZWFkZXItdGl0bGUnIH0sXG4gICAgICAgICAgICAnUHJvZmlsZSdcbiAgICAgICAgICApLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2ZpbGVfX2RlbGV0ZSBidG4gYnRuLS1kYW5nZXInLFxuICAgICAgICAgICAgICBvbkNsaWNrOiBfdGhpcy5zZXRQb3B1cFNob3duIH0sXG4gICAgICAgICAgICAnRGVsZXRlIHByb2ZpbGUnXG4gICAgICAgICAgKVxuICAgICAgICApLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnc2VjdGlvbicsXG4gICAgICAgICAgeyBjbGFzc05hbWU6ICdwcm9maWxlLWluZm8nIH0sXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBfZm9ybXN5UmVhY3QyLmRlZmF1bHQuRm9ybSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncHJvZmlsZS1mb3JtIGNsZWFyZml4JyxcbiAgICAgICAgICAgICAgb25TdWJtaXQ6IF90aGlzLnVwZGF0ZVByb2ZpbGUsXG4gICAgICAgICAgICAgIG9uVmFsaWQ6IF90aGlzLmVuYWJsZUJ1dHRvbixcbiAgICAgICAgICAgICAgb25JbnZhbGlkOiBfdGhpcy5kaXNhYmxlQnV0dG9uIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBfdGhpcy5zdGF0ZS5pbWFnZUJhc2U2NCB8fCBfdGhpcy5wcm9wcy51c2VyLmF2YXRhciA/ICdwcm9maWxlX19waG90bycgOiAncHJvZmlsZV9fcGhvdG8gcHJvZmlsZV9fcGhvdG8tLW5vYXZhdGFyJyB9LFxuICAgICAgICAgICAgICBfdGhpcy5zdGF0ZS5pbWFnZUJhc2U2NCB8fCBfdGhpcy5wcm9wcy51c2VyLmF2YXRhciA/IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbWcnLCB7XG4gICAgICAgICAgICAgICAgc3JjOiBfdGhpcy5zdGF0ZS5pbWFnZUJhc2U2NCB8fCBfdGhpcy5wcm9wcy51c2VyLmF2YXRhcixcbiAgICAgICAgICAgICAgICBhbHQ6ICdhdmF0YXInIH0pIDogbnVsbFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwcm9maWxlLWluZm9fX2ZpZWxkcycgfSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0lucHV0Mi5kZWZhdWx0LCB7XG4gICAgICAgICAgICAgICAgbGFiZWw6ICdOQU1FJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnbmFtZScsXG4gICAgICAgICAgICAgICAgdmFsdWU6IF90aGlzLnByb3BzLnVzZXIubmFtZSxcbiAgICAgICAgICAgICAgICBkaXNhYmxlZDogX3RoaXMuc3RhdGUuZGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYoaW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgIF90aGlzLm5hbWUgPSBpbnB1dDtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIHZhbGlkYXRpb25zOiAnaXNBbHBoYScsXG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9yOiAnTmFtZSBtdXN0IGNvbnRhaW4gb25seSBsZXR0ZXJzJyB9KSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0lucHV0Mi5kZWZhdWx0LCB7XG4gICAgICAgICAgICAgICAgbGFiZWw6ICdFTUFJTCcsXG4gICAgICAgICAgICAgICAgbmFtZTogJ2VtYWlsJyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogX3RoaXMucHJvcHMudXNlci5lbWFpbCxcbiAgICAgICAgICAgICAgICBkaXNhYmxlZDogX3RoaXMuc3RhdGUuZGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYoaW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgIF90aGlzLmVtYWlsID0gaW5wdXQ7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uczogJ2lzRW1haWwnLFxuICAgICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcjogJ1RoaXMgaXMgbm90IGEgdmFsaWQgZW1haWwnIH0pLFxuICAgICAgICAgICAgICAhX3RoaXMuc3RhdGUuZGlzYWJsZWQgPyBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZmllbGRzZXQnLFxuICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZmlsZS1pbmZvX19maWVsZHMtLWZpZWxkc2V0JyB9LFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ2xlZ2VuZCcsXG4gICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdoMycsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZmlsZS1oZWFkaW5nJyB9LFxuICAgICAgICAgICAgICAgICAgICAnQ2hhbmdlIHBhc3N3b3JkOidcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9JbnB1dDIuZGVmYXVsdCwge1xuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdPbGQnLFxuICAgICAgICAgICAgICAgICAgbmFtZTogJ29sZC1wc3cnLFxuICAgICAgICAgICAgICAgICAgdHlwZTogJ3Bhc3N3b3JkJyxcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnRW50ZXIgdGhlIG9sZCBwYXNzd29yZCcsXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZDogX3RoaXMuc3RhdGUuZGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihpbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYXNzd29yZE9sZCA9IGlucHV0O1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIG1pbkxlbmd0aDogNyxcbiAgICAgICAgICAgICAgICAgICAgaXNBbHBoYW51bWVyaWM6IHRydWVcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3I6ICdQYXNzd29yZCBpcyBub3QgdmFsaWQnIH0pLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9JbnB1dDIuZGVmYXVsdCwge1xuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdOZXcnLFxuICAgICAgICAgICAgICAgICAgbmFtZTogJ25ldy1wc3cnLFxuICAgICAgICAgICAgICAgICAgdHlwZTogJ3Bhc3N3b3JkJyxcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnRW50ZXIgdGhlIG5ldyBwYXNzd29yZCcsXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZDogX3RoaXMuc3RhdGUuZGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihpbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYXNzd29yZCA9IGlucHV0O1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIG1pbkxlbmd0aDogNyxcbiAgICAgICAgICAgICAgICAgICAgaXNBbHBoYW51bWVyaWM6IHRydWVcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3I6ICdQYXNzd29yZCBpcyBub3QgdmFsaWQnIH0pLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9JbnB1dDIuZGVmYXVsdCwge1xuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdSZXBlYXQnLFxuICAgICAgICAgICAgICAgICAgbmFtZTogJ3JlcGVhdC1wc3cnLFxuICAgICAgICAgICAgICAgICAgdHlwZTogJ3Bhc3N3b3JkJyxcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnUmVwZWF0IHRoZSBwYXNzd29yZCcsXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZDogX3RoaXMuc3RhdGUuZGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihpbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYXNzd29yZFJlcGVhdCA9IGlucHV0O1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25zOiAnZXF1YWxzRmllbGQ6bmV3LXBzdycsXG4gICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3I6ICdQYXNzd29yZCBkb2VzIG5vdCBtYXRjaCcgfSksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIG51bGwpXG4gICAgICAgICAgICAgICkgOiBudWxsLFxuICAgICAgICAgICAgICAhX3RoaXMuc3RhdGUuZGlzYWJsZWQgPyBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2ZpbGUtaW5mb19fdXBsb2FkLXBob3RvJyB9LFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ2gzJyxcbiAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZmlsZS1oZWFkaW5nJyB9LFxuICAgICAgICAgICAgICAgICAgJ1VwbG9hZCBuZXcgcGhvdG8nXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdwcm9maWxlX191cGxvYWQtcGhvdG8tLWRyb3AnLFxuICAgICAgICAgICAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihlbCkge1xuICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmZpZWxkSW1hZ2UgPSBlbDtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb25Ecm9wOiBfdGhpcy5oYW5kbGVGaWxlU2VsZWN0LFxuICAgICAgICAgICAgICAgICAgICBvbkRyYWdPdmVyOiBfdGhpcy5wcmV2ZW50RGVmYXVsdCB9LFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgJ0Ryb3AgeW91ciBwaG90bydcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2ZpbGVfX3VwbG9hZC1waG90by0tYnRuJyB9LFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBodG1sRm9yOiAnYWRkLXBob3RvJyxcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdidG4gYWRkLXBob3RvLWJ0bicgfSxcbiAgICAgICAgICAgICAgICAgICAgJ0Nob29zZSBmaWxlIHRvIHVwbG9hZCcsXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZmlsZScsXG4gICAgICAgICAgICAgICAgICAgICAgaWQ6ICdhZGQtcGhvdG8nLFxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBfdGhpcy5oYW5kbGVGaWxlU2VsZWN0LFxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2hpZGUnIH0pXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApIDogbnVsbCxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwcm9maWxlLWJ0bi1ncm91cCcgfSxcbiAgICAgICAgICAgICAgICBfdGhpcy5zdGF0ZS5kaXNhYmxlZCA/IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2ZpbGVfX3VwZGF0ZSBidG4nLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBfdGhpcy5lZGl0RGF0YSB9LFxuICAgICAgICAgICAgICAgICAgJ1VwZGF0ZSBpbmZvJ1xuICAgICAgICAgICAgICAgICkgOiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiAnc3VibWl0JyxcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiAhX3RoaXMuc3RhdGUuY2FuU3VibWl0LFxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYnRuIGJ0bi0tc3VjY2VzcycsXG4gICAgICAgICAgICAgICAgICB2YWx1ZTogJ1NhdmUgY2hhbmdlcycgfSksXG4gICAgICAgICAgICAgICAgIV90aGlzLnN0YXRlLmRpc2FibGVkID8gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZmlsZV9fZGVsZXRlIGJ0bicsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IF90aGlzLmVkaXREYXRhIH0sXG4gICAgICAgICAgICAgICAgICAnQ2FuY2VsJ1xuICAgICAgICAgICAgICAgICkgOiBudWxsXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgICksXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9NZXNzYWdlLk1lc3NhZ2UsIHtcbiAgICAgICAgICBjbGVhclN0YXR1czogX3RoaXMucHJvcHMuY2xlYXJTdGF0dXMsXG4gICAgICAgICAgc3RhdHVzOiBfdGhpcy5wcm9wcy51cGRhdGVQcm9maWxlU3RhdHVzLFxuICAgICAgICAgIHRleHQ6IF90aGlzLnByb3BzLmVycm9yVGV4dCxcbiAgICAgICAgICBoZWFkZXI6ICdFcnJvcicgfSksXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgIF9Qb3B1cC5Qb3B1cCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzZXRQb3B1cFNob3duOiBfdGhpcy5zZXRQb3B1cFNob3duLFxuICAgICAgICAgICAgcG9wdXBTaG93bjogX3RoaXMuc3RhdGUucG9wdXBTaG93bixcbiAgICAgICAgICAgIGhlYWRlcjogJ0NvbmZpcm0gdGhlIGFjdGlvbicsXG4gICAgICAgICAgICB0ZXh0OiAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB5b3VyIGFjY291bnQ/JyB9LFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9CdXR0b24uQnV0dG9uLCB7XG4gICAgICAgICAgICBzZXRQb3B1cFNob3duOiBfdGhpcy5zZXRQb3B1cFNob3duLFxuICAgICAgICAgICAgb2tIYW5kbGVyOiBmdW5jdGlvbiBva0hhbmRsZXIoKSB7XG4gICAgICAgICAgICAgIF90aGlzLmRlbGV0ZVVzZXIoKTtcbiAgICAgICAgICAgICAgX3RoaXMuc2V0UG9wdXBTaG93bigpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNsYXNzTmFtZTogJ2J0biBwb3B1cF9fYnRuJyxcbiAgICAgICAgICAgIGlubmVyVGV4dDogJ09rJ1xuICAgICAgICAgIH0pLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9CdXR0b24uQnV0dG9uLCB7XG4gICAgICAgICAgICBva0hhbmRsZXI6IGZ1bmN0aW9uIG9rSGFuZGxlcigpIHtcbiAgICAgICAgICAgICAgX3RoaXMuc2V0UG9wdXBTaG93bigpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNsYXNzTmFtZTogJ2J0biBidG4tLWRlZmF1bHQgcG9wdXBfX2J0bicsXG4gICAgICAgICAgICBpbm5lclRleHQ6ICdDYW5jZWwnXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBkaXNhYmxlZDogdHJ1ZSxcbiAgICAgIGNhblN1Ym1pdDogZmFsc2UsXG4gICAgICBpbWFnZUJhc2U2NDogbnVsbCxcbiAgICAgIHBvcHVwU2hvd246IGZhbHNlLFxuICAgICAgdXBkYXRlSW1hZ2VTdGF0dXM6ICcnXG4gICAgfTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUHJvZmlsZSwgW3tcbiAgICBrZXk6ICdjb21wb25lbnREaWRVcGRhdGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMucHJvcHMudXBkYXRlUHJvZmlsZVN0YXR1cyA9PT0gJ0RPTkUnKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzMi5wcm9wcy5oaXN0b3J5LnB1c2goJy8nKTtcbiAgICAgICAgfSwgMTAwMCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5wcm9wcy5kZWxldGVQcm9maWxlU3RhdHVzID09PSAnRE9ORScpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXMyLnByb3BzLmhpc3RvcnkucHVzaCgnL2F1dGgnKTtcbiAgICAgICAgfSwgMTAwMCk7XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFByb2ZpbGU7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5mdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RvcmUpIHtcbiAgcmV0dXJuIHtcbiAgICB1cGRhdGVQcm9maWxlU3RhdHVzOiBzdG9yZS51c2Vycy51cGRhdGVQcm9maWxlU3RhdHVzLFxuICAgIGRlbGV0ZVByb2ZpbGVTdGF0dXM6IHN0b3JlLnVzZXJzLmRlbGV0ZVByb2ZpbGVTdGF0dXMsXG4gICAgZXJyb3JUZXh0OiBzdG9yZS51c2Vycy51c2VyLmVycm9yVGV4dCxcbiAgICB1c2VyOiBzdG9yZS51c2Vycy51c2VyXG4gIH07XG59XG5mdW5jdGlvbiBtYXBEaXNwYXRjaFRvUHJvcHMoZGlzcGF0Y2gpIHtcbiAgcmV0dXJuIHtcbiAgICB1cGRhdGVQcm9maWxlUmVxdWVzdDogKDAsIF9yZWR1eC5iaW5kQWN0aW9uQ3JlYXRvcnMpKF91c2Vycy51cGRhdGVQcm9maWxlUmVxdWVzdCwgZGlzcGF0Y2gpLFxuICAgIGRlbGV0ZVVzZXJSZXF1ZXN0OiAoMCwgX3JlZHV4LmJpbmRBY3Rpb25DcmVhdG9ycykoX3VzZXJzLmRlbGV0ZVVzZXJSZXF1ZXN0LCBkaXNwYXRjaCksXG4gICAgY2xlYXJTdGF0dXM6ICgwLCBfcmVkdXguYmluZEFjdGlvbkNyZWF0b3JzKShfdXNlcnMuY2xlYXJVcGRhdGVQcm9maWxlU3RhdHVzLCBkaXNwYXRjaCksXG4gICAgdXBsb2FkUGhvdG9GYWlsdXJlOiAoMCwgX3JlZHV4LmJpbmRBY3Rpb25DcmVhdG9ycykoX3VzZXJzLnVwbG9hZFBob3RvRmFpbHVyZSwgZGlzcGF0Y2gpXG4gIH07XG59XG5cbmV4cG9ydHMuZGVmYXVsdCA9ICgwLCBfcmVhY3RSZWR1eC5jb25uZWN0KShtYXBTdGF0ZVRvUHJvcHMsIG1hcERpc3BhdGNoVG9Qcm9wcykoUHJvZmlsZSk7XG5cblxuUHJvZmlsZS5wcm9wVHlwZXMgPSB7XG4gIHVwZGF0ZVByb2ZpbGVTdGF0dXM6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICB1cGRhdGVQcm9maWxlUmVxdWVzdDogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBkZWxldGVVc2VyUmVxdWVzdDogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBkZWxldGVQcm9maWxlU3RhdHVzOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgdXNlcjogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIGVtYWlsOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgcGFzc3dvcmQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBwYXNzd29yZE9sZDogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIHBhc3N3b3JkUmVwZWF0OiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgZXJyb3JUZXh0OiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgdmFsdWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBoaXN0b3J5OiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgY2xlYXJTdGF0dXM6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgdHlwZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIHNldFZhbHVlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmFueSxcbiAgdXBsb2FkUGhvdG9GYWlsdXJlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmNcbn07XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3BhZ2VzL1Byb2ZpbGUvUHJvZmlsZS5zY3NzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cbi8qKiovIH0pXG5cbn0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyA2LmluZGV4X2J1bmRsZS5qcyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgZmFjdG9yeSA9IHJlcXVpcmUoJy4vZmFjdG9yeScpO1xuXG5pZiAodHlwZW9mIFJlYWN0ID09PSAndW5kZWZpbmVkJykge1xuICB0aHJvdyBFcnJvcihcbiAgICAnY3JlYXRlLXJlYWN0LWNsYXNzIGNvdWxkIG5vdCBmaW5kIHRoZSBSZWFjdCBvYmplY3QuIElmIHlvdSBhcmUgdXNpbmcgc2NyaXB0IHRhZ3MsICcgK1xuICAgICAgJ21ha2Ugc3VyZSB0aGF0IFJlYWN0IGlzIGJlaW5nIGxvYWRlZCBiZWZvcmUgY3JlYXRlLXJlYWN0LWNsYXNzLidcbiAgKTtcbn1cblxuLy8gSGFjayB0byBncmFiIE5vb3BVcGRhdGVRdWV1ZSBmcm9tIGlzb21vcnBoaWMgUmVhY3RcbnZhciBSZWFjdE5vb3BVcGRhdGVRdWV1ZSA9IG5ldyBSZWFjdC5Db21wb25lbnQoKS51cGRhdGVyO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoXG4gIFJlYWN0LkNvbXBvbmVudCxcbiAgUmVhY3QuaXNWYWxpZEVsZW1lbnQsXG4gIFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlXG4pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9jcmVhdGUtcmVhY3QtY2xhc3MvaW5kZXguanMiLCJmdW5jdGlvbiB0b09iaihzb3VyY2UpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKHNvdXJjZSkucmVkdWNlKGZ1bmN0aW9uIChvdXRwdXQsIGtleSkge1xuICAgIHZhciBwYXJlbnRLZXkgPSBrZXkubWF0Y2goL1teXFxbXSovaSk7XG4gICAgdmFyIHBhdGhzID0ga2V5Lm1hdGNoKC9cXFsuKj9cXF0vZykgfHwgW107XG4gICAgcGF0aHMgPSBbcGFyZW50S2V5WzBdXS5jb25jYXQocGF0aHMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICByZXR1cm4ga2V5LnJlcGxhY2UoL1xcW3xcXF0vZywgJycpO1xuICAgIH0pO1xuICAgIHZhciBjdXJyZW50UGF0aCA9IG91dHB1dDtcbiAgICB3aGlsZSAocGF0aHMubGVuZ3RoKSB7XG4gICAgICB2YXIgcGF0aEtleSA9IHBhdGhzLnNoaWZ0KCk7XG5cbiAgICAgIGlmIChwYXRoS2V5IGluIGN1cnJlbnRQYXRoKSB7XG4gICAgICAgIGN1cnJlbnRQYXRoID0gY3VycmVudFBhdGhbcGF0aEtleV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50UGF0aFtwYXRoS2V5XSA9IHBhdGhzLmxlbmd0aCA/IGlzTmFOKHBhdGhzWzBdKSA/IHt9IDogW10gOiBzb3VyY2Vba2V5XTtcbiAgICAgICAgY3VycmVudFBhdGggPSBjdXJyZW50UGF0aFtwYXRoS2V5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb3V0cHV0O1xuICB9LCB7fSk7XG59XG5cbmZ1bmN0aW9uIGZyb21PYmoob2JqKSB7XG4gIGZ1bmN0aW9uIHJlY3VyKG5ld09iaiwgcHJvcE5hbWUsIGN1cnJWYWwpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShjdXJyVmFsKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoY3VyclZhbCkgPT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XG4gICAgICBPYmplY3Qua2V5cyhjdXJyVmFsKS5mb3JFYWNoKGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgcmVjdXIobmV3T2JqLCBwcm9wTmFtZSArIFwiW1wiICsgdiArIFwiXVwiLCBjdXJyVmFsW3ZdKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG5ld09iajtcbiAgICB9XG5cbiAgICBuZXdPYmpbcHJvcE5hbWVdID0gY3VyclZhbDtcbiAgICByZXR1cm4gbmV3T2JqO1xuICB9XG5cbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuICByZXR1cm4ga2V5cy5yZWR1Y2UoZnVuY3Rpb24obmV3T2JqLCBwcm9wTmFtZSkge1xuICAgIHJldHVybiByZWN1cihuZXdPYmosIHByb3BOYW1lLCBvYmpbcHJvcE5hbWVdKTtcbiAgfSwge30pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZnJvbU9iajogZnJvbU9iaixcbiAgdG9PYmo6IHRvT2JqXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9mb3JtLWRhdGEtdG8tb2JqZWN0L2luZGV4LmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgUmVhY3QgPSBnbG9iYWwuUmVhY3QgfHwgcmVxdWlyZSgncmVhY3QnKTtcbnZhciBjcmVhdGVSZWFjdENsYXNzID0gcmVxdWlyZSgnY3JlYXRlLXJlYWN0LWNsYXNzJyk7XG52YXIgTWl4aW4gPSByZXF1aXJlKCcuL01peGluLmpzJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChDb21wb25lbnQpIHtcbiAgICByZXR1cm4gY3JlYXRlUmVhY3RDbGFzcyh7XG4gICAgICBtaXhpbnM6IFtNaXhpbl0sXG4gICAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29tcG9uZW50LCBfZXh0ZW5kcyh7XG4gICAgICAgICAgc2V0VmFsaWRhdGlvbnM6IHRoaXMuc2V0VmFsaWRhdGlvbnMsXG4gICAgICAgICAgc2V0VmFsdWU6IHRoaXMuc2V0VmFsdWUsXG4gICAgICAgICAgcmVzZXRWYWx1ZTogdGhpcy5yZXNldFZhbHVlLFxuICAgICAgICAgIGdldFZhbHVlOiB0aGlzLmdldFZhbHVlLFxuICAgICAgICAgIGhhc1ZhbHVlOiB0aGlzLmhhc1ZhbHVlLFxuICAgICAgICAgIGdldEVycm9yTWVzc2FnZTogdGhpcy5nZXRFcnJvck1lc3NhZ2UsXG4gICAgICAgICAgZ2V0RXJyb3JNZXNzYWdlczogdGhpcy5nZXRFcnJvck1lc3NhZ2VzLFxuICAgICAgICAgIGlzRm9ybURpc2FibGVkOiB0aGlzLmlzRm9ybURpc2FibGVkLFxuICAgICAgICAgIGlzVmFsaWQ6IHRoaXMuaXNWYWxpZCxcbiAgICAgICAgICBpc1ByaXN0aW5lOiB0aGlzLmlzUHJpc3RpbmUsXG4gICAgICAgICAgaXNGb3JtU3VibWl0dGVkOiB0aGlzLmlzRm9ybVN1Ym1pdHRlZCxcbiAgICAgICAgICBpc1JlcXVpcmVkOiB0aGlzLmlzUmVxdWlyZWQsXG4gICAgICAgICAgc2hvd1JlcXVpcmVkOiB0aGlzLnNob3dSZXF1aXJlZCxcbiAgICAgICAgICBzaG93RXJyb3I6IHRoaXMuc2hvd0Vycm9yLFxuICAgICAgICAgIGlzVmFsaWRWYWx1ZTogdGhpcy5pc1ZhbGlkVmFsdWVcbiAgICAgICAgfSwgdGhpcy5wcm9wcykpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xufTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2Zvcm1zeS1yZWFjdC9saWIvRGVjb3JhdG9yLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgUmVhY3QgPSBnbG9iYWwuUmVhY3QgfHwgcmVxdWlyZSgncmVhY3QnKTtcbnZhciBjcmVhdGVSZWFjdENsYXNzID0gcmVxdWlyZSgnY3JlYXRlLXJlYWN0LWNsYXNzJyk7XG52YXIgTWl4aW4gPSByZXF1aXJlKCcuL01peGluLmpzJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChDb21wb25lbnQpIHtcbiAgcmV0dXJuIGNyZWF0ZVJlYWN0Q2xhc3Moe1xuICAgIGRpc3BsYXlOYW1lOiAnRm9ybXN5KCcgKyBnZXREaXNwbGF5TmFtZShDb21wb25lbnQpICsgJyknLFxuICAgIG1peGluczogW01peGluXSxcblxuICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIGlubmVyUmVmID0gdGhpcy5wcm9wcy5pbm5lclJlZjtcblxuICAgICAgdmFyIHByb3BzRm9yRWxlbWVudCA9IF9leHRlbmRzKHtcbiAgICAgICAgc2V0VmFsaWRhdGlvbnM6IHRoaXMuc2V0VmFsaWRhdGlvbnMsXG4gICAgICAgIHNldFZhbHVlOiB0aGlzLnNldFZhbHVlLFxuICAgICAgICByZXNldFZhbHVlOiB0aGlzLnJlc2V0VmFsdWUsXG4gICAgICAgIGdldFZhbHVlOiB0aGlzLmdldFZhbHVlLFxuICAgICAgICBoYXNWYWx1ZTogdGhpcy5oYXNWYWx1ZSxcbiAgICAgICAgZ2V0RXJyb3JNZXNzYWdlOiB0aGlzLmdldEVycm9yTWVzc2FnZSxcbiAgICAgICAgZ2V0RXJyb3JNZXNzYWdlczogdGhpcy5nZXRFcnJvck1lc3NhZ2VzLFxuICAgICAgICBpc0Zvcm1EaXNhYmxlZDogdGhpcy5pc0Zvcm1EaXNhYmxlZCxcbiAgICAgICAgaXNWYWxpZDogdGhpcy5pc1ZhbGlkLFxuICAgICAgICBpc1ByaXN0aW5lOiB0aGlzLmlzUHJpc3RpbmUsXG4gICAgICAgIGlzRm9ybVN1Ym1pdHRlZDogdGhpcy5pc0Zvcm1TdWJtaXR0ZWQsXG4gICAgICAgIGlzUmVxdWlyZWQ6IHRoaXMuaXNSZXF1aXJlZCxcbiAgICAgICAgc2hvd1JlcXVpcmVkOiB0aGlzLnNob3dSZXF1aXJlZCxcbiAgICAgICAgc2hvd0Vycm9yOiB0aGlzLnNob3dFcnJvcixcbiAgICAgICAgaXNWYWxpZFZhbHVlOiB0aGlzLmlzVmFsaWRWYWx1ZVxuICAgICAgfSwgdGhpcy5wcm9wcyk7XG5cbiAgICAgIGlmIChpbm5lclJlZikge1xuICAgICAgICBwcm9wc0ZvckVsZW1lbnQucmVmID0gaW5uZXJSZWY7XG4gICAgICB9XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDb21wb25lbnQsIHByb3BzRm9yRWxlbWVudCk7XG4gICAgfVxuICB9KTtcbn07XG5cbmZ1bmN0aW9uIGdldERpc3BsYXlOYW1lKENvbXBvbmVudCkge1xuICByZXR1cm4gQ29tcG9uZW50LmRpc3BsYXlOYW1lIHx8IENvbXBvbmVudC5uYW1lIHx8ICh0eXBlb2YgQ29tcG9uZW50ID09PSAnc3RyaW5nJyA/IENvbXBvbmVudCA6ICdDb21wb25lbnQnKTtcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2Zvcm1zeS1yZWFjdC9saWIvSE9DLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscy5qcycpO1xudmFyIFJlYWN0ID0gZ2xvYmFsLlJlYWN0IHx8IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBjb252ZXJ0VmFsaWRhdGlvbnNUb09iamVjdCA9IGZ1bmN0aW9uIGNvbnZlcnRWYWxpZGF0aW9uc1RvT2JqZWN0KHZhbGlkYXRpb25zKSB7XG5cbiAgaWYgKHR5cGVvZiB2YWxpZGF0aW9ucyA9PT0gJ3N0cmluZycpIHtcblxuICAgIHJldHVybiB2YWxpZGF0aW9ucy5zcGxpdCgvXFwsKD8hW157XFxbXSpbfVxcXV0pL2cpLnJlZHVjZShmdW5jdGlvbiAodmFsaWRhdGlvbnMsIHZhbGlkYXRpb24pIHtcbiAgICAgIHZhciBhcmdzID0gdmFsaWRhdGlvbi5zcGxpdCgnOicpO1xuICAgICAgdmFyIHZhbGlkYXRlTWV0aG9kID0gYXJncy5zaGlmdCgpO1xuXG4gICAgICBhcmdzID0gYXJncy5tYXAoZnVuY3Rpb24gKGFyZykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGFyZyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICByZXR1cm4gYXJnOyAvLyBJdCBpcyBhIHN0cmluZyBpZiBpdCBjYW4gbm90IHBhcnNlIGl0XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoYXJncy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRm9ybXN5IGRvZXMgbm90IHN1cHBvcnQgbXVsdGlwbGUgYXJncyBvbiBzdHJpbmcgdmFsaWRhdGlvbnMuIFVzZSBvYmplY3QgZm9ybWF0IG9mIHZhbGlkYXRpb25zIGluc3RlYWQuJyk7XG4gICAgICB9XG5cbiAgICAgIHZhbGlkYXRpb25zW3ZhbGlkYXRlTWV0aG9kXSA9IGFyZ3MubGVuZ3RoID8gYXJnc1swXSA6IHRydWU7XG4gICAgICByZXR1cm4gdmFsaWRhdGlvbnM7XG4gICAgfSwge30pO1xuICB9XG5cbiAgcmV0dXJuIHZhbGlkYXRpb25zIHx8IHt9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKCkge1xuICAgIHJldHVybiB7XG4gICAgICBfdmFsdWU6IHRoaXMucHJvcHMudmFsdWUsXG4gICAgICBfaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICBfaXNWYWxpZDogdHJ1ZSxcbiAgICAgIF9pc1ByaXN0aW5lOiB0cnVlLFxuICAgICAgX3ByaXN0aW5lVmFsdWU6IHRoaXMucHJvcHMudmFsdWUsXG4gICAgICBfdmFsaWRhdGlvbkVycm9yOiBbXSxcbiAgICAgIF9leHRlcm5hbEVycm9yOiBudWxsLFxuICAgICAgX2Zvcm1TdWJtaXR0ZWQ6IGZhbHNlXG4gICAgfTtcbiAgfSxcbiAgY29udGV4dFR5cGVzOiB7XG4gICAgZm9ybXN5OiBQcm9wVHlwZXMub2JqZWN0IC8vIFdoYXQgYWJvdXQgcmVxdWlyZWQ/XG4gIH0sXG4gIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24gZ2V0RGVmYXVsdFByb3BzKCkge1xuICAgIHJldHVybiB7XG4gICAgICB2YWxpZGF0aW9uRXJyb3I6ICcnLFxuICAgICAgdmFsaWRhdGlvbkVycm9yczoge31cbiAgICB9O1xuICB9LFxuXG4gIGNvbXBvbmVudFdpbGxNb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIHZhciBjb25maWd1cmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnNldFZhbGlkYXRpb25zKHRoaXMucHJvcHMudmFsaWRhdGlvbnMsIHRoaXMucHJvcHMucmVxdWlyZWQpO1xuXG4gICAgICAvLyBQYXNzIGEgZnVuY3Rpb24gaW5zdGVhZD9cbiAgICAgIHRoaXMuY29udGV4dC5mb3Jtc3kuYXR0YWNoVG9Gb3JtKHRoaXMpO1xuICAgICAgLy90aGlzLnByb3BzLl9hdHRhY2hUb0Zvcm0odGhpcyk7XG4gICAgfS5iaW5kKHRoaXMpO1xuXG4gICAgaWYgKCF0aGlzLnByb3BzLm5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRm9ybSBJbnB1dCByZXF1aXJlcyBhIG5hbWUgcHJvcGVydHkgd2hlbiB1c2VkJyk7XG4gICAgfVxuXG4gICAgLypcbiAgICBpZiAoIXRoaXMucHJvcHMuX2F0dGFjaFRvRm9ybSkge1xuICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNNb3VudGVkKCkpIHJldHVybjtcbiAgICAgICAgaWYgKCF0aGlzLnByb3BzLl9hdHRhY2hUb0Zvcm0pIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm0gTWl4aW4gcmVxdWlyZXMgY29tcG9uZW50IHRvIGJlIG5lc3RlZCBpbiBhIEZvcm0nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25maWd1cmUoKTtcbiAgICAgIH0uYmluZCh0aGlzKSwgMCk7XG4gICAgfVxuICAgICovXG4gICAgY29uZmlndXJlKCk7XG4gIH0sXG5cbiAgLy8gV2UgaGF2ZSB0byBtYWtlIHRoZSB2YWxpZGF0ZSBtZXRob2QgaXMga2VwdCB3aGVuIG5ldyBwcm9wcyBhcmUgYWRkZWRcbiAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICB0aGlzLnNldFZhbGlkYXRpb25zKG5leHRQcm9wcy52YWxpZGF0aW9ucywgbmV4dFByb3BzLnJlcXVpcmVkKTtcbiAgfSxcblxuICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcblxuICAgIC8vIElmIHRoZSB2YWx1ZSBwYXNzZWQgaGFzIGNoYW5nZWQsIHNldCBpdC4gSWYgdmFsdWUgaXMgbm90IHBhc3NlZCBpdCB3aWxsXG4gICAgLy8gaW50ZXJuYWxseSB1cGRhdGUsIGFuZCB0aGlzIHdpbGwgbmV2ZXIgcnVuXG4gICAgaWYgKCF1dGlscy5pc1NhbWUodGhpcy5wcm9wcy52YWx1ZSwgcHJldlByb3BzLnZhbHVlKSkge1xuICAgICAgdGhpcy5zZXRWYWx1ZSh0aGlzLnByb3BzLnZhbHVlKTtcbiAgICB9XG5cbiAgICAvLyBJZiB2YWxpZGF0aW9ucyBvciByZXF1aXJlZCBpcyBjaGFuZ2VkLCBydW4gYSBuZXcgdmFsaWRhdGlvblxuICAgIGlmICghdXRpbHMuaXNTYW1lKHRoaXMucHJvcHMudmFsaWRhdGlvbnMsIHByZXZQcm9wcy52YWxpZGF0aW9ucykgfHwgIXV0aWxzLmlzU2FtZSh0aGlzLnByb3BzLnJlcXVpcmVkLCBwcmV2UHJvcHMucmVxdWlyZWQpKSB7XG4gICAgICB0aGlzLmNvbnRleHQuZm9ybXN5LnZhbGlkYXRlKHRoaXMpO1xuICAgIH1cbiAgfSxcblxuICAvLyBEZXRhY2ggaXQgd2hlbiBjb21wb25lbnQgdW5tb3VudHNcbiAgY29tcG9uZW50V2lsbFVubW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMuY29udGV4dC5mb3Jtc3kuZGV0YWNoRnJvbUZvcm0odGhpcyk7XG4gICAgLy90aGlzLnByb3BzLl9kZXRhY2hGcm9tRm9ybSh0aGlzKTtcbiAgfSxcblxuICBzZXRWYWxpZGF0aW9uczogZnVuY3Rpb24gc2V0VmFsaWRhdGlvbnModmFsaWRhdGlvbnMsIHJlcXVpcmVkKSB7XG5cbiAgICAvLyBBZGQgdmFsaWRhdGlvbnMgdG8gdGhlIHN0b3JlIGl0c2VsZiBhcyB0aGUgcHJvcHMgb2JqZWN0IGNhbiBub3QgYmUgbW9kaWZpZWRcbiAgICB0aGlzLl92YWxpZGF0aW9ucyA9IGNvbnZlcnRWYWxpZGF0aW9uc1RvT2JqZWN0KHZhbGlkYXRpb25zKSB8fCB7fTtcbiAgICB0aGlzLl9yZXF1aXJlZFZhbGlkYXRpb25zID0gcmVxdWlyZWQgPT09IHRydWUgPyB7IGlzRGVmYXVsdFJlcXVpcmVkVmFsdWU6IHRydWUgfSA6IGNvbnZlcnRWYWxpZGF0aW9uc1RvT2JqZWN0KHJlcXVpcmVkKTtcbiAgfSxcblxuICAvLyBXZSB2YWxpZGF0ZSBhZnRlciB0aGUgdmFsdWUgaGFzIGJlZW4gc2V0XG4gIHNldFZhbHVlOiBmdW5jdGlvbiBzZXRWYWx1ZSh2YWx1ZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgX3ZhbHVlOiB2YWx1ZSxcbiAgICAgIF9pc1ByaXN0aW5lOiBmYWxzZVxuICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuY29udGV4dC5mb3Jtc3kudmFsaWRhdGUodGhpcyk7XG4gICAgICAvL3RoaXMucHJvcHMuX3ZhbGlkYXRlKHRoaXMpO1xuICAgIH0uYmluZCh0aGlzKSk7XG4gIH0sXG4gIHJlc2V0VmFsdWU6IGZ1bmN0aW9uIHJlc2V0VmFsdWUoKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBfdmFsdWU6IHRoaXMuc3RhdGUuX3ByaXN0aW5lVmFsdWUsXG4gICAgICBfaXNQcmlzdGluZTogdHJ1ZVxuICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuY29udGV4dC5mb3Jtc3kudmFsaWRhdGUodGhpcyk7XG4gICAgICAvL3RoaXMucHJvcHMuX3ZhbGlkYXRlKHRoaXMpO1xuICAgIH0pO1xuICB9LFxuICBnZXRWYWx1ZTogZnVuY3Rpb24gZ2V0VmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX3ZhbHVlO1xuICB9LFxuICBoYXNWYWx1ZTogZnVuY3Rpb24gaGFzVmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX3ZhbHVlICE9PSAnJztcbiAgfSxcbiAgZ2V0RXJyb3JNZXNzYWdlOiBmdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2UoKSB7XG4gICAgdmFyIG1lc3NhZ2VzID0gdGhpcy5nZXRFcnJvck1lc3NhZ2VzKCk7XG4gICAgcmV0dXJuIG1lc3NhZ2VzLmxlbmd0aCA/IG1lc3NhZ2VzWzBdIDogbnVsbDtcbiAgfSxcbiAgZ2V0RXJyb3JNZXNzYWdlczogZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlcygpIHtcbiAgICByZXR1cm4gIXRoaXMuaXNWYWxpZCgpIHx8IHRoaXMuc2hvd1JlcXVpcmVkKCkgPyB0aGlzLnN0YXRlLl9leHRlcm5hbEVycm9yIHx8IHRoaXMuc3RhdGUuX3ZhbGlkYXRpb25FcnJvciB8fCBbXSA6IFtdO1xuICB9LFxuICBpc0Zvcm1EaXNhYmxlZDogZnVuY3Rpb24gaXNGb3JtRGlzYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGV4dC5mb3Jtc3kuaXNGb3JtRGlzYWJsZWQoKTtcbiAgICAvL3JldHVybiB0aGlzLnByb3BzLl9pc0Zvcm1EaXNhYmxlZCgpO1xuICB9LFxuICBpc1ZhbGlkOiBmdW5jdGlvbiBpc1ZhbGlkKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLl9pc1ZhbGlkO1xuICB9LFxuICBpc1ByaXN0aW5lOiBmdW5jdGlvbiBpc1ByaXN0aW5lKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLl9pc1ByaXN0aW5lO1xuICB9LFxuICBpc0Zvcm1TdWJtaXR0ZWQ6IGZ1bmN0aW9uIGlzRm9ybVN1Ym1pdHRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5fZm9ybVN1Ym1pdHRlZDtcbiAgfSxcbiAgaXNSZXF1aXJlZDogZnVuY3Rpb24gaXNSZXF1aXJlZCgpIHtcbiAgICByZXR1cm4gISF0aGlzLnByb3BzLnJlcXVpcmVkO1xuICB9LFxuICBzaG93UmVxdWlyZWQ6IGZ1bmN0aW9uIHNob3dSZXF1aXJlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5faXNSZXF1aXJlZDtcbiAgfSxcbiAgc2hvd0Vycm9yOiBmdW5jdGlvbiBzaG93RXJyb3IoKSB7XG4gICAgcmV0dXJuICF0aGlzLnNob3dSZXF1aXJlZCgpICYmICF0aGlzLmlzVmFsaWQoKTtcbiAgfSxcbiAgaXNWYWxpZFZhbHVlOiBmdW5jdGlvbiBpc1ZhbGlkVmFsdWUodmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZXh0LmZvcm1zeS5pc1ZhbGlkVmFsdWUuY2FsbChudWxsLCB0aGlzLCB2YWx1ZSk7XG4gICAgLy9yZXR1cm4gdGhpcy5wcm9wcy5faXNWYWxpZFZhbHVlLmNhbGwobnVsbCwgdGhpcywgdmFsdWUpO1xuICB9XG59O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vZm9ybXN5LXJlYWN0L2xpYi9NaXhpbi5qcyIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMob2JqLCBrZXlzKSB7IHZhciB0YXJnZXQgPSB7fTsgZm9yICh2YXIgaSBpbiBvYmopIHsgaWYgKGtleXMuaW5kZXhPZihpKSA+PSAwKSBjb250aW51ZTsgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBpKSkgY29udGludWU7IHRhcmdldFtpXSA9IG9ialtpXTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbnZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG52YXIgUmVhY3QgPSBnbG9iYWwuUmVhY3QgfHwgcmVxdWlyZSgncmVhY3QnKTtcbnZhciBjcmVhdGVSZWFjdENsYXNzID0gcmVxdWlyZSgnY3JlYXRlLXJlYWN0LWNsYXNzJyk7XG52YXIgRm9ybXN5ID0ge307XG52YXIgdmFsaWRhdGlvblJ1bGVzID0gcmVxdWlyZSgnLi92YWxpZGF0aW9uUnVsZXMuanMnKTtcbnZhciBmb3JtRGF0YVRvT2JqZWN0ID0gcmVxdWlyZSgnZm9ybS1kYXRhLXRvLW9iamVjdCcpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscy5qcycpO1xudmFyIE1peGluID0gcmVxdWlyZSgnLi9NaXhpbi5qcycpO1xudmFyIEhPQyA9IHJlcXVpcmUoJy4vSE9DLmpzJyk7XG52YXIgRGVjb3JhdG9yID0gcmVxdWlyZSgnLi9EZWNvcmF0b3IuanMnKTtcbnZhciBvcHRpb25zID0ge307XG52YXIgZW1wdHlBcnJheSA9IFtdO1xuXG5Gb3Jtc3kuTWl4aW4gPSBNaXhpbjtcbkZvcm1zeS5IT0MgPSBIT0M7XG5Gb3Jtc3kuRGVjb3JhdG9yID0gRGVjb3JhdG9yO1xuXG5Gb3Jtc3kuZGVmYXVsdHMgPSBmdW5jdGlvbiAocGFzc2VkT3B0aW9ucykge1xuICBvcHRpb25zID0gcGFzc2VkT3B0aW9ucztcbn07XG5cbkZvcm1zeS5hZGRWYWxpZGF0aW9uUnVsZSA9IGZ1bmN0aW9uIChuYW1lLCBmdW5jKSB7XG4gIHZhbGlkYXRpb25SdWxlc1tuYW1lXSA9IGZ1bmM7XG59O1xuXG5Gb3Jtc3kuRm9ybSA9IGNyZWF0ZVJlYWN0Q2xhc3Moe1xuICBkaXNwbGF5TmFtZTogJ0Zvcm1zeScsXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpc1ZhbGlkOiB0cnVlLFxuICAgICAgaXNTdWJtaXR0aW5nOiBmYWxzZSxcbiAgICAgIGNhbkNoYW5nZTogZmFsc2VcbiAgICB9O1xuICB9LFxuICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgb25TdWNjZXNzOiBmdW5jdGlvbiBvblN1Y2Nlc3MoKSB7fSxcbiAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uIG9uRXJyb3IoKSB7fSxcbiAgICAgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdCgpIHt9LFxuICAgICAgb25WYWxpZFN1Ym1pdDogZnVuY3Rpb24gb25WYWxpZFN1Ym1pdCgpIHt9LFxuICAgICAgb25JbnZhbGlkU3VibWl0OiBmdW5jdGlvbiBvbkludmFsaWRTdWJtaXQoKSB7fSxcbiAgICAgIG9uVmFsaWQ6IGZ1bmN0aW9uIG9uVmFsaWQoKSB7fSxcbiAgICAgIG9uSW52YWxpZDogZnVuY3Rpb24gb25JbnZhbGlkKCkge30sXG4gICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoKSB7fSxcbiAgICAgIHZhbGlkYXRpb25FcnJvcnM6IG51bGwsXG4gICAgICBwcmV2ZW50RXh0ZXJuYWxJbnZhbGlkYXRpb246IGZhbHNlXG4gICAgfTtcbiAgfSxcblxuICBjaGlsZENvbnRleHRUeXBlczoge1xuICAgIGZvcm1zeTogUHJvcFR5cGVzLm9iamVjdFxuICB9LFxuICBnZXRDaGlsZENvbnRleHQ6IGZ1bmN0aW9uIGdldENoaWxkQ29udGV4dCgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGZvcm1zeToge1xuICAgICAgICBhdHRhY2hUb0Zvcm06IHRoaXMuYXR0YWNoVG9Gb3JtLFxuICAgICAgICBkZXRhY2hGcm9tRm9ybTogdGhpcy5kZXRhY2hGcm9tRm9ybSxcbiAgICAgICAgdmFsaWRhdGU6IHRoaXMudmFsaWRhdGUsXG4gICAgICAgIGlzRm9ybURpc2FibGVkOiB0aGlzLmlzRm9ybURpc2FibGVkLFxuICAgICAgICBpc1ZhbGlkVmFsdWU6IGZ1bmN0aW9uIGlzVmFsaWRWYWx1ZShjb21wb25lbnQsIHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLnJ1blZhbGlkYXRpb24oY29tcG9uZW50LCB2YWx1ZSkuaXNWYWxpZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH0sXG5cbiAgLy8gQWRkIGEgbWFwIHRvIHN0b3JlIHRoZSBpbnB1dHMgb2YgdGhlIGZvcm0sIGEgbW9kZWwgdG8gc3RvcmVcbiAgLy8gdGhlIHZhbHVlcyBvZiB0aGUgZm9ybSBhbmQgcmVnaXN0ZXIgY2hpbGQgaW5wdXRzXG4gIGNvbXBvbmVudFdpbGxNb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIHRoaXMuaW5wdXRzID0gW107XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMudmFsaWRhdGVGb3JtKCk7XG4gIH0sXG5cbiAgY29tcG9uZW50V2lsbFVwZGF0ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVwZGF0ZSgpIHtcbiAgICAvLyBLZWVwIGEgcmVmZXJlbmNlIHRvIGlucHV0IG5hbWVzIGJlZm9yZSBmb3JtIHVwZGF0ZXMsXG4gICAgLy8gdG8gY2hlY2sgaWYgaW5wdXRzIGhhcyBjaGFuZ2VkIGFmdGVyIHJlbmRlclxuICAgIHRoaXMucHJldklucHV0TmFtZXMgPSB0aGlzLmlucHV0cy5tYXAoZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgcmV0dXJuIGNvbXBvbmVudC5wcm9wcy5uYW1lO1xuICAgIH0pO1xuICB9LFxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKCkge1xuXG4gICAgaWYgKHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9ycyAmJiBfdHlwZW9mKHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9ycykgPT09ICdvYmplY3QnICYmIE9iamVjdC5rZXlzKHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9ycykubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5zZXRJbnB1dFZhbGlkYXRpb25FcnJvcnModGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzKTtcbiAgICB9XG5cbiAgICB2YXIgbmV3SW5wdXROYW1lcyA9IHRoaXMuaW5wdXRzLm1hcChmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICByZXR1cm4gY29tcG9uZW50LnByb3BzLm5hbWU7XG4gICAgfSk7XG4gICAgaWYgKHV0aWxzLmFycmF5c0RpZmZlcih0aGlzLnByZXZJbnB1dE5hbWVzLCBuZXdJbnB1dE5hbWVzKSkge1xuICAgICAgdGhpcy52YWxpZGF0ZUZvcm0oKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gQWxsb3cgcmVzZXR0aW5nIHRvIHNwZWNpZmllZCBkYXRhXG4gIHJlc2V0OiBmdW5jdGlvbiByZXNldChkYXRhKSB7XG4gICAgdGhpcy5zZXRGb3JtUHJpc3RpbmUodHJ1ZSk7XG4gICAgdGhpcy5yZXNldE1vZGVsKGRhdGEpO1xuICB9LFxuXG4gIC8vIFVwZGF0ZSBtb2RlbCwgc3VibWl0IHRvIHVybCBwcm9wIGFuZCBzZW5kIHRoZSBtb2RlbFxuICBzdWJtaXQ6IGZ1bmN0aW9uIHN1Ym1pdChldmVudCkge1xuXG4gICAgZXZlbnQgJiYgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIC8vIFRyaWdnZXIgZm9ybSBhcyBub3QgcHJpc3RpbmUuXG4gICAgLy8gSWYgYW55IGlucHV0cyBoYXZlIG5vdCBiZWVuIHRvdWNoZWQgeWV0IHRoaXMgd2lsbCBtYWtlIHRoZW0gZGlydHlcbiAgICAvLyBzbyB2YWxpZGF0aW9uIGJlY29tZXMgdmlzaWJsZSAoaWYgYmFzZWQgb24gaXNQcmlzdGluZSlcbiAgICB0aGlzLnNldEZvcm1QcmlzdGluZShmYWxzZSk7XG4gICAgdmFyIG1vZGVsID0gdGhpcy5nZXRNb2RlbCgpO1xuICAgIHRoaXMucHJvcHMub25TdWJtaXQobW9kZWwsIHRoaXMucmVzZXRNb2RlbCwgdGhpcy51cGRhdGVJbnB1dHNXaXRoRXJyb3IpO1xuICAgIHRoaXMuc3RhdGUuaXNWYWxpZCA/IHRoaXMucHJvcHMub25WYWxpZFN1Ym1pdChtb2RlbCwgdGhpcy5yZXNldE1vZGVsLCB0aGlzLnVwZGF0ZUlucHV0c1dpdGhFcnJvcikgOiB0aGlzLnByb3BzLm9uSW52YWxpZFN1Ym1pdChtb2RlbCwgdGhpcy5yZXNldE1vZGVsLCB0aGlzLnVwZGF0ZUlucHV0c1dpdGhFcnJvcik7XG4gIH0sXG5cbiAgbWFwTW9kZWw6IGZ1bmN0aW9uIG1hcE1vZGVsKG1vZGVsKSB7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5tYXBwaW5nKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5tYXBwaW5nKG1vZGVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZvcm1EYXRhVG9PYmplY3QudG9PYmooT2JqZWN0LmtleXMobW9kZWwpLnJlZHVjZShmdW5jdGlvbiAobWFwcGVkTW9kZWwsIGtleSkge1xuXG4gICAgICAgIHZhciBrZXlBcnJheSA9IGtleS5zcGxpdCgnLicpO1xuICAgICAgICB2YXIgYmFzZSA9IG1hcHBlZE1vZGVsO1xuICAgICAgICB3aGlsZSAoa2V5QXJyYXkubGVuZ3RoKSB7XG4gICAgICAgICAgdmFyIGN1cnJlbnRLZXkgPSBrZXlBcnJheS5zaGlmdCgpO1xuICAgICAgICAgIGJhc2UgPSBiYXNlW2N1cnJlbnRLZXldID0ga2V5QXJyYXkubGVuZ3RoID8gYmFzZVtjdXJyZW50S2V5XSB8fCB7fSA6IG1vZGVsW2tleV07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWFwcGVkTW9kZWw7XG4gICAgICB9LCB7fSkpO1xuICAgIH1cbiAgfSxcblxuICBnZXRNb2RlbDogZnVuY3Rpb24gZ2V0TW9kZWwoKSB7XG4gICAgdmFyIGN1cnJlbnRWYWx1ZXMgPSB0aGlzLmdldEN1cnJlbnRWYWx1ZXMoKTtcbiAgICByZXR1cm4gdGhpcy5tYXBNb2RlbChjdXJyZW50VmFsdWVzKTtcbiAgfSxcblxuICAvLyBSZXNldCBlYWNoIGtleSBpbiB0aGUgbW9kZWwgdG8gdGhlIG9yaWdpbmFsIC8gaW5pdGlhbCAvIHNwZWNpZmllZCB2YWx1ZVxuICByZXNldE1vZGVsOiBmdW5jdGlvbiByZXNldE1vZGVsKGRhdGEpIHtcbiAgICB0aGlzLmlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgIHZhciBuYW1lID0gY29tcG9uZW50LnByb3BzLm5hbWU7XG4gICAgICBpZiAoZGF0YSAmJiBkYXRhLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIGNvbXBvbmVudC5zZXRWYWx1ZShkYXRhW25hbWVdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbXBvbmVudC5yZXNldFZhbHVlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy52YWxpZGF0ZUZvcm0oKTtcbiAgfSxcblxuICBzZXRJbnB1dFZhbGlkYXRpb25FcnJvcnM6IGZ1bmN0aW9uIHNldElucHV0VmFsaWRhdGlvbkVycm9ycyhlcnJvcnMpIHtcbiAgICB0aGlzLmlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgIHZhciBuYW1lID0gY29tcG9uZW50LnByb3BzLm5hbWU7XG4gICAgICB2YXIgYXJncyA9IFt7XG4gICAgICAgIF9pc1ZhbGlkOiAhKG5hbWUgaW4gZXJyb3JzKSxcbiAgICAgICAgX3ZhbGlkYXRpb25FcnJvcjogdHlwZW9mIGVycm9yc1tuYW1lXSA9PT0gJ3N0cmluZycgPyBbZXJyb3JzW25hbWVdXSA6IGVycm9yc1tuYW1lXVxuICAgICAgfV07XG4gICAgICBjb21wb25lbnQuc2V0U3RhdGUuYXBwbHkoY29tcG9uZW50LCBhcmdzKTtcbiAgICB9KTtcbiAgfSxcblxuICAvLyBDaGVja3MgaWYgdGhlIHZhbHVlcyBoYXZlIGNoYW5nZWQgZnJvbSB0aGVpciBpbml0aWFsIHZhbHVlXG4gIGlzQ2hhbmdlZDogZnVuY3Rpb24gaXNDaGFuZ2VkKCkge1xuICAgIHJldHVybiAhdXRpbHMuaXNTYW1lKHRoaXMuZ2V0UHJpc3RpbmVWYWx1ZXMoKSwgdGhpcy5nZXRDdXJyZW50VmFsdWVzKCkpO1xuICB9LFxuXG4gIGdldFByaXN0aW5lVmFsdWVzOiBmdW5jdGlvbiBnZXRQcmlzdGluZVZhbHVlcygpIHtcbiAgICByZXR1cm4gdGhpcy5pbnB1dHMucmVkdWNlKGZ1bmN0aW9uIChkYXRhLCBjb21wb25lbnQpIHtcbiAgICAgIHZhciBuYW1lID0gY29tcG9uZW50LnByb3BzLm5hbWU7XG4gICAgICBkYXRhW25hbWVdID0gY29tcG9uZW50LnByb3BzLnZhbHVlO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSwge30pO1xuICB9LFxuXG4gIC8vIEdvIHRocm91Z2ggZXJyb3JzIGZyb20gc2VydmVyIGFuZCBncmFiIHRoZSBjb21wb25lbnRzXG4gIC8vIHN0b3JlZCBpbiB0aGUgaW5wdXRzIG1hcC4gQ2hhbmdlIHRoZWlyIHN0YXRlIHRvIGludmFsaWRcbiAgLy8gYW5kIHNldCB0aGUgc2VydmVyRXJyb3IgbWVzc2FnZVxuICB1cGRhdGVJbnB1dHNXaXRoRXJyb3I6IGZ1bmN0aW9uIHVwZGF0ZUlucHV0c1dpdGhFcnJvcihlcnJvcnMpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIE9iamVjdC5rZXlzKGVycm9ycykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSwgaW5kZXgpIHtcbiAgICAgIHZhciBjb21wb25lbnQgPSB1dGlscy5maW5kKF90aGlzMi5pbnB1dHMsIGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudC5wcm9wcy5uYW1lID09PSBuYW1lO1xuICAgICAgfSk7XG4gICAgICBpZiAoIWNvbXBvbmVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBhcmUgdHJ5aW5nIHRvIHVwZGF0ZSBhbiBpbnB1dCB0aGF0IGRvZXMgbm90IGV4aXN0LiAnICsgJ1ZlcmlmeSBlcnJvcnMgb2JqZWN0IHdpdGggaW5wdXQgbmFtZXMuICcgKyBKU09OLnN0cmluZ2lmeShlcnJvcnMpKTtcbiAgICAgIH1cbiAgICAgIHZhciBhcmdzID0gW3tcbiAgICAgICAgX2lzVmFsaWQ6IF90aGlzMi5wcm9wcy5wcmV2ZW50RXh0ZXJuYWxJbnZhbGlkYXRpb24gfHwgZmFsc2UsXG4gICAgICAgIF9leHRlcm5hbEVycm9yOiB0eXBlb2YgZXJyb3JzW25hbWVdID09PSAnc3RyaW5nJyA/IFtlcnJvcnNbbmFtZV1dIDogZXJyb3JzW25hbWVdXG4gICAgICB9XTtcbiAgICAgIGNvbXBvbmVudC5zZXRTdGF0ZS5hcHBseShjb21wb25lbnQsIGFyZ3MpO1xuICAgIH0pO1xuICB9LFxuXG4gIGlzRm9ybURpc2FibGVkOiBmdW5jdGlvbiBpc0Zvcm1EaXNhYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5kaXNhYmxlZDtcbiAgfSxcblxuICBnZXRDdXJyZW50VmFsdWVzOiBmdW5jdGlvbiBnZXRDdXJyZW50VmFsdWVzKCkge1xuICAgIHJldHVybiB0aGlzLmlucHV0cy5yZWR1Y2UoZnVuY3Rpb24gKGRhdGEsIGNvbXBvbmVudCkge1xuICAgICAgdmFyIG5hbWUgPSBjb21wb25lbnQucHJvcHMubmFtZTtcbiAgICAgIGRhdGFbbmFtZV0gPSBjb21wb25lbnQuc3RhdGUuX3ZhbHVlO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSwge30pO1xuICB9LFxuXG4gIHNldEZvcm1QcmlzdGluZTogZnVuY3Rpb24gc2V0Rm9ybVByaXN0aW5lKGlzUHJpc3RpbmUpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIF9mb3JtU3VibWl0dGVkOiAhaXNQcmlzdGluZVxuICAgIH0pO1xuXG4gICAgLy8gSXRlcmF0ZSB0aHJvdWdoIGVhY2ggY29tcG9uZW50IGFuZCBzZXQgaXQgYXMgcHJpc3RpbmVcbiAgICAvLyBvciBcImRpcnR5XCIuXG4gICAgdGhpcy5pbnB1dHMuZm9yRWFjaChmdW5jdGlvbiAoY29tcG9uZW50LCBpbmRleCkge1xuICAgICAgY29tcG9uZW50LnNldFN0YXRlKHtcbiAgICAgICAgX2Zvcm1TdWJtaXR0ZWQ6ICFpc1ByaXN0aW5lLFxuICAgICAgICBfaXNQcmlzdGluZTogaXNQcmlzdGluZVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLy8gVXNlIHRoZSBiaW5kZWQgdmFsdWVzIGFuZCB0aGUgYWN0dWFsIGlucHV0IHZhbHVlIHRvXG4gIC8vIHZhbGlkYXRlIHRoZSBpbnB1dCBhbmQgc2V0IGl0cyBzdGF0ZS4gVGhlbiBjaGVjayB0aGVcbiAgLy8gc3RhdGUgb2YgdGhlIGZvcm0gaXRzZWxmXG4gIHZhbGlkYXRlOiBmdW5jdGlvbiB2YWxpZGF0ZShjb21wb25lbnQpIHtcblxuICAgIC8vIFRyaWdnZXIgb25DaGFuZ2VcbiAgICBpZiAodGhpcy5zdGF0ZS5jYW5DaGFuZ2UpIHtcbiAgICAgIHRoaXMucHJvcHMub25DaGFuZ2UodGhpcy5nZXRDdXJyZW50VmFsdWVzKCksIHRoaXMuaXNDaGFuZ2VkKCkpO1xuICAgIH1cblxuICAgIHZhciB2YWxpZGF0aW9uID0gdGhpcy5ydW5WYWxpZGF0aW9uKGNvbXBvbmVudCk7XG4gICAgLy8gUnVuIHRocm91Z2ggdGhlIHZhbGlkYXRpb25zLCBzcGxpdCB0aGVtIHVwIGFuZCBjYWxsXG4gICAgLy8gdGhlIHZhbGlkYXRvciBJRiB0aGVyZSBpcyBhIHZhbHVlIG9yIGl0IGlzIHJlcXVpcmVkXG4gICAgY29tcG9uZW50LnNldFN0YXRlKHtcbiAgICAgIF9pc1ZhbGlkOiB2YWxpZGF0aW9uLmlzVmFsaWQsXG4gICAgICBfaXNSZXF1aXJlZDogdmFsaWRhdGlvbi5pc1JlcXVpcmVkLFxuICAgICAgX3ZhbGlkYXRpb25FcnJvcjogdmFsaWRhdGlvbi5lcnJvcixcbiAgICAgIF9leHRlcm5hbEVycm9yOiBudWxsXG4gICAgfSwgdGhpcy52YWxpZGF0ZUZvcm0pO1xuICB9LFxuXG4gIC8vIENoZWNrcyB2YWxpZGF0aW9uIG9uIGN1cnJlbnQgdmFsdWUgb3IgYSBwYXNzZWQgdmFsdWVcbiAgcnVuVmFsaWRhdGlvbjogZnVuY3Rpb24gcnVuVmFsaWRhdGlvbihjb21wb25lbnQsIHZhbHVlKSB7XG5cbiAgICB2YXIgY3VycmVudFZhbHVlcyA9IHRoaXMuZ2V0Q3VycmVudFZhbHVlcygpO1xuICAgIHZhciB2YWxpZGF0aW9uRXJyb3JzID0gY29tcG9uZW50LnByb3BzLnZhbGlkYXRpb25FcnJvcnM7XG4gICAgdmFyIHZhbGlkYXRpb25FcnJvciA9IGNvbXBvbmVudC5wcm9wcy52YWxpZGF0aW9uRXJyb3I7XG4gICAgdmFsdWUgPSBhcmd1bWVudHMubGVuZ3RoID09PSAyID8gdmFsdWUgOiBjb21wb25lbnQuc3RhdGUuX3ZhbHVlO1xuXG4gICAgdmFyIHZhbGlkYXRpb25SZXN1bHRzID0gdGhpcy5ydW5SdWxlcyh2YWx1ZSwgY3VycmVudFZhbHVlcywgY29tcG9uZW50Ll92YWxpZGF0aW9ucyk7XG4gICAgdmFyIHJlcXVpcmVkUmVzdWx0cyA9IHRoaXMucnVuUnVsZXModmFsdWUsIGN1cnJlbnRWYWx1ZXMsIGNvbXBvbmVudC5fcmVxdWlyZWRWYWxpZGF0aW9ucyk7XG5cbiAgICAvLyB0aGUgY29tcG9uZW50IGRlZmluZXMgYW4gZXhwbGljaXQgdmFsaWRhdGUgZnVuY3Rpb25cbiAgICBpZiAodHlwZW9mIGNvbXBvbmVudC52YWxpZGF0ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB2YWxpZGF0aW9uUmVzdWx0cy5mYWlsZWQgPSBjb21wb25lbnQudmFsaWRhdGUoKSA/IFtdIDogWydmYWlsZWQnXTtcbiAgICB9XG5cbiAgICB2YXIgaXNSZXF1aXJlZCA9IE9iamVjdC5rZXlzKGNvbXBvbmVudC5fcmVxdWlyZWRWYWxpZGF0aW9ucykubGVuZ3RoID8gISFyZXF1aXJlZFJlc3VsdHMuc3VjY2Vzcy5sZW5ndGggOiBmYWxzZTtcbiAgICB2YXIgaXNWYWxpZCA9ICF2YWxpZGF0aW9uUmVzdWx0cy5mYWlsZWQubGVuZ3RoICYmICEodGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzICYmIHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9yc1tjb21wb25lbnQucHJvcHMubmFtZV0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzUmVxdWlyZWQ6IGlzUmVxdWlyZWQsXG4gICAgICBpc1ZhbGlkOiBpc1JlcXVpcmVkID8gZmFsc2UgOiBpc1ZhbGlkLFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBpZiAoaXNWYWxpZCAmJiAhaXNSZXF1aXJlZCkge1xuICAgICAgICAgIHJldHVybiBlbXB0eUFycmF5O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhbGlkYXRpb25SZXN1bHRzLmVycm9ycy5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gdmFsaWRhdGlvblJlc3VsdHMuZXJyb3JzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9ycyAmJiB0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnNbY29tcG9uZW50LnByb3BzLm5hbWVdKSB7XG4gICAgICAgICAgcmV0dXJuIHR5cGVvZiB0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnNbY29tcG9uZW50LnByb3BzLm5hbWVdID09PSAnc3RyaW5nJyA/IFt0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnNbY29tcG9uZW50LnByb3BzLm5hbWVdXSA6IHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9yc1tjb21wb25lbnQucHJvcHMubmFtZV07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNSZXF1aXJlZCkge1xuICAgICAgICAgIHZhciBlcnJvciA9IHZhbGlkYXRpb25FcnJvcnNbcmVxdWlyZWRSZXN1bHRzLnN1Y2Nlc3NbMF1dO1xuICAgICAgICAgIHJldHVybiBlcnJvciA/IFtlcnJvcl0gOiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhbGlkYXRpb25SZXN1bHRzLmZhaWxlZC5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gdmFsaWRhdGlvblJlc3VsdHMuZmFpbGVkLm1hcChmdW5jdGlvbiAoZmFpbGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsaWRhdGlvbkVycm9yc1tmYWlsZWRdID8gdmFsaWRhdGlvbkVycm9yc1tmYWlsZWRdIDogdmFsaWRhdGlvbkVycm9yO1xuICAgICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoeCwgcG9zLCBhcnIpIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSBkdXBsaWNhdGVzXG4gICAgICAgICAgICByZXR1cm4gYXJyLmluZGV4T2YoeCkgPT09IHBvcztcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfS5jYWxsKHRoaXMpXG4gICAgfTtcbiAgfSxcblxuICBydW5SdWxlczogZnVuY3Rpb24gcnVuUnVsZXModmFsdWUsIGN1cnJlbnRWYWx1ZXMsIHZhbGlkYXRpb25zKSB7XG5cbiAgICB2YXIgcmVzdWx0cyA9IHtcbiAgICAgIGVycm9yczogW10sXG4gICAgICBmYWlsZWQ6IFtdLFxuICAgICAgc3VjY2VzczogW11cbiAgICB9O1xuICAgIGlmIChPYmplY3Qua2V5cyh2YWxpZGF0aW9ucykubGVuZ3RoKSB7XG4gICAgICBPYmplY3Qua2V5cyh2YWxpZGF0aW9ucykuZm9yRWFjaChmdW5jdGlvbiAodmFsaWRhdGlvbk1ldGhvZCkge1xuXG4gICAgICAgIGlmICh2YWxpZGF0aW9uUnVsZXNbdmFsaWRhdGlvbk1ldGhvZF0gJiYgdHlwZW9mIHZhbGlkYXRpb25zW3ZhbGlkYXRpb25NZXRob2RdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3Jtc3kgZG9lcyBub3QgYWxsb3cgeW91IHRvIG92ZXJyaWRlIGRlZmF1bHQgdmFsaWRhdGlvbnM6ICcgKyB2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdmFsaWRhdGlvblJ1bGVzW3ZhbGlkYXRpb25NZXRob2RdICYmIHR5cGVvZiB2YWxpZGF0aW9uc1t2YWxpZGF0aW9uTWV0aG9kXSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRm9ybXN5IGRvZXMgbm90IGhhdmUgdGhlIHZhbGlkYXRpb24gcnVsZTogJyArIHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiB2YWxpZGF0aW9uc1t2YWxpZGF0aW9uTWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHZhciB2YWxpZGF0aW9uID0gdmFsaWRhdGlvbnNbdmFsaWRhdGlvbk1ldGhvZF0oY3VycmVudFZhbHVlcywgdmFsdWUpO1xuICAgICAgICAgIGlmICh0eXBlb2YgdmFsaWRhdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJlc3VsdHMuZXJyb3JzLnB1c2godmFsaWRhdGlvbik7XG4gICAgICAgICAgICByZXN1bHRzLmZhaWxlZC5wdXNoKHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIXZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgIHJlc3VsdHMuZmFpbGVkLnB1c2godmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsaWRhdGlvbnNbdmFsaWRhdGlvbk1ldGhvZF0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB2YXIgdmFsaWRhdGlvbiA9IHZhbGlkYXRpb25SdWxlc1t2YWxpZGF0aW9uTWV0aG9kXShjdXJyZW50VmFsdWVzLCB2YWx1ZSwgdmFsaWRhdGlvbnNbdmFsaWRhdGlvbk1ldGhvZF0pO1xuICAgICAgICAgIGlmICh0eXBlb2YgdmFsaWRhdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJlc3VsdHMuZXJyb3JzLnB1c2godmFsaWRhdGlvbik7XG4gICAgICAgICAgICByZXN1bHRzLmZhaWxlZC5wdXNoKHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIXZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgIHJlc3VsdHMuZmFpbGVkLnB1c2godmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdHMuc3VjY2Vzcy5wdXNoKHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0cy5zdWNjZXNzLnB1c2godmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfSxcblxuICAvLyBWYWxpZGF0ZSB0aGUgZm9ybSBieSBnb2luZyB0aHJvdWdoIGFsbCBjaGlsZCBpbnB1dCBjb21wb25lbnRzXG4gIC8vIGFuZCBjaGVjayB0aGVpciBzdGF0ZVxuICB2YWxpZGF0ZUZvcm06IGZ1bmN0aW9uIHZhbGlkYXRlRm9ybSgpIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIC8vIFdlIG5lZWQgYSBjYWxsYmFjayBhcyB3ZSBhcmUgdmFsaWRhdGluZyBhbGwgaW5wdXRzIGFnYWluLiBUaGlzIHdpbGxcbiAgICAvLyBydW4gd2hlbiB0aGUgbGFzdCBjb21wb25lbnQgaGFzIHNldCBpdHMgc3RhdGVcbiAgICB2YXIgb25WYWxpZGF0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYWxsSXNWYWxpZCA9IHRoaXMuaW5wdXRzLmV2ZXJ5KGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudC5zdGF0ZS5faXNWYWxpZDtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgaXNWYWxpZDogYWxsSXNWYWxpZFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChhbGxJc1ZhbGlkKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25WYWxpZCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vbkludmFsaWQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gVGVsbCB0aGUgZm9ybSB0aGF0IGl0IGNhbiBzdGFydCB0byB0cmlnZ2VyIGNoYW5nZSBldmVudHNcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBjYW5DaGFuZ2U6IHRydWVcbiAgICAgIH0pO1xuICAgIH0uYmluZCh0aGlzKTtcblxuICAgIC8vIFJ1biB2YWxpZGF0aW9uIGFnYWluIGluIGNhc2UgYWZmZWN0ZWQgYnkgb3RoZXIgaW5wdXRzLiBUaGVcbiAgICAvLyBsYXN0IGNvbXBvbmVudCB2YWxpZGF0ZWQgd2lsbCBydW4gdGhlIG9uVmFsaWRhdGlvbkNvbXBsZXRlIGNhbGxiYWNrXG4gICAgdGhpcy5pbnB1dHMuZm9yRWFjaChmdW5jdGlvbiAoY29tcG9uZW50LCBpbmRleCkge1xuICAgICAgdmFyIHZhbGlkYXRpb24gPSBfdGhpczMucnVuVmFsaWRhdGlvbihjb21wb25lbnQpO1xuICAgICAgaWYgKHZhbGlkYXRpb24uaXNWYWxpZCAmJiBjb21wb25lbnQuc3RhdGUuX2V4dGVybmFsRXJyb3IpIHtcbiAgICAgICAgdmFsaWRhdGlvbi5pc1ZhbGlkID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBjb21wb25lbnQuc2V0U3RhdGUoe1xuICAgICAgICBfaXNWYWxpZDogdmFsaWRhdGlvbi5pc1ZhbGlkLFxuICAgICAgICBfaXNSZXF1aXJlZDogdmFsaWRhdGlvbi5pc1JlcXVpcmVkLFxuICAgICAgICBfdmFsaWRhdGlvbkVycm9yOiB2YWxpZGF0aW9uLmVycm9yLFxuICAgICAgICBfZXh0ZXJuYWxFcnJvcjogIXZhbGlkYXRpb24uaXNWYWxpZCAmJiBjb21wb25lbnQuc3RhdGUuX2V4dGVybmFsRXJyb3IgPyBjb21wb25lbnQuc3RhdGUuX2V4dGVybmFsRXJyb3IgOiBudWxsXG4gICAgICB9LCBpbmRleCA9PT0gX3RoaXMzLmlucHV0cy5sZW5ndGggLSAxID8gb25WYWxpZGF0aW9uQ29tcGxldGUgOiBudWxsKTtcbiAgICB9KTtcblxuICAgIC8vIElmIHRoZXJlIGFyZSBubyBpbnB1dHMsIHNldCBzdGF0ZSB3aGVyZSBmb3JtIGlzIHJlYWR5IHRvIHRyaWdnZXJcbiAgICAvLyBjaGFuZ2UgZXZlbnQuIE5ldyBpbnB1dHMgbWlnaHQgYmUgYWRkZWQgbGF0ZXJcbiAgICBpZiAoIXRoaXMuaW5wdXRzLmxlbmd0aCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGNhbkNoYW5nZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIC8vIE1ldGhvZCBwdXQgb24gZWFjaCBpbnB1dCBjb21wb25lbnQgdG8gcmVnaXN0ZXJcbiAgLy8gaXRzZWxmIHRvIHRoZSBmb3JtXG4gIGF0dGFjaFRvRm9ybTogZnVuY3Rpb24gYXR0YWNoVG9Gb3JtKGNvbXBvbmVudCkge1xuXG4gICAgaWYgKHRoaXMuaW5wdXRzLmluZGV4T2YoY29tcG9uZW50KSA9PT0gLTEpIHtcbiAgICAgIHRoaXMuaW5wdXRzLnB1c2goY29tcG9uZW50KTtcbiAgICB9XG5cbiAgICB0aGlzLnZhbGlkYXRlKGNvbXBvbmVudCk7XG4gIH0sXG5cbiAgLy8gTWV0aG9kIHB1dCBvbiBlYWNoIGlucHV0IGNvbXBvbmVudCB0byB1bnJlZ2lzdGVyXG4gIC8vIGl0c2VsZiBmcm9tIHRoZSBmb3JtXG4gIGRldGFjaEZyb21Gb3JtOiBmdW5jdGlvbiBkZXRhY2hGcm9tRm9ybShjb21wb25lbnQpIHtcbiAgICB2YXIgY29tcG9uZW50UG9zID0gdGhpcy5pbnB1dHMuaW5kZXhPZihjb21wb25lbnQpO1xuXG4gICAgaWYgKGNvbXBvbmVudFBvcyAhPT0gLTEpIHtcbiAgICAgIHRoaXMuaW5wdXRzID0gdGhpcy5pbnB1dHMuc2xpY2UoMCwgY29tcG9uZW50UG9zKS5jb25jYXQodGhpcy5pbnB1dHMuc2xpY2UoY29tcG9uZW50UG9zICsgMSkpO1xuICAgIH1cblxuICAgIHRoaXMudmFsaWRhdGVGb3JtKCk7XG4gIH0sXG4gIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICBtYXBwaW5nID0gX3Byb3BzLm1hcHBpbmcsXG4gICAgICAgIHZhbGlkYXRpb25FcnJvcnMgPSBfcHJvcHMudmFsaWRhdGlvbkVycm9ycyxcbiAgICAgICAgb25TdWJtaXQgPSBfcHJvcHMub25TdWJtaXQsXG4gICAgICAgIG9uVmFsaWQgPSBfcHJvcHMub25WYWxpZCxcbiAgICAgICAgb25WYWxpZFN1Ym1pdCA9IF9wcm9wcy5vblZhbGlkU3VibWl0LFxuICAgICAgICBvbkludmFsaWQgPSBfcHJvcHMub25JbnZhbGlkLFxuICAgICAgICBvbkludmFsaWRTdWJtaXQgPSBfcHJvcHMub25JbnZhbGlkU3VibWl0LFxuICAgICAgICBvbkNoYW5nZSA9IF9wcm9wcy5vbkNoYW5nZSxcbiAgICAgICAgcmVzZXQgPSBfcHJvcHMucmVzZXQsXG4gICAgICAgIHByZXZlbnRFeHRlcm5hbEludmFsaWRhdGlvbiA9IF9wcm9wcy5wcmV2ZW50RXh0ZXJuYWxJbnZhbGlkYXRpb24sXG4gICAgICAgIG9uU3VjY2VzcyA9IF9wcm9wcy5vblN1Y2Nlc3MsXG4gICAgICAgIG9uRXJyb3IgPSBfcHJvcHMub25FcnJvcixcbiAgICAgICAgbm9uRm9ybXN5UHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3Byb3BzLCBbJ21hcHBpbmcnLCAndmFsaWRhdGlvbkVycm9ycycsICdvblN1Ym1pdCcsICdvblZhbGlkJywgJ29uVmFsaWRTdWJtaXQnLCAnb25JbnZhbGlkJywgJ29uSW52YWxpZFN1Ym1pdCcsICdvbkNoYW5nZScsICdyZXNldCcsICdwcmV2ZW50RXh0ZXJuYWxJbnZhbGlkYXRpb24nLCAnb25TdWNjZXNzJywgJ29uRXJyb3InXSk7XG5cbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICdmb3JtJyxcbiAgICAgIF9leHRlbmRzKHt9LCBub25Gb3Jtc3lQcm9wcywgeyBvblN1Ym1pdDogdGhpcy5zdWJtaXQgfSksXG4gICAgICB0aGlzLnByb3BzLmNoaWxkcmVuXG4gICAgKTtcbiAgfVxufSk7XG5cbmlmICghZ2xvYmFsLmV4cG9ydHMgJiYgIWdsb2JhbC5tb2R1bGUgJiYgKCFnbG9iYWwuZGVmaW5lIHx8ICFnbG9iYWwuZGVmaW5lLmFtZCkpIHtcbiAgZ2xvYmFsLkZvcm1zeSA9IEZvcm1zeTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBGb3Jtc3k7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9mb3Jtc3ktcmVhY3QvbGliL21haW4uanMiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGFycmF5c0RpZmZlcjogZnVuY3Rpb24gYXJyYXlzRGlmZmVyKGEsIGIpIHtcbiAgICB2YXIgaXNEaWZmZXJlbnQgPSBmYWxzZTtcbiAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICBpc0RpZmZlcmVudCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU2FtZShpdGVtLCBiW2luZGV4XSkpIHtcbiAgICAgICAgICBpc0RpZmZlcmVudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0sIHRoaXMpO1xuICAgIH1cbiAgICByZXR1cm4gaXNEaWZmZXJlbnQ7XG4gIH0sXG5cbiAgb2JqZWN0c0RpZmZlcjogZnVuY3Rpb24gb2JqZWN0c0RpZmZlcihhLCBiKSB7XG4gICAgdmFyIGlzRGlmZmVyZW50ID0gZmFsc2U7XG4gICAgaWYgKE9iamVjdC5rZXlzKGEpLmxlbmd0aCAhPT0gT2JqZWN0LmtleXMoYikubGVuZ3RoKSB7XG4gICAgICBpc0RpZmZlcmVudCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIE9iamVjdC5rZXlzKGEpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTYW1lKGFba2V5XSwgYltrZXldKSkge1xuICAgICAgICAgIGlzRGlmZmVyZW50ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSwgdGhpcyk7XG4gICAgfVxuICAgIHJldHVybiBpc0RpZmZlcmVudDtcbiAgfSxcblxuICBpc1NhbWU6IGZ1bmN0aW9uIGlzU2FtZShhLCBiKSB7XG4gICAgaWYgKCh0eXBlb2YgYSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoYSkpICE9PSAodHlwZW9mIGIgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGIpKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhKSAmJiBBcnJheS5pc0FycmF5KGIpKSB7XG4gICAgICByZXR1cm4gIXRoaXMuYXJyYXlzRGlmZmVyKGEsIGIpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGEgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBhLnRvU3RyaW5nKCkgPT09IGIudG9TdHJpbmcoKTtcbiAgICB9IGVsc2UgaWYgKCh0eXBlb2YgYSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoYSkpID09PSAnb2JqZWN0JyAmJiBhICE9PSBudWxsICYmIGIgIT09IG51bGwpIHtcbiAgICAgIHJldHVybiAhdGhpcy5vYmplY3RzRGlmZmVyKGEsIGIpO1xuICAgIH1cblxuICAgIHJldHVybiBhID09PSBiO1xuICB9LFxuXG4gIGZpbmQ6IGZ1bmN0aW9uIGZpbmQoY29sbGVjdGlvbiwgZm4pIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNvbGxlY3Rpb24ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IGNvbGxlY3Rpb25baV07XG4gICAgICBpZiAoZm4oaXRlbSkpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG59O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vZm9ybXN5LXJlYWN0L2xpYi91dGlscy5qcyIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9pc0V4aXN0eSA9IGZ1bmN0aW9uIF9pc0V4aXN0eSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZDtcbn07XG5cbnZhciBpc0VtcHR5ID0gZnVuY3Rpb24gaXNFbXB0eSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT09ICcnO1xufTtcblxudmFyIHZhbGlkYXRpb25zID0ge1xuICBpc0RlZmF1bHRSZXF1aXJlZFZhbHVlOiBmdW5jdGlvbiBpc0RlZmF1bHRSZXF1aXJlZFZhbHVlKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gJyc7XG4gIH0sXG4gIGlzRXhpc3R5OiBmdW5jdGlvbiBpc0V4aXN0eSh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIF9pc0V4aXN0eSh2YWx1ZSk7XG4gIH0sXG4gIG1hdGNoUmVnZXhwOiBmdW5jdGlvbiBtYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCByZWdleHApIHtcbiAgICByZXR1cm4gIV9pc0V4aXN0eSh2YWx1ZSkgfHwgaXNFbXB0eSh2YWx1ZSkgfHwgcmVnZXhwLnRlc3QodmFsdWUpO1xuICB9LFxuICBpc1VuZGVmaW5lZDogZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkO1xuICB9LFxuICBpc0VtcHR5U3RyaW5nOiBmdW5jdGlvbiBpc0VtcHR5U3RyaW5nKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gaXNFbXB0eSh2YWx1ZSk7XG4gIH0sXG4gIGlzRW1haWw6IGZ1bmN0aW9uIGlzRW1haWwodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXigoKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSsoXFwuKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSspKil8KChcXHgyMikoKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPygoW1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4N2ZdfFxceDIxfFtcXHgyMy1cXHg1Yl18W1xceDVkLVxceDdlXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KFxcXFwoW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBkLVxceDdmXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSkqKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPyhcXHgyMikpKUAoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkkL2kpO1xuICB9LFxuICBpc1VybDogZnVuY3Rpb24gaXNVcmwodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXihodHRwcz98cz9mdHApOlxcL1xcLygoKChbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoJVtcXGRhLWZdezJ9KXxbIVxcJCYnXFwoXFwpXFwqXFwrLDs9XXw6KSpAKT8oKChcXGR8WzEtOV1cXGR8MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC01XSlcXC4oXFxkfFsxLTldXFxkfDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNV0pXFwuKFxcZHxbMS05XVxcZHwxXFxkXFxkfDJbMC00XVxcZHwyNVswLTVdKVxcLihcXGR8WzEtOV1cXGR8MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC01XSkpfCgoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4pKygoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKVxcLj8pKDpcXGQqKT8pKFxcLygoKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCkrKFxcLygoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OnxAKSopKik/KT8oXFw/KCgoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OnxAKXxbXFx1RTAwMC1cXHVGOEZGXXxcXC98XFw/KSopPygjKCgoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OnxAKXxcXC98XFw/KSopPyQvaSk7XG4gIH0sXG4gIGlzVHJ1ZTogZnVuY3Rpb24gaXNUcnVlKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IHRydWU7XG4gIH0sXG4gIGlzRmFsc2U6IGZ1bmN0aW9uIGlzRmFsc2UodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gZmFsc2U7XG4gIH0sXG4gIGlzTnVtZXJpYzogZnVuY3Rpb24gaXNOdW1lcmljKHZhbHVlcywgdmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXlstK10/KD86XFxkKlsuXSk/XFxkKyQvKTtcbiAgfSxcbiAgaXNBbHBoYTogZnVuY3Rpb24gaXNBbHBoYSh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eW0EtWl0rJC9pKTtcbiAgfSxcbiAgaXNBbHBoYW51bWVyaWM6IGZ1bmN0aW9uIGlzQWxwaGFudW1lcmljKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL15bMC05QS1aXSskL2kpO1xuICB9LFxuICBpc0ludDogZnVuY3Rpb24gaXNJbnQodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXig/OlstK10/KD86MHxbMS05XVxcZCopKSQvKTtcbiAgfSxcbiAgaXNGbG9hdDogZnVuY3Rpb24gaXNGbG9hdCh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eKD86Wy0rXT8oPzpcXGQrKSk/KD86XFwuXFxkKik/KD86W2VFXVtcXCtcXC1dPyg/OlxcZCspKT8kLyk7XG4gIH0sXG4gIGlzV29yZHM6IGZ1bmN0aW9uIGlzV29yZHModmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXltBLVpcXHNdKyQvaSk7XG4gIH0sXG4gIGlzU3BlY2lhbFdvcmRzOiBmdW5jdGlvbiBpc1NwZWNpYWxXb3Jkcyh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eW0EtWlxcc1xcdTAwQzAtXFx1MDE3Rl0rJC9pKTtcbiAgfSxcbiAgaXNMZW5ndGg6IGZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlcywgdmFsdWUsIGxlbmd0aCkge1xuICAgIHJldHVybiAhX2lzRXhpc3R5KHZhbHVlKSB8fCBpc0VtcHR5KHZhbHVlKSB8fCB2YWx1ZS5sZW5ndGggPT09IGxlbmd0aDtcbiAgfSxcbiAgZXF1YWxzOiBmdW5jdGlvbiBlcXVhbHModmFsdWVzLCB2YWx1ZSwgZXFsKSB7XG4gICAgcmV0dXJuICFfaXNFeGlzdHkodmFsdWUpIHx8IGlzRW1wdHkodmFsdWUpIHx8IHZhbHVlID09IGVxbDtcbiAgfSxcbiAgZXF1YWxzRmllbGQ6IGZ1bmN0aW9uIGVxdWFsc0ZpZWxkKHZhbHVlcywgdmFsdWUsIGZpZWxkKSB7XG4gICAgcmV0dXJuIHZhbHVlID09IHZhbHVlc1tmaWVsZF07XG4gIH0sXG4gIG1heExlbmd0aDogZnVuY3Rpb24gbWF4TGVuZ3RoKHZhbHVlcywgdmFsdWUsIGxlbmd0aCkge1xuICAgIHJldHVybiAhX2lzRXhpc3R5KHZhbHVlKSB8fCB2YWx1ZS5sZW5ndGggPD0gbGVuZ3RoO1xuICB9LFxuICBtaW5MZW5ndGg6IGZ1bmN0aW9uIG1pbkxlbmd0aCh2YWx1ZXMsIHZhbHVlLCBsZW5ndGgpIHtcbiAgICByZXR1cm4gIV9pc0V4aXN0eSh2YWx1ZSkgfHwgaXNFbXB0eSh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoID49IGxlbmd0aDtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB2YWxpZGF0aW9ucztcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2Zvcm1zeS1yZWFjdC9saWIvdmFsaWRhdGlvblJ1bGVzLmpzIiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IEZvcm1zeSwgeyBIT0MgfSBmcm9tICdmb3Jtc3ktcmVhY3QnO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xyXG5cclxuY2xhc3MgSW5wdXQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5jaGFuZ2VWYWx1ZSA9IChldmVudCkgPT4ge1xyXG4gICAgICB0aGlzLnByb3BzLnNldFZhbHVlKGV2ZW50LmN1cnJlbnRUYXJnZXRbdGhpcy5wcm9wcy50eXBlID09PSAnY2hlY2tib3gnID9cclxuICAgICAgICAnY2hlY2tlZCcgOiAndmFsdWUnXSk7XHJcbiAgICB9O1xyXG4gIH1cclxuICByZW5kZXIgKCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5wcm9wcy5nZXRFcnJvck1lc3NhZ2UoKTtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInByb2ZpbGUtZmllbGRcIj5cclxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJwcm9maWxlLWZpZWxkX19sYWJlbFwiPnt0aGlzLnByb3BzLmxhYmVsfTwvc3Bhbj5cclxuICAgICAgICB7dGhpcy5wcm9wcy5kaXNhYmxlZCA/XHJcbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJwcm9maWxlLWZpZWxkX192YWx1ZVwiPlxyXG4gICAgICAgICAgICB7dGhpcy5wcm9wcy52YWx1ZX1cclxuICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgIDpcclxuICAgICAgICAgIDxsYWJlbD5cclxuICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgbmFtZT17dGhpcy5wcm9wcy5uYW1lLnRvTG93ZXJDYXNlKCl9XHJcbiAgICAgICAgICAgICAgdHlwZT17dGhpcy5wcm9wcy50eXBlIHx8ICd0ZXh0J31cclxuICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5jaGFuZ2VWYWx1ZX1cclxuICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5wcm9wcy5nZXRWYWx1ZSgpfVxyXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0aGlzLnByb3BzLnBsYWNlaG9sZGVyIHx8ICcnfS8+XHJcbiAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cInByb2ZpbGUtZmllbGRfX2lucHV0LWljb24gZmEtcGVuY2lsIGZhIFwiPjwvaT5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwic2lnbnVwLWZvcm1fX2Vycm9yLW1lc3NhZ2VcIj57ZXJyb3JNZXNzYWdlfTwvc3Bhbj5cclxuICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgfVxyXG4gICAgICA8L2Rpdj5cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5JbnB1dC5wcm9wVHlwZXMgPSB7XHJcbiAgdmFsdWU6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgbGFiZWw6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgbmFtZTogUHJvcFR5cGVzLnN0cmluZyxcclxuICBjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgdHlwZTogUHJvcFR5cGVzLnN0cmluZyxcclxuICBzZXRWYWx1ZTogUHJvcFR5cGVzLmFueSxcclxuICBnZXRWYWx1ZTogUHJvcFR5cGVzLmZ1bmMsXHJcbiAgZ2V0RXJyb3JNZXNzYWdlOiBQcm9wVHlwZXMuZnVuYyxcclxuICBkaXNhYmxlZDogUHJvcFR5cGVzLmJvb2wsXHJcbiAgcGxhY2Vob2xkZXI6IFByb3BUeXBlcy5zdHJpbmdcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEhPQyhJbnB1dCk7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21wb25lbnRzL0lucHV0L0lucHV0LmpzIiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IEZvcm1zeSwgeyBIT0MgfSBmcm9tICdmb3Jtc3ktcmVhY3QnO1xyXG5pbXBvcnQgSW5wdXQgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9JbnB1dC9JbnB1dCc7XHJcbmltcG9ydCB7XHJcbiAgdXBkYXRlUHJvZmlsZVJlcXVlc3QsXHJcbiAgZGVsZXRlVXNlclJlcXVlc3QsXHJcbiAgY2xlYXJVcGRhdGVQcm9maWxlU3RhdHVzLFxyXG4gIHVwbG9hZFBob3RvRmFpbHVyZSB9IGZyb20gJy4uLy4uL2FjdGlvbnMvdXNlcnMuYWN0aW9uJztcclxuaW1wb3J0IHsgYmluZEFjdGlvbkNyZWF0b3JzIH0gZnJvbSAncmVkdXgnO1xyXG5pbXBvcnQgeyBNZXNzYWdlIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9NZXNzYWdlL01lc3NhZ2UnO1xyXG5pbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvUG9wdXAvUG9wdXAnO1xyXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL0J1dHRvbi9CdXR0b24nO1xyXG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xyXG5pbXBvcnQgJy4vUHJvZmlsZS5zY3NzJztcclxuXHJcbmNsYXNzIFByb2ZpbGUgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG5cclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGRpc2FibGVkOiB0cnVlLFxyXG4gICAgICBjYW5TdWJtaXQ6IGZhbHNlLFxyXG4gICAgICBpbWFnZUJhc2U2NDogbnVsbCxcclxuICAgICAgcG9wdXBTaG93bjogZmFsc2UsXHJcbiAgICAgIHVwZGF0ZUltYWdlU3RhdHVzOiAnJ1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFBvcHVwU2hvd24gPSAoaWQpID0+IHtcclxuICAgIGNvbnN0IGN1cnJlbnRTdGF0ZSA9IHRoaXMuc3RhdGUucG9wdXBTaG93bjtcclxuXHJcbiAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgcG9wdXBTaG93bjogIWN1cnJlbnRTdGF0ZVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgdXBkYXRlUHJvZmlsZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgIG5hbWU6IHRoaXMubmFtZS5nZXRWYWx1ZSgpLFxyXG4gICAgICBlbWFpbDogdGhpcy5lbWFpbC5nZXRWYWx1ZSgpLFxyXG4gICAgICBwYXNzd29yZE9sZDogdGhpcy5wYXNzd29yZE9sZC5nZXRWYWx1ZSgpLFxyXG4gICAgICBwYXNzd29yZDogdGhpcy5wYXNzd29yZC5nZXRWYWx1ZSgpLFxyXG4gICAgICBwYXNzd29yZFJlcGVhdDogdGhpcy5wYXNzd29yZFJlcGVhdC5nZXRWYWx1ZSgpLFxyXG4gICAgICBhdmF0YXI6IHRoaXMuYmFzZTY0U3RyLFxyXG4gICAgICBfaWQ6IHRoaXMucHJvcHMudXNlci5faWRcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5wcm9wcy51cGRhdGVQcm9maWxlUmVxdWVzdChkYXRhKTtcclxuICB9O1xyXG5cclxuICBlbmFibGVCdXR0b24gPSAoKSA9PiB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgY2FuU3VibWl0OiB0cnVlXHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBkaXNhYmxlQnV0dG9uID0gKCkgPT4ge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGNhblN1Ym1pdDogZmFsc2VcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGVkaXREYXRhID0gKCkgPT4ge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGRpc2FibGVkOiAhdGhpcy5zdGF0ZS5kaXNhYmxlZFxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgZGVsZXRlVXNlciA9ICgpID0+IHtcclxuICAgIHRoaXMucHJvcHMuZGVsZXRlVXNlclJlcXVlc3QodGhpcy5wcm9wcy51c2VyKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZUZpbGVTZWxlY3QgPSAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7IHVwZGF0ZUltYWdlU3RhdHVzOiAnTG9hZGluZy4uLicgfSk7XHJcbiAgICBjb25zdCBmaWxlcyA9IGUudGFyZ2V0LmZpbGVzID8gZS50YXJnZXQuZmlsZXMgOiBlLmRhdGFUcmFuc2Zlci5maWxlcztcclxuXHJcbiAgICBpZiAoZmlsZXMpIHtcclxuICAgICAgY29uc3QgZmlsZSA9IGZpbGVzWzBdO1xyXG5cclxuICAgICAgaWYgKGZpbGUpIHtcclxuICAgICAgICBjb25zdCBtYXhGaWxlU2l6ZSA9IDEwMjQgKiAxMDI0O1xyXG5cclxuICAgICAgICBpZiAoZmlsZS5zaXplID4gbWF4RmlsZVNpemUpIHtcclxuICAgICAgICAgIHRoaXMucHJvcHMudXBsb2FkUGhvdG9GYWlsdXJlKCdFeGNlZWRpbmcgMU1CIGxpbWl0Jyk7XHJcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgdXBkYXRlSW1hZ2VTdGF0dXM6ICdFeGNlZWRpbmcgMU1CIGxpbWl0JyxcclxuICAgICAgICAgICAgc2V0UG9wdXBTaG93bjogdHJ1ZVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG5cclxuICAgICAgICByZWFkZXIub25sb2FkID0gKHJlYWRlckV2ZW50KSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBiaW5hcnlTdHJpbmcgPSByZWFkZXJFdmVudC50YXJnZXQucmVzdWx0O1xyXG5cclxuICAgICAgICAgIHRoaXMuYmFzZTY0U3RyID0gJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQsJyArIGJ0b2EoYmluYXJ5U3RyaW5nKTtcclxuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpbWFnZUJhc2U2NDogdGhpcy5iYXNlNjRTdHIsIHVwZGF0ZUltYWdlU3RhdHVzOiAnJyB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZWFkZXIucmVhZEFzQmluYXJ5U3RyaW5nKGZpbGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcmV2ZW50RGVmYXVsdCA9IChldmVudCkgPT4ge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZFVwZGF0ZSAoKSB7XHJcbiAgICBpZiAodGhpcy5wcm9wcy51cGRhdGVQcm9maWxlU3RhdHVzID09PSAnRE9ORScpIHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5oaXN0b3J5LnB1c2goJy8nKTtcclxuICAgICAgfSwgMTAwMCk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5wcm9wcy5kZWxldGVQcm9maWxlU3RhdHVzID09PSAnRE9ORScpIHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5oaXN0b3J5LnB1c2goJy9hdXRoJyk7XHJcbiAgICAgIH0sIDEwMDApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyID0gKCkgPT4ge1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgY29uc3QgZHJhZ292ZXJGb3JCb2R5ID0gZSB8fCBldmVudDtcclxuXHJcbiAgICAgIGRyYWdvdmVyRm9yQm9keS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSwgZmFsc2UpO1xyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgY29uc3QgZHJvcEZvckJvZHkgPSBlIHx8IGV2ZW50O1xyXG5cclxuICAgICAgZHJvcEZvckJvZHkucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0sIGZhbHNlKTtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8c2VjdGlvbiBjbGFzc05hbWU9XCJwcm9maWxlXCI+XHJcbiAgICAgICAgPGhlYWRlciBjbGFzc05hbWU9XCJwcm9maWxlX19oZWFkZXJcIj5cclxuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJwcm9maWxlX19oZWFkZXItdGl0bGVcIj5cclxuICAgICAgICAgICAgUHJvZmlsZVxyXG4gICAgICAgICAgPC9oMT5cclxuICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwicHJvZmlsZV9fZGVsZXRlIGJ0biBidG4tLWRhbmdlclwiXHJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuc2V0UG9wdXBTaG93bn0+XHJcbiAgICAgICAgICAgIERlbGV0ZSBwcm9maWxlXHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICA8L2hlYWRlcj5cclxuICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9XCJwcm9maWxlLWluZm9cIj5cclxuICAgICAgICAgIDxGb3Jtc3kuRm9ybVxyXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJwcm9maWxlLWZvcm0gY2xlYXJmaXhcIlxyXG4gICAgICAgICAgICBvblN1Ym1pdD17dGhpcy51cGRhdGVQcm9maWxlfVxyXG4gICAgICAgICAgICBvblZhbGlkPXt0aGlzLmVuYWJsZUJ1dHRvbn1cclxuICAgICAgICAgICAgb25JbnZhbGlkPXt0aGlzLmRpc2FibGVCdXR0b259PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17dGhpcy5zdGF0ZS5pbWFnZUJhc2U2NCB8fCB0aGlzLnByb3BzLnVzZXIuYXZhdGFyID9cclxuICAgICAgICAgICAgICAncHJvZmlsZV9fcGhvdG8nIDogJ3Byb2ZpbGVfX3Bob3RvIHByb2ZpbGVfX3Bob3RvLS1ub2F2YXRhcid9ID5cclxuICAgICAgICAgICAgICAge3RoaXMuc3RhdGUuaW1hZ2VCYXNlNjQgfHwgdGhpcy5wcm9wcy51c2VyLmF2YXRhciA/IDxpbWdcclxuICAgICAgICAgICAgICAgICAgICBzcmM9eyB0aGlzLnN0YXRlLmltYWdlQmFzZTY0IHx8IHRoaXMucHJvcHMudXNlci5hdmF0YXIgfVxyXG4gICAgICAgICAgICAgICAgICAgIGFsdD1cImF2YXRhclwiLz4gOiBudWxsXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcm9maWxlLWluZm9fX2ZpZWxkc1wiPlxyXG4gICAgICAgICAgICAgIDxJbnB1dFxyXG4gICAgICAgICAgICAgICAgbGFiZWw9eydOQU1FJ31cclxuICAgICAgICAgICAgICAgIG5hbWU9eyduYW1lJ31cclxuICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnByb3BzLnVzZXIubmFtZX1cclxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXt0aGlzLnN0YXRlLmRpc2FibGVkfVxyXG4gICAgICAgICAgICAgICAgcmVmPXsoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lID0gaW5wdXQ7XHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgcmVxdWlyZWRcclxuICAgICAgICAgICAgICAgIHZhbGlkYXRpb25zPVwiaXNBbHBoYVwiXHJcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3I9XCJOYW1lIG11c3QgY29udGFpbiBvbmx5IGxldHRlcnNcIi8+XHJcbiAgICAgICAgICAgICAgPElucHV0XHJcbiAgICAgICAgICAgICAgICBsYWJlbD17J0VNQUlMJ31cclxuICAgICAgICAgICAgICAgIG5hbWU9eydlbWFpbCd9XHJcbiAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5wcm9wcy51c2VyLmVtYWlsfVxyXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3RoaXMuc3RhdGUuZGlzYWJsZWR9XHJcbiAgICAgICAgICAgICAgICByZWY9eyhpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmVtYWlsID0gaW5wdXQ7XHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgcmVxdWlyZWRcclxuICAgICAgICAgICAgICAgIHZhbGlkYXRpb25zPVwiaXNFbWFpbFwiXHJcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3I9XCJUaGlzIGlzIG5vdCBhIHZhbGlkIGVtYWlsXCIvPlxyXG4gICAgICAgICAgICAgIHshdGhpcy5zdGF0ZS5kaXNhYmxlZCA/XHJcbiAgICAgICAgICAgICAgICA8ZmllbGRzZXQgY2xhc3NOYW1lPVwicHJvZmlsZS1pbmZvX19maWVsZHMtLWZpZWxkc2V0XCI+XHJcbiAgICAgICAgICAgICAgICAgIDxsZWdlbmQ+PGgzIGNsYXNzTmFtZT1cInByb2ZpbGUtaGVhZGluZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIENoYW5nZSBwYXNzd29yZDpcclxuICAgICAgICAgICAgICAgICAgPC9oMz48L2xlZ2VuZD5cclxuICAgICAgICAgICAgICAgICAgPElucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9eydPbGQnfVxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9eydvbGQtcHN3J31cclxuICAgICAgICAgICAgICAgICAgICB0eXBlPXsncGFzc3dvcmQnfVxyXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXsnRW50ZXIgdGhlIG9sZCBwYXNzd29yZCd9XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3RoaXMuc3RhdGUuZGlzYWJsZWR9XHJcbiAgICAgICAgICAgICAgICAgICAgcmVmPXsoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFzc3dvcmRPbGQgPSBpbnB1dDtcclxuICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25zPSB7e1xyXG4gICAgICAgICAgICAgICAgICAgICAgbWluTGVuZ3RoOiA3LFxyXG4gICAgICAgICAgICAgICAgICAgICAgaXNBbHBoYW51bWVyaWM6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcj17J1Bhc3N3b3JkIGlzIG5vdCB2YWxpZCd9Lz5cclxuICAgICAgICAgICAgICAgICAgPElucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9eydOZXcnfVxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9eyduZXctcHN3J31cclxuICAgICAgICAgICAgICAgICAgICB0eXBlPXsncGFzc3dvcmQnfVxyXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXsnRW50ZXIgdGhlIG5ldyBwYXNzd29yZCd9XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3RoaXMuc3RhdGUuZGlzYWJsZWR9XHJcbiAgICAgICAgICAgICAgICAgICAgcmVmPXsoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFzc3dvcmQgPSBpbnB1dDtcclxuICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25zPSB7e1xyXG4gICAgICAgICAgICAgICAgICAgICAgbWluTGVuZ3RoOiA3LFxyXG4gICAgICAgICAgICAgICAgICAgICAgaXNBbHBoYW51bWVyaWM6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcj17J1Bhc3N3b3JkIGlzIG5vdCB2YWxpZCd9Lz5cclxuICAgICAgICAgICAgICAgICAgPElucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9eydSZXBlYXQnfVxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9eydyZXBlYXQtcHN3J31cclxuICAgICAgICAgICAgICAgICAgICB0eXBlPXsncGFzc3dvcmQnfVxyXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXsnUmVwZWF0IHRoZSBwYXNzd29yZCd9XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3RoaXMuc3RhdGUuZGlzYWJsZWR9XHJcbiAgICAgICAgICAgICAgICAgICAgcmVmPXsoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFzc3dvcmRSZXBlYXQgPSBpbnB1dDtcclxuICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25zPVwiZXF1YWxzRmllbGQ6bmV3LXBzd1wiXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9yPVwiUGFzc3dvcmQgZG9lcyBub3QgbWF0Y2hcIi8+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2ZpZWxkc2V0PiA6IG51bGxcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgeyF0aGlzLnN0YXRlLmRpc2FibGVkID9cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHJvZmlsZS1pbmZvX191cGxvYWQtcGhvdG9cIj5cclxuICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInByb2ZpbGUtaGVhZGluZ1wiPlVwbG9hZCBuZXcgcGhvdG88L2gzPlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHJvZmlsZV9fdXBsb2FkLXBob3RvLS1kcm9wXCJcclxuICAgICAgICAgICAgICAgICAgICByZWY9e2VsID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmllbGRJbWFnZSA9IGVsO1xyXG4gICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgb25Ecm9wPXt0aGlzLmhhbmRsZUZpbGVTZWxlY3R9XHJcbiAgICAgICAgICAgICAgICAgICAgb25EcmFnT3Zlcj17dGhpcy5wcmV2ZW50RGVmYXVsdH0+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+RHJvcCB5b3VyIHBob3RvPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcm9maWxlX191cGxvYWQtcGhvdG8tLWJ0blwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbFxyXG4gICAgICAgICAgICAgICAgICAgICAgaHRtbEZvcj1cImFkZC1waG90b1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidG4gYWRkLXBob3RvLWJ0blwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBDaG9vc2UgZmlsZSB0byB1cGxvYWRcclxuICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiZmlsZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwiYWRkLXBob3RvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlRmlsZVNlbGVjdH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGlkZVwiLz5cclxuICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PiA6IG51bGxcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcm9maWxlLWJ0bi1ncm91cFwiPlxyXG4gICAgICAgICAgICAgICAge3RoaXMuc3RhdGUuZGlzYWJsZWQgP1xyXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cInByb2ZpbGVfX3VwZGF0ZSBidG5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmVkaXREYXRhfT5cclxuICAgICAgICAgICAgICAgICAgICBVcGRhdGUgaW5mb1xyXG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj4gOlxyXG4gICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IXRoaXMuc3RhdGUuY2FuU3VibWl0fVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tLXN1Y2Nlc3NcIlxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPVwiU2F2ZSBjaGFuZ2VzXCIgLz5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHshdGhpcy5zdGF0ZS5kaXNhYmxlZCA/XHJcbiAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwicHJvZmlsZV9fZGVsZXRlIGJ0blwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5lZGl0RGF0YX0+XHJcbiAgICAgICAgICAgICAgICAgICAgQ2FuY2VsXHJcbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPiA6IG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L0Zvcm1zeS5Gb3JtPlxyXG4gICAgICAgIDwvc2VjdGlvbj5cclxuICAgICAgICA8TWVzc2FnZVxyXG4gICAgICAgICAgY2xlYXJTdGF0dXM9e3RoaXMucHJvcHMuY2xlYXJTdGF0dXN9XHJcbiAgICAgICAgICBzdGF0dXM9e3RoaXMucHJvcHMudXBkYXRlUHJvZmlsZVN0YXR1c31cclxuICAgICAgICAgIHRleHQ9e3RoaXMucHJvcHMuZXJyb3JUZXh0fVxyXG4gICAgICAgICAgaGVhZGVyPXsnRXJyb3InfSAvPlxyXG4gICAgICAgIDxQb3B1cFxyXG4gICAgICAgICAgc2V0UG9wdXBTaG93bj17dGhpcy5zZXRQb3B1cFNob3dufVxyXG4gICAgICAgICAgcG9wdXBTaG93bj17dGhpcy5zdGF0ZS5wb3B1cFNob3dufVxyXG4gICAgICAgICAgaGVhZGVyPVwiQ29uZmlybSB0aGUgYWN0aW9uXCJcclxuICAgICAgICAgIHRleHQ9eydBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHlvdXIgYWNjb3VudD8nfT5cclxuICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgc2V0UG9wdXBTaG93bj17dGhpcy5zZXRQb3B1cFNob3dufVxyXG4gICAgICAgICAgICBva0hhbmRsZXI9eygpID0+IHtcclxuICAgICAgICAgICAgICB0aGlzLmRlbGV0ZVVzZXIoKTtcclxuICAgICAgICAgICAgICB0aGlzLnNldFBvcHVwU2hvd24oKTtcclxuICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgY2xhc3NOYW1lPXsnYnRuIHBvcHVwX19idG4nfVxyXG4gICAgICAgICAgICBpbm5lclRleHQ9eydPayd9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICBva0hhbmRsZXI9eygpID0+IHtcclxuICAgICAgICAgICAgICB0aGlzLnNldFBvcHVwU2hvd24oKTtcclxuICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgY2xhc3NOYW1lPXsnYnRuIGJ0bi0tZGVmYXVsdCBwb3B1cF9fYnRuJ31cclxuICAgICAgICAgICAgaW5uZXJUZXh0PXsnQ2FuY2VsJ31cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgPC9Qb3B1cD5cclxuICAgICAgPC9zZWN0aW9uPlxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1hcFN0YXRlVG9Qcm9wcyAoc3RvcmUpIHtcclxuICByZXR1cm4ge1xyXG4gICAgdXBkYXRlUHJvZmlsZVN0YXR1czogc3RvcmUudXNlcnMudXBkYXRlUHJvZmlsZVN0YXR1cyxcclxuICAgIGRlbGV0ZVByb2ZpbGVTdGF0dXM6ICBzdG9yZS51c2Vycy5kZWxldGVQcm9maWxlU3RhdHVzLFxyXG4gICAgZXJyb3JUZXh0OiBzdG9yZS51c2Vycy51c2VyLmVycm9yVGV4dCxcclxuICAgIHVzZXI6IHN0b3JlLnVzZXJzLnVzZXJcclxuICB9O1xyXG59XHJcbmZ1bmN0aW9uIG1hcERpc3BhdGNoVG9Qcm9wcyAoZGlzcGF0Y2gpIHtcclxuICByZXR1cm4ge1xyXG4gICAgdXBkYXRlUHJvZmlsZVJlcXVlc3Q6IGJpbmRBY3Rpb25DcmVhdG9ycyh1cGRhdGVQcm9maWxlUmVxdWVzdCwgZGlzcGF0Y2gpLFxyXG4gICAgZGVsZXRlVXNlclJlcXVlc3Q6IGJpbmRBY3Rpb25DcmVhdG9ycyhkZWxldGVVc2VyUmVxdWVzdCwgZGlzcGF0Y2gpLFxyXG4gICAgY2xlYXJTdGF0dXM6IGJpbmRBY3Rpb25DcmVhdG9ycyhjbGVhclVwZGF0ZVByb2ZpbGVTdGF0dXMsIGRpc3BhdGNoKSxcclxuICAgIHVwbG9hZFBob3RvRmFpbHVyZTogYmluZEFjdGlvbkNyZWF0b3JzKHVwbG9hZFBob3RvRmFpbHVyZSwgZGlzcGF0Y2gpXHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMsIG1hcERpc3BhdGNoVG9Qcm9wcykoUHJvZmlsZSk7XHJcblxyXG5Qcm9maWxlLnByb3BUeXBlcyA9IHtcclxuICB1cGRhdGVQcm9maWxlU3RhdHVzOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIHVwZGF0ZVByb2ZpbGVSZXF1ZXN0OiBQcm9wVHlwZXMuZnVuYyxcclxuICBkZWxldGVVc2VyUmVxdWVzdDogUHJvcFR5cGVzLmZ1bmMsXHJcbiAgZGVsZXRlUHJvZmlsZVN0YXR1czogUHJvcFR5cGVzLnN0cmluZyxcclxuICB1c2VyOiBQcm9wVHlwZXMub2JqZWN0LFxyXG4gIGVtYWlsOiBQcm9wVHlwZXMub2JqZWN0LFxyXG4gIHBhc3N3b3JkOiBQcm9wVHlwZXMub2JqZWN0LFxyXG4gIHBhc3N3b3JkT2xkOiBQcm9wVHlwZXMub2JqZWN0LFxyXG4gIHBhc3N3b3JkUmVwZWF0OiBQcm9wVHlwZXMub2JqZWN0LFxyXG4gIGVycm9yVGV4dDogUHJvcFR5cGVzLnN0cmluZyxcclxuICB2YWx1ZTogUHJvcFR5cGVzLm9iamVjdCxcclxuICBoaXN0b3J5OiBQcm9wVHlwZXMub2JqZWN0LFxyXG4gIGNsZWFyU3RhdHVzOiBQcm9wVHlwZXMuZnVuYyxcclxuICB0eXBlOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIHNldFZhbHVlOiBQcm9wVHlwZXMuYW55LFxyXG4gIHVwbG9hZFBob3RvRmFpbHVyZTogUHJvcFR5cGVzLmZ1bmNcclxufTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3BhZ2VzL1Byb2ZpbGUvUHJvZmlsZS5qcyJdLCJzb3VyY2VSb290IjoiIn0=