webpackJsonp([6],{"./node_modules/create-react-class/index.js":function(e,t,r){"use strict";var n=r("./node_modules/react/react.js"),i=r("./node_modules/create-react-class/factory.js");if(void 0===n)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var a=(new n.Component).updater;e.exports=i(n.Component,n.isValidElement,a)},"./node_modules/form-data-to-object/index.js":function(e,t,r){"use strict";function n(e){return Object.keys(e).reduce(function(t,r){var n=r.match(/[^\[]*/i),i=r.match(/\[.*?\]/g)||[];i=[n[0]].concat(i).map(function(e){return e.replace(/\[|\]/g,"")});for(var a=t;i.length;){var o=i.shift();o in a?a=a[o]:(a[o]=i.length?isNaN(i[0])?{}:[]:e[r],a=a[o])}return t},{})}function i(e){function t(e,r,n){return Array.isArray(n)||"[object Object]"===Object.prototype.toString.call(n)?(Object.keys(n).forEach(function(i){t(e,r+"["+i+"]",n[i])}),e):(e[r]=n,e)}return Object.keys(e).reduce(function(r,n){return t(r,n,e[n])},{})}e.exports={fromObj:i,toObj:n}},"./node_modules/formsy-react/lib/Decorator.js":function(e,t,r){"use strict";(function(t){var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=t.React||r("./node_modules/react/react.js"),a=r("./node_modules/create-react-class/index.js"),o=r("./node_modules/formsy-react/lib/Mixin.js");e.exports=function(){return function(e){return a({mixins:[o],render:function(){return i.createElement(e,n({setValidations:this.setValidations,setValue:this.setValue,resetValue:this.resetValue,getValue:this.getValue,hasValue:this.hasValue,getErrorMessage:this.getErrorMessage,getErrorMessages:this.getErrorMessages,isFormDisabled:this.isFormDisabled,isValid:this.isValid,isPristine:this.isPristine,isFormSubmitted:this.isFormSubmitted,isRequired:this.isRequired,showRequired:this.showRequired,showError:this.showError,isValidValue:this.isValidValue},this.props))}})}}}).call(t,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/formsy-react/lib/HOC.js":function(e,t,r){"use strict";(function(t){function n(e){return e.displayName||e.name||("string"==typeof e?e:"Component")}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=t.React||r("./node_modules/react/react.js"),o=r("./node_modules/create-react-class/index.js"),s=r("./node_modules/formsy-react/lib/Mixin.js");e.exports=function(e){return o({displayName:"Formsy("+n(e)+")",mixins:[s],render:function(){var t=this.props.innerRef,r=i({setValidations:this.setValidations,setValue:this.setValue,resetValue:this.resetValue,getValue:this.getValue,hasValue:this.hasValue,getErrorMessage:this.getErrorMessage,getErrorMessages:this.getErrorMessages,isFormDisabled:this.isFormDisabled,isValid:this.isValid,isPristine:this.isPristine,isFormSubmitted:this.isFormSubmitted,isRequired:this.isRequired,showRequired:this.showRequired,showError:this.showError,isValidValue:this.isValidValue},this.props);return t&&(r.ref=t),a.createElement(e,r)}})}}).call(t,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/formsy-react/lib/Mixin.js":function(e,t,r){"use strict";(function(t){var n=r("./node_modules/prop-types/index.js"),i=r("./node_modules/formsy-react/lib/utils.js"),a=(t.React||r("./node_modules/react/react.js"),function(e){return"string"==typeof e?e.split(/\,(?![^{\[]*[}\]])/g).reduce(function(e,t){var r=t.split(":"),n=r.shift();if(r=r.map(function(e){try{return JSON.parse(e)}catch(t){return e}}),r.length>1)throw new Error("Formsy does not support multiple args on string validations. Use object format of validations instead.");return e[n]=!r.length||r[0],e},{}):e||{}});e.exports={getInitialState:function(){return{_value:this.props.value,_isRequired:!1,_isValid:!0,_isPristine:!0,_pristineValue:this.props.value,_validationError:[],_externalError:null,_formSubmitted:!1}},contextTypes:{formsy:n.object},getDefaultProps:function(){return{validationError:"",validationErrors:{}}},componentWillMount:function(){var e=function(){this.setValidations(this.props.validations,this.props.required),this.context.formsy.attachToForm(this)}.bind(this);if(!this.props.name)throw new Error("Form Input requires a name property when used");e()},componentWillReceiveProps:function(e){this.setValidations(e.validations,e.required)},componentDidUpdate:function(e){i.isSame(this.props.value,e.value)||this.setValue(this.props.value),i.isSame(this.props.validations,e.validations)&&i.isSame(this.props.required,e.required)||this.context.formsy.validate(this)},componentWillUnmount:function(){this.context.formsy.detachFromForm(this)},setValidations:function(e,t){this._validations=a(e)||{},this._requiredValidations=!0===t?{isDefaultRequiredValue:!0}:a(t)},setValue:function(e){this.setState({_value:e,_isPristine:!1},function(){this.context.formsy.validate(this)}.bind(this))},resetValue:function(){this.setState({_value:this.state._pristineValue,_isPristine:!0},function(){this.context.formsy.validate(this)})},getValue:function(){return this.state._value},hasValue:function(){return""!==this.state._value},getErrorMessage:function(){var e=this.getErrorMessages();return e.length?e[0]:null},getErrorMessages:function(){return!this.isValid()||this.showRequired()?this.state._externalError||this.state._validationError||[]:[]},isFormDisabled:function(){return this.context.formsy.isFormDisabled()},isValid:function(){return this.state._isValid},isPristine:function(){return this.state._isPristine},isFormSubmitted:function(){return this.state._formSubmitted},isRequired:function(){return!!this.props.required},showRequired:function(){return this.state._isRequired},showError:function(){return!this.showRequired()&&!this.isValid()},isValidValue:function(e){return this.context.formsy.isValidValue.call(null,this,e)}}}).call(t,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/formsy-react/lib/main.js":function(e,t,r){"use strict";(function(t){function n(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)},s=r("./node_modules/prop-types/index.js"),u=t.React||r("./node_modules/react/react.js"),l=r("./node_modules/create-react-class/index.js"),d={},c=r("./node_modules/formsy-react/lib/validationRules.js"),p=r("./node_modules/form-data-to-object/index.js"),f=r("./node_modules/formsy-react/lib/utils.js"),h=r("./node_modules/formsy-react/lib/Mixin.js"),m=r("./node_modules/formsy-react/lib/HOC.js"),F=r("./node_modules/formsy-react/lib/Decorator.js"),b={},v=[];d.Mixin=h,d.HOC=m,d.Decorator=F,d.defaults=function(e){b=e},d.addValidationRule=function(e,t){c[e]=t},d.Form=l({displayName:"Formsy",getInitialState:function(){return{isValid:!0,isSubmitting:!1,canChange:!1}},getDefaultProps:function(){return{onSuccess:function(){},onError:function(){},onSubmit:function(){},onValidSubmit:function(){},onInvalidSubmit:function(){},onValid:function(){},onInvalid:function(){},onChange:function(){},validationErrors:null,preventExternalInvalidation:!1}},childContextTypes:{formsy:s.object},getChildContext:function(){var e=this;return{formsy:{attachToForm:this.attachToForm,detachFromForm:this.detachFromForm,validate:this.validate,isFormDisabled:this.isFormDisabled,isValidValue:function(t,r){return e.runValidation(t,r).isValid}}}},componentWillMount:function(){this.inputs=[]},componentDidMount:function(){this.validateForm()},componentWillUpdate:function(){this.prevInputNames=this.inputs.map(function(e){return e.props.name})},componentDidUpdate:function(){this.props.validationErrors&&"object"===o(this.props.validationErrors)&&Object.keys(this.props.validationErrors).length>0&&this.setInputValidationErrors(this.props.validationErrors);var e=this.inputs.map(function(e){return e.props.name});f.arraysDiffer(this.prevInputNames,e)&&this.validateForm()},reset:function(e){this.setFormPristine(!0),this.resetModel(e)},submit:function(e){e&&e.preventDefault(),this.setFormPristine(!1);var t=this.getModel();this.props.onSubmit(t,this.resetModel,this.updateInputsWithError),this.state.isValid?this.props.onValidSubmit(t,this.resetModel,this.updateInputsWithError):this.props.onInvalidSubmit(t,this.resetModel,this.updateInputsWithError)},mapModel:function(e){return this.props.mapping?this.props.mapping(e):p.toObj(Object.keys(e).reduce(function(t,r){for(var n=r.split("."),i=t;n.length;){var a=n.shift();i=i[a]=n.length?i[a]||{}:e[r]}return t},{}))},getModel:function(){var e=this.getCurrentValues();return this.mapModel(e)},resetModel:function(e){this.inputs.forEach(function(t){var r=t.props.name;e&&e.hasOwnProperty(r)?t.setValue(e[r]):t.resetValue()}),this.validateForm()},setInputValidationErrors:function(e){this.inputs.forEach(function(t){var r=t.props.name,n=[{_isValid:!(r in e),_validationError:"string"==typeof e[r]?[e[r]]:e[r]}];t.setState.apply(t,n)})},isChanged:function(){return!f.isSame(this.getPristineValues(),this.getCurrentValues())},getPristineValues:function(){return this.inputs.reduce(function(e,t){return e[t.props.name]=t.props.value,e},{})},updateInputsWithError:function(e){var t=this;Object.keys(e).forEach(function(r,n){var i=f.find(t.inputs,function(e){return e.props.name===r});if(!i)throw new Error("You are trying to update an input that does not exist. Verify errors object with input names. "+JSON.stringify(e));var a=[{_isValid:t.props.preventExternalInvalidation||!1,_externalError:"string"==typeof e[r]?[e[r]]:e[r]}];i.setState.apply(i,a)})},isFormDisabled:function(){return this.props.disabled},getCurrentValues:function(){return this.inputs.reduce(function(e,t){return e[t.props.name]=t.state._value,e},{})},setFormPristine:function(e){this.setState({_formSubmitted:!e}),this.inputs.forEach(function(t,r){t.setState({_formSubmitted:!e,_isPristine:e})})},validate:function(e){this.state.canChange&&this.props.onChange(this.getCurrentValues(),this.isChanged());var t=this.runValidation(e);e.setState({_isValid:t.isValid,_isRequired:t.isRequired,_validationError:t.error,_externalError:null},this.validateForm)},runValidation:function(e,t){var r=this.getCurrentValues(),n=e.props.validationErrors,i=e.props.validationError;t=2===arguments.length?t:e.state._value;var a=this.runRules(t,r,e._validations),o=this.runRules(t,r,e._requiredValidations);"function"==typeof e.validate&&(a.failed=e.validate()?[]:["failed"]);var s=!!Object.keys(e._requiredValidations).length&&!!o.success.length,u=!(a.failed.length||this.props.validationErrors&&this.props.validationErrors[e.props.name]);return{isRequired:s,isValid:!s&&u,error:function(){if(u&&!s)return v;if(a.errors.length)return a.errors;if(this.props.validationErrors&&this.props.validationErrors[e.props.name])return"string"==typeof this.props.validationErrors[e.props.name]?[this.props.validationErrors[e.props.name]]:this.props.validationErrors[e.props.name];if(s){var t=n[o.success[0]];return t?[t]:null}return a.failed.length?a.failed.map(function(e){return n[e]?n[e]:i}).filter(function(e,t,r){return r.indexOf(e)===t}):void 0}.call(this)}},runRules:function(e,t,r){var n={errors:[],failed:[],success:[]};return Object.keys(r).length&&Object.keys(r).forEach(function(i){if(c[i]&&"function"==typeof r[i])throw new Error("Formsy does not allow you to override default validations: "+i);if(!c[i]&&"function"!=typeof r[i])throw new Error("Formsy does not have the validation rule: "+i);if("function"==typeof r[i]){var a=r[i](t,e);return void("string"==typeof a?(n.errors.push(a),n.failed.push(i)):a||n.failed.push(i))}if("function"!=typeof r[i]){var a=c[i](t,e,r[i]);return void("string"==typeof a?(n.errors.push(a),n.failed.push(i)):a?n.success.push(i):n.failed.push(i))}return n.success.push(i)}),n},validateForm:function(){var e=this,t=function(){var e=this.inputs.every(function(e){return e.state._isValid});this.setState({isValid:e}),e?this.props.onValid():this.props.onInvalid(),this.setState({canChange:!0})}.bind(this);this.inputs.forEach(function(r,n){var i=e.runValidation(r);i.isValid&&r.state._externalError&&(i.isValid=!1),r.setState({_isValid:i.isValid,_isRequired:i.isRequired,_validationError:i.error,_externalError:!i.isValid&&r.state._externalError?r.state._externalError:null},n===e.inputs.length-1?t:null)}),this.inputs.length||this.setState({canChange:!0})},attachToForm:function(e){-1===this.inputs.indexOf(e)&&this.inputs.push(e),this.validate(e)},detachFromForm:function(e){var t=this.inputs.indexOf(e);-1!==t&&(this.inputs=this.inputs.slice(0,t).concat(this.inputs.slice(t+1))),this.validateForm()},render:function(){var e=this.props,t=(e.mapping,e.validationErrors,e.onSubmit,e.onValid,e.onValidSubmit,e.onInvalid,e.onInvalidSubmit,e.onChange,e.reset,e.preventExternalInvalidation,e.onSuccess,e.onError,n(e,["mapping","validationErrors","onSubmit","onValid","onValidSubmit","onInvalid","onInvalidSubmit","onChange","reset","preventExternalInvalidation","onSuccess","onError"]));return u.createElement("form",a({},t,{onSubmit:this.submit}),this.props.children)}}),t.exports||t.module||t.define&&t.define.amd||(t.Formsy=d),e.exports=d}).call(t,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/formsy-react/lib/utils.js":function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":n(e)};e.exports={arraysDiffer:function(e,t){var r=!1;return e.length!==t.length?r=!0:e.forEach(function(e,n){this.isSame(e,t[n])||(r=!0)},this),r},objectsDiffer:function(e,t){var r=!1;return Object.keys(e).length!==Object.keys(t).length?r=!0:Object.keys(e).forEach(function(n){this.isSame(e[n],t[n])||(r=!0)},this),r},isSame:function(e,t){return(void 0===e?"undefined":i(e))===(void 0===t?"undefined":i(t))&&(Array.isArray(e)&&Array.isArray(t)?!this.arraysDiffer(e,t):"function"==typeof e?e.toString()===t.toString():"object"===(void 0===e?"undefined":i(e))&&null!==e&&null!==t?!this.objectsDiffer(e,t):e===t)},find:function(e,t){for(var r=0,n=e.length;r<n;r++){var i=e[r];if(t(i))return i}return null}}},"./node_modules/formsy-react/lib/validationRules.js":function(e,t,r){"use strict";var n=function(e){return null!==e&&void 0!==e},i=function(e){return""===e},a={isDefaultRequiredValue:function(e,t){return void 0===t||""===t},isExisty:function(e,t){return n(t)},matchRegexp:function(e,t,r){return!n(t)||i(t)||r.test(t)},isUndefined:function(e,t){return void 0===t},isEmptyString:function(e,t){return i(t)},isEmail:function(e,t){return a.matchRegexp(e,t,/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i)},isUrl:function(e,t){return a.matchRegexp(e,t,/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i)},isTrue:function(e,t){return!0===t},isFalse:function(e,t){return!1===t},isNumeric:function(e,t){return"number"==typeof t||a.matchRegexp(e,t,/^[-+]?(?:\d*[.])?\d+$/)},isAlpha:function(e,t){return a.matchRegexp(e,t,/^[A-Z]+$/i)},isAlphanumeric:function(e,t){return a.matchRegexp(e,t,/^[0-9A-Z]+$/i)},isInt:function(e,t){return a.matchRegexp(e,t,/^(?:[-+]?(?:0|[1-9]\d*))$/)},isFloat:function(e,t){return a.matchRegexp(e,t,/^(?:[-+]?(?:\d+))?(?:\.\d*)?(?:[eE][\+\-]?(?:\d+))?$/)},isWords:function(e,t){return a.matchRegexp(e,t,/^[A-Z\s]+$/i)},isSpecialWords:function(e,t){return a.matchRegexp(e,t,/^[A-Z\s\u00C0-\u017F]+$/i)},isLength:function(e,t,r){return!n(t)||i(t)||t.length===r},equals:function(e,t,r){return!n(t)||i(t)||t==r},equalsField:function(e,t,r){return t==e[r]},maxLength:function(e,t,r){return!n(t)||t.length<=r},minLength:function(e,t,r){return!n(t)||i(t)||t.length>=r}};e.exports=a},"./src/components/Input/Input.js":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r("./node_modules/react/react.js"),l=n(u),d=r("./node_modules/formsy-react/lib/main.js"),c=(n(d),r("./node_modules/prop-types/index.js")),p=n(c),f=function(e){function t(e){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.changeValue=function(e){r.props.setValue(e.currentTarget["checkbox"===r.props.type?"checked":"value"])},r}return o(t,e),s(t,[{key:"render",value:function(){var e=this.props.getErrorMessage();return l.default.createElement("div",{className:"profile-field"},l.default.createElement("span",{className:"profile-field__label"},this.props.label),this.props.disabled?l.default.createElement("span",{className:"profile-field__value"},this.props.value):l.default.createElement("label",null,l.default.createElement("input",{name:this.props.name.toLowerCase(),type:this.props.type||"text",onChange:this.changeValue,value:this.props.getValue(),placeholder:this.props.placeholder||""}),l.default.createElement("i",{className:"profile-field__input-icon fa-pencil fa "}),l.default.createElement("span",{className:"signup-form__error-message"},e)))}}]),t}(l.default.Component);f.propTypes={value:p.default.string,label:p.default.string,name:p.default.string,className:p.default.string,type:p.default.string,setValue:p.default.any,getValue:p.default.func,getErrorMessage:p.default.func,disabled:p.default.bool,placeholder:p.default.string},t.default=(0,d.HOC)(f)},"./src/pages/Profile/Profile.js":function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return{updateProfileStatus:e.users.updateProfileStatus,deleteProfileStatus:e.users.deleteProfileStatus,errorText:e.users.user.errorText,user:e.users.user}}function u(e){return{updateProfileRequest:(0,b.bindActionCreators)(F.updateProfileRequest,e),deleteUserRequest:(0,b.bindActionCreators)(F.deleteUserRequest,e),clearStatus:(0,b.bindActionCreators)(F.clearUpdateProfileStatus,e),uploadPhotoFailure:(0,b.bindActionCreators)(F.uploadPhotoFailure,e)}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),d=r("./node_modules/react/react.js"),c=n(d),p=r("./node_modules/formsy-react/lib/main.js"),f=n(p),h=r("./src/components/Input/Input.js"),m=n(h),F=r("./src/actions/users.action.js"),b=r("./node_modules/redux/es/index.js"),v=r("./src/components/Message/Message.js"),y=r("./src/components/Popup/Popup.js"),g=r("./src/components/Button/Button.js"),E=r("./node_modules/react-redux/es/index.js"),_=r("./node_modules/prop-types/index.js"),S=n(_);r("./src/pages/Profile/Profile.scss");var x=function(e){function t(e){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.setPopupShown=function(e){var t=r.state.popupShown;r.setState({popupShown:!t})},r.updateProfile=function(){var e={name:r.name.getValue(),email:r.email.getValue(),password:r.password.getValue(),passwordRepeat:r.passwordRepeat.getValue(),avatar:r.base64Str,_id:r.props.user._id};r.props.updateProfileRequest(e)},r.enableButton=function(){r.setState({canSubmit:!0})},r.disableButton=function(){r.setState({canSubmit:!1})},r.editData=function(){r.setState({disabled:!r.state.disabled})},r.deleteUser=function(){r.props.deleteUserRequest(r.props.user)},r.handleFileSelect=function(e){e.preventDefault(),r.setState({updateImageStatus:"Loading..."});var t=e.target.files?e.target.files:e.dataTransfer.files;if(t){var n=t[0];if(n){if(n.size>1048576)return r.props.uploadPhotoFailure("Exceeding 1MB limit"),void r.setState({updateImageStatus:"Exceeding 1MB limit",setPopupShown:!0});var i=new FileReader;i.onload=function(e){var t=e.target.result;r.base64Str="data:image/jpeg;base64,"+btoa(t),r.setState({imageBase64:r.base64Str,updateImageStatus:""})},i.readAsBinaryString(n)}}},r.preventDefault=function(e){e.preventDefault()},r.render=function(){return window.addEventListener("dragover",function(e){(e||event).preventDefault()},!1),window.addEventListener("drop",function(e){(e||event).preventDefault()},!1),c.default.createElement("section",{className:"profile"},c.default.createElement("header",{className:"profile__header"},c.default.createElement("h1",{className:"profile__header-title"},"Profile"),c.default.createElement("button",{className:"profile__delete btn btn--danger",onClick:r.setPopupShown},"Delete profile")),c.default.createElement("section",{className:"profile-info"},c.default.createElement(f.default.Form,{className:"profile-form clearfix",onSubmit:r.updateProfile,onValid:r.enableButton,onInvalid:r.disableButton},c.default.createElement("div",{className:r.state.imageBase64||r.props.user.avatar?"profile__photo":"profile__photo profile__photo--noavatar"},r.state.imageBase64||r.props.user.avatar?c.default.createElement("img",{src:r.state.imageBase64||r.props.user.avatar,alt:"avatar"}):null),c.default.createElement("div",{className:"profile-info__fields"},c.default.createElement(m.default,{label:"NAME",name:"name",value:r.props.user.name,disabled:r.state.disabled,ref:function(e){r.name=e},validations:"isAlpha",validationError:"Name must contain only letters"}),c.default.createElement(m.default,{label:"EMAIL",name:"email",value:r.props.user.email,disabled:r.state.disabled,ref:function(e){r.email=e},validations:"isEmail",validationError:"This is not a valid email"}),r.state.disabled?null:c.default.createElement("fieldset",{className:"profile-info__fields--fieldset"},c.default.createElement("legend",null,c.default.createElement("h3",{className:"profile-heading"},"Change password:")),c.default.createElement(m.default,{label:"Old",name:"old-psw",type:"password",placeholder:"Enter the old password",disabled:r.state.disabled,ref:function(e){r.passwordOld=e},validations:{minLength:7,isAlphanumeric:!0},validationError:"Password is not valid"}),c.default.createElement(m.default,{label:"New",name:"new-psw",type:"password",placeholder:"Enter the new password",disabled:r.state.disabled,ref:function(e){r.password=e},validations:{minLength:7,isAlphanumeric:!0},validationError:"Password is not valid"}),c.default.createElement(m.default,{label:"Repeat",name:"repeat-psw",type:"password",placeholder:"Repeat the password",disabled:r.state.disabled,ref:function(e){r.passwordRepeat=e},validations:"equalsField:new-psw",validationError:"Password does not match"}),c.default.createElement("div",null)),r.state.disabled?null:c.default.createElement("div",{className:"profile-info__upload-photo"},c.default.createElement("h3",{className:"profile-heading"},"Upload new photo"),c.default.createElement("div",{className:"profile__upload-photo--drop",ref:function(e){r.fieldImage=e},onDrop:r.handleFileSelect,onDragOver:r.preventDefault},c.default.createElement("span",null,"Drop your photo")),c.default.createElement("div",{className:"profile__upload-photo--btn"},c.default.createElement("label",{htmlFor:"add-photo",className:"btn add-photo-btn"},"Choose file to upload",c.default.createElement("input",{type:"file",id:"add-photo",onChange:r.handleFileSelect,className:"hide"})))),c.default.createElement("div",{className:"profile-btn-group"},r.state.disabled?c.default.createElement("button",{className:"profile__update btn",onClick:r.editData},"Update info"):c.default.createElement("input",{type:"submit",disabled:!r.state.canSubmit,className:"btn btn--success",value:"Save changes"}),r.state.disabled?null:c.default.createElement("button",{className:"profile__delete btn",onClick:r.editData},"Cancel"))))),c.default.createElement(v.Message,{clearStatus:r.props.clearStatus,status:r.props.updateProfileStatus,text:r.props.errorText,header:"Error"}),c.default.createElement(y.Popup,{setPopupShown:r.setPopupShown,popupShown:r.state.popupShown,header:"Confirm the action",text:"Are you sure you want to delete your account?"},c.default.createElement(g.Button,{setPopupShown:r.setPopupShown,okHandler:function(){r.deleteUser(),r.setPopupShown()},className:"btn popup__btn",innerText:"Ok"}),c.default.createElement(g.Button,{okHandler:function(){r.setPopupShown()},className:"btn btn--default popup__btn",innerText:"Cancel"})))},r.state={disabled:!0,canSubmit:!1,imageBase64:null,popupShown:!1,updateImageStatus:""},r}return o(t,e),l(t,[{key:"componentDidUpdate",value:function(){var e=this;"DONE"===this.props.updateProfileStatus&&setTimeout(function(){e.props.history.push("/")},1e3),"DONE"===this.props.deleteProfileStatus&&setTimeout(function(){e.props.history.push("/auth")},1e3)}}]),t}(d.Component);t.default=(0,E.connect)(s,u)(x),x.propTypes={updateProfileStatus:S.default.string,updateProfileRequest:S.default.func,deleteUserRequest:S.default.func,deleteProfileStatus:S.default.string,user:S.default.object,email:S.default.object,password:S.default.object,passwordRepeat:S.default.object,errorText:S.default.string,value:S.default.object,history:S.default.object,clearStatus:S.default.func,type:S.default.string,setValue:S.default.any,uploadPhotoFailure:S.default.func}},"./src/pages/Profile/Profile.scss":function(e,t){}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vNi5pbmRleF9idW5kbGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jcmVhdGUtcmVhY3QtY2xhc3MvaW5kZXguanM/ODBhNCoiLCJ3ZWJwYWNrOi8vLy4vfi9mb3JtLWRhdGEtdG8tb2JqZWN0L2luZGV4LmpzPzliYjUqIiwid2VicGFjazovLy8uL34vZm9ybXN5LXJlYWN0L2xpYi9EZWNvcmF0b3IuanM/NTFmYyoiLCJ3ZWJwYWNrOi8vLy4vfi9mb3Jtc3ktcmVhY3QvbGliL0hPQy5qcz9iZWY4KiIsIndlYnBhY2s6Ly8vLi9+L2Zvcm1zeS1yZWFjdC9saWIvTWl4aW4uanM/OTM1NyoiLCJ3ZWJwYWNrOi8vLy4vfi9mb3Jtc3ktcmVhY3QvbGliL21haW4uanM/ZTgxNCoiLCJ3ZWJwYWNrOi8vLy4vfi9mb3Jtc3ktcmVhY3QvbGliL3V0aWxzLmpzP2ZkMjYqIiwid2VicGFjazovLy8uL34vZm9ybXN5LXJlYWN0L2xpYi92YWxpZGF0aW9uUnVsZXMuanM/YzBhNSoiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvSW5wdXQvSW5wdXQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2VzL1Byb2ZpbGUvUHJvZmlsZS5qcyJdLCJuYW1lcyI6WyJ3ZWJwYWNrSnNvbnAiLCIuL25vZGVfbW9kdWxlcy9jcmVhdGUtcmVhY3QtY2xhc3MvaW5kZXguanMiLCJtb2R1bGUiLCJleHBvcnRzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIlJlYWN0IiwiZmFjdG9yeSIsIkVycm9yIiwiUmVhY3ROb29wVXBkYXRlUXVldWUiLCJDb21wb25lbnQiLCJ1cGRhdGVyIiwiaXNWYWxpZEVsZW1lbnQiLCIuL25vZGVfbW9kdWxlcy9mb3JtLWRhdGEtdG8tb2JqZWN0L2luZGV4LmpzIiwidG9PYmoiLCJzb3VyY2UiLCJPYmplY3QiLCJrZXlzIiwicmVkdWNlIiwib3V0cHV0Iiwia2V5IiwicGFyZW50S2V5IiwibWF0Y2giLCJwYXRocyIsImNvbmNhdCIsIm1hcCIsInJlcGxhY2UiLCJjdXJyZW50UGF0aCIsImxlbmd0aCIsInBhdGhLZXkiLCJzaGlmdCIsImlzTmFOIiwiZnJvbU9iaiIsIm9iaiIsInJlY3VyIiwibmV3T2JqIiwicHJvcE5hbWUiLCJjdXJyVmFsIiwiQXJyYXkiLCJpc0FycmF5IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwiZm9yRWFjaCIsInYiLCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL0RlY29yYXRvci5qcyIsImdsb2JhbCIsIl9leHRlbmRzIiwiYXNzaWduIiwidGFyZ2V0IiwiaSIsImFyZ3VtZW50cyIsImhhc093blByb3BlcnR5IiwiY3JlYXRlUmVhY3RDbGFzcyIsIk1peGluIiwibWl4aW5zIiwicmVuZGVyIiwiY3JlYXRlRWxlbWVudCIsInNldFZhbGlkYXRpb25zIiwidGhpcyIsInNldFZhbHVlIiwicmVzZXRWYWx1ZSIsImdldFZhbHVlIiwiaGFzVmFsdWUiLCJnZXRFcnJvck1lc3NhZ2UiLCJnZXRFcnJvck1lc3NhZ2VzIiwiaXNGb3JtRGlzYWJsZWQiLCJpc1ZhbGlkIiwiaXNQcmlzdGluZSIsImlzRm9ybVN1Ym1pdHRlZCIsImlzUmVxdWlyZWQiLCJzaG93UmVxdWlyZWQiLCJzaG93RXJyb3IiLCJpc1ZhbGlkVmFsdWUiLCJwcm9wcyIsIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvSE9DLmpzIiwiZ2V0RGlzcGxheU5hbWUiLCJkaXNwbGF5TmFtZSIsIm5hbWUiLCJpbm5lclJlZiIsInByb3BzRm9yRWxlbWVudCIsInJlZiIsIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvTWl4aW4uanMiLCJQcm9wVHlwZXMiLCJ1dGlscyIsImNvbnZlcnRWYWxpZGF0aW9uc1RvT2JqZWN0IiwidmFsaWRhdGlvbnMiLCJzcGxpdCIsInZhbGlkYXRpb24iLCJhcmdzIiwidmFsaWRhdGVNZXRob2QiLCJhcmciLCJKU09OIiwicGFyc2UiLCJlIiwiZ2V0SW5pdGlhbFN0YXRlIiwiX3ZhbHVlIiwidmFsdWUiLCJfaXNSZXF1aXJlZCIsIl9pc1ZhbGlkIiwiX2lzUHJpc3RpbmUiLCJfcHJpc3RpbmVWYWx1ZSIsIl92YWxpZGF0aW9uRXJyb3IiLCJfZXh0ZXJuYWxFcnJvciIsIl9mb3JtU3VibWl0dGVkIiwiY29udGV4dFR5cGVzIiwiZm9ybXN5Iiwib2JqZWN0IiwiZ2V0RGVmYXVsdFByb3BzIiwidmFsaWRhdGlvbkVycm9yIiwidmFsaWRhdGlvbkVycm9ycyIsImNvbXBvbmVudFdpbGxNb3VudCIsImNvbmZpZ3VyZSIsInJlcXVpcmVkIiwiY29udGV4dCIsImF0dGFjaFRvRm9ybSIsImJpbmQiLCJjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzIiwibmV4dFByb3BzIiwiY29tcG9uZW50RGlkVXBkYXRlIiwicHJldlByb3BzIiwiaXNTYW1lIiwidmFsaWRhdGUiLCJjb21wb25lbnRXaWxsVW5tb3VudCIsImRldGFjaEZyb21Gb3JtIiwiX3ZhbGlkYXRpb25zIiwiX3JlcXVpcmVkVmFsaWRhdGlvbnMiLCJpc0RlZmF1bHRSZXF1aXJlZFZhbHVlIiwic2V0U3RhdGUiLCJzdGF0ZSIsIm1lc3NhZ2VzIiwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9tYWluLmpzIiwiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIiwiaW5kZXhPZiIsIl90eXBlb2YyIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJjb25zdHJ1Y3RvciIsIl90eXBlb2YiLCJGb3Jtc3kiLCJ2YWxpZGF0aW9uUnVsZXMiLCJmb3JtRGF0YVRvT2JqZWN0IiwiSE9DIiwiRGVjb3JhdG9yIiwib3B0aW9ucyIsImVtcHR5QXJyYXkiLCJkZWZhdWx0cyIsInBhc3NlZE9wdGlvbnMiLCJhZGRWYWxpZGF0aW9uUnVsZSIsImZ1bmMiLCJGb3JtIiwiaXNTdWJtaXR0aW5nIiwiY2FuQ2hhbmdlIiwib25TdWNjZXNzIiwib25FcnJvciIsIm9uU3VibWl0Iiwib25WYWxpZFN1Ym1pdCIsIm9uSW52YWxpZFN1Ym1pdCIsIm9uVmFsaWQiLCJvbkludmFsaWQiLCJvbkNoYW5nZSIsInByZXZlbnRFeHRlcm5hbEludmFsaWRhdGlvbiIsImNoaWxkQ29udGV4dFR5cGVzIiwiZ2V0Q2hpbGRDb250ZXh0IiwiX3RoaXMiLCJjb21wb25lbnQiLCJydW5WYWxpZGF0aW9uIiwiaW5wdXRzIiwiY29tcG9uZW50RGlkTW91bnQiLCJ2YWxpZGF0ZUZvcm0iLCJjb21wb25lbnRXaWxsVXBkYXRlIiwicHJldklucHV0TmFtZXMiLCJzZXRJbnB1dFZhbGlkYXRpb25FcnJvcnMiLCJuZXdJbnB1dE5hbWVzIiwiYXJyYXlzRGlmZmVyIiwicmVzZXQiLCJkYXRhIiwic2V0Rm9ybVByaXN0aW5lIiwicmVzZXRNb2RlbCIsInN1Ym1pdCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJtb2RlbCIsImdldE1vZGVsIiwidXBkYXRlSW5wdXRzV2l0aEVycm9yIiwibWFwTW9kZWwiLCJtYXBwaW5nIiwibWFwcGVkTW9kZWwiLCJrZXlBcnJheSIsImJhc2UiLCJjdXJyZW50S2V5IiwiY3VycmVudFZhbHVlcyIsImdldEN1cnJlbnRWYWx1ZXMiLCJlcnJvcnMiLCJhcHBseSIsImlzQ2hhbmdlZCIsImdldFByaXN0aW5lVmFsdWVzIiwiX3RoaXMyIiwiaW5kZXgiLCJmaW5kIiwic3RyaW5naWZ5IiwiZGlzYWJsZWQiLCJlcnJvciIsInZhbGlkYXRpb25SZXN1bHRzIiwicnVuUnVsZXMiLCJyZXF1aXJlZFJlc3VsdHMiLCJmYWlsZWQiLCJzdWNjZXNzIiwiZmlsdGVyIiwieCIsInBvcyIsImFyciIsInJlc3VsdHMiLCJ2YWxpZGF0aW9uTWV0aG9kIiwicHVzaCIsIl90aGlzMyIsIm9uVmFsaWRhdGlvbkNvbXBsZXRlIiwiYWxsSXNWYWxpZCIsImV2ZXJ5IiwiY29tcG9uZW50UG9zIiwic2xpY2UiLCJfcHJvcHMiLCJub25Gb3Jtc3lQcm9wcyIsImNoaWxkcmVuIiwiZGVmaW5lIiwiYW1kIiwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi91dGlscy5qcyIsImEiLCJiIiwiaXNEaWZmZXJlbnQiLCJpdGVtIiwib2JqZWN0c0RpZmZlciIsImNvbGxlY3Rpb24iLCJmbiIsImwiLCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL3ZhbGlkYXRpb25SdWxlcy5qcyIsIl9pc0V4aXN0eSIsInVuZGVmaW5lZCIsImlzRW1wdHkiLCJ2YWx1ZXMiLCJpc0V4aXN0eSIsIm1hdGNoUmVnZXhwIiwicmVnZXhwIiwidGVzdCIsImlzVW5kZWZpbmVkIiwiaXNFbXB0eVN0cmluZyIsImlzRW1haWwiLCJpc1VybCIsImlzVHJ1ZSIsImlzRmFsc2UiLCJpc051bWVyaWMiLCJpc0FscGhhIiwiaXNBbHBoYW51bWVyaWMiLCJpc0ludCIsImlzRmxvYXQiLCJpc1dvcmRzIiwiaXNTcGVjaWFsV29yZHMiLCJpc0xlbmd0aCIsImVxdWFscyIsImVxbCIsImVxdWFsc0ZpZWxkIiwiZmllbGQiLCJtYXhMZW5ndGgiLCJtaW5MZW5ndGgiLCIuL3NyYy9jb21wb25lbnRzL0lucHV0L0lucHV0LmpzIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwic2VsZiIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiY3JlYXRlIiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJkZWZpbmVQcm9wZXJ0eSIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJkZXNjcmlwdG9yIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiX3JlYWN0IiwiX3JlYWN0MiIsIl9mb3Jtc3lSZWFjdCIsIl9wcm9wVHlwZXMiLCJfcHJvcFR5cGVzMiIsIklucHV0IiwiX1JlYWN0JENvbXBvbmVudCIsImdldFByb3RvdHlwZU9mIiwiY2hhbmdlVmFsdWUiLCJjdXJyZW50VGFyZ2V0IiwidHlwZSIsImVycm9yTWVzc2FnZSIsImNsYXNzTmFtZSIsImxhYmVsIiwidG9Mb3dlckNhc2UiLCJwbGFjZWhvbGRlciIsInByb3BUeXBlcyIsInN0cmluZyIsImFueSIsImJvb2wiLCIuL3NyYy9wYWdlcy9Qcm9maWxlL1Byb2ZpbGUuanMiLCJtYXBTdGF0ZVRvUHJvcHMiLCJzdG9yZSIsInVwZGF0ZVByb2ZpbGVTdGF0dXMiLCJ1c2VycyIsImRlbGV0ZVByb2ZpbGVTdGF0dXMiLCJlcnJvclRleHQiLCJ1c2VyIiwibWFwRGlzcGF0Y2hUb1Byb3BzIiwiZGlzcGF0Y2giLCJ1cGRhdGVQcm9maWxlUmVxdWVzdCIsIl9yZWR1eCIsImJpbmRBY3Rpb25DcmVhdG9ycyIsIl91c2VycyIsImRlbGV0ZVVzZXJSZXF1ZXN0IiwiY2xlYXJTdGF0dXMiLCJjbGVhclVwZGF0ZVByb2ZpbGVTdGF0dXMiLCJ1cGxvYWRQaG90b0ZhaWx1cmUiLCJfZm9ybXN5UmVhY3QyIiwiX0lucHV0IiwiX0lucHV0MiIsIl9NZXNzYWdlIiwiX1BvcHVwIiwiX0J1dHRvbiIsIl9yZWFjdFJlZHV4IiwiUHJvZmlsZSIsIl9Db21wb25lbnQiLCJzZXRQb3B1cFNob3duIiwiaWQiLCJjdXJyZW50U3RhdGUiLCJwb3B1cFNob3duIiwidXBkYXRlUHJvZmlsZSIsImVtYWlsIiwicGFzc3dvcmQiLCJwYXNzd29yZFJlcGVhdCIsImF2YXRhciIsImJhc2U2NFN0ciIsIl9pZCIsImVuYWJsZUJ1dHRvbiIsImNhblN1Ym1pdCIsImRpc2FibGVCdXR0b24iLCJlZGl0RGF0YSIsImRlbGV0ZVVzZXIiLCJoYW5kbGVGaWxlU2VsZWN0IiwidXBkYXRlSW1hZ2VTdGF0dXMiLCJmaWxlcyIsImRhdGFUcmFuc2ZlciIsImZpbGUiLCJzaXplIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsIm9ubG9hZCIsInJlYWRlckV2ZW50IiwiYmluYXJ5U3RyaW5nIiwicmVzdWx0IiwiYnRvYSIsImltYWdlQmFzZTY0IiwicmVhZEFzQmluYXJ5U3RyaW5nIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uQ2xpY2siLCJzcmMiLCJhbHQiLCJpbnB1dCIsInBhc3N3b3JkT2xkIiwiZWwiLCJmaWVsZEltYWdlIiwib25Ecm9wIiwib25EcmFnT3ZlciIsImh0bWxGb3IiLCJNZXNzYWdlIiwic3RhdHVzIiwidGV4dCIsImhlYWRlciIsIlBvcHVwIiwiQnV0dG9uIiwib2tIYW5kbGVyIiwiaW5uZXJUZXh0Iiwic2V0VGltZW91dCIsImhpc3RvcnkiLCJjb25uZWN0IiwiLi9zcmMvcGFnZXMvUHJvZmlsZS9Qcm9maWxlLnNjc3MiXSwibWFwcGluZ3MiOiJBQUFBQSxjQUFjLElBRVJDLDZDQUNBLFNBQVVDLEVBQVFDLEVBQVNDLEdBRWpDLFlDT0EsSUFBSUMsR0FBUUQsRUFBUSxpQ0FDaEJFLEVBQVVGLEVBQVEsK0NBRXRCLFFBQXFCLEtBQVZDLEVBQ1QsS0FBTUUsT0FDSixvSkFNSixJQUFJQyxJQUF1QixHQUFJSCxHQUFNSSxXQUFZQyxPQUVqRFIsR0FBT0MsUUFBVUcsRUFDZkQsRUFBTUksVUFDTkosRUFBTU0sZUFDTkgsSURJSUksOENBQ0EsU0FBVVYsRUFBUUMsRUFBU0MsR0FFakMsWUVuQ0EsU0FBU1MsR0FBTUMsR0FDYixNQUFPQyxRQUFPQyxLQUFLRixHQUFRRyxPQUFPLFNBQVVDLEVBQVFDLEdBQ2xELEdBQUlDLEdBQVlELEVBQUlFLE1BQU0sV0FDdEJDLEVBQVFILEVBQUlFLE1BQU0sZUFDdEJDLElBQVNGLEVBQVUsSUFBSUcsT0FBT0QsR0FBT0UsSUFBSSxTQUFVTCxHQUNqRCxNQUFPQSxHQUFJTSxRQUFRLFNBQVUsS0FHL0IsS0FEQSxHQUFJQyxHQUFjUixFQUNYSSxFQUFNSyxRQUFRLENBQ25CLEdBQUlDLEdBQVVOLEVBQU1PLE9BRWhCRCxLQUFXRixHQUNiQSxFQUFjQSxFQUFZRSxJQUUxQkYsRUFBWUUsR0FBV04sRUFBTUssT0FBU0csTUFBTVIsRUFBTSxVQUFnQlIsRUFBT0ss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M0IsUUFBVWhLLE9BQzFCaU4sVUFBV3RCLEVBQUEzQixRQUFVd0MsT0FDckJsTixNQUFPcU0sRUFBQTNCLFFBQVVoSyxPQUNqQjBSLFFBQVMvRixFQUFBM0IsUUFBVWhLLE9BQ25CME4sWUFBYS9CLEVBQUEzQixRQUFVdEgsS0FDdkJ1SixLQUFNTixFQUFBM0IsUUFBVXdDLE9BQ2hCdlAsU0FBVTBPLEVBQUEzQixRQUFVeUMsSUFDcEJtQixtQkFBb0JqQyxFQUFBM0IsUUFBVXRILE9Wd3JDMUJrUCxtQ0FDQSxTQUFVcFksRUFBUUMiLCJmaWxlIjoiNi5pbmRleF9idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3ZWJwYWNrSnNvbnAoWzZdLHtcblxuLyoqKi8gXCIuL25vZGVfbW9kdWxlcy9jcmVhdGUtcmVhY3QtY2xhc3MvaW5kZXguanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIENvcHlyaWdodCAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKi9cblxuXG5cbnZhciBSZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC9yZWFjdC5qc1wiKTtcbnZhciBmYWN0b3J5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2NyZWF0ZS1yZWFjdC1jbGFzcy9mYWN0b3J5LmpzXCIpO1xuXG5pZiAodHlwZW9mIFJlYWN0ID09PSAndW5kZWZpbmVkJykge1xuICB0aHJvdyBFcnJvcignY3JlYXRlLXJlYWN0LWNsYXNzIGNvdWxkIG5vdCBmaW5kIHRoZSBSZWFjdCBvYmplY3QuIElmIHlvdSBhcmUgdXNpbmcgc2NyaXB0IHRhZ3MsICcgKyAnbWFrZSBzdXJlIHRoYXQgUmVhY3QgaXMgYmVpbmcgbG9hZGVkIGJlZm9yZSBjcmVhdGUtcmVhY3QtY2xhc3MuJyk7XG59XG5cbi8vIEhhY2sgdG8gZ3JhYiBOb29wVXBkYXRlUXVldWUgZnJvbSBpc29tb3JwaGljIFJlYWN0XG52YXIgUmVhY3ROb29wVXBkYXRlUXVldWUgPSBuZXcgUmVhY3QuQ29tcG9uZW50KCkudXBkYXRlcjtcblxubW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KFJlYWN0LkNvbXBvbmVudCwgUmVhY3QuaXNWYWxpZEVsZW1lbnQsIFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlKTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvZm9ybS1kYXRhLXRvLW9iamVjdC9pbmRleC5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5mdW5jdGlvbiB0b09iaihzb3VyY2UpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKHNvdXJjZSkucmVkdWNlKGZ1bmN0aW9uIChvdXRwdXQsIGtleSkge1xuICAgIHZhciBwYXJlbnRLZXkgPSBrZXkubWF0Y2goL1teXFxbXSovaSk7XG4gICAgdmFyIHBhdGhzID0ga2V5Lm1hdGNoKC9cXFsuKj9cXF0vZykgfHwgW107XG4gICAgcGF0aHMgPSBbcGFyZW50S2V5WzBdXS5jb25jYXQocGF0aHMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICByZXR1cm4ga2V5LnJlcGxhY2UoL1xcW3xcXF0vZywgJycpO1xuICAgIH0pO1xuICAgIHZhciBjdXJyZW50UGF0aCA9IG91dHB1dDtcbiAgICB3aGlsZSAocGF0aHMubGVuZ3RoKSB7XG4gICAgICB2YXIgcGF0aEtleSA9IHBhdGhzLnNoaWZ0KCk7XG5cbiAgICAgIGlmIChwYXRoS2V5IGluIGN1cnJlbnRQYXRoKSB7XG4gICAgICAgIGN1cnJlbnRQYXRoID0gY3VycmVudFBhdGhbcGF0aEtleV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50UGF0aFtwYXRoS2V5XSA9IHBhdGhzLmxlbmd0aCA/IGlzTmFOKHBhdGhzWzBdKSA/IHt9IDogW10gOiBzb3VyY2Vba2V5XTtcbiAgICAgICAgY3VycmVudFBhdGggPSBjdXJyZW50UGF0aFtwYXRoS2V5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb3V0cHV0O1xuICB9LCB7fSk7XG59XG5cbmZ1bmN0aW9uIGZyb21PYmoob2JqKSB7XG4gIGZ1bmN0aW9uIHJlY3VyKG5ld09iaiwgcHJvcE5hbWUsIGN1cnJWYWwpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShjdXJyVmFsKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoY3VyclZhbCkgPT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XG4gICAgICBPYmplY3Qua2V5cyhjdXJyVmFsKS5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHJlY3VyKG5ld09iaiwgcHJvcE5hbWUgKyBcIltcIiArIHYgKyBcIl1cIiwgY3VyclZhbFt2XSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBuZXdPYmo7XG4gICAgfVxuXG4gICAgbmV3T2JqW3Byb3BOYW1lXSA9IGN1cnJWYWw7XG4gICAgcmV0dXJuIG5ld09iajtcbiAgfVxuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcbiAgcmV0dXJuIGtleXMucmVkdWNlKGZ1bmN0aW9uIChuZXdPYmosIHByb3BOYW1lKSB7XG4gICAgcmV0dXJuIHJlY3VyKG5ld09iaiwgcHJvcE5hbWUsIG9ialtwcm9wTmFtZV0pO1xuICB9LCB7fSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBmcm9tT2JqOiBmcm9tT2JqLFxuICB0b09iajogdG9PYmpcbn07XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvRGVjb3JhdG9yLmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO2ZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9cmV0dXJuIHRhcmdldDtcbn07XG5cbnZhciBSZWFjdCA9IGdsb2JhbC5SZWFjdCB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcmVhY3QvcmVhY3QuanNcIik7XG52YXIgY3JlYXRlUmVhY3RDbGFzcyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9jcmVhdGUtcmVhY3QtY2xhc3MvaW5kZXguanNcIik7XG52YXIgTWl4aW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9NaXhpbi5qc1wiKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZnVuY3Rpb24gKENvbXBvbmVudCkge1xuICAgIHJldHVybiBjcmVhdGVSZWFjdENsYXNzKHtcbiAgICAgIG1peGluczogW01peGluXSxcbiAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDb21wb25lbnQsIF9leHRlbmRzKHtcbiAgICAgICAgICBzZXRWYWxpZGF0aW9uczogdGhpcy5zZXRWYWxpZGF0aW9ucyxcbiAgICAgICAgICBzZXRWYWx1ZTogdGhpcy5zZXRWYWx1ZSxcbiAgICAgICAgICByZXNldFZhbHVlOiB0aGlzLnJlc2V0VmFsdWUsXG4gICAgICAgICAgZ2V0VmFsdWU6IHRoaXMuZ2V0VmFsdWUsXG4gICAgICAgICAgaGFzVmFsdWU6IHRoaXMuaGFzVmFsdWUsXG4gICAgICAgICAgZ2V0RXJyb3JNZXNzYWdlOiB0aGlzLmdldEVycm9yTWVzc2FnZSxcbiAgICAgICAgICBnZXRFcnJvck1lc3NhZ2VzOiB0aGlzLmdldEVycm9yTWVzc2FnZXMsXG4gICAgICAgICAgaXNGb3JtRGlzYWJsZWQ6IHRoaXMuaXNGb3JtRGlzYWJsZWQsXG4gICAgICAgICAgaXNWYWxpZDogdGhpcy5pc1ZhbGlkLFxuICAgICAgICAgIGlzUHJpc3RpbmU6IHRoaXMuaXNQcmlzdGluZSxcbiAgICAgICAgICBpc0Zvcm1TdWJtaXR0ZWQ6IHRoaXMuaXNGb3JtU3VibWl0dGVkLFxuICAgICAgICAgIGlzUmVxdWlyZWQ6IHRoaXMuaXNSZXF1aXJlZCxcbiAgICAgICAgICBzaG93UmVxdWlyZWQ6IHRoaXMuc2hvd1JlcXVpcmVkLFxuICAgICAgICAgIHNob3dFcnJvcjogdGhpcy5zaG93RXJyb3IsXG4gICAgICAgICAgaXNWYWxpZFZhbHVlOiB0aGlzLmlzVmFsaWRWYWx1ZVxuICAgICAgICB9LCB0aGlzLnByb3BzKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59O1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy93ZWJwYWNrL2J1aWxkaW4vZ2xvYmFsLmpzXCIpKSlcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9IT0MuanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1yZXR1cm4gdGFyZ2V0O1xufTtcblxudmFyIFJlYWN0ID0gZ2xvYmFsLlJlYWN0IHx8IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC9yZWFjdC5qc1wiKTtcbnZhciBjcmVhdGVSZWFjdENsYXNzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2NyZWF0ZS1yZWFjdC1jbGFzcy9pbmRleC5qc1wiKTtcbnZhciBNaXhpbiA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL01peGluLmpzXCIpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gIHJldHVybiBjcmVhdGVSZWFjdENsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogJ0Zvcm1zeSgnICsgZ2V0RGlzcGxheU5hbWUoQ29tcG9uZW50KSArICcpJyxcbiAgICBtaXhpbnM6IFtNaXhpbl0sXG5cbiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBpbm5lclJlZiA9IHRoaXMucHJvcHMuaW5uZXJSZWY7XG5cbiAgICAgIHZhciBwcm9wc0ZvckVsZW1lbnQgPSBfZXh0ZW5kcyh7XG4gICAgICAgIHNldFZhbGlkYXRpb25zOiB0aGlzLnNldFZhbGlkYXRpb25zLFxuICAgICAgICBzZXRWYWx1ZTogdGhpcy5zZXRWYWx1ZSxcbiAgICAgICAgcmVzZXRWYWx1ZTogdGhpcy5yZXNldFZhbHVlLFxuICAgICAgICBnZXRWYWx1ZTogdGhpcy5nZXRWYWx1ZSxcbiAgICAgICAgaGFzVmFsdWU6IHRoaXMuaGFzVmFsdWUsXG4gICAgICAgIGdldEVycm9yTWVzc2FnZTogdGhpcy5nZXRFcnJvck1lc3NhZ2UsXG4gICAgICAgIGdldEVycm9yTWVzc2FnZXM6IHRoaXMuZ2V0RXJyb3JNZXNzYWdlcyxcbiAgICAgICAgaXNGb3JtRGlzYWJsZWQ6IHRoaXMuaXNGb3JtRGlzYWJsZWQsXG4gICAgICAgIGlzVmFsaWQ6IHRoaXMuaXNWYWxpZCxcbiAgICAgICAgaXNQcmlzdGluZTogdGhpcy5pc1ByaXN0aW5lLFxuICAgICAgICBpc0Zvcm1TdWJtaXR0ZWQ6IHRoaXMuaXNGb3JtU3VibWl0dGVkLFxuICAgICAgICBpc1JlcXVpcmVkOiB0aGlzLmlzUmVxdWlyZWQsXG4gICAgICAgIHNob3dSZXF1aXJlZDogdGhpcy5zaG93UmVxdWlyZWQsXG4gICAgICAgIHNob3dFcnJvcjogdGhpcy5zaG93RXJyb3IsXG4gICAgICAgIGlzVmFsaWRWYWx1ZTogdGhpcy5pc1ZhbGlkVmFsdWVcbiAgICAgIH0sIHRoaXMucHJvcHMpO1xuXG4gICAgICBpZiAoaW5uZXJSZWYpIHtcbiAgICAgICAgcHJvcHNGb3JFbGVtZW50LnJlZiA9IGlubmVyUmVmO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29tcG9uZW50LCBwcm9wc0ZvckVsZW1lbnQpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5mdW5jdGlvbiBnZXREaXNwbGF5TmFtZShDb21wb25lbnQpIHtcbiAgcmV0dXJuIENvbXBvbmVudC5kaXNwbGF5TmFtZSB8fCBDb21wb25lbnQubmFtZSB8fCAodHlwZW9mIENvbXBvbmVudCA9PT0gJ3N0cmluZycgPyBDb21wb25lbnQgOiAnQ29tcG9uZW50Jyk7XG59XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3dlYnBhY2svYnVpbGRpbi9nbG9iYWwuanNcIikpKVxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL01peGluLmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge1xuXG52YXIgUHJvcFR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3Byb3AtdHlwZXMvaW5kZXguanNcIik7XG52YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi91dGlscy5qc1wiKTtcbnZhciBSZWFjdCA9IGdsb2JhbC5SZWFjdCB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcmVhY3QvcmVhY3QuanNcIik7XG5cbnZhciBjb252ZXJ0VmFsaWRhdGlvbnNUb09iamVjdCA9IGZ1bmN0aW9uIGNvbnZlcnRWYWxpZGF0aW9uc1RvT2JqZWN0KHZhbGlkYXRpb25zKSB7XG5cbiAgaWYgKHR5cGVvZiB2YWxpZGF0aW9ucyA9PT0gJ3N0cmluZycpIHtcblxuICAgIHJldHVybiB2YWxpZGF0aW9ucy5zcGxpdCgvXFwsKD8hW157XFxbXSpbfVxcXV0pL2cpLnJlZHVjZShmdW5jdGlvbiAodmFsaWRhdGlvbnMsIHZhbGlkYXRpb24pIHtcbiAgICAgIHZhciBhcmdzID0gdmFsaWRhdGlvbi5zcGxpdCgnOicpO1xuICAgICAgdmFyIHZhbGlkYXRlTWV0aG9kID0gYXJncy5zaGlmdCgpO1xuXG4gICAgICBhcmdzID0gYXJncy5tYXAoZnVuY3Rpb24gKGFyZykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGFyZyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICByZXR1cm4gYXJnOyAvLyBJdCBpcyBhIHN0cmluZyBpZiBpdCBjYW4gbm90IHBhcnNlIGl0XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoYXJncy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRm9ybXN5IGRvZXMgbm90IHN1cHBvcnQgbXVsdGlwbGUgYXJncyBvbiBzdHJpbmcgdmFsaWRhdGlvbnMuIFVzZSBvYmplY3QgZm9ybWF0IG9mIHZhbGlkYXRpb25zIGluc3RlYWQuJyk7XG4gICAgICB9XG5cbiAgICAgIHZhbGlkYXRpb25zW3ZhbGlkYXRlTWV0aG9kXSA9IGFyZ3MubGVuZ3RoID8gYXJnc1swXSA6IHRydWU7XG4gICAgICByZXR1cm4gdmFsaWRhdGlvbnM7XG4gICAgfSwge30pO1xuICB9XG5cbiAgcmV0dXJuIHZhbGlkYXRpb25zIHx8IHt9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKCkge1xuICAgIHJldHVybiB7XG4gICAgICBfdmFsdWU6IHRoaXMucHJvcHMudmFsdWUsXG4gICAgICBfaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICBfaXNWYWxpZDogdHJ1ZSxcbiAgICAgIF9pc1ByaXN0aW5lOiB0cnVlLFxuICAgICAgX3ByaXN0aW5lVmFsdWU6IHRoaXMucHJvcHMudmFsdWUsXG4gICAgICBfdmFsaWRhdGlvbkVycm9yOiBbXSxcbiAgICAgIF9leHRlcm5hbEVycm9yOiBudWxsLFxuICAgICAgX2Zvcm1TdWJtaXR0ZWQ6IGZhbHNlXG4gICAgfTtcbiAgfSxcbiAgY29udGV4dFR5cGVzOiB7XG4gICAgZm9ybXN5OiBQcm9wVHlwZXMub2JqZWN0IC8vIFdoYXQgYWJvdXQgcmVxdWlyZWQ/XG4gIH0sXG4gIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24gZ2V0RGVmYXVsdFByb3BzKCkge1xuICAgIHJldHVybiB7XG4gICAgICB2YWxpZGF0aW9uRXJyb3I6ICcnLFxuICAgICAgdmFsaWRhdGlvbkVycm9yczoge31cbiAgICB9O1xuICB9LFxuXG4gIGNvbXBvbmVudFdpbGxNb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIHZhciBjb25maWd1cmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnNldFZhbGlkYXRpb25zKHRoaXMucHJvcHMudmFsaWRhdGlvbnMsIHRoaXMucHJvcHMucmVxdWlyZWQpO1xuXG4gICAgICAvLyBQYXNzIGEgZnVuY3Rpb24gaW5zdGVhZD9cbiAgICAgIHRoaXMuY29udGV4dC5mb3Jtc3kuYXR0YWNoVG9Gb3JtKHRoaXMpO1xuICAgICAgLy90aGlzLnByb3BzLl9hdHRhY2hUb0Zvcm0odGhpcyk7XG4gICAgfS5iaW5kKHRoaXMpO1xuXG4gICAgaWYgKCF0aGlzLnByb3BzLm5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRm9ybSBJbnB1dCByZXF1aXJlcyBhIG5hbWUgcHJvcGVydHkgd2hlbiB1c2VkJyk7XG4gICAgfVxuXG4gICAgLypcbiAgICBpZiAoIXRoaXMucHJvcHMuX2F0dGFjaFRvRm9ybSkge1xuICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNNb3VudGVkKCkpIHJldHVybjtcbiAgICAgICAgaWYgKCF0aGlzLnByb3BzLl9hdHRhY2hUb0Zvcm0pIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm0gTWl4aW4gcmVxdWlyZXMgY29tcG9uZW50IHRvIGJlIG5lc3RlZCBpbiBhIEZvcm0nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25maWd1cmUoKTtcbiAgICAgIH0uYmluZCh0aGlzKSwgMCk7XG4gICAgfVxuICAgICovXG4gICAgY29uZmlndXJlKCk7XG4gIH0sXG5cbiAgLy8gV2UgaGF2ZSB0byBtYWtlIHRoZSB2YWxpZGF0ZSBtZXRob2QgaXMga2VwdCB3aGVuIG5ldyBwcm9wcyBhcmUgYWRkZWRcbiAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICB0aGlzLnNldFZhbGlkYXRpb25zKG5leHRQcm9wcy52YWxpZGF0aW9ucywgbmV4dFByb3BzLnJlcXVpcmVkKTtcbiAgfSxcblxuICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcblxuICAgIC8vIElmIHRoZSB2YWx1ZSBwYXNzZWQgaGFzIGNoYW5nZWQsIHNldCBpdC4gSWYgdmFsdWUgaXMgbm90IHBhc3NlZCBpdCB3aWxsXG4gICAgLy8gaW50ZXJuYWxseSB1cGRhdGUsIGFuZCB0aGlzIHdpbGwgbmV2ZXIgcnVuXG4gICAgaWYgKCF1dGlscy5pc1NhbWUodGhpcy5wcm9wcy52YWx1ZSwgcHJldlByb3BzLnZhbHVlKSkge1xuICAgICAgdGhpcy5zZXRWYWx1ZSh0aGlzLnByb3BzLnZhbHVlKTtcbiAgICB9XG5cbiAgICAvLyBJZiB2YWxpZGF0aW9ucyBvciByZXF1aXJlZCBpcyBjaGFuZ2VkLCBydW4gYSBuZXcgdmFsaWRhdGlvblxuICAgIGlmICghdXRpbHMuaXNTYW1lKHRoaXMucHJvcHMudmFsaWRhdGlvbnMsIHByZXZQcm9wcy52YWxpZGF0aW9ucykgfHwgIXV0aWxzLmlzU2FtZSh0aGlzLnByb3BzLnJlcXVpcmVkLCBwcmV2UHJvcHMucmVxdWlyZWQpKSB7XG4gICAgICB0aGlzLmNvbnRleHQuZm9ybXN5LnZhbGlkYXRlKHRoaXMpO1xuICAgIH1cbiAgfSxcblxuICAvLyBEZXRhY2ggaXQgd2hlbiBjb21wb25lbnQgdW5tb3VudHNcbiAgY29tcG9uZW50V2lsbFVubW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMuY29udGV4dC5mb3Jtc3kuZGV0YWNoRnJvbUZvcm0odGhpcyk7XG4gICAgLy90aGlzLnByb3BzLl9kZXRhY2hGcm9tRm9ybSh0aGlzKTtcbiAgfSxcblxuICBzZXRWYWxpZGF0aW9uczogZnVuY3Rpb24gc2V0VmFsaWRhdGlvbnModmFsaWRhdGlvbnMsIHJlcXVpcmVkKSB7XG5cbiAgICAvLyBBZGQgdmFsaWRhdGlvbnMgdG8gdGhlIHN0b3JlIGl0c2VsZiBhcyB0aGUgcHJvcHMgb2JqZWN0IGNhbiBub3QgYmUgbW9kaWZpZWRcbiAgICB0aGlzLl92YWxpZGF0aW9ucyA9IGNvbnZlcnRWYWxpZGF0aW9uc1RvT2JqZWN0KHZhbGlkYXRpb25zKSB8fCB7fTtcbiAgICB0aGlzLl9yZXF1aXJlZFZhbGlkYXRpb25zID0gcmVxdWlyZWQgPT09IHRydWUgPyB7IGlzRGVmYXVsdFJlcXVpcmVkVmFsdWU6IHRydWUgfSA6IGNvbnZlcnRWYWxpZGF0aW9uc1RvT2JqZWN0KHJlcXVpcmVkKTtcbiAgfSxcblxuICAvLyBXZSB2YWxpZGF0ZSBhZnRlciB0aGUgdmFsdWUgaGFzIGJlZW4gc2V0XG4gIHNldFZhbHVlOiBmdW5jdGlvbiBzZXRWYWx1ZSh2YWx1ZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgX3ZhbHVlOiB2YWx1ZSxcbiAgICAgIF9pc1ByaXN0aW5lOiBmYWxzZVxuICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuY29udGV4dC5mb3Jtc3kudmFsaWRhdGUodGhpcyk7XG4gICAgICAvL3RoaXMucHJvcHMuX3ZhbGlkYXRlKHRoaXMpO1xuICAgIH0uYmluZCh0aGlzKSk7XG4gIH0sXG4gIHJlc2V0VmFsdWU6IGZ1bmN0aW9uIHJlc2V0VmFsdWUoKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBfdmFsdWU6IHRoaXMuc3RhdGUuX3ByaXN0aW5lVmFsdWUsXG4gICAgICBfaXNQcmlzdGluZTogdHJ1ZVxuICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuY29udGV4dC5mb3Jtc3kudmFsaWRhdGUodGhpcyk7XG4gICAgICAvL3RoaXMucHJvcHMuX3ZhbGlkYXRlKHRoaXMpO1xuICAgIH0pO1xuICB9LFxuICBnZXRWYWx1ZTogZnVuY3Rpb24gZ2V0VmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX3ZhbHVlO1xuICB9LFxuICBoYXNWYWx1ZTogZnVuY3Rpb24gaGFzVmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX3ZhbHVlICE9PSAnJztcbiAgfSxcbiAgZ2V0RXJyb3JNZXNzYWdlOiBmdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2UoKSB7XG4gICAgdmFyIG1lc3NhZ2VzID0gdGhpcy5nZXRFcnJvck1lc3NhZ2VzKCk7XG4gICAgcmV0dXJuIG1lc3NhZ2VzLmxlbmd0aCA/IG1lc3NhZ2VzWzBdIDogbnVsbDtcbiAgfSxcbiAgZ2V0RXJyb3JNZXNzYWdlczogZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlcygpIHtcbiAgICByZXR1cm4gIXRoaXMuaXNWYWxpZCgpIHx8IHRoaXMuc2hvd1JlcXVpcmVkKCkgPyB0aGlzLnN0YXRlLl9leHRlcm5hbEVycm9yIHx8IHRoaXMuc3RhdGUuX3ZhbGlkYXRpb25FcnJvciB8fCBbXSA6IFtdO1xuICB9LFxuICBpc0Zvcm1EaXNhYmxlZDogZnVuY3Rpb24gaXNGb3JtRGlzYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGV4dC5mb3Jtc3kuaXNGb3JtRGlzYWJsZWQoKTtcbiAgICAvL3JldHVybiB0aGlzLnByb3BzLl9pc0Zvcm1EaXNhYmxlZCgpO1xuICB9LFxuICBpc1ZhbGlkOiBmdW5jdGlvbiBpc1ZhbGlkKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLl9pc1ZhbGlkO1xuICB9LFxuICBpc1ByaXN0aW5lOiBmdW5jdGlvbiBpc1ByaXN0aW5lKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLl9pc1ByaXN0aW5lO1xuICB9LFxuICBpc0Zvcm1TdWJtaXR0ZWQ6IGZ1bmN0aW9uIGlzRm9ybVN1Ym1pdHRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5fZm9ybVN1Ym1pdHRlZDtcbiAgfSxcbiAgaXNSZXF1aXJlZDogZnVuY3Rpb24gaXNSZXF1aXJlZCgpIHtcbiAgICByZXR1cm4gISF0aGlzLnByb3BzLnJlcXVpcmVkO1xuICB9LFxuICBzaG93UmVxdWlyZWQ6IGZ1bmN0aW9uIHNob3dSZXF1aXJlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5faXNSZXF1aXJlZDtcbiAgfSxcbiAgc2hvd0Vycm9yOiBmdW5jdGlvbiBzaG93RXJyb3IoKSB7XG4gICAgcmV0dXJuICF0aGlzLnNob3dSZXF1aXJlZCgpICYmICF0aGlzLmlzVmFsaWQoKTtcbiAgfSxcbiAgaXNWYWxpZFZhbHVlOiBmdW5jdGlvbiBpc1ZhbGlkVmFsdWUodmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZXh0LmZvcm1zeS5pc1ZhbGlkVmFsdWUuY2FsbChudWxsLCB0aGlzLCB2YWx1ZSk7XG4gICAgLy9yZXR1cm4gdGhpcy5wcm9wcy5faXNWYWxpZFZhbHVlLmNhbGwobnVsbCwgdGhpcywgdmFsdWUpO1xuICB9XG59O1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy93ZWJwYWNrL2J1aWxkaW4vZ2xvYmFsLmpzXCIpKSlcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9tYWluLmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge1xuXG52YXIgX3R5cGVvZjIgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO2ZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9cmV0dXJuIHRhcmdldDtcbn07XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIF90eXBlb2YyKFN5bWJvbC5pdGVyYXRvcikgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiB0eXBlb2Ygb2JqID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YyKG9iaik7XG59IDogZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iaiA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mMihvYmopO1xufTtcblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKG9iaiwga2V5cykge1xuICB2YXIgdGFyZ2V0ID0ge307Zm9yICh2YXIgaSBpbiBvYmopIHtcbiAgICBpZiAoa2V5cy5pbmRleE9mKGkpID49IDApIGNvbnRpbnVlO2lmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgaSkpIGNvbnRpbnVlO3RhcmdldFtpXSA9IG9ialtpXTtcbiAgfXJldHVybiB0YXJnZXQ7XG59XG5cbnZhciBQcm9wVHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9pbmRleC5qc1wiKTtcbnZhciBSZWFjdCA9IGdsb2JhbC5SZWFjdCB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcmVhY3QvcmVhY3QuanNcIik7XG52YXIgY3JlYXRlUmVhY3RDbGFzcyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9jcmVhdGUtcmVhY3QtY2xhc3MvaW5kZXguanNcIik7XG52YXIgRm9ybXN5ID0ge307XG52YXIgdmFsaWRhdGlvblJ1bGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvdmFsaWRhdGlvblJ1bGVzLmpzXCIpO1xudmFyIGZvcm1EYXRhVG9PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvZm9ybS1kYXRhLXRvLW9iamVjdC9pbmRleC5qc1wiKTtcbnZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL3V0aWxzLmpzXCIpO1xudmFyIE1peGluID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvTWl4aW4uanNcIik7XG52YXIgSE9DID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvSE9DLmpzXCIpO1xudmFyIERlY29yYXRvciA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL0RlY29yYXRvci5qc1wiKTtcbnZhciBvcHRpb25zID0ge307XG52YXIgZW1wdHlBcnJheSA9IFtdO1xuXG5Gb3Jtc3kuTWl4aW4gPSBNaXhpbjtcbkZvcm1zeS5IT0MgPSBIT0M7XG5Gb3Jtc3kuRGVjb3JhdG9yID0gRGVjb3JhdG9yO1xuXG5Gb3Jtc3kuZGVmYXVsdHMgPSBmdW5jdGlvbiAocGFzc2VkT3B0aW9ucykge1xuICBvcHRpb25zID0gcGFzc2VkT3B0aW9ucztcbn07XG5cbkZvcm1zeS5hZGRWYWxpZGF0aW9uUnVsZSA9IGZ1bmN0aW9uIChuYW1lLCBmdW5jKSB7XG4gIHZhbGlkYXRpb25SdWxlc1tuYW1lXSA9IGZ1bmM7XG59O1xuXG5Gb3Jtc3kuRm9ybSA9IGNyZWF0ZVJlYWN0Q2xhc3Moe1xuICBkaXNwbGF5TmFtZTogJ0Zvcm1zeScsXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpc1ZhbGlkOiB0cnVlLFxuICAgICAgaXNTdWJtaXR0aW5nOiBmYWxzZSxcbiAgICAgIGNhbkNoYW5nZTogZmFsc2VcbiAgICB9O1xuICB9LFxuICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgb25TdWNjZXNzOiBmdW5jdGlvbiBvblN1Y2Nlc3MoKSB7fSxcbiAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uIG9uRXJyb3IoKSB7fSxcbiAgICAgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdCgpIHt9LFxuICAgICAgb25WYWxpZFN1Ym1pdDogZnVuY3Rpb24gb25WYWxpZFN1Ym1pdCgpIHt9LFxuICAgICAgb25JbnZhbGlkU3VibWl0OiBmdW5jdGlvbiBvbkludmFsaWRTdWJtaXQoKSB7fSxcbiAgICAgIG9uVmFsaWQ6IGZ1bmN0aW9uIG9uVmFsaWQoKSB7fSxcbiAgICAgIG9uSW52YWxpZDogZnVuY3Rpb24gb25JbnZhbGlkKCkge30sXG4gICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoKSB7fSxcbiAgICAgIHZhbGlkYXRpb25FcnJvcnM6IG51bGwsXG4gICAgICBwcmV2ZW50RXh0ZXJuYWxJbnZhbGlkYXRpb246IGZhbHNlXG4gICAgfTtcbiAgfSxcblxuICBjaGlsZENvbnRleHRUeXBlczoge1xuICAgIGZvcm1zeTogUHJvcFR5cGVzLm9iamVjdFxuICB9LFxuICBnZXRDaGlsZENvbnRleHQ6IGZ1bmN0aW9uIGdldENoaWxkQ29udGV4dCgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGZvcm1zeToge1xuICAgICAgICBhdHRhY2hUb0Zvcm06IHRoaXMuYXR0YWNoVG9Gb3JtLFxuICAgICAgICBkZXRhY2hGcm9tRm9ybTogdGhpcy5kZXRhY2hGcm9tRm9ybSxcbiAgICAgICAgdmFsaWRhdGU6IHRoaXMudmFsaWRhdGUsXG4gICAgICAgIGlzRm9ybURpc2FibGVkOiB0aGlzLmlzRm9ybURpc2FibGVkLFxuICAgICAgICBpc1ZhbGlkVmFsdWU6IGZ1bmN0aW9uIGlzVmFsaWRWYWx1ZShjb21wb25lbnQsIHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLnJ1blZhbGlkYXRpb24oY29tcG9uZW50LCB2YWx1ZSkuaXNWYWxpZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH0sXG5cbiAgLy8gQWRkIGEgbWFwIHRvIHN0b3JlIHRoZSBpbnB1dHMgb2YgdGhlIGZvcm0sIGEgbW9kZWwgdG8gc3RvcmVcbiAgLy8gdGhlIHZhbHVlcyBvZiB0aGUgZm9ybSBhbmQgcmVnaXN0ZXIgY2hpbGQgaW5wdXRzXG4gIGNvbXBvbmVudFdpbGxNb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIHRoaXMuaW5wdXRzID0gW107XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMudmFsaWRhdGVGb3JtKCk7XG4gIH0sXG5cbiAgY29tcG9uZW50V2lsbFVwZGF0ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVwZGF0ZSgpIHtcbiAgICAvLyBLZWVwIGEgcmVmZXJlbmNlIHRvIGlucHV0IG5hbWVzIGJlZm9yZSBmb3JtIHVwZGF0ZXMsXG4gICAgLy8gdG8gY2hlY2sgaWYgaW5wdXRzIGhhcyBjaGFuZ2VkIGFmdGVyIHJlbmRlclxuICAgIHRoaXMucHJldklucHV0TmFtZXMgPSB0aGlzLmlucHV0cy5tYXAoZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgcmV0dXJuIGNvbXBvbmVudC5wcm9wcy5uYW1lO1xuICAgIH0pO1xuICB9LFxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKCkge1xuXG4gICAgaWYgKHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9ycyAmJiBfdHlwZW9mKHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9ycykgPT09ICdvYmplY3QnICYmIE9iamVjdC5rZXlzKHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9ycykubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5zZXRJbnB1dFZhbGlkYXRpb25FcnJvcnModGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzKTtcbiAgICB9XG5cbiAgICB2YXIgbmV3SW5wdXROYW1lcyA9IHRoaXMuaW5wdXRzLm1hcChmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICByZXR1cm4gY29tcG9uZW50LnByb3BzLm5hbWU7XG4gICAgfSk7XG4gICAgaWYgKHV0aWxzLmFycmF5c0RpZmZlcih0aGlzLnByZXZJbnB1dE5hbWVzLCBuZXdJbnB1dE5hbWVzKSkge1xuICAgICAgdGhpcy52YWxpZGF0ZUZvcm0oKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gQWxsb3cgcmVzZXR0aW5nIHRvIHNwZWNpZmllZCBkYXRhXG4gIHJlc2V0OiBmdW5jdGlvbiByZXNldChkYXRhKSB7XG4gICAgdGhpcy5zZXRGb3JtUHJpc3RpbmUodHJ1ZSk7XG4gICAgdGhpcy5yZXNldE1vZGVsKGRhdGEpO1xuICB9LFxuXG4gIC8vIFVwZGF0ZSBtb2RlbCwgc3VibWl0IHRvIHVybCBwcm9wIGFuZCBzZW5kIHRoZSBtb2RlbFxuICBzdWJtaXQ6IGZ1bmN0aW9uIHN1Ym1pdChldmVudCkge1xuXG4gICAgZXZlbnQgJiYgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIC8vIFRyaWdnZXIgZm9ybSBhcyBub3QgcHJpc3RpbmUuXG4gICAgLy8gSWYgYW55IGlucHV0cyBoYXZlIG5vdCBiZWVuIHRvdWNoZWQgeWV0IHRoaXMgd2lsbCBtYWtlIHRoZW0gZGlydHlcbiAgICAvLyBzbyB2YWxpZGF0aW9uIGJlY29tZXMgdmlzaWJsZSAoaWYgYmFzZWQgb24gaXNQcmlzdGluZSlcbiAgICB0aGlzLnNldEZvcm1QcmlzdGluZShmYWxzZSk7XG4gICAgdmFyIG1vZGVsID0gdGhpcy5nZXRNb2RlbCgpO1xuICAgIHRoaXMucHJvcHMub25TdWJtaXQobW9kZWwsIHRoaXMucmVzZXRNb2RlbCwgdGhpcy51cGRhdGVJbnB1dHNXaXRoRXJyb3IpO1xuICAgIHRoaXMuc3RhdGUuaXNWYWxpZCA/IHRoaXMucHJvcHMub25WYWxpZFN1Ym1pdChtb2RlbCwgdGhpcy5yZXNldE1vZGVsLCB0aGlzLnVwZGF0ZUlucHV0c1dpdGhFcnJvcikgOiB0aGlzLnByb3BzLm9uSW52YWxpZFN1Ym1pdChtb2RlbCwgdGhpcy5yZXNldE1vZGVsLCB0aGlzLnVwZGF0ZUlucHV0c1dpdGhFcnJvcik7XG4gIH0sXG5cbiAgbWFwTW9kZWw6IGZ1bmN0aW9uIG1hcE1vZGVsKG1vZGVsKSB7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5tYXBwaW5nKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5tYXBwaW5nKG1vZGVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZvcm1EYXRhVG9PYmplY3QudG9PYmooT2JqZWN0LmtleXMobW9kZWwpLnJlZHVjZShmdW5jdGlvbiAobWFwcGVkTW9kZWwsIGtleSkge1xuXG4gICAgICAgIHZhciBrZXlBcnJheSA9IGtleS5zcGxpdCgnLicpO1xuICAgICAgICB2YXIgYmFzZSA9IG1hcHBlZE1vZGVsO1xuICAgICAgICB3aGlsZSAoa2V5QXJyYXkubGVuZ3RoKSB7XG4gICAgICAgICAgdmFyIGN1cnJlbnRLZXkgPSBrZXlBcnJheS5zaGlmdCgpO1xuICAgICAgICAgIGJhc2UgPSBiYXNlW2N1cnJlbnRLZXldID0ga2V5QXJyYXkubGVuZ3RoID8gYmFzZVtjdXJyZW50S2V5XSB8fCB7fSA6IG1vZGVsW2tleV07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWFwcGVkTW9kZWw7XG4gICAgICB9LCB7fSkpO1xuICAgIH1cbiAgfSxcblxuICBnZXRNb2RlbDogZnVuY3Rpb24gZ2V0TW9kZWwoKSB7XG4gICAgdmFyIGN1cnJlbnRWYWx1ZXMgPSB0aGlzLmdldEN1cnJlbnRWYWx1ZXMoKTtcbiAgICByZXR1cm4gdGhpcy5tYXBNb2RlbChjdXJyZW50VmFsdWVzKTtcbiAgfSxcblxuICAvLyBSZXNldCBlYWNoIGtleSBpbiB0aGUgbW9kZWwgdG8gdGhlIG9yaWdpbmFsIC8gaW5pdGlhbCAvIHNwZWNpZmllZCB2YWx1ZVxuICByZXNldE1vZGVsOiBmdW5jdGlvbiByZXNldE1vZGVsKGRhdGEpIHtcbiAgICB0aGlzLmlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgIHZhciBuYW1lID0gY29tcG9uZW50LnByb3BzLm5hbWU7XG4gICAgICBpZiAoZGF0YSAmJiBkYXRhLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIGNvbXBvbmVudC5zZXRWYWx1ZShkYXRhW25hbWVdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbXBvbmVudC5yZXNldFZhbHVlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy52YWxpZGF0ZUZvcm0oKTtcbiAgfSxcblxuICBzZXRJbnB1dFZhbGlkYXRpb25FcnJvcnM6IGZ1bmN0aW9uIHNldElucHV0VmFsaWRhdGlvbkVycm9ycyhlcnJvcnMpIHtcbiAgICB0aGlzLmlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgIHZhciBuYW1lID0gY29tcG9uZW50LnByb3BzLm5hbWU7XG4gICAgICB2YXIgYXJncyA9IFt7XG4gICAgICAgIF9pc1ZhbGlkOiAhKG5hbWUgaW4gZXJyb3JzKSxcbiAgICAgICAgX3ZhbGlkYXRpb25FcnJvcjogdHlwZW9mIGVycm9yc1tuYW1lXSA9PT0gJ3N0cmluZycgPyBbZXJyb3JzW25hbWVdXSA6IGVycm9yc1tuYW1lXVxuICAgICAgfV07XG4gICAgICBjb21wb25lbnQuc2V0U3RhdGUuYXBwbHkoY29tcG9uZW50LCBhcmdzKTtcbiAgICB9KTtcbiAgfSxcblxuICAvLyBDaGVja3MgaWYgdGhlIHZhbHVlcyBoYXZlIGNoYW5nZWQgZnJvbSB0aGVpciBpbml0aWFsIHZhbHVlXG4gIGlzQ2hhbmdlZDogZnVuY3Rpb24gaXNDaGFuZ2VkKCkge1xuICAgIHJldHVybiAhdXRpbHMuaXNTYW1lKHRoaXMuZ2V0UHJpc3RpbmVWYWx1ZXMoKSwgdGhpcy5nZXRDdXJyZW50VmFsdWVzKCkpO1xuICB9LFxuXG4gIGdldFByaXN0aW5lVmFsdWVzOiBmdW5jdGlvbiBnZXRQcmlzdGluZVZhbHVlcygpIHtcbiAgICByZXR1cm4gdGhpcy5pbnB1dHMucmVkdWNlKGZ1bmN0aW9uIChkYXRhLCBjb21wb25lbnQpIHtcbiAgICAgIHZhciBuYW1lID0gY29tcG9uZW50LnByb3BzLm5hbWU7XG4gICAgICBkYXRhW25hbWVdID0gY29tcG9uZW50LnByb3BzLnZhbHVlO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSwge30pO1xuICB9LFxuXG4gIC8vIEdvIHRocm91Z2ggZXJyb3JzIGZyb20gc2VydmVyIGFuZCBncmFiIHRoZSBjb21wb25lbnRzXG4gIC8vIHN0b3JlZCBpbiB0aGUgaW5wdXRzIG1hcC4gQ2hhbmdlIHRoZWlyIHN0YXRlIHRvIGludmFsaWRcbiAgLy8gYW5kIHNldCB0aGUgc2VydmVyRXJyb3IgbWVzc2FnZVxuICB1cGRhdGVJbnB1dHNXaXRoRXJyb3I6IGZ1bmN0aW9uIHVwZGF0ZUlucHV0c1dpdGhFcnJvcihlcnJvcnMpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIE9iamVjdC5rZXlzKGVycm9ycykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSwgaW5kZXgpIHtcbiAgICAgIHZhciBjb21wb25lbnQgPSB1dGlscy5maW5kKF90aGlzMi5pbnB1dHMsIGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudC5wcm9wcy5uYW1lID09PSBuYW1lO1xuICAgICAgfSk7XG4gICAgICBpZiAoIWNvbXBvbmVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBhcmUgdHJ5aW5nIHRvIHVwZGF0ZSBhbiBpbnB1dCB0aGF0IGRvZXMgbm90IGV4aXN0LiAnICsgJ1ZlcmlmeSBlcnJvcnMgb2JqZWN0IHdpdGggaW5wdXQgbmFtZXMuICcgKyBKU09OLnN0cmluZ2lmeShlcnJvcnMpKTtcbiAgICAgIH1cbiAgICAgIHZhciBhcmdzID0gW3tcbiAgICAgICAgX2lzVmFsaWQ6IF90aGlzMi5wcm9wcy5wcmV2ZW50RXh0ZXJuYWxJbnZhbGlkYXRpb24gfHwgZmFsc2UsXG4gICAgICAgIF9leHRlcm5hbEVycm9yOiB0eXBlb2YgZXJyb3JzW25hbWVdID09PSAnc3RyaW5nJyA/IFtlcnJvcnNbbmFtZV1dIDogZXJyb3JzW25hbWVdXG4gICAgICB9XTtcbiAgICAgIGNvbXBvbmVudC5zZXRTdGF0ZS5hcHBseShjb21wb25lbnQsIGFyZ3MpO1xuICAgIH0pO1xuICB9LFxuXG4gIGlzRm9ybURpc2FibGVkOiBmdW5jdGlvbiBpc0Zvcm1EaXNhYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5kaXNhYmxlZDtcbiAgfSxcblxuICBnZXRDdXJyZW50VmFsdWVzOiBmdW5jdGlvbiBnZXRDdXJyZW50VmFsdWVzKCkge1xuICAgIHJldHVybiB0aGlzLmlucHV0cy5yZWR1Y2UoZnVuY3Rpb24gKGRhdGEsIGNvbXBvbmVudCkge1xuICAgICAgdmFyIG5hbWUgPSBjb21wb25lbnQucHJvcHMubmFtZTtcbiAgICAgIGRhdGFbbmFtZV0gPSBjb21wb25lbnQuc3RhdGUuX3ZhbHVlO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSwge30pO1xuICB9LFxuXG4gIHNldEZvcm1QcmlzdGluZTogZnVuY3Rpb24gc2V0Rm9ybVByaXN0aW5lKGlzUHJpc3RpbmUpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIF9mb3JtU3VibWl0dGVkOiAhaXNQcmlzdGluZVxuICAgIH0pO1xuXG4gICAgLy8gSXRlcmF0ZSB0aHJvdWdoIGVhY2ggY29tcG9uZW50IGFuZCBzZXQgaXQgYXMgcHJpc3RpbmVcbiAgICAvLyBvciBcImRpcnR5XCIuXG4gICAgdGhpcy5pbnB1dHMuZm9yRWFjaChmdW5jdGlvbiAoY29tcG9uZW50LCBpbmRleCkge1xuICAgICAgY29tcG9uZW50LnNldFN0YXRlKHtcbiAgICAgICAgX2Zvcm1TdWJtaXR0ZWQ6ICFpc1ByaXN0aW5lLFxuICAgICAgICBfaXNQcmlzdGluZTogaXNQcmlzdGluZVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLy8gVXNlIHRoZSBiaW5kZWQgdmFsdWVzIGFuZCB0aGUgYWN0dWFsIGlucHV0IHZhbHVlIHRvXG4gIC8vIHZhbGlkYXRlIHRoZSBpbnB1dCBhbmQgc2V0IGl0cyBzdGF0ZS4gVGhlbiBjaGVjayB0aGVcbiAgLy8gc3RhdGUgb2YgdGhlIGZvcm0gaXRzZWxmXG4gIHZhbGlkYXRlOiBmdW5jdGlvbiB2YWxpZGF0ZShjb21wb25lbnQpIHtcblxuICAgIC8vIFRyaWdnZXIgb25DaGFuZ2VcbiAgICBpZiAodGhpcy5zdGF0ZS5jYW5DaGFuZ2UpIHtcbiAgICAgIHRoaXMucHJvcHMub25DaGFuZ2UodGhpcy5nZXRDdXJyZW50VmFsdWVzKCksIHRoaXMuaXNDaGFuZ2VkKCkpO1xuICAgIH1cblxuICAgIHZhciB2YWxpZGF0aW9uID0gdGhpcy5ydW5WYWxpZGF0aW9uKGNvbXBvbmVudCk7XG4gICAgLy8gUnVuIHRocm91Z2ggdGhlIHZhbGlkYXRpb25zLCBzcGxpdCB0aGVtIHVwIGFuZCBjYWxsXG4gICAgLy8gdGhlIHZhbGlkYXRvciBJRiB0aGVyZSBpcyBhIHZhbHVlIG9yIGl0IGlzIHJlcXVpcmVkXG4gICAgY29tcG9uZW50LnNldFN0YXRlKHtcbiAgICAgIF9pc1ZhbGlkOiB2YWxpZGF0aW9uLmlzVmFsaWQsXG4gICAgICBfaXNSZXF1aXJlZDogdmFsaWRhdGlvbi5pc1JlcXVpcmVkLFxuICAgICAgX3ZhbGlkYXRpb25FcnJvcjogdmFsaWRhdGlvbi5lcnJvcixcbiAgICAgIF9leHRlcm5hbEVycm9yOiBudWxsXG4gICAgfSwgdGhpcy52YWxpZGF0ZUZvcm0pO1xuICB9LFxuXG4gIC8vIENoZWNrcyB2YWxpZGF0aW9uIG9uIGN1cnJlbnQgdmFsdWUgb3IgYSBwYXNzZWQgdmFsdWVcbiAgcnVuVmFsaWRhdGlvbjogZnVuY3Rpb24gcnVuVmFsaWRhdGlvbihjb21wb25lbnQsIHZhbHVlKSB7XG5cbiAgICB2YXIgY3VycmVudFZhbHVlcyA9IHRoaXMuZ2V0Q3VycmVudFZhbHVlcygpO1xuICAgIHZhciB2YWxpZGF0aW9uRXJyb3JzID0gY29tcG9uZW50LnByb3BzLnZhbGlkYXRpb25FcnJvcnM7XG4gICAgdmFyIHZhbGlkYXRpb25FcnJvciA9IGNvbXBvbmVudC5wcm9wcy52YWxpZGF0aW9uRXJyb3I7XG4gICAgdmFsdWUgPSBhcmd1bWVudHMubGVuZ3RoID09PSAyID8gdmFsdWUgOiBjb21wb25lbnQuc3RhdGUuX3ZhbHVlO1xuXG4gICAgdmFyIHZhbGlkYXRpb25SZXN1bHRzID0gdGhpcy5ydW5SdWxlcyh2YWx1ZSwgY3VycmVudFZhbHVlcywgY29tcG9uZW50Ll92YWxpZGF0aW9ucyk7XG4gICAgdmFyIHJlcXVpcmVkUmVzdWx0cyA9IHRoaXMucnVuUnVsZXModmFsdWUsIGN1cnJlbnRWYWx1ZXMsIGNvbXBvbmVudC5fcmVxdWlyZWRWYWxpZGF0aW9ucyk7XG5cbiAgICAvLyB0aGUgY29tcG9uZW50IGRlZmluZXMgYW4gZXhwbGljaXQgdmFsaWRhdGUgZnVuY3Rpb25cbiAgICBpZiAodHlwZW9mIGNvbXBvbmVudC52YWxpZGF0ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB2YWxpZGF0aW9uUmVzdWx0cy5mYWlsZWQgPSBjb21wb25lbnQudmFsaWRhdGUoKSA/IFtdIDogWydmYWlsZWQnXTtcbiAgICB9XG5cbiAgICB2YXIgaXNSZXF1aXJlZCA9IE9iamVjdC5rZXlzKGNvbXBvbmVudC5fcmVxdWlyZWRWYWxpZGF0aW9ucykubGVuZ3RoID8gISFyZXF1aXJlZFJlc3VsdHMuc3VjY2Vzcy5sZW5ndGggOiBmYWxzZTtcbiAgICB2YXIgaXNWYWxpZCA9ICF2YWxpZGF0aW9uUmVzdWx0cy5mYWlsZWQubGVuZ3RoICYmICEodGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzICYmIHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9yc1tjb21wb25lbnQucHJvcHMubmFtZV0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzUmVxdWlyZWQ6IGlzUmVxdWlyZWQsXG4gICAgICBpc1ZhbGlkOiBpc1JlcXVpcmVkID8gZmFsc2UgOiBpc1ZhbGlkLFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBpZiAoaXNWYWxpZCAmJiAhaXNSZXF1aXJlZCkge1xuICAgICAgICAgIHJldHVybiBlbXB0eUFycmF5O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhbGlkYXRpb25SZXN1bHRzLmVycm9ycy5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gdmFsaWRhdGlvblJlc3VsdHMuZXJyb3JzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9ycyAmJiB0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnNbY29tcG9uZW50LnByb3BzLm5hbWVdKSB7XG4gICAgICAgICAgcmV0dXJuIHR5cGVvZiB0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnNbY29tcG9uZW50LnByb3BzLm5hbWVdID09PSAnc3RyaW5nJyA/IFt0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnNbY29tcG9uZW50LnByb3BzLm5hbWVdXSA6IHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9yc1tjb21wb25lbnQucHJvcHMubmFtZV07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNSZXF1aXJlZCkge1xuICAgICAgICAgIHZhciBlcnJvciA9IHZhbGlkYXRpb25FcnJvcnNbcmVxdWlyZWRSZXN1bHRzLnN1Y2Nlc3NbMF1dO1xuICAgICAgICAgIHJldHVybiBlcnJvciA/IFtlcnJvcl0gOiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhbGlkYXRpb25SZXN1bHRzLmZhaWxlZC5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gdmFsaWRhdGlvblJlc3VsdHMuZmFpbGVkLm1hcChmdW5jdGlvbiAoZmFpbGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsaWRhdGlvbkVycm9yc1tmYWlsZWRdID8gdmFsaWRhdGlvbkVycm9yc1tmYWlsZWRdIDogdmFsaWRhdGlvbkVycm9yO1xuICAgICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoeCwgcG9zLCBhcnIpIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSBkdXBsaWNhdGVzXG4gICAgICAgICAgICByZXR1cm4gYXJyLmluZGV4T2YoeCkgPT09IHBvcztcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfS5jYWxsKHRoaXMpXG4gICAgfTtcbiAgfSxcblxuICBydW5SdWxlczogZnVuY3Rpb24gcnVuUnVsZXModmFsdWUsIGN1cnJlbnRWYWx1ZXMsIHZhbGlkYXRpb25zKSB7XG5cbiAgICB2YXIgcmVzdWx0cyA9IHtcbiAgICAgIGVycm9yczogW10sXG4gICAgICBmYWlsZWQ6IFtdLFxuICAgICAgc3VjY2VzczogW11cbiAgICB9O1xuICAgIGlmIChPYmplY3Qua2V5cyh2YWxpZGF0aW9ucykubGVuZ3RoKSB7XG4gICAgICBPYmplY3Qua2V5cyh2YWxpZGF0aW9ucykuZm9yRWFjaChmdW5jdGlvbiAodmFsaWRhdGlvbk1ldGhvZCkge1xuXG4gICAgICAgIGlmICh2YWxpZGF0aW9uUnVsZXNbdmFsaWRhdGlvbk1ldGhvZF0gJiYgdHlwZW9mIHZhbGlkYXRpb25zW3ZhbGlkYXRpb25NZXRob2RdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3Jtc3kgZG9lcyBub3QgYWxsb3cgeW91IHRvIG92ZXJyaWRlIGRlZmF1bHQgdmFsaWRhdGlvbnM6ICcgKyB2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdmFsaWRhdGlvblJ1bGVzW3ZhbGlkYXRpb25NZXRob2RdICYmIHR5cGVvZiB2YWxpZGF0aW9uc1t2YWxpZGF0aW9uTWV0aG9kXSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRm9ybXN5IGRvZXMgbm90IGhhdmUgdGhlIHZhbGlkYXRpb24gcnVsZTogJyArIHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiB2YWxpZGF0aW9uc1t2YWxpZGF0aW9uTWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHZhciB2YWxpZGF0aW9uID0gdmFsaWRhdGlvbnNbdmFsaWRhdGlvbk1ldGhvZF0oY3VycmVudFZhbHVlcywgdmFsdWUpO1xuICAgICAgICAgIGlmICh0eXBlb2YgdmFsaWRhdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJlc3VsdHMuZXJyb3JzLnB1c2godmFsaWRhdGlvbik7XG4gICAgICAgICAgICByZXN1bHRzLmZhaWxlZC5wdXNoKHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIXZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgIHJlc3VsdHMuZmFpbGVkLnB1c2godmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsaWRhdGlvbnNbdmFsaWRhdGlvbk1ldGhvZF0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB2YXIgdmFsaWRhdGlvbiA9IHZhbGlkYXRpb25SdWxlc1t2YWxpZGF0aW9uTWV0aG9kXShjdXJyZW50VmFsdWVzLCB2YWx1ZSwgdmFsaWRhdGlvbnNbdmFsaWRhdGlvbk1ldGhvZF0pO1xuICAgICAgICAgIGlmICh0eXBlb2YgdmFsaWRhdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJlc3VsdHMuZXJyb3JzLnB1c2godmFsaWRhdGlvbik7XG4gICAgICAgICAgICByZXN1bHRzLmZhaWxlZC5wdXNoKHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIXZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgIHJlc3VsdHMuZmFpbGVkLnB1c2godmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdHMuc3VjY2Vzcy5wdXNoKHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0cy5zdWNjZXNzLnB1c2godmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfSxcblxuICAvLyBWYWxpZGF0ZSB0aGUgZm9ybSBieSBnb2luZyB0aHJvdWdoIGFsbCBjaGlsZCBpbnB1dCBjb21wb25lbnRzXG4gIC8vIGFuZCBjaGVjayB0aGVpciBzdGF0ZVxuICB2YWxpZGF0ZUZvcm06IGZ1bmN0aW9uIHZhbGlkYXRlRm9ybSgpIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIC8vIFdlIG5lZWQgYSBjYWxsYmFjayBhcyB3ZSBhcmUgdmFsaWRhdGluZyBhbGwgaW5wdXRzIGFnYWluLiBUaGlzIHdpbGxcbiAgICAvLyBydW4gd2hlbiB0aGUgbGFzdCBjb21wb25lbnQgaGFzIHNldCBpdHMgc3RhdGVcbiAgICB2YXIgb25WYWxpZGF0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYWxsSXNWYWxpZCA9IHRoaXMuaW5wdXRzLmV2ZXJ5KGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudC5zdGF0ZS5faXNWYWxpZDtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgaXNWYWxpZDogYWxsSXNWYWxpZFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChhbGxJc1ZhbGlkKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25WYWxpZCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vbkludmFsaWQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gVGVsbCB0aGUgZm9ybSB0aGF0IGl0IGNhbiBzdGFydCB0byB0cmlnZ2VyIGNoYW5nZSBldmVudHNcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBjYW5DaGFuZ2U6IHRydWVcbiAgICAgIH0pO1xuICAgIH0uYmluZCh0aGlzKTtcblxuICAgIC8vIFJ1biB2YWxpZGF0aW9uIGFnYWluIGluIGNhc2UgYWZmZWN0ZWQgYnkgb3RoZXIgaW5wdXRzLiBUaGVcbiAgICAvLyBsYXN0IGNvbXBvbmVudCB2YWxpZGF0ZWQgd2lsbCBydW4gdGhlIG9uVmFsaWRhdGlvbkNvbXBsZXRlIGNhbGxiYWNrXG4gICAgdGhpcy5pbnB1dHMuZm9yRWFjaChmdW5jdGlvbiAoY29tcG9uZW50LCBpbmRleCkge1xuICAgICAgdmFyIHZhbGlkYXRpb24gPSBfdGhpczMucnVuVmFsaWRhdGlvbihjb21wb25lbnQpO1xuICAgICAgaWYgKHZhbGlkYXRpb24uaXNWYWxpZCAmJiBjb21wb25lbnQuc3RhdGUuX2V4dGVybmFsRXJyb3IpIHtcbiAgICAgICAgdmFsaWRhdGlvbi5pc1ZhbGlkID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBjb21wb25lbnQuc2V0U3RhdGUoe1xuICAgICAgICBfaXNWYWxpZDogdmFsaWRhdGlvbi5pc1ZhbGlkLFxuICAgICAgICBfaXNSZXF1aXJlZDogdmFsaWRhdGlvbi5pc1JlcXVpcmVkLFxuICAgICAgICBfdmFsaWRhdGlvbkVycm9yOiB2YWxpZGF0aW9uLmVycm9yLFxuICAgICAgICBfZXh0ZXJuYWxFcnJvcjogIXZhbGlkYXRpb24uaXNWYWxpZCAmJiBjb21wb25lbnQuc3RhdGUuX2V4dGVybmFsRXJyb3IgPyBjb21wb25lbnQuc3RhdGUuX2V4dGVybmFsRXJyb3IgOiBudWxsXG4gICAgICB9LCBpbmRleCA9PT0gX3RoaXMzLmlucHV0cy5sZW5ndGggLSAxID8gb25WYWxpZGF0aW9uQ29tcGxldGUgOiBudWxsKTtcbiAgICB9KTtcblxuICAgIC8vIElmIHRoZXJlIGFyZSBubyBpbnB1dHMsIHNldCBzdGF0ZSB3aGVyZSBmb3JtIGlzIHJlYWR5IHRvIHRyaWdnZXJcbiAgICAvLyBjaGFuZ2UgZXZlbnQuIE5ldyBpbnB1dHMgbWlnaHQgYmUgYWRkZWQgbGF0ZXJcbiAgICBpZiAoIXRoaXMuaW5wdXRzLmxlbmd0aCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGNhbkNoYW5nZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIC8vIE1ldGhvZCBwdXQgb24gZWFjaCBpbnB1dCBjb21wb25lbnQgdG8gcmVnaXN0ZXJcbiAgLy8gaXRzZWxmIHRvIHRoZSBmb3JtXG4gIGF0dGFjaFRvRm9ybTogZnVuY3Rpb24gYXR0YWNoVG9Gb3JtKGNvbXBvbmVudCkge1xuXG4gICAgaWYgKHRoaXMuaW5wdXRzLmluZGV4T2YoY29tcG9uZW50KSA9PT0gLTEpIHtcbiAgICAgIHRoaXMuaW5wdXRzLnB1c2goY29tcG9uZW50KTtcbiAgICB9XG5cbiAgICB0aGlzLnZhbGlkYXRlKGNvbXBvbmVudCk7XG4gIH0sXG5cbiAgLy8gTWV0aG9kIHB1dCBvbiBlYWNoIGlucHV0IGNvbXBvbmVudCB0byB1bnJlZ2lzdGVyXG4gIC8vIGl0c2VsZiBmcm9tIHRoZSBmb3JtXG4gIGRldGFjaEZyb21Gb3JtOiBmdW5jdGlvbiBkZXRhY2hGcm9tRm9ybShjb21wb25lbnQpIHtcbiAgICB2YXIgY29tcG9uZW50UG9zID0gdGhpcy5pbnB1dHMuaW5kZXhPZihjb21wb25lbnQpO1xuXG4gICAgaWYgKGNvbXBvbmVudFBvcyAhPT0gLTEpIHtcbiAgICAgIHRoaXMuaW5wdXRzID0gdGhpcy5pbnB1dHMuc2xpY2UoMCwgY29tcG9uZW50UG9zKS5jb25jYXQodGhpcy5pbnB1dHMuc2xpY2UoY29tcG9uZW50UG9zICsgMSkpO1xuICAgIH1cblxuICAgIHRoaXMudmFsaWRhdGVGb3JtKCk7XG4gIH0sXG4gIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICBtYXBwaW5nID0gX3Byb3BzLm1hcHBpbmcsXG4gICAgICAgIHZhbGlkYXRpb25FcnJvcnMgPSBfcHJvcHMudmFsaWRhdGlvbkVycm9ycyxcbiAgICAgICAgb25TdWJtaXQgPSBfcHJvcHMub25TdWJtaXQsXG4gICAgICAgIG9uVmFsaWQgPSBfcHJvcHMub25WYWxpZCxcbiAgICAgICAgb25WYWxpZFN1Ym1pdCA9IF9wcm9wcy5vblZhbGlkU3VibWl0LFxuICAgICAgICBvbkludmFsaWQgPSBfcHJvcHMub25JbnZhbGlkLFxuICAgICAgICBvbkludmFsaWRTdWJtaXQgPSBfcHJvcHMub25JbnZhbGlkU3VibWl0LFxuICAgICAgICBvbkNoYW5nZSA9IF9wcm9wcy5vbkNoYW5nZSxcbiAgICAgICAgcmVzZXQgPSBfcHJvcHMucmVzZXQsXG4gICAgICAgIHByZXZlbnRFeHRlcm5hbEludmFsaWRhdGlvbiA9IF9wcm9wcy5wcmV2ZW50RXh0ZXJuYWxJbnZhbGlkYXRpb24sXG4gICAgICAgIG9uU3VjY2VzcyA9IF9wcm9wcy5vblN1Y2Nlc3MsXG4gICAgICAgIG9uRXJyb3IgPSBfcHJvcHMub25FcnJvcixcbiAgICAgICAgbm9uRm9ybXN5UHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3Byb3BzLCBbJ21hcHBpbmcnLCAndmFsaWRhdGlvbkVycm9ycycsICdvblN1Ym1pdCcsICdvblZhbGlkJywgJ29uVmFsaWRTdWJtaXQnLCAnb25JbnZhbGlkJywgJ29uSW52YWxpZFN1Ym1pdCcsICdvbkNoYW5nZScsICdyZXNldCcsICdwcmV2ZW50RXh0ZXJuYWxJbnZhbGlkYXRpb24nLCAnb25TdWNjZXNzJywgJ29uRXJyb3InXSk7XG5cbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudCgnZm9ybScsIF9leHRlbmRzKHt9LCBub25Gb3Jtc3lQcm9wcywgeyBvblN1Ym1pdDogdGhpcy5zdWJtaXQgfSksIHRoaXMucHJvcHMuY2hpbGRyZW4pO1xuICB9XG59KTtcblxuaWYgKCFnbG9iYWwuZXhwb3J0cyAmJiAhZ2xvYmFsLm1vZHVsZSAmJiAoIWdsb2JhbC5kZWZpbmUgfHwgIWdsb2JhbC5kZWZpbmUuYW1kKSkge1xuICBnbG9iYWwuRm9ybXN5ID0gRm9ybXN5O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEZvcm1zeTtcbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvd2VicGFjay9idWlsZGluL2dsb2JhbC5qc1wiKSkpXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvdXRpbHMuanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF90eXBlb2YyID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgX3R5cGVvZjIoU3ltYm9sLml0ZXJhdG9yKSA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZjIob2JqKTtcbn0gOiBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YyKG9iaik7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYXJyYXlzRGlmZmVyOiBmdW5jdGlvbiBhcnJheXNEaWZmZXIoYSwgYikge1xuICAgIHZhciBpc0RpZmZlcmVudCA9IGZhbHNlO1xuICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHtcbiAgICAgIGlzRGlmZmVyZW50ID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgYS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTYW1lKGl0ZW0sIGJbaW5kZXhdKSkge1xuICAgICAgICAgIGlzRGlmZmVyZW50ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSwgdGhpcyk7XG4gICAgfVxuICAgIHJldHVybiBpc0RpZmZlcmVudDtcbiAgfSxcblxuICBvYmplY3RzRGlmZmVyOiBmdW5jdGlvbiBvYmplY3RzRGlmZmVyKGEsIGIpIHtcbiAgICB2YXIgaXNEaWZmZXJlbnQgPSBmYWxzZTtcbiAgICBpZiAoT2JqZWN0LmtleXMoYSkubGVuZ3RoICE9PSBPYmplY3Qua2V5cyhiKS5sZW5ndGgpIHtcbiAgICAgIGlzRGlmZmVyZW50ID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgT2JqZWN0LmtleXMoYSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGlmICghdGhpcy5pc1NhbWUoYVtrZXldLCBiW2tleV0pKSB7XG4gICAgICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzKTtcbiAgICB9XG4gICAgcmV0dXJuIGlzRGlmZmVyZW50O1xuICB9LFxuXG4gIGlzU2FtZTogZnVuY3Rpb24gaXNTYW1lKGEsIGIpIHtcbiAgICBpZiAoKHR5cGVvZiBhID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihhKSkgIT09ICh0eXBlb2YgYiA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoYikpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGEpICYmIEFycmF5LmlzQXJyYXkoYikpIHtcbiAgICAgIHJldHVybiAhdGhpcy5hcnJheXNEaWZmZXIoYSwgYik7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIGEudG9TdHJpbmcoKSA9PT0gYi50b1N0cmluZygpO1xuICAgIH0gZWxzZSBpZiAoKHR5cGVvZiBhID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihhKSkgPT09ICdvYmplY3QnICYmIGEgIT09IG51bGwgJiYgYiAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuICF0aGlzLm9iamVjdHNEaWZmZXIoYSwgYik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGEgPT09IGI7XG4gIH0sXG5cbiAgZmluZDogZnVuY3Rpb24gZmluZChjb2xsZWN0aW9uLCBmbikge1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gY29sbGVjdGlvbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gY29sbGVjdGlvbltpXTtcbiAgICAgIGlmIChmbihpdGVtKSkge1xuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvdmFsaWRhdGlvblJ1bGVzLmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfaXNFeGlzdHkgPSBmdW5jdGlvbiBfaXNFeGlzdHkodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQ7XG59O1xuXG52YXIgaXNFbXB0eSA9IGZ1bmN0aW9uIGlzRW1wdHkodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09PSAnJztcbn07XG5cbnZhciB2YWxpZGF0aW9ucyA9IHtcbiAgaXNEZWZhdWx0UmVxdWlyZWRWYWx1ZTogZnVuY3Rpb24gaXNEZWZhdWx0UmVxdWlyZWRWYWx1ZSh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09ICcnO1xuICB9LFxuICBpc0V4aXN0eTogZnVuY3Rpb24gaXNFeGlzdHkodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiBfaXNFeGlzdHkodmFsdWUpO1xuICB9LFxuICBtYXRjaFJlZ2V4cDogZnVuY3Rpb24gbWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgcmVnZXhwKSB7XG4gICAgcmV0dXJuICFfaXNFeGlzdHkodmFsdWUpIHx8IGlzRW1wdHkodmFsdWUpIHx8IHJlZ2V4cC50ZXN0KHZhbHVlKTtcbiAgfSxcbiAgaXNVbmRlZmluZWQ6IGZ1bmN0aW9uIGlzVW5kZWZpbmVkKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZDtcbiAgfSxcbiAgaXNFbXB0eVN0cmluZzogZnVuY3Rpb24gaXNFbXB0eVN0cmluZyh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIGlzRW1wdHkodmFsdWUpO1xuICB9LFxuICBpc0VtYWlsOiBmdW5jdGlvbiBpc0VtYWlsKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL14oKChbYS16XXxcXGR8WyEjXFwkJSYnXFwqXFwrXFwtXFwvPVxcP1xcXl9ge1xcfH1+XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkrKFxcLihbYS16XXxcXGR8WyEjXFwkJSYnXFwqXFwrXFwtXFwvPVxcP1xcXl9ge1xcfH1+XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkrKSopfCgoXFx4MjIpKCgoKFxceDIwfFxceDA5KSooXFx4MGRcXHgwYSkpPyhcXHgyMHxcXHgwOSkrKT8oKFtcXHgwMS1cXHgwOFxceDBiXFx4MGNcXHgwZS1cXHgxZlxceDdmXXxcXHgyMXxbXFx4MjMtXFx4NWJdfFtcXHg1ZC1cXHg3ZV18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfChcXFxcKFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZC1cXHg3Zl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkpKigoKFxceDIwfFxceDA5KSooXFx4MGRcXHgwYSkpPyhcXHgyMHxcXHgwOSkrKT8oXFx4MjIpKSlAKCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKVxcLikrKChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpJC9pKTtcbiAgfSxcbiAgaXNVcmw6IGZ1bmN0aW9uIGlzVXJsKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL14oaHR0cHM/fHM/ZnRwKTpcXC9cXC8oKCgoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OikqQCk/KCgoXFxkfFsxLTldXFxkfDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNV0pXFwuKFxcZHxbMS05XVxcZHwxXFxkXFxkfDJbMC00XVxcZHwyNVswLTVdKVxcLihcXGR8WzEtOV1cXGR8MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC01XSlcXC4oXFxkfFsxLTldXFxkfDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNV0pKXwoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4/KSg6XFxkKik/KShcXC8oKChbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoJVtcXGRhLWZdezJ9KXxbIVxcJCYnXFwoXFwpXFwqXFwrLDs9XXw6fEApKyhcXC8oKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCkqKSopPyk/KFxcPygoKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCl8W1xcdUUwMDAtXFx1RjhGRl18XFwvfFxcPykqKT8oIygoKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCl8XFwvfFxcPykqKT8kL2kpO1xuICB9LFxuICBpc1RydWU6IGZ1bmN0aW9uIGlzVHJ1ZSh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSB0cnVlO1xuICB9LFxuICBpc0ZhbHNlOiBmdW5jdGlvbiBpc0ZhbHNlKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IGZhbHNlO1xuICB9LFxuICBpc051bWVyaWM6IGZ1bmN0aW9uIGlzTnVtZXJpYyh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL15bLStdPyg/OlxcZCpbLl0pP1xcZCskLyk7XG4gIH0sXG4gIGlzQWxwaGE6IGZ1bmN0aW9uIGlzQWxwaGEodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXltBLVpdKyQvaSk7XG4gIH0sXG4gIGlzQWxwaGFudW1lcmljOiBmdW5jdGlvbiBpc0FscGhhbnVtZXJpYyh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eWzAtOUEtWl0rJC9pKTtcbiAgfSxcbiAgaXNJbnQ6IGZ1bmN0aW9uIGlzSW50KHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL14oPzpbLStdPyg/OjB8WzEtOV1cXGQqKSkkLyk7XG4gIH0sXG4gIGlzRmxvYXQ6IGZ1bmN0aW9uIGlzRmxvYXQodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXig/OlstK10/KD86XFxkKykpPyg/OlxcLlxcZCopPyg/OltlRV1bXFwrXFwtXT8oPzpcXGQrKSk/JC8pO1xuICB9LFxuICBpc1dvcmRzOiBmdW5jdGlvbiBpc1dvcmRzKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL15bQS1aXFxzXSskL2kpO1xuICB9LFxuICBpc1NwZWNpYWxXb3JkczogZnVuY3Rpb24gaXNTcGVjaWFsV29yZHModmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXltBLVpcXHNcXHUwMEMwLVxcdTAxN0ZdKyQvaSk7XG4gIH0sXG4gIGlzTGVuZ3RoOiBmdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZXMsIHZhbHVlLCBsZW5ndGgpIHtcbiAgICByZXR1cm4gIV9pc0V4aXN0eSh2YWx1ZSkgfHwgaXNFbXB0eSh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoID09PSBsZW5ndGg7XG4gIH0sXG4gIGVxdWFsczogZnVuY3Rpb24gZXF1YWxzKHZhbHVlcywgdmFsdWUsIGVxbCkge1xuICAgIHJldHVybiAhX2lzRXhpc3R5KHZhbHVlKSB8fCBpc0VtcHR5KHZhbHVlKSB8fCB2YWx1ZSA9PSBlcWw7XG4gIH0sXG4gIGVxdWFsc0ZpZWxkOiBmdW5jdGlvbiBlcXVhbHNGaWVsZCh2YWx1ZXMsIHZhbHVlLCBmaWVsZCkge1xuICAgIHJldHVybiB2YWx1ZSA9PSB2YWx1ZXNbZmllbGRdO1xuICB9LFxuICBtYXhMZW5ndGg6IGZ1bmN0aW9uIG1heExlbmd0aCh2YWx1ZXMsIHZhbHVlLCBsZW5ndGgpIHtcbiAgICByZXR1cm4gIV9pc0V4aXN0eSh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoIDw9IGxlbmd0aDtcbiAgfSxcbiAgbWluTGVuZ3RoOiBmdW5jdGlvbiBtaW5MZW5ndGgodmFsdWVzLCB2YWx1ZSwgbGVuZ3RoKSB7XG4gICAgcmV0dXJuICFfaXNFeGlzdHkodmFsdWUpIHx8IGlzRW1wdHkodmFsdWUpIHx8IHZhbHVlLmxlbmd0aCA+PSBsZW5ndGg7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gdmFsaWRhdGlvbnM7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2NvbXBvbmVudHMvSW5wdXQvSW5wdXQuanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC9yZWFjdC5qc1wiKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfZm9ybXN5UmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9tYWluLmpzXCIpO1xuXG52YXIgX2Zvcm1zeVJlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Zvcm1zeVJlYWN0KTtcblxudmFyIF9wcm9wVHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9pbmRleC5qc1wiKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgSW5wdXQgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoSW5wdXQsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIElucHV0KHByb3BzKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIElucHV0KTtcblxuICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChJbnB1dC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKElucHV0KSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgX3RoaXMuY2hhbmdlVmFsdWUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIF90aGlzLnByb3BzLnNldFZhbHVlKGV2ZW50LmN1cnJlbnRUYXJnZXRbX3RoaXMucHJvcHMudHlwZSA9PT0gJ2NoZWNrYm94JyA/ICdjaGVja2VkJyA6ICd2YWx1ZSddKTtcbiAgICB9O1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhJbnB1dCwgW3tcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgZXJyb3JNZXNzYWdlID0gdGhpcy5wcm9wcy5nZXRFcnJvck1lc3NhZ2UoKTtcblxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyBjbGFzc05hbWU6ICdwcm9maWxlLWZpZWxkJyB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgeyBjbGFzc05hbWU6ICdwcm9maWxlLWZpZWxkX19sYWJlbCcgfSxcbiAgICAgICAgICB0aGlzLnByb3BzLmxhYmVsXG4gICAgICAgICksXG4gICAgICAgIHRoaXMucHJvcHMuZGlzYWJsZWQgPyBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgeyBjbGFzc05hbWU6ICdwcm9maWxlLWZpZWxkX192YWx1ZScgfSxcbiAgICAgICAgICB0aGlzLnByb3BzLnZhbHVlXG4gICAgICAgICkgOiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnbGFiZWwnLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5wcm9wcy5uYW1lLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICB0eXBlOiB0aGlzLnByb3BzLnR5cGUgfHwgJ3RleHQnLFxuICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMuY2hhbmdlVmFsdWUsXG4gICAgICAgICAgICB2YWx1ZTogdGhpcy5wcm9wcy5nZXRWYWx1ZSgpLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6IHRoaXMucHJvcHMucGxhY2Vob2xkZXIgfHwgJycgfSksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2knLCB7IGNsYXNzTmFtZTogJ3Byb2ZpbGUtZmllbGRfX2lucHV0LWljb24gZmEtcGVuY2lsIGZhICcgfSksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3NpZ251cC1mb3JtX19lcnJvci1tZXNzYWdlJyB9LFxuICAgICAgICAgICAgZXJyb3JNZXNzYWdlXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBJbnB1dDtcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbklucHV0LnByb3BUeXBlcyA9IHtcbiAgdmFsdWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBsYWJlbDogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIG5hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBjbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICB0eXBlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgc2V0VmFsdWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYW55LFxuICBnZXRWYWx1ZTogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBnZXRFcnJvck1lc3NhZ2U6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgZGlzYWJsZWQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgcGxhY2Vob2xkZXI6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nXG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSAoMCwgX2Zvcm1zeVJlYWN0LkhPQykoSW5wdXQpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9wYWdlcy9Qcm9maWxlL1Byb2ZpbGUuanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC9yZWFjdC5qc1wiKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfZm9ybXN5UmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9tYWluLmpzXCIpO1xuXG52YXIgX2Zvcm1zeVJlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Zvcm1zeVJlYWN0KTtcblxudmFyIF9JbnB1dCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9jb21wb25lbnRzL0lucHV0L0lucHV0LmpzXCIpO1xuXG52YXIgX0lucHV0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0lucHV0KTtcblxudmFyIF91c2VycyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9hY3Rpb25zL3VzZXJzLmFjdGlvbi5qc1wiKTtcblxudmFyIF9yZWR1eCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWR1eC9lcy9pbmRleC5qc1wiKTtcblxudmFyIF9NZXNzYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2NvbXBvbmVudHMvTWVzc2FnZS9NZXNzYWdlLmpzXCIpO1xuXG52YXIgX1BvcHVwID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2NvbXBvbmVudHMvUG9wdXAvUG9wdXAuanNcIik7XG5cbnZhciBfQnV0dG9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2NvbXBvbmVudHMvQnV0dG9uL0J1dHRvbi5qc1wiKTtcblxudmFyIF9yZWFjdFJlZHV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0LXJlZHV4L2VzL2luZGV4LmpzXCIpO1xuXG52YXIgX3Byb3BUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9wcm9wLXR5cGVzL2luZGV4LmpzXCIpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG5fX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvcGFnZXMvUHJvZmlsZS9Qcm9maWxlLnNjc3NcIik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb2ZpbGUgPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoUHJvZmlsZSwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gUHJvZmlsZShwcm9wcykge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm9maWxlKTtcblxuICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm9maWxlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvZmlsZSkpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgIF90aGlzLnNldFBvcHVwU2hvd24gPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgIHZhciBjdXJyZW50U3RhdGUgPSBfdGhpcy5zdGF0ZS5wb3B1cFNob3duO1xuXG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHBvcHVwU2hvd246ICFjdXJyZW50U3RhdGVcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfdGhpcy51cGRhdGVQcm9maWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgIG5hbWU6IF90aGlzLm5hbWUuZ2V0VmFsdWUoKSxcbiAgICAgICAgZW1haWw6IF90aGlzLmVtYWlsLmdldFZhbHVlKCksXG4gICAgICAgIHBhc3N3b3JkOiBfdGhpcy5wYXNzd29yZC5nZXRWYWx1ZSgpLFxuICAgICAgICBwYXNzd29yZFJlcGVhdDogX3RoaXMucGFzc3dvcmRSZXBlYXQuZ2V0VmFsdWUoKSxcbiAgICAgICAgYXZhdGFyOiBfdGhpcy5iYXNlNjRTdHIsXG4gICAgICAgIF9pZDogX3RoaXMucHJvcHMudXNlci5faWRcbiAgICAgIH07XG5cbiAgICAgIF90aGlzLnByb3BzLnVwZGF0ZVByb2ZpbGVSZXF1ZXN0KGRhdGEpO1xuICAgIH07XG5cbiAgICBfdGhpcy5lbmFibGVCdXR0b24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGNhblN1Ym1pdDogdHJ1ZVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF90aGlzLmRpc2FibGVCdXR0b24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGNhblN1Ym1pdDogZmFsc2VcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfdGhpcy5lZGl0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgZGlzYWJsZWQ6ICFfdGhpcy5zdGF0ZS5kaXNhYmxlZFxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF90aGlzLmRlbGV0ZVVzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5wcm9wcy5kZWxldGVVc2VyUmVxdWVzdChfdGhpcy5wcm9wcy51c2VyKTtcbiAgICB9O1xuXG4gICAgX3RoaXMuaGFuZGxlRmlsZVNlbGVjdCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7IHVwZGF0ZUltYWdlU3RhdHVzOiAnTG9hZGluZy4uLicgfSk7XG4gICAgICB2YXIgZmlsZXMgPSBlLnRhcmdldC5maWxlcyA/IGUudGFyZ2V0LmZpbGVzIDogZS5kYXRhVHJhbnNmZXIuZmlsZXM7XG5cbiAgICAgIGlmIChmaWxlcykge1xuICAgICAgICB2YXIgZmlsZSA9IGZpbGVzWzBdO1xuXG4gICAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgICAgdmFyIG1heEZpbGVTaXplID0gMTAyNCAqIDEwMjQ7XG5cbiAgICAgICAgICBpZiAoZmlsZS5zaXplID4gbWF4RmlsZVNpemUpIHtcbiAgICAgICAgICAgIF90aGlzLnByb3BzLnVwbG9hZFBob3RvRmFpbHVyZSgnRXhjZWVkaW5nIDFNQiBsaW1pdCcpO1xuICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICB1cGRhdGVJbWFnZVN0YXR1czogJ0V4Y2VlZGluZyAxTUIgbGltaXQnLFxuICAgICAgICAgICAgICBzZXRQb3B1cFNob3duOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcblxuICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAocmVhZGVyRXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBiaW5hcnlTdHJpbmcgPSByZWFkZXJFdmVudC50YXJnZXQucmVzdWx0O1xuXG4gICAgICAgICAgICBfdGhpcy5iYXNlNjRTdHIgPSAnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCwnICsgYnRvYShiaW5hcnlTdHJpbmcpO1xuICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBpbWFnZUJhc2U2NDogX3RoaXMuYmFzZTY0U3RyLCB1cGRhdGVJbWFnZVN0YXR1czogJycgfSk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHJlYWRlci5yZWFkQXNCaW5hcnlTdHJpbmcoZmlsZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3RoaXMucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfTtcblxuICAgIF90aGlzLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBkcmFnb3ZlckZvckJvZHkgPSBlIHx8IGV2ZW50O1xuXG4gICAgICAgIGRyYWdvdmVyRm9yQm9keS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSwgZmFsc2UpO1xuXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBkcm9wRm9yQm9keSA9IGUgfHwgZXZlbnQ7XG5cbiAgICAgICAgZHJvcEZvckJvZHkucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnc2VjdGlvbicsXG4gICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZmlsZScgfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ2hlYWRlcicsXG4gICAgICAgICAgeyBjbGFzc05hbWU6ICdwcm9maWxlX19oZWFkZXInIH0sXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnaDEnLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwcm9maWxlX19oZWFkZXItdGl0bGUnIH0sXG4gICAgICAgICAgICAnUHJvZmlsZSdcbiAgICAgICAgICApLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2ZpbGVfX2RlbGV0ZSBidG4gYnRuLS1kYW5nZXInLFxuICAgICAgICAgICAgICBvbkNsaWNrOiBfdGhpcy5zZXRQb3B1cFNob3duIH0sXG4gICAgICAgICAgICAnRGVsZXRlIHByb2ZpbGUnXG4gICAgICAgICAgKVxuICAgICAgICApLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnc2VjdGlvbicsXG4gICAgICAgICAgeyBjbGFzc05hbWU6ICdwcm9maWxlLWluZm8nIH0sXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBfZm9ybXN5UmVhY3QyLmRlZmF1bHQuRm9ybSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncHJvZmlsZS1mb3JtIGNsZWFyZml4JyxcbiAgICAgICAgICAgICAgb25TdWJtaXQ6IF90aGlzLnVwZGF0ZVByb2ZpbGUsXG4gICAgICAgICAgICAgIG9uVmFsaWQ6IF90aGlzLmVuYWJsZUJ1dHRvbixcbiAgICAgICAgICAgICAgb25JbnZhbGlkOiBfdGhpcy5kaXNhYmxlQnV0dG9uIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBfdGhpcy5zdGF0ZS5pbWFnZUJhc2U2NCB8fCBfdGhpcy5wcm9wcy51c2VyLmF2YXRhciA/ICdwcm9maWxlX19waG90bycgOiAncHJvZmlsZV9fcGhvdG8gcHJvZmlsZV9fcGhvdG8tLW5vYXZhdGFyJyB9LFxuICAgICAgICAgICAgICBfdGhpcy5zdGF0ZS5pbWFnZUJhc2U2NCB8fCBfdGhpcy5wcm9wcy51c2VyLmF2YXRhciA/IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbWcnLCB7XG4gICAgICAgICAgICAgICAgc3JjOiBfdGhpcy5zdGF0ZS5pbWFnZUJhc2U2NCB8fCBfdGhpcy5wcm9wcy51c2VyLmF2YXRhcixcbiAgICAgICAgICAgICAgICBhbHQ6ICdhdmF0YXInIH0pIDogbnVsbFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwcm9maWxlLWluZm9fX2ZpZWxkcycgfSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0lucHV0Mi5kZWZhdWx0LCB7XG4gICAgICAgICAgICAgICAgbGFiZWw6ICdOQU1FJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnbmFtZScsXG4gICAgICAgICAgICAgICAgdmFsdWU6IF90aGlzLnByb3BzLnVzZXIubmFtZSxcbiAgICAgICAgICAgICAgICBkaXNhYmxlZDogX3RoaXMuc3RhdGUuZGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYoaW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgIF90aGlzLm5hbWUgPSBpbnB1dDtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHZhbGlkYXRpb25zOiAnaXNBbHBoYScsXG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9yOiAnTmFtZSBtdXN0IGNvbnRhaW4gb25seSBsZXR0ZXJzJyB9KSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0lucHV0Mi5kZWZhdWx0LCB7XG4gICAgICAgICAgICAgICAgbGFiZWw6ICdFTUFJTCcsXG4gICAgICAgICAgICAgICAgbmFtZTogJ2VtYWlsJyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogX3RoaXMucHJvcHMudXNlci5lbWFpbCxcbiAgICAgICAgICAgICAgICBkaXNhYmxlZDogX3RoaXMuc3RhdGUuZGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYoaW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgIF90aGlzLmVtYWlsID0gaW5wdXQ7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uczogJ2lzRW1haWwnLFxuICAgICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcjogJ1RoaXMgaXMgbm90IGEgdmFsaWQgZW1haWwnIH0pLFxuICAgICAgICAgICAgICAhX3RoaXMuc3RhdGUuZGlzYWJsZWQgPyBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZmllbGRzZXQnLFxuICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZmlsZS1pbmZvX19maWVsZHMtLWZpZWxkc2V0JyB9LFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ2xlZ2VuZCcsXG4gICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdoMycsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZmlsZS1oZWFkaW5nJyB9LFxuICAgICAgICAgICAgICAgICAgICAnQ2hhbmdlIHBhc3N3b3JkOidcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9JbnB1dDIuZGVmYXVsdCwge1xuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdPbGQnLFxuICAgICAgICAgICAgICAgICAgbmFtZTogJ29sZC1wc3cnLFxuICAgICAgICAgICAgICAgICAgdHlwZTogJ3Bhc3N3b3JkJyxcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnRW50ZXIgdGhlIG9sZCBwYXNzd29yZCcsXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZDogX3RoaXMuc3RhdGUuZGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihpbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYXNzd29yZE9sZCA9IGlucHV0O1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIG1pbkxlbmd0aDogNyxcbiAgICAgICAgICAgICAgICAgICAgaXNBbHBoYW51bWVyaWM6IHRydWVcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3I6ICdQYXNzd29yZCBpcyBub3QgdmFsaWQnIH0pLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9JbnB1dDIuZGVmYXVsdCwge1xuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdOZXcnLFxuICAgICAgICAgICAgICAgICAgbmFtZTogJ25ldy1wc3cnLFxuICAgICAgICAgICAgICAgICAgdHlwZTogJ3Bhc3N3b3JkJyxcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnRW50ZXIgdGhlIG5ldyBwYXNzd29yZCcsXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZDogX3RoaXMuc3RhdGUuZGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihpbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYXNzd29yZCA9IGlucHV0O1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIG1pbkxlbmd0aDogNyxcbiAgICAgICAgICAgICAgICAgICAgaXNBbHBoYW51bWVyaWM6IHRydWVcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3I6ICdQYXNzd29yZCBpcyBub3QgdmFsaWQnIH0pLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9JbnB1dDIuZGVmYXVsdCwge1xuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdSZXBlYXQnLFxuICAgICAgICAgICAgICAgICAgbmFtZTogJ3JlcGVhdC1wc3cnLFxuICAgICAgICAgICAgICAgICAgdHlwZTogJ3Bhc3N3b3JkJyxcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnUmVwZWF0IHRoZSBwYXNzd29yZCcsXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZDogX3RoaXMuc3RhdGUuZGlzYWJsZWQsXG4gICAgICAgICAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihpbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYXNzd29yZFJlcGVhdCA9IGlucHV0O1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25zOiAnZXF1YWxzRmllbGQ6bmV3LXBzdycsXG4gICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3I6ICdQYXNzd29yZCBkb2VzIG5vdCBtYXRjaCcgfSksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2RpdicsIG51bGwpXG4gICAgICAgICAgICAgICkgOiBudWxsLFxuICAgICAgICAgICAgICAhX3RoaXMuc3RhdGUuZGlzYWJsZWQgPyBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2ZpbGUtaW5mb19fdXBsb2FkLXBob3RvJyB9LFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ2gzJyxcbiAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZmlsZS1oZWFkaW5nJyB9LFxuICAgICAgICAgICAgICAgICAgJ1VwbG9hZCBuZXcgcGhvdG8nXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdwcm9maWxlX191cGxvYWQtcGhvdG8tLWRyb3AnLFxuICAgICAgICAgICAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihlbCkge1xuICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmZpZWxkSW1hZ2UgPSBlbDtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb25Ecm9wOiBfdGhpcy5oYW5kbGVGaWxlU2VsZWN0LFxuICAgICAgICAgICAgICAgICAgICBvbkRyYWdPdmVyOiBfdGhpcy5wcmV2ZW50RGVmYXVsdCB9LFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgJ0Ryb3AgeW91ciBwaG90bydcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2ZpbGVfX3VwbG9hZC1waG90by0tYnRuJyB9LFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdsYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBodG1sRm9yOiAnYWRkLXBob3RvJyxcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdidG4gYWRkLXBob3RvLWJ0bicgfSxcbiAgICAgICAgICAgICAgICAgICAgJ0Nob29zZSBmaWxlIHRvIHVwbG9hZCcsXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZmlsZScsXG4gICAgICAgICAgICAgICAgICAgICAgaWQ6ICdhZGQtcGhvdG8nLFxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBfdGhpcy5oYW5kbGVGaWxlU2VsZWN0LFxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2hpZGUnIH0pXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApIDogbnVsbCxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwcm9maWxlLWJ0bi1ncm91cCcgfSxcbiAgICAgICAgICAgICAgICBfdGhpcy5zdGF0ZS5kaXNhYmxlZCA/IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2ZpbGVfX3VwZGF0ZSBidG4nLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBfdGhpcy5lZGl0RGF0YSB9LFxuICAgICAgICAgICAgICAgICAgJ1VwZGF0ZSBpbmZvJ1xuICAgICAgICAgICAgICAgICkgOiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiAnc3VibWl0JyxcbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiAhX3RoaXMuc3RhdGUuY2FuU3VibWl0LFxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYnRuIGJ0bi0tc3VjY2VzcycsXG4gICAgICAgICAgICAgICAgICB2YWx1ZTogJ1NhdmUgY2hhbmdlcycgfSksXG4gICAgICAgICAgICAgICAgIV90aGlzLnN0YXRlLmRpc2FibGVkID8gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZmlsZV9fZGVsZXRlIGJ0bicsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IF90aGlzLmVkaXREYXRhIH0sXG4gICAgICAgICAgICAgICAgICAnQ2FuY2VsJ1xuICAgICAgICAgICAgICAgICkgOiBudWxsXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApXG4gICAgICAgICksXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9NZXNzYWdlLk1lc3NhZ2UsIHtcbiAgICAgICAgICBjbGVhclN0YXR1czogX3RoaXMucHJvcHMuY2xlYXJTdGF0dXMsXG4gICAgICAgICAgc3RhdHVzOiBfdGhpcy5wcm9wcy51cGRhdGVQcm9maWxlU3RhdHVzLFxuICAgICAgICAgIHRleHQ6IF90aGlzLnByb3BzLmVycm9yVGV4dCxcbiAgICAgICAgICBoZWFkZXI6ICdFcnJvcicgfSksXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgIF9Qb3B1cC5Qb3B1cCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzZXRQb3B1cFNob3duOiBfdGhpcy5zZXRQb3B1cFNob3duLFxuICAgICAgICAgICAgcG9wdXBTaG93bjogX3RoaXMuc3RhdGUucG9wdXBTaG93bixcbiAgICAgICAgICAgIGhlYWRlcjogJ0NvbmZpcm0gdGhlIGFjdGlvbicsXG4gICAgICAgICAgICB0ZXh0OiAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB5b3VyIGFjY291bnQ/JyB9LFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9CdXR0b24uQnV0dG9uLCB7XG4gICAgICAgICAgICBzZXRQb3B1cFNob3duOiBfdGhpcy5zZXRQb3B1cFNob3duLFxuICAgICAgICAgICAgb2tIYW5kbGVyOiBmdW5jdGlvbiBva0hhbmRsZXIoKSB7XG4gICAgICAgICAgICAgIF90aGlzLmRlbGV0ZVVzZXIoKTtcbiAgICAgICAgICAgICAgX3RoaXMuc2V0UG9wdXBTaG93bigpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNsYXNzTmFtZTogJ2J0biBwb3B1cF9fYnRuJyxcbiAgICAgICAgICAgIGlubmVyVGV4dDogJ09rJ1xuICAgICAgICAgIH0pLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9CdXR0b24uQnV0dG9uLCB7XG4gICAgICAgICAgICBva0hhbmRsZXI6IGZ1bmN0aW9uIG9rSGFuZGxlcigpIHtcbiAgICAgICAgICAgICAgX3RoaXMuc2V0UG9wdXBTaG93bigpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNsYXNzTmFtZTogJ2J0biBidG4tLWRlZmF1bHQgcG9wdXBfX2J0bicsXG4gICAgICAgICAgICBpbm5lclRleHQ6ICdDYW5jZWwnXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBkaXNhYmxlZDogdHJ1ZSxcbiAgICAgIGNhblN1Ym1pdDogZmFsc2UsXG4gICAgICBpbWFnZUJhc2U2NDogbnVsbCxcbiAgICAgIHBvcHVwU2hvd246IGZhbHNlLFxuICAgICAgdXBkYXRlSW1hZ2VTdGF0dXM6ICcnXG4gICAgfTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUHJvZmlsZSwgW3tcbiAgICBrZXk6ICdjb21wb25lbnREaWRVcGRhdGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMucHJvcHMudXBkYXRlUHJvZmlsZVN0YXR1cyA9PT0gJ0RPTkUnKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzMi5wcm9wcy5oaXN0b3J5LnB1c2goJy8nKTtcbiAgICAgICAgfSwgMTAwMCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5wcm9wcy5kZWxldGVQcm9maWxlU3RhdHVzID09PSAnRE9ORScpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXMyLnByb3BzLmhpc3RvcnkucHVzaCgnL2F1dGgnKTtcbiAgICAgICAgfSwgMTAwMCk7XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFByb2ZpbGU7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5mdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RvcmUpIHtcbiAgcmV0dXJuIHtcbiAgICB1cGRhdGVQcm9maWxlU3RhdHVzOiBzdG9yZS51c2Vycy51cGRhdGVQcm9maWxlU3RhdHVzLFxuICAgIGRlbGV0ZVByb2ZpbGVTdGF0dXM6IHN0b3JlLnVzZXJzLmRlbGV0ZVByb2ZpbGVTdGF0dXMsXG4gICAgZXJyb3JUZXh0OiBzdG9yZS51c2Vycy51c2VyLmVycm9yVGV4dCxcbiAgICB1c2VyOiBzdG9yZS51c2Vycy51c2VyXG4gIH07XG59XG5mdW5jdGlvbiBtYXBEaXNwYXRjaFRvUHJvcHMoZGlzcGF0Y2gpIHtcbiAgcmV0dXJuIHtcbiAgICB1cGRhdGVQcm9maWxlUmVxdWVzdDogKDAsIF9yZWR1eC5iaW5kQWN0aW9uQ3JlYXRvcnMpKF91c2Vycy51cGRhdGVQcm9maWxlUmVxdWVzdCwgZGlzcGF0Y2gpLFxuICAgIGRlbGV0ZVVzZXJSZXF1ZXN0OiAoMCwgX3JlZHV4LmJpbmRBY3Rpb25DcmVhdG9ycykoX3VzZXJzLmRlbGV0ZVVzZXJSZXF1ZXN0LCBkaXNwYXRjaCksXG4gICAgY2xlYXJTdGF0dXM6ICgwLCBfcmVkdXguYmluZEFjdGlvbkNyZWF0b3JzKShfdXNlcnMuY2xlYXJVcGRhdGVQcm9maWxlU3RhdHVzLCBkaXNwYXRjaCksXG4gICAgdXBsb2FkUGhvdG9GYWlsdXJlOiAoMCwgX3JlZHV4LmJpbmRBY3Rpb25DcmVhdG9ycykoX3VzZXJzLnVwbG9hZFBob3RvRmFpbHVyZSwgZGlzcGF0Y2gpXG4gIH07XG59XG5cbmV4cG9ydHMuZGVmYXVsdCA9ICgwLCBfcmVhY3RSZWR1eC5jb25uZWN0KShtYXBTdGF0ZVRvUHJvcHMsIG1hcERpc3BhdGNoVG9Qcm9wcykoUHJvZmlsZSk7XG5cblxuUHJvZmlsZS5wcm9wVHlwZXMgPSB7XG4gIHVwZGF0ZVByb2ZpbGVTdGF0dXM6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICB1cGRhdGVQcm9maWxlUmVxdWVzdDogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBkZWxldGVVc2VyUmVxdWVzdDogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBkZWxldGVQcm9maWxlU3RhdHVzOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgdXNlcjogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIGVtYWlsOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgcGFzc3dvcmQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBwYXNzd29yZFJlcGVhdDogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIGVycm9yVGV4dDogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIHZhbHVlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgaGlzdG9yeTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIGNsZWFyU3RhdHVzOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIHR5cGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBzZXRWYWx1ZTogX3Byb3BUeXBlczIuZGVmYXVsdC5hbnksXG4gIHVwbG9hZFBob3RvRmFpbHVyZTogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jXG59O1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9wYWdlcy9Qcm9maWxlL1Byb2ZpbGUuc2Nzc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG4vKioqLyB9KVxuXG59KTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gNi5pbmRleF9idW5kbGUuanMiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIGZhY3RvcnkgPSByZXF1aXJlKCcuL2ZhY3RvcnknKTtcblxuaWYgKHR5cGVvZiBSZWFjdCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgdGhyb3cgRXJyb3IoXG4gICAgJ2NyZWF0ZS1yZWFjdC1jbGFzcyBjb3VsZCBub3QgZmluZCB0aGUgUmVhY3Qgb2JqZWN0LiBJZiB5b3UgYXJlIHVzaW5nIHNjcmlwdCB0YWdzLCAnICtcbiAgICAgICdtYWtlIHN1cmUgdGhhdCBSZWFjdCBpcyBiZWluZyBsb2FkZWQgYmVmb3JlIGNyZWF0ZS1yZWFjdC1jbGFzcy4nXG4gICk7XG59XG5cbi8vIEhhY2sgdG8gZ3JhYiBOb29wVXBkYXRlUXVldWUgZnJvbSBpc29tb3JwaGljIFJlYWN0XG52YXIgUmVhY3ROb29wVXBkYXRlUXVldWUgPSBuZXcgUmVhY3QuQ29tcG9uZW50KCkudXBkYXRlcjtcblxubW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KFxuICBSZWFjdC5Db21wb25lbnQsXG4gIFJlYWN0LmlzVmFsaWRFbGVtZW50LFxuICBSZWFjdE5vb3BVcGRhdGVRdWV1ZVxuKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vY3JlYXRlLXJlYWN0LWNsYXNzL2luZGV4LmpzIiwiZnVuY3Rpb24gdG9PYmooc291cmNlKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhzb3VyY2UpLnJlZHVjZShmdW5jdGlvbiAob3V0cHV0LCBrZXkpIHtcbiAgICB2YXIgcGFyZW50S2V5ID0ga2V5Lm1hdGNoKC9bXlxcW10qL2kpO1xuICAgIHZhciBwYXRocyA9IGtleS5tYXRjaCgvXFxbLio/XFxdL2cpIHx8IFtdO1xuICAgIHBhdGhzID0gW3BhcmVudEtleVswXV0uY29uY2F0KHBhdGhzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuIGtleS5yZXBsYWNlKC9cXFt8XFxdL2csICcnKTtcbiAgICB9KTtcbiAgICB2YXIgY3VycmVudFBhdGggPSBvdXRwdXQ7XG4gICAgd2hpbGUgKHBhdGhzLmxlbmd0aCkge1xuICAgICAgdmFyIHBhdGhLZXkgPSBwYXRocy5zaGlmdCgpO1xuXG4gICAgICBpZiAocGF0aEtleSBpbiBjdXJyZW50UGF0aCkge1xuICAgICAgICBjdXJyZW50UGF0aCA9IGN1cnJlbnRQYXRoW3BhdGhLZXldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudFBhdGhbcGF0aEtleV0gPSBwYXRocy5sZW5ndGggPyBpc05hTihwYXRoc1swXSkgPyB7fSA6IFtdIDogc291cmNlW2tleV07XG4gICAgICAgIGN1cnJlbnRQYXRoID0gY3VycmVudFBhdGhbcGF0aEtleV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfSwge30pO1xufVxuXG5mdW5jdGlvbiBmcm9tT2JqKG9iaikge1xuICBmdW5jdGlvbiByZWN1cihuZXdPYmosIHByb3BOYW1lLCBjdXJyVmFsKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY3VyclZhbCkgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGN1cnJWYWwpID09PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgICAgT2JqZWN0LmtleXMoY3VyclZhbCkuZm9yRWFjaChmdW5jdGlvbih2KSB7XG4gICAgICAgIHJlY3VyKG5ld09iaiwgcHJvcE5hbWUgKyBcIltcIiArIHYgKyBcIl1cIiwgY3VyclZhbFt2XSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBuZXdPYmo7XG4gICAgfVxuXG4gICAgbmV3T2JqW3Byb3BOYW1lXSA9IGN1cnJWYWw7XG4gICAgcmV0dXJuIG5ld09iajtcbiAgfVxuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcbiAgcmV0dXJuIGtleXMucmVkdWNlKGZ1bmN0aW9uKG5ld09iaiwgcHJvcE5hbWUpIHtcbiAgICByZXR1cm4gcmVjdXIobmV3T2JqLCBwcm9wTmFtZSwgb2JqW3Byb3BOYW1lXSk7XG4gIH0sIHt9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGZyb21PYmo6IGZyb21PYmosXG4gIHRvT2JqOiB0b09ialxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vZm9ybS1kYXRhLXRvLW9iamVjdC9pbmRleC5qcyIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIFJlYWN0ID0gZ2xvYmFsLlJlYWN0IHx8IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgY3JlYXRlUmVhY3RDbGFzcyA9IHJlcXVpcmUoJ2NyZWF0ZS1yZWFjdC1jbGFzcycpO1xudmFyIE1peGluID0gcmVxdWlyZSgnLi9NaXhpbi5qcycpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gICAgcmV0dXJuIGNyZWF0ZVJlYWN0Q2xhc3Moe1xuICAgICAgbWl4aW5zOiBbTWl4aW5dLFxuICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KENvbXBvbmVudCwgX2V4dGVuZHMoe1xuICAgICAgICAgIHNldFZhbGlkYXRpb25zOiB0aGlzLnNldFZhbGlkYXRpb25zLFxuICAgICAgICAgIHNldFZhbHVlOiB0aGlzLnNldFZhbHVlLFxuICAgICAgICAgIHJlc2V0VmFsdWU6IHRoaXMucmVzZXRWYWx1ZSxcbiAgICAgICAgICBnZXRWYWx1ZTogdGhpcy5nZXRWYWx1ZSxcbiAgICAgICAgICBoYXNWYWx1ZTogdGhpcy5oYXNWYWx1ZSxcbiAgICAgICAgICBnZXRFcnJvck1lc3NhZ2U6IHRoaXMuZ2V0RXJyb3JNZXNzYWdlLFxuICAgICAgICAgIGdldEVycm9yTWVzc2FnZXM6IHRoaXMuZ2V0RXJyb3JNZXNzYWdlcyxcbiAgICAgICAgICBpc0Zvcm1EaXNhYmxlZDogdGhpcy5pc0Zvcm1EaXNhYmxlZCxcbiAgICAgICAgICBpc1ZhbGlkOiB0aGlzLmlzVmFsaWQsXG4gICAgICAgICAgaXNQcmlzdGluZTogdGhpcy5pc1ByaXN0aW5lLFxuICAgICAgICAgIGlzRm9ybVN1Ym1pdHRlZDogdGhpcy5pc0Zvcm1TdWJtaXR0ZWQsXG4gICAgICAgICAgaXNSZXF1aXJlZDogdGhpcy5pc1JlcXVpcmVkLFxuICAgICAgICAgIHNob3dSZXF1aXJlZDogdGhpcy5zaG93UmVxdWlyZWQsXG4gICAgICAgICAgc2hvd0Vycm9yOiB0aGlzLnNob3dFcnJvcixcbiAgICAgICAgICBpc1ZhbGlkVmFsdWU6IHRoaXMuaXNWYWxpZFZhbHVlXG4gICAgICAgIH0sIHRoaXMucHJvcHMpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9mb3Jtc3ktcmVhY3QvbGliL0RlY29yYXRvci5qcyIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIFJlYWN0ID0gZ2xvYmFsLlJlYWN0IHx8IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgY3JlYXRlUmVhY3RDbGFzcyA9IHJlcXVpcmUoJ2NyZWF0ZS1yZWFjdC1jbGFzcycpO1xudmFyIE1peGluID0gcmVxdWlyZSgnLi9NaXhpbi5qcycpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gIHJldHVybiBjcmVhdGVSZWFjdENsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogJ0Zvcm1zeSgnICsgZ2V0RGlzcGxheU5hbWUoQ29tcG9uZW50KSArICcpJyxcbiAgICBtaXhpbnM6IFtNaXhpbl0sXG5cbiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBpbm5lclJlZiA9IHRoaXMucHJvcHMuaW5uZXJSZWY7XG5cbiAgICAgIHZhciBwcm9wc0ZvckVsZW1lbnQgPSBfZXh0ZW5kcyh7XG4gICAgICAgIHNldFZhbGlkYXRpb25zOiB0aGlzLnNldFZhbGlkYXRpb25zLFxuICAgICAgICBzZXRWYWx1ZTogdGhpcy5zZXRWYWx1ZSxcbiAgICAgICAgcmVzZXRWYWx1ZTogdGhpcy5yZXNldFZhbHVlLFxuICAgICAgICBnZXRWYWx1ZTogdGhpcy5nZXRWYWx1ZSxcbiAgICAgICAgaGFzVmFsdWU6IHRoaXMuaGFzVmFsdWUsXG4gICAgICAgIGdldEVycm9yTWVzc2FnZTogdGhpcy5nZXRFcnJvck1lc3NhZ2UsXG4gICAgICAgIGdldEVycm9yTWVzc2FnZXM6IHRoaXMuZ2V0RXJyb3JNZXNzYWdlcyxcbiAgICAgICAgaXNGb3JtRGlzYWJsZWQ6IHRoaXMuaXNGb3JtRGlzYWJsZWQsXG4gICAgICAgIGlzVmFsaWQ6IHRoaXMuaXNWYWxpZCxcbiAgICAgICAgaXNQcmlzdGluZTogdGhpcy5pc1ByaXN0aW5lLFxuICAgICAgICBpc0Zvcm1TdWJtaXR0ZWQ6IHRoaXMuaXNGb3JtU3VibWl0dGVkLFxuICAgICAgICBpc1JlcXVpcmVkOiB0aGlzLmlzUmVxdWlyZWQsXG4gICAgICAgIHNob3dSZXF1aXJlZDogdGhpcy5zaG93UmVxdWlyZWQsXG4gICAgICAgIHNob3dFcnJvcjogdGhpcy5zaG93RXJyb3IsXG4gICAgICAgIGlzVmFsaWRWYWx1ZTogdGhpcy5pc1ZhbGlkVmFsdWVcbiAgICAgIH0sIHRoaXMucHJvcHMpO1xuXG4gICAgICBpZiAoaW5uZXJSZWYpIHtcbiAgICAgICAgcHJvcHNGb3JFbGVtZW50LnJlZiA9IGlubmVyUmVmO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29tcG9uZW50LCBwcm9wc0ZvckVsZW1lbnQpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5mdW5jdGlvbiBnZXREaXNwbGF5TmFtZShDb21wb25lbnQpIHtcbiAgcmV0dXJuIENvbXBvbmVudC5kaXNwbGF5TmFtZSB8fCBDb21wb25lbnQubmFtZSB8fCAodHlwZW9mIENvbXBvbmVudCA9PT0gJ3N0cmluZycgPyBDb21wb25lbnQgOiAnQ29tcG9uZW50Jyk7XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9mb3Jtc3ktcmVhY3QvbGliL0hPQy5qcyIsIid1c2Ugc3RyaWN0JztcblxudmFyIFByb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMuanMnKTtcbnZhciBSZWFjdCA9IGdsb2JhbC5SZWFjdCB8fCByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgY29udmVydFZhbGlkYXRpb25zVG9PYmplY3QgPSBmdW5jdGlvbiBjb252ZXJ0VmFsaWRhdGlvbnNUb09iamVjdCh2YWxpZGF0aW9ucykge1xuXG4gIGlmICh0eXBlb2YgdmFsaWRhdGlvbnMgPT09ICdzdHJpbmcnKSB7XG5cbiAgICByZXR1cm4gdmFsaWRhdGlvbnMuc3BsaXQoL1xcLCg/IVtee1xcW10qW31cXF1dKS9nKS5yZWR1Y2UoZnVuY3Rpb24gKHZhbGlkYXRpb25zLCB2YWxpZGF0aW9uKSB7XG4gICAgICB2YXIgYXJncyA9IHZhbGlkYXRpb24uc3BsaXQoJzonKTtcbiAgICAgIHZhciB2YWxpZGF0ZU1ldGhvZCA9IGFyZ3Muc2hpZnQoKTtcblxuICAgICAgYXJncyA9IGFyZ3MubWFwKGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShhcmcpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgcmV0dXJuIGFyZzsgLy8gSXQgaXMgYSBzdHJpbmcgaWYgaXQgY2FuIG5vdCBwYXJzZSBpdFxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gMSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm1zeSBkb2VzIG5vdCBzdXBwb3J0IG11bHRpcGxlIGFyZ3Mgb24gc3RyaW5nIHZhbGlkYXRpb25zLiBVc2Ugb2JqZWN0IGZvcm1hdCBvZiB2YWxpZGF0aW9ucyBpbnN0ZWFkLicpO1xuICAgICAgfVxuXG4gICAgICB2YWxpZGF0aW9uc1t2YWxpZGF0ZU1ldGhvZF0gPSBhcmdzLmxlbmd0aCA/IGFyZ3NbMF0gOiB0cnVlO1xuICAgICAgcmV0dXJuIHZhbGlkYXRpb25zO1xuICAgIH0sIHt9KTtcbiAgfVxuXG4gIHJldHVybiB2YWxpZGF0aW9ucyB8fCB7fTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgX3ZhbHVlOiB0aGlzLnByb3BzLnZhbHVlLFxuICAgICAgX2lzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgX2lzVmFsaWQ6IHRydWUsXG4gICAgICBfaXNQcmlzdGluZTogdHJ1ZSxcbiAgICAgIF9wcmlzdGluZVZhbHVlOiB0aGlzLnByb3BzLnZhbHVlLFxuICAgICAgX3ZhbGlkYXRpb25FcnJvcjogW10sXG4gICAgICBfZXh0ZXJuYWxFcnJvcjogbnVsbCxcbiAgICAgIF9mb3JtU3VibWl0dGVkOiBmYWxzZVxuICAgIH07XG4gIH0sXG4gIGNvbnRleHRUeXBlczoge1xuICAgIGZvcm1zeTogUHJvcFR5cGVzLm9iamVjdCAvLyBXaGF0IGFib3V0IHJlcXVpcmVkP1xuICB9LFxuICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWRhdGlvbkVycm9yOiAnJyxcbiAgICAgIHZhbGlkYXRpb25FcnJvcnM6IHt9XG4gICAgfTtcbiAgfSxcblxuICBjb21wb25lbnRXaWxsTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICB2YXIgY29uZmlndXJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5zZXRWYWxpZGF0aW9ucyh0aGlzLnByb3BzLnZhbGlkYXRpb25zLCB0aGlzLnByb3BzLnJlcXVpcmVkKTtcblxuICAgICAgLy8gUGFzcyBhIGZ1bmN0aW9uIGluc3RlYWQ/XG4gICAgICB0aGlzLmNvbnRleHQuZm9ybXN5LmF0dGFjaFRvRm9ybSh0aGlzKTtcbiAgICAgIC8vdGhpcy5wcm9wcy5fYXR0YWNoVG9Gb3JtKHRoaXMpO1xuICAgIH0uYmluZCh0aGlzKTtcblxuICAgIGlmICghdGhpcy5wcm9wcy5uYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm0gSW5wdXQgcmVxdWlyZXMgYSBuYW1lIHByb3BlcnR5IHdoZW4gdXNlZCcpO1xuICAgIH1cblxuICAgIC8qXG4gICAgaWYgKCF0aGlzLnByb3BzLl9hdHRhY2hUb0Zvcm0pIHtcbiAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzTW91bnRlZCgpKSByZXR1cm47XG4gICAgICAgIGlmICghdGhpcy5wcm9wcy5fYXR0YWNoVG9Gb3JtKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3JtIE1peGluIHJlcXVpcmVzIGNvbXBvbmVudCB0byBiZSBuZXN0ZWQgaW4gYSBGb3JtJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uZmlndXJlKCk7XG4gICAgICB9LmJpbmQodGhpcyksIDApO1xuICAgIH1cbiAgICAqL1xuICAgIGNvbmZpZ3VyZSgpO1xuICB9LFxuXG4gIC8vIFdlIGhhdmUgdG8gbWFrZSB0aGUgdmFsaWRhdGUgbWV0aG9kIGlzIGtlcHQgd2hlbiBuZXcgcHJvcHMgYXJlIGFkZGVkXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHM6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgdGhpcy5zZXRWYWxpZGF0aW9ucyhuZXh0UHJvcHMudmFsaWRhdGlvbnMsIG5leHRQcm9wcy5yZXF1aXJlZCk7XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzKSB7XG5cbiAgICAvLyBJZiB0aGUgdmFsdWUgcGFzc2VkIGhhcyBjaGFuZ2VkLCBzZXQgaXQuIElmIHZhbHVlIGlzIG5vdCBwYXNzZWQgaXQgd2lsbFxuICAgIC8vIGludGVybmFsbHkgdXBkYXRlLCBhbmQgdGhpcyB3aWxsIG5ldmVyIHJ1blxuICAgIGlmICghdXRpbHMuaXNTYW1lKHRoaXMucHJvcHMudmFsdWUsIHByZXZQcm9wcy52YWx1ZSkpIHtcbiAgICAgIHRoaXMuc2V0VmFsdWUodGhpcy5wcm9wcy52YWx1ZSk7XG4gICAgfVxuXG4gICAgLy8gSWYgdmFsaWRhdGlvbnMgb3IgcmVxdWlyZWQgaXMgY2hhbmdlZCwgcnVuIGEgbmV3IHZhbGlkYXRpb25cbiAgICBpZiAoIXV0aWxzLmlzU2FtZSh0aGlzLnByb3BzLnZhbGlkYXRpb25zLCBwcmV2UHJvcHMudmFsaWRhdGlvbnMpIHx8ICF1dGlscy5pc1NhbWUodGhpcy5wcm9wcy5yZXF1aXJlZCwgcHJldlByb3BzLnJlcXVpcmVkKSkge1xuICAgICAgdGhpcy5jb250ZXh0LmZvcm1zeS52YWxpZGF0ZSh0aGlzKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gRGV0YWNoIGl0IHdoZW4gY29tcG9uZW50IHVubW91bnRzXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50OiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICB0aGlzLmNvbnRleHQuZm9ybXN5LmRldGFjaEZyb21Gb3JtKHRoaXMpO1xuICAgIC8vdGhpcy5wcm9wcy5fZGV0YWNoRnJvbUZvcm0odGhpcyk7XG4gIH0sXG5cbiAgc2V0VmFsaWRhdGlvbnM6IGZ1bmN0aW9uIHNldFZhbGlkYXRpb25zKHZhbGlkYXRpb25zLCByZXF1aXJlZCkge1xuXG4gICAgLy8gQWRkIHZhbGlkYXRpb25zIHRvIHRoZSBzdG9yZSBpdHNlbGYgYXMgdGhlIHByb3BzIG9iamVjdCBjYW4gbm90IGJlIG1vZGlmaWVkXG4gICAgdGhpcy5fdmFsaWRhdGlvbnMgPSBjb252ZXJ0VmFsaWRhdGlvbnNUb09iamVjdCh2YWxpZGF0aW9ucykgfHwge307XG4gICAgdGhpcy5fcmVxdWlyZWRWYWxpZGF0aW9ucyA9IHJlcXVpcmVkID09PSB0cnVlID8geyBpc0RlZmF1bHRSZXF1aXJlZFZhbHVlOiB0cnVlIH0gOiBjb252ZXJ0VmFsaWRhdGlvbnNUb09iamVjdChyZXF1aXJlZCk7XG4gIH0sXG5cbiAgLy8gV2UgdmFsaWRhdGUgYWZ0ZXIgdGhlIHZhbHVlIGhhcyBiZWVuIHNldFxuICBzZXRWYWx1ZTogZnVuY3Rpb24gc2V0VmFsdWUodmFsdWUpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIF92YWx1ZTogdmFsdWUsXG4gICAgICBfaXNQcmlzdGluZTogZmFsc2VcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmNvbnRleHQuZm9ybXN5LnZhbGlkYXRlKHRoaXMpO1xuICAgICAgLy90aGlzLnByb3BzLl92YWxpZGF0ZSh0aGlzKTtcbiAgICB9LmJpbmQodGhpcykpO1xuICB9LFxuICByZXNldFZhbHVlOiBmdW5jdGlvbiByZXNldFZhbHVlKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgX3ZhbHVlOiB0aGlzLnN0YXRlLl9wcmlzdGluZVZhbHVlLFxuICAgICAgX2lzUHJpc3RpbmU6IHRydWVcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmNvbnRleHQuZm9ybXN5LnZhbGlkYXRlKHRoaXMpO1xuICAgICAgLy90aGlzLnByb3BzLl92YWxpZGF0ZSh0aGlzKTtcbiAgICB9KTtcbiAgfSxcbiAgZ2V0VmFsdWU6IGZ1bmN0aW9uIGdldFZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLl92YWx1ZTtcbiAgfSxcbiAgaGFzVmFsdWU6IGZ1bmN0aW9uIGhhc1ZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLl92YWx1ZSAhPT0gJyc7XG4gIH0sXG4gIGdldEVycm9yTWVzc2FnZTogZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKCkge1xuICAgIHZhciBtZXNzYWdlcyA9IHRoaXMuZ2V0RXJyb3JNZXNzYWdlcygpO1xuICAgIHJldHVybiBtZXNzYWdlcy5sZW5ndGggPyBtZXNzYWdlc1swXSA6IG51bGw7XG4gIH0sXG4gIGdldEVycm9yTWVzc2FnZXM6IGZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZXMoKSB7XG4gICAgcmV0dXJuICF0aGlzLmlzVmFsaWQoKSB8fCB0aGlzLnNob3dSZXF1aXJlZCgpID8gdGhpcy5zdGF0ZS5fZXh0ZXJuYWxFcnJvciB8fCB0aGlzLnN0YXRlLl92YWxpZGF0aW9uRXJyb3IgfHwgW10gOiBbXTtcbiAgfSxcbiAgaXNGb3JtRGlzYWJsZWQ6IGZ1bmN0aW9uIGlzRm9ybURpc2FibGVkKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHQuZm9ybXN5LmlzRm9ybURpc2FibGVkKCk7XG4gICAgLy9yZXR1cm4gdGhpcy5wcm9wcy5faXNGb3JtRGlzYWJsZWQoKTtcbiAgfSxcbiAgaXNWYWxpZDogZnVuY3Rpb24gaXNWYWxpZCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5faXNWYWxpZDtcbiAgfSxcbiAgaXNQcmlzdGluZTogZnVuY3Rpb24gaXNQcmlzdGluZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5faXNQcmlzdGluZTtcbiAgfSxcbiAgaXNGb3JtU3VibWl0dGVkOiBmdW5jdGlvbiBpc0Zvcm1TdWJtaXR0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX2Zvcm1TdWJtaXR0ZWQ7XG4gIH0sXG4gIGlzUmVxdWlyZWQ6IGZ1bmN0aW9uIGlzUmVxdWlyZWQoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5wcm9wcy5yZXF1aXJlZDtcbiAgfSxcbiAgc2hvd1JlcXVpcmVkOiBmdW5jdGlvbiBzaG93UmVxdWlyZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX2lzUmVxdWlyZWQ7XG4gIH0sXG4gIHNob3dFcnJvcjogZnVuY3Rpb24gc2hvd0Vycm9yKCkge1xuICAgIHJldHVybiAhdGhpcy5zaG93UmVxdWlyZWQoKSAmJiAhdGhpcy5pc1ZhbGlkKCk7XG4gIH0sXG4gIGlzVmFsaWRWYWx1ZTogZnVuY3Rpb24gaXNWYWxpZFZhbHVlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGV4dC5mb3Jtc3kuaXNWYWxpZFZhbHVlLmNhbGwobnVsbCwgdGhpcywgdmFsdWUpO1xuICAgIC8vcmV0dXJuIHRoaXMucHJvcHMuX2lzVmFsaWRWYWx1ZS5jYWxsKG51bGwsIHRoaXMsIHZhbHVlKTtcbiAgfVxufTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2Zvcm1zeS1yZWFjdC9saWIvTWl4aW4uanMiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKG9iaiwga2V5cykgeyB2YXIgdGFyZ2V0ID0ge307IGZvciAodmFyIGkgaW4gb2JqKSB7IGlmIChrZXlzLmluZGV4T2YoaSkgPj0gMCkgY29udGludWU7IGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgaSkpIGNvbnRpbnVlOyB0YXJnZXRbaV0gPSBvYmpbaV07IH0gcmV0dXJuIHRhcmdldDsgfVxuXG52YXIgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xudmFyIFJlYWN0ID0gZ2xvYmFsLlJlYWN0IHx8IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgY3JlYXRlUmVhY3RDbGFzcyA9IHJlcXVpcmUoJ2NyZWF0ZS1yZWFjdC1jbGFzcycpO1xudmFyIEZvcm1zeSA9IHt9O1xudmFyIHZhbGlkYXRpb25SdWxlcyA9IHJlcXVpcmUoJy4vdmFsaWRhdGlvblJ1bGVzLmpzJyk7XG52YXIgZm9ybURhdGFUb09iamVjdCA9IHJlcXVpcmUoJ2Zvcm0tZGF0YS10by1vYmplY3QnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMuanMnKTtcbnZhciBNaXhpbiA9IHJlcXVpcmUoJy4vTWl4aW4uanMnKTtcbnZhciBIT0MgPSByZXF1aXJlKCcuL0hPQy5qcycpO1xudmFyIERlY29yYXRvciA9IHJlcXVpcmUoJy4vRGVjb3JhdG9yLmpzJyk7XG52YXIgb3B0aW9ucyA9IHt9O1xudmFyIGVtcHR5QXJyYXkgPSBbXTtcblxuRm9ybXN5Lk1peGluID0gTWl4aW47XG5Gb3Jtc3kuSE9DID0gSE9DO1xuRm9ybXN5LkRlY29yYXRvciA9IERlY29yYXRvcjtcblxuRm9ybXN5LmRlZmF1bHRzID0gZnVuY3Rpb24gKHBhc3NlZE9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IHBhc3NlZE9wdGlvbnM7XG59O1xuXG5Gb3Jtc3kuYWRkVmFsaWRhdGlvblJ1bGUgPSBmdW5jdGlvbiAobmFtZSwgZnVuYykge1xuICB2YWxpZGF0aW9uUnVsZXNbbmFtZV0gPSBmdW5jO1xufTtcblxuRm9ybXN5LkZvcm0gPSBjcmVhdGVSZWFjdENsYXNzKHtcbiAgZGlzcGxheU5hbWU6ICdGb3Jtc3knLFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaXNWYWxpZDogdHJ1ZSxcbiAgICAgIGlzU3VibWl0dGluZzogZmFsc2UsXG4gICAgICBjYW5DaGFuZ2U6IGZhbHNlXG4gICAgfTtcbiAgfSxcbiAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9uU3VjY2VzczogZnVuY3Rpb24gb25TdWNjZXNzKCkge30sXG4gICAgICBvbkVycm9yOiBmdW5jdGlvbiBvbkVycm9yKCkge30sXG4gICAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoKSB7fSxcbiAgICAgIG9uVmFsaWRTdWJtaXQ6IGZ1bmN0aW9uIG9uVmFsaWRTdWJtaXQoKSB7fSxcbiAgICAgIG9uSW52YWxpZFN1Ym1pdDogZnVuY3Rpb24gb25JbnZhbGlkU3VibWl0KCkge30sXG4gICAgICBvblZhbGlkOiBmdW5jdGlvbiBvblZhbGlkKCkge30sXG4gICAgICBvbkludmFsaWQ6IGZ1bmN0aW9uIG9uSW52YWxpZCgpIHt9LFxuICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKCkge30sXG4gICAgICB2YWxpZGF0aW9uRXJyb3JzOiBudWxsLFxuICAgICAgcHJldmVudEV4dGVybmFsSW52YWxpZGF0aW9uOiBmYWxzZVxuICAgIH07XG4gIH0sXG5cbiAgY2hpbGRDb250ZXh0VHlwZXM6IHtcbiAgICBmb3Jtc3k6IFByb3BUeXBlcy5vYmplY3RcbiAgfSxcbiAgZ2V0Q2hpbGRDb250ZXh0OiBmdW5jdGlvbiBnZXRDaGlsZENvbnRleHQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHJldHVybiB7XG4gICAgICBmb3Jtc3k6IHtcbiAgICAgICAgYXR0YWNoVG9Gb3JtOiB0aGlzLmF0dGFjaFRvRm9ybSxcbiAgICAgICAgZGV0YWNoRnJvbUZvcm06IHRoaXMuZGV0YWNoRnJvbUZvcm0sXG4gICAgICAgIHZhbGlkYXRlOiB0aGlzLnZhbGlkYXRlLFxuICAgICAgICBpc0Zvcm1EaXNhYmxlZDogdGhpcy5pc0Zvcm1EaXNhYmxlZCxcbiAgICAgICAgaXNWYWxpZFZhbHVlOiBmdW5jdGlvbiBpc1ZhbGlkVmFsdWUoY29tcG9uZW50LCB2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiBfdGhpcy5ydW5WYWxpZGF0aW9uKGNvbXBvbmVudCwgdmFsdWUpLmlzVmFsaWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9LFxuXG4gIC8vIEFkZCBhIG1hcCB0byBzdG9yZSB0aGUgaW5wdXRzIG9mIHRoZSBmb3JtLCBhIG1vZGVsIHRvIHN0b3JlXG4gIC8vIHRoZSB2YWx1ZXMgb2YgdGhlIGZvcm0gYW5kIHJlZ2lzdGVyIGNoaWxkIGlucHV0c1xuICBjb21wb25lbnRXaWxsTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICB0aGlzLmlucHV0cyA9IFtdO1xuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnZhbGlkYXRlRm9ybSgpO1xuICB9LFxuXG4gIGNvbXBvbmVudFdpbGxVcGRhdGU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVcGRhdGUoKSB7XG4gICAgLy8gS2VlcCBhIHJlZmVyZW5jZSB0byBpbnB1dCBuYW1lcyBiZWZvcmUgZm9ybSB1cGRhdGVzLFxuICAgIC8vIHRvIGNoZWNrIGlmIGlucHV0cyBoYXMgY2hhbmdlZCBhZnRlciByZW5kZXJcbiAgICB0aGlzLnByZXZJbnB1dE5hbWVzID0gdGhpcy5pbnB1dHMubWFwKGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgIHJldHVybiBjb21wb25lbnQucHJvcHMubmFtZTtcbiAgICB9KTtcbiAgfSxcblxuICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcblxuICAgIGlmICh0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnMgJiYgX3R5cGVvZih0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnMpID09PSAnb2JqZWN0JyAmJiBPYmplY3Qua2V5cyh0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnMpLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuc2V0SW5wdXRWYWxpZGF0aW9uRXJyb3JzKHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9ycyk7XG4gICAgfVxuXG4gICAgdmFyIG5ld0lucHV0TmFtZXMgPSB0aGlzLmlucHV0cy5tYXAoZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgcmV0dXJuIGNvbXBvbmVudC5wcm9wcy5uYW1lO1xuICAgIH0pO1xuICAgIGlmICh1dGlscy5hcnJheXNEaWZmZXIodGhpcy5wcmV2SW5wdXROYW1lcywgbmV3SW5wdXROYW1lcykpIHtcbiAgICAgIHRoaXMudmFsaWRhdGVGb3JtKCk7XG4gICAgfVxuICB9LFxuXG4gIC8vIEFsbG93IHJlc2V0dGluZyB0byBzcGVjaWZpZWQgZGF0YVxuICByZXNldDogZnVuY3Rpb24gcmVzZXQoZGF0YSkge1xuICAgIHRoaXMuc2V0Rm9ybVByaXN0aW5lKHRydWUpO1xuICAgIHRoaXMucmVzZXRNb2RlbChkYXRhKTtcbiAgfSxcblxuICAvLyBVcGRhdGUgbW9kZWwsIHN1Ym1pdCB0byB1cmwgcHJvcCBhbmQgc2VuZCB0aGUgbW9kZWxcbiAgc3VibWl0OiBmdW5jdGlvbiBzdWJtaXQoZXZlbnQpIHtcblxuICAgIGV2ZW50ICYmIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAvLyBUcmlnZ2VyIGZvcm0gYXMgbm90IHByaXN0aW5lLlxuICAgIC8vIElmIGFueSBpbnB1dHMgaGF2ZSBub3QgYmVlbiB0b3VjaGVkIHlldCB0aGlzIHdpbGwgbWFrZSB0aGVtIGRpcnR5XG4gICAgLy8gc28gdmFsaWRhdGlvbiBiZWNvbWVzIHZpc2libGUgKGlmIGJhc2VkIG9uIGlzUHJpc3RpbmUpXG4gICAgdGhpcy5zZXRGb3JtUHJpc3RpbmUoZmFsc2UpO1xuICAgIHZhciBtb2RlbCA9IHRoaXMuZ2V0TW9kZWwoKTtcbiAgICB0aGlzLnByb3BzLm9uU3VibWl0KG1vZGVsLCB0aGlzLnJlc2V0TW9kZWwsIHRoaXMudXBkYXRlSW5wdXRzV2l0aEVycm9yKTtcbiAgICB0aGlzLnN0YXRlLmlzVmFsaWQgPyB0aGlzLnByb3BzLm9uVmFsaWRTdWJtaXQobW9kZWwsIHRoaXMucmVzZXRNb2RlbCwgdGhpcy51cGRhdGVJbnB1dHNXaXRoRXJyb3IpIDogdGhpcy5wcm9wcy5vbkludmFsaWRTdWJtaXQobW9kZWwsIHRoaXMucmVzZXRNb2RlbCwgdGhpcy51cGRhdGVJbnB1dHNXaXRoRXJyb3IpO1xuICB9LFxuXG4gIG1hcE1vZGVsOiBmdW5jdGlvbiBtYXBNb2RlbChtb2RlbCkge1xuXG4gICAgaWYgKHRoaXMucHJvcHMubWFwcGluZykge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMubWFwcGluZyhtb2RlbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmb3JtRGF0YVRvT2JqZWN0LnRvT2JqKE9iamVjdC5rZXlzKG1vZGVsKS5yZWR1Y2UoZnVuY3Rpb24gKG1hcHBlZE1vZGVsLCBrZXkpIHtcblxuICAgICAgICB2YXIga2V5QXJyYXkgPSBrZXkuc3BsaXQoJy4nKTtcbiAgICAgICAgdmFyIGJhc2UgPSBtYXBwZWRNb2RlbDtcbiAgICAgICAgd2hpbGUgKGtleUFycmF5Lmxlbmd0aCkge1xuICAgICAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5QXJyYXkuc2hpZnQoKTtcbiAgICAgICAgICBiYXNlID0gYmFzZVtjdXJyZW50S2V5XSA9IGtleUFycmF5Lmxlbmd0aCA/IGJhc2VbY3VycmVudEtleV0gfHwge30gOiBtb2RlbFtrZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1hcHBlZE1vZGVsO1xuICAgICAgfSwge30pKTtcbiAgICB9XG4gIH0sXG5cbiAgZ2V0TW9kZWw6IGZ1bmN0aW9uIGdldE1vZGVsKCkge1xuICAgIHZhciBjdXJyZW50VmFsdWVzID0gdGhpcy5nZXRDdXJyZW50VmFsdWVzKCk7XG4gICAgcmV0dXJuIHRoaXMubWFwTW9kZWwoY3VycmVudFZhbHVlcyk7XG4gIH0sXG5cbiAgLy8gUmVzZXQgZWFjaCBrZXkgaW4gdGhlIG1vZGVsIHRvIHRoZSBvcmlnaW5hbCAvIGluaXRpYWwgLyBzcGVjaWZpZWQgdmFsdWVcbiAgcmVzZXRNb2RlbDogZnVuY3Rpb24gcmVzZXRNb2RlbChkYXRhKSB7XG4gICAgdGhpcy5pbnB1dHMuZm9yRWFjaChmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICB2YXIgbmFtZSA9IGNvbXBvbmVudC5wcm9wcy5uYW1lO1xuICAgICAgaWYgKGRhdGEgJiYgZGF0YS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICBjb21wb25lbnQuc2V0VmFsdWUoZGF0YVtuYW1lXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb21wb25lbnQucmVzZXRWYWx1ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMudmFsaWRhdGVGb3JtKCk7XG4gIH0sXG5cbiAgc2V0SW5wdXRWYWxpZGF0aW9uRXJyb3JzOiBmdW5jdGlvbiBzZXRJbnB1dFZhbGlkYXRpb25FcnJvcnMoZXJyb3JzKSB7XG4gICAgdGhpcy5pbnB1dHMuZm9yRWFjaChmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICB2YXIgbmFtZSA9IGNvbXBvbmVudC5wcm9wcy5uYW1lO1xuICAgICAgdmFyIGFyZ3MgPSBbe1xuICAgICAgICBfaXNWYWxpZDogIShuYW1lIGluIGVycm9ycyksXG4gICAgICAgIF92YWxpZGF0aW9uRXJyb3I6IHR5cGVvZiBlcnJvcnNbbmFtZV0gPT09ICdzdHJpbmcnID8gW2Vycm9yc1tuYW1lXV0gOiBlcnJvcnNbbmFtZV1cbiAgICAgIH1dO1xuICAgICAgY29tcG9uZW50LnNldFN0YXRlLmFwcGx5KGNvbXBvbmVudCwgYXJncyk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLy8gQ2hlY2tzIGlmIHRoZSB2YWx1ZXMgaGF2ZSBjaGFuZ2VkIGZyb20gdGhlaXIgaW5pdGlhbCB2YWx1ZVxuICBpc0NoYW5nZWQ6IGZ1bmN0aW9uIGlzQ2hhbmdlZCgpIHtcbiAgICByZXR1cm4gIXV0aWxzLmlzU2FtZSh0aGlzLmdldFByaXN0aW5lVmFsdWVzKCksIHRoaXMuZ2V0Q3VycmVudFZhbHVlcygpKTtcbiAgfSxcblxuICBnZXRQcmlzdGluZVZhbHVlczogZnVuY3Rpb24gZ2V0UHJpc3RpbmVWYWx1ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5wdXRzLnJlZHVjZShmdW5jdGlvbiAoZGF0YSwgY29tcG9uZW50KSB7XG4gICAgICB2YXIgbmFtZSA9IGNvbXBvbmVudC5wcm9wcy5uYW1lO1xuICAgICAgZGF0YVtuYW1lXSA9IGNvbXBvbmVudC5wcm9wcy52YWx1ZTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0sIHt9KTtcbiAgfSxcblxuICAvLyBHbyB0aHJvdWdoIGVycm9ycyBmcm9tIHNlcnZlciBhbmQgZ3JhYiB0aGUgY29tcG9uZW50c1xuICAvLyBzdG9yZWQgaW4gdGhlIGlucHV0cyBtYXAuIENoYW5nZSB0aGVpciBzdGF0ZSB0byBpbnZhbGlkXG4gIC8vIGFuZCBzZXQgdGhlIHNlcnZlckVycm9yIG1lc3NhZ2VcbiAgdXBkYXRlSW5wdXRzV2l0aEVycm9yOiBmdW5jdGlvbiB1cGRhdGVJbnB1dHNXaXRoRXJyb3IoZXJyb3JzKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICBPYmplY3Qua2V5cyhlcnJvcnMpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUsIGluZGV4KSB7XG4gICAgICB2YXIgY29tcG9uZW50ID0gdXRpbHMuZmluZChfdGhpczIuaW5wdXRzLCBmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICAgIHJldHVybiBjb21wb25lbnQucHJvcHMubmFtZSA9PT0gbmFtZTtcbiAgICAgIH0pO1xuICAgICAgaWYgKCFjb21wb25lbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgYXJlIHRyeWluZyB0byB1cGRhdGUgYW4gaW5wdXQgdGhhdCBkb2VzIG5vdCBleGlzdC4gJyArICdWZXJpZnkgZXJyb3JzIG9iamVjdCB3aXRoIGlucHV0IG5hbWVzLiAnICsgSlNPTi5zdHJpbmdpZnkoZXJyb3JzKSk7XG4gICAgICB9XG4gICAgICB2YXIgYXJncyA9IFt7XG4gICAgICAgIF9pc1ZhbGlkOiBfdGhpczIucHJvcHMucHJldmVudEV4dGVybmFsSW52YWxpZGF0aW9uIHx8IGZhbHNlLFxuICAgICAgICBfZXh0ZXJuYWxFcnJvcjogdHlwZW9mIGVycm9yc1tuYW1lXSA9PT0gJ3N0cmluZycgPyBbZXJyb3JzW25hbWVdXSA6IGVycm9yc1tuYW1lXVxuICAgICAgfV07XG4gICAgICBjb21wb25lbnQuc2V0U3RhdGUuYXBwbHkoY29tcG9uZW50LCBhcmdzKTtcbiAgICB9KTtcbiAgfSxcblxuICBpc0Zvcm1EaXNhYmxlZDogZnVuY3Rpb24gaXNGb3JtRGlzYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuZGlzYWJsZWQ7XG4gIH0sXG5cbiAgZ2V0Q3VycmVudFZhbHVlczogZnVuY3Rpb24gZ2V0Q3VycmVudFZhbHVlcygpIHtcbiAgICByZXR1cm4gdGhpcy5pbnB1dHMucmVkdWNlKGZ1bmN0aW9uIChkYXRhLCBjb21wb25lbnQpIHtcbiAgICAgIHZhciBuYW1lID0gY29tcG9uZW50LnByb3BzLm5hbWU7XG4gICAgICBkYXRhW25hbWVdID0gY29tcG9uZW50LnN0YXRlLl92YWx1ZTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0sIHt9KTtcbiAgfSxcblxuICBzZXRGb3JtUHJpc3RpbmU6IGZ1bmN0aW9uIHNldEZvcm1QcmlzdGluZShpc1ByaXN0aW5lKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBfZm9ybVN1Ym1pdHRlZDogIWlzUHJpc3RpbmVcbiAgICB9KTtcblxuICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBlYWNoIGNvbXBvbmVudCBhbmQgc2V0IGl0IGFzIHByaXN0aW5lXG4gICAgLy8gb3IgXCJkaXJ0eVwiLlxuICAgIHRoaXMuaW5wdXRzLmZvckVhY2goZnVuY3Rpb24gKGNvbXBvbmVudCwgaW5kZXgpIHtcbiAgICAgIGNvbXBvbmVudC5zZXRTdGF0ZSh7XG4gICAgICAgIF9mb3JtU3VibWl0dGVkOiAhaXNQcmlzdGluZSxcbiAgICAgICAgX2lzUHJpc3RpbmU6IGlzUHJpc3RpbmVcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LFxuXG4gIC8vIFVzZSB0aGUgYmluZGVkIHZhbHVlcyBhbmQgdGhlIGFjdHVhbCBpbnB1dCB2YWx1ZSB0b1xuICAvLyB2YWxpZGF0ZSB0aGUgaW5wdXQgYW5kIHNldCBpdHMgc3RhdGUuIFRoZW4gY2hlY2sgdGhlXG4gIC8vIHN0YXRlIG9mIHRoZSBmb3JtIGl0c2VsZlxuICB2YWxpZGF0ZTogZnVuY3Rpb24gdmFsaWRhdGUoY29tcG9uZW50KSB7XG5cbiAgICAvLyBUcmlnZ2VyIG9uQ2hhbmdlXG4gICAgaWYgKHRoaXMuc3RhdGUuY2FuQ2hhbmdlKSB7XG4gICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHRoaXMuZ2V0Q3VycmVudFZhbHVlcygpLCB0aGlzLmlzQ2hhbmdlZCgpKTtcbiAgICB9XG5cbiAgICB2YXIgdmFsaWRhdGlvbiA9IHRoaXMucnVuVmFsaWRhdGlvbihjb21wb25lbnQpO1xuICAgIC8vIFJ1biB0aHJvdWdoIHRoZSB2YWxpZGF0aW9ucywgc3BsaXQgdGhlbSB1cCBhbmQgY2FsbFxuICAgIC8vIHRoZSB2YWxpZGF0b3IgSUYgdGhlcmUgaXMgYSB2YWx1ZSBvciBpdCBpcyByZXF1aXJlZFxuICAgIGNvbXBvbmVudC5zZXRTdGF0ZSh7XG4gICAgICBfaXNWYWxpZDogdmFsaWRhdGlvbi5pc1ZhbGlkLFxuICAgICAgX2lzUmVxdWlyZWQ6IHZhbGlkYXRpb24uaXNSZXF1aXJlZCxcbiAgICAgIF92YWxpZGF0aW9uRXJyb3I6IHZhbGlkYXRpb24uZXJyb3IsXG4gICAgICBfZXh0ZXJuYWxFcnJvcjogbnVsbFxuICAgIH0sIHRoaXMudmFsaWRhdGVGb3JtKTtcbiAgfSxcblxuICAvLyBDaGVja3MgdmFsaWRhdGlvbiBvbiBjdXJyZW50IHZhbHVlIG9yIGEgcGFzc2VkIHZhbHVlXG4gIHJ1blZhbGlkYXRpb246IGZ1bmN0aW9uIHJ1blZhbGlkYXRpb24oY29tcG9uZW50LCB2YWx1ZSkge1xuXG4gICAgdmFyIGN1cnJlbnRWYWx1ZXMgPSB0aGlzLmdldEN1cnJlbnRWYWx1ZXMoKTtcbiAgICB2YXIgdmFsaWRhdGlvbkVycm9ycyA9IGNvbXBvbmVudC5wcm9wcy52YWxpZGF0aW9uRXJyb3JzO1xuICAgIHZhciB2YWxpZGF0aW9uRXJyb3IgPSBjb21wb25lbnQucHJvcHMudmFsaWRhdGlvbkVycm9yO1xuICAgIHZhbHVlID0gYXJndW1lbnRzLmxlbmd0aCA9PT0gMiA/IHZhbHVlIDogY29tcG9uZW50LnN0YXRlLl92YWx1ZTtcblxuICAgIHZhciB2YWxpZGF0aW9uUmVzdWx0cyA9IHRoaXMucnVuUnVsZXModmFsdWUsIGN1cnJlbnRWYWx1ZXMsIGNvbXBvbmVudC5fdmFsaWRhdGlvbnMpO1xuICAgIHZhciByZXF1aXJlZFJlc3VsdHMgPSB0aGlzLnJ1blJ1bGVzKHZhbHVlLCBjdXJyZW50VmFsdWVzLCBjb21wb25lbnQuX3JlcXVpcmVkVmFsaWRhdGlvbnMpO1xuXG4gICAgLy8gdGhlIGNvbXBvbmVudCBkZWZpbmVzIGFuIGV4cGxpY2l0IHZhbGlkYXRlIGZ1bmN0aW9uXG4gICAgaWYgKHR5cGVvZiBjb21wb25lbnQudmFsaWRhdGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdmFsaWRhdGlvblJlc3VsdHMuZmFpbGVkID0gY29tcG9uZW50LnZhbGlkYXRlKCkgPyBbXSA6IFsnZmFpbGVkJ107XG4gICAgfVxuXG4gICAgdmFyIGlzUmVxdWlyZWQgPSBPYmplY3Qua2V5cyhjb21wb25lbnQuX3JlcXVpcmVkVmFsaWRhdGlvbnMpLmxlbmd0aCA/ICEhcmVxdWlyZWRSZXN1bHRzLnN1Y2Nlc3MubGVuZ3RoIDogZmFsc2U7XG4gICAgdmFyIGlzVmFsaWQgPSAhdmFsaWRhdGlvblJlc3VsdHMuZmFpbGVkLmxlbmd0aCAmJiAhKHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9ycyAmJiB0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnNbY29tcG9uZW50LnByb3BzLm5hbWVdKTtcblxuICAgIHJldHVybiB7XG4gICAgICBpc1JlcXVpcmVkOiBpc1JlcXVpcmVkLFxuICAgICAgaXNWYWxpZDogaXNSZXF1aXJlZCA/IGZhbHNlIDogaXNWYWxpZCxcbiAgICAgIGVycm9yOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgaWYgKGlzVmFsaWQgJiYgIWlzUmVxdWlyZWQpIHtcbiAgICAgICAgICByZXR1cm4gZW1wdHlBcnJheTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2YWxpZGF0aW9uUmVzdWx0cy5lcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbGlkYXRpb25SZXN1bHRzLmVycm9ycztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnMgJiYgdGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzW2NvbXBvbmVudC5wcm9wcy5uYW1lXSkge1xuICAgICAgICAgIHJldHVybiB0eXBlb2YgdGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzW2NvbXBvbmVudC5wcm9wcy5uYW1lXSA9PT0gJ3N0cmluZycgPyBbdGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzW2NvbXBvbmVudC5wcm9wcy5uYW1lXV0gOiB0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnNbY29tcG9uZW50LnByb3BzLm5hbWVdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzUmVxdWlyZWQpIHtcbiAgICAgICAgICB2YXIgZXJyb3IgPSB2YWxpZGF0aW9uRXJyb3JzW3JlcXVpcmVkUmVzdWx0cy5zdWNjZXNzWzBdXTtcbiAgICAgICAgICByZXR1cm4gZXJyb3IgPyBbZXJyb3JdIDogbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2YWxpZGF0aW9uUmVzdWx0cy5mYWlsZWQubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbGlkYXRpb25SZXN1bHRzLmZhaWxlZC5tYXAoZnVuY3Rpb24gKGZhaWxlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbGlkYXRpb25FcnJvcnNbZmFpbGVkXSA/IHZhbGlkYXRpb25FcnJvcnNbZmFpbGVkXSA6IHZhbGlkYXRpb25FcnJvcjtcbiAgICAgICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKHgsIHBvcywgYXJyKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgZHVwbGljYXRlc1xuICAgICAgICAgICAgcmV0dXJuIGFyci5pbmRleE9mKHgpID09PSBwb3M7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0uY2FsbCh0aGlzKVxuICAgIH07XG4gIH0sXG5cbiAgcnVuUnVsZXM6IGZ1bmN0aW9uIHJ1blJ1bGVzKHZhbHVlLCBjdXJyZW50VmFsdWVzLCB2YWxpZGF0aW9ucykge1xuXG4gICAgdmFyIHJlc3VsdHMgPSB7XG4gICAgICBlcnJvcnM6IFtdLFxuICAgICAgZmFpbGVkOiBbXSxcbiAgICAgIHN1Y2Nlc3M6IFtdXG4gICAgfTtcbiAgICBpZiAoT2JqZWN0LmtleXModmFsaWRhdGlvbnMpLmxlbmd0aCkge1xuICAgICAgT2JqZWN0LmtleXModmFsaWRhdGlvbnMpLmZvckVhY2goZnVuY3Rpb24gKHZhbGlkYXRpb25NZXRob2QpIHtcblxuICAgICAgICBpZiAodmFsaWRhdGlvblJ1bGVzW3ZhbGlkYXRpb25NZXRob2RdICYmIHR5cGVvZiB2YWxpZGF0aW9uc1t2YWxpZGF0aW9uTWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRm9ybXN5IGRvZXMgbm90IGFsbG93IHlvdSB0byBvdmVycmlkZSBkZWZhdWx0IHZhbGlkYXRpb25zOiAnICsgdmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXZhbGlkYXRpb25SdWxlc1t2YWxpZGF0aW9uTWV0aG9kXSAmJiB0eXBlb2YgdmFsaWRhdGlvbnNbdmFsaWRhdGlvbk1ldGhvZF0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm1zeSBkb2VzIG5vdCBoYXZlIHRoZSB2YWxpZGF0aW9uIHJ1bGU6ICcgKyB2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgdmFsaWRhdGlvbnNbdmFsaWRhdGlvbk1ldGhvZF0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB2YXIgdmFsaWRhdGlvbiA9IHZhbGlkYXRpb25zW3ZhbGlkYXRpb25NZXRob2RdKGN1cnJlbnRWYWx1ZXMsIHZhbHVlKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbGlkYXRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXN1bHRzLmVycm9ycy5wdXNoKHZhbGlkYXRpb24pO1xuICAgICAgICAgICAgcmVzdWx0cy5mYWlsZWQucHVzaCh2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCF2YWxpZGF0aW9uKSB7XG4gICAgICAgICAgICByZXN1bHRzLmZhaWxlZC5wdXNoKHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbGlkYXRpb25zW3ZhbGlkYXRpb25NZXRob2RdICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdmFyIHZhbGlkYXRpb24gPSB2YWxpZGF0aW9uUnVsZXNbdmFsaWRhdGlvbk1ldGhvZF0oY3VycmVudFZhbHVlcywgdmFsdWUsIHZhbGlkYXRpb25zW3ZhbGlkYXRpb25NZXRob2RdKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbGlkYXRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXN1bHRzLmVycm9ycy5wdXNoKHZhbGlkYXRpb24pO1xuICAgICAgICAgICAgcmVzdWx0cy5mYWlsZWQucHVzaCh2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCF2YWxpZGF0aW9uKSB7XG4gICAgICAgICAgICByZXN1bHRzLmZhaWxlZC5wdXNoKHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHRzLnN1Y2Nlc3MucHVzaCh2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdHMuc3VjY2Vzcy5wdXNoKHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH0sXG5cbiAgLy8gVmFsaWRhdGUgdGhlIGZvcm0gYnkgZ29pbmcgdGhyb3VnaCBhbGwgY2hpbGQgaW5wdXQgY29tcG9uZW50c1xuICAvLyBhbmQgY2hlY2sgdGhlaXIgc3RhdGVcbiAgdmFsaWRhdGVGb3JtOiBmdW5jdGlvbiB2YWxpZGF0ZUZvcm0oKSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAvLyBXZSBuZWVkIGEgY2FsbGJhY2sgYXMgd2UgYXJlIHZhbGlkYXRpbmcgYWxsIGlucHV0cyBhZ2Fpbi4gVGhpcyB3aWxsXG4gICAgLy8gcnVuIHdoZW4gdGhlIGxhc3QgY29tcG9uZW50IGhhcyBzZXQgaXRzIHN0YXRlXG4gICAgdmFyIG9uVmFsaWRhdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFsbElzVmFsaWQgPSB0aGlzLmlucHV0cy5ldmVyeShmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICAgIHJldHVybiBjb21wb25lbnQuc3RhdGUuX2lzVmFsaWQ7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGlzVmFsaWQ6IGFsbElzVmFsaWRcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoYWxsSXNWYWxpZCkge1xuICAgICAgICB0aGlzLnByb3BzLm9uVmFsaWQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucHJvcHMub25JbnZhbGlkKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFRlbGwgdGhlIGZvcm0gdGhhdCBpdCBjYW4gc3RhcnQgdG8gdHJpZ2dlciBjaGFuZ2UgZXZlbnRzXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgY2FuQ2hhbmdlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9LmJpbmQodGhpcyk7XG5cbiAgICAvLyBSdW4gdmFsaWRhdGlvbiBhZ2FpbiBpbiBjYXNlIGFmZmVjdGVkIGJ5IG90aGVyIGlucHV0cy4gVGhlXG4gICAgLy8gbGFzdCBjb21wb25lbnQgdmFsaWRhdGVkIHdpbGwgcnVuIHRoZSBvblZhbGlkYXRpb25Db21wbGV0ZSBjYWxsYmFja1xuICAgIHRoaXMuaW5wdXRzLmZvckVhY2goZnVuY3Rpb24gKGNvbXBvbmVudCwgaW5kZXgpIHtcbiAgICAgIHZhciB2YWxpZGF0aW9uID0gX3RoaXMzLnJ1blZhbGlkYXRpb24oY29tcG9uZW50KTtcbiAgICAgIGlmICh2YWxpZGF0aW9uLmlzVmFsaWQgJiYgY29tcG9uZW50LnN0YXRlLl9leHRlcm5hbEVycm9yKSB7XG4gICAgICAgIHZhbGlkYXRpb24uaXNWYWxpZCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgY29tcG9uZW50LnNldFN0YXRlKHtcbiAgICAgICAgX2lzVmFsaWQ6IHZhbGlkYXRpb24uaXNWYWxpZCxcbiAgICAgICAgX2lzUmVxdWlyZWQ6IHZhbGlkYXRpb24uaXNSZXF1aXJlZCxcbiAgICAgICAgX3ZhbGlkYXRpb25FcnJvcjogdmFsaWRhdGlvbi5lcnJvcixcbiAgICAgICAgX2V4dGVybmFsRXJyb3I6ICF2YWxpZGF0aW9uLmlzVmFsaWQgJiYgY29tcG9uZW50LnN0YXRlLl9leHRlcm5hbEVycm9yID8gY29tcG9uZW50LnN0YXRlLl9leHRlcm5hbEVycm9yIDogbnVsbFxuICAgICAgfSwgaW5kZXggPT09IF90aGlzMy5pbnB1dHMubGVuZ3RoIC0gMSA/IG9uVmFsaWRhdGlvbkNvbXBsZXRlIDogbnVsbCk7XG4gICAgfSk7XG5cbiAgICAvLyBJZiB0aGVyZSBhcmUgbm8gaW5wdXRzLCBzZXQgc3RhdGUgd2hlcmUgZm9ybSBpcyByZWFkeSB0byB0cmlnZ2VyXG4gICAgLy8gY2hhbmdlIGV2ZW50LiBOZXcgaW5wdXRzIG1pZ2h0IGJlIGFkZGVkIGxhdGVyXG4gICAgaWYgKCF0aGlzLmlucHV0cy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBjYW5DaGFuZ2U6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBNZXRob2QgcHV0IG9uIGVhY2ggaW5wdXQgY29tcG9uZW50IHRvIHJlZ2lzdGVyXG4gIC8vIGl0c2VsZiB0byB0aGUgZm9ybVxuICBhdHRhY2hUb0Zvcm06IGZ1bmN0aW9uIGF0dGFjaFRvRm9ybShjb21wb25lbnQpIHtcblxuICAgIGlmICh0aGlzLmlucHV0cy5pbmRleE9mKGNvbXBvbmVudCkgPT09IC0xKSB7XG4gICAgICB0aGlzLmlucHV0cy5wdXNoKGNvbXBvbmVudCk7XG4gICAgfVxuXG4gICAgdGhpcy52YWxpZGF0ZShjb21wb25lbnQpO1xuICB9LFxuXG4gIC8vIE1ldGhvZCBwdXQgb24gZWFjaCBpbnB1dCBjb21wb25lbnQgdG8gdW5yZWdpc3RlclxuICAvLyBpdHNlbGYgZnJvbSB0aGUgZm9ybVxuICBkZXRhY2hGcm9tRm9ybTogZnVuY3Rpb24gZGV0YWNoRnJvbUZvcm0oY29tcG9uZW50KSB7XG4gICAgdmFyIGNvbXBvbmVudFBvcyA9IHRoaXMuaW5wdXRzLmluZGV4T2YoY29tcG9uZW50KTtcblxuICAgIGlmIChjb21wb25lbnRQb3MgIT09IC0xKSB7XG4gICAgICB0aGlzLmlucHV0cyA9IHRoaXMuaW5wdXRzLnNsaWNlKDAsIGNvbXBvbmVudFBvcykuY29uY2F0KHRoaXMuaW5wdXRzLnNsaWNlKGNvbXBvbmVudFBvcyArIDEpKTtcbiAgICB9XG5cbiAgICB0aGlzLnZhbGlkYXRlRm9ybSgpO1xuICB9LFxuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgbWFwcGluZyA9IF9wcm9wcy5tYXBwaW5nLFxuICAgICAgICB2YWxpZGF0aW9uRXJyb3JzID0gX3Byb3BzLnZhbGlkYXRpb25FcnJvcnMsXG4gICAgICAgIG9uU3VibWl0ID0gX3Byb3BzLm9uU3VibWl0LFxuICAgICAgICBvblZhbGlkID0gX3Byb3BzLm9uVmFsaWQsXG4gICAgICAgIG9uVmFsaWRTdWJtaXQgPSBfcHJvcHMub25WYWxpZFN1Ym1pdCxcbiAgICAgICAgb25JbnZhbGlkID0gX3Byb3BzLm9uSW52YWxpZCxcbiAgICAgICAgb25JbnZhbGlkU3VibWl0ID0gX3Byb3BzLm9uSW52YWxpZFN1Ym1pdCxcbiAgICAgICAgb25DaGFuZ2UgPSBfcHJvcHMub25DaGFuZ2UsXG4gICAgICAgIHJlc2V0ID0gX3Byb3BzLnJlc2V0LFxuICAgICAgICBwcmV2ZW50RXh0ZXJuYWxJbnZhbGlkYXRpb24gPSBfcHJvcHMucHJldmVudEV4dGVybmFsSW52YWxpZGF0aW9uLFxuICAgICAgICBvblN1Y2Nlc3MgPSBfcHJvcHMub25TdWNjZXNzLFxuICAgICAgICBvbkVycm9yID0gX3Byb3BzLm9uRXJyb3IsXG4gICAgICAgIG5vbkZvcm1zeVByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9wcm9wcywgWydtYXBwaW5nJywgJ3ZhbGlkYXRpb25FcnJvcnMnLCAnb25TdWJtaXQnLCAnb25WYWxpZCcsICdvblZhbGlkU3VibWl0JywgJ29uSW52YWxpZCcsICdvbkludmFsaWRTdWJtaXQnLCAnb25DaGFuZ2UnLCAncmVzZXQnLCAncHJldmVudEV4dGVybmFsSW52YWxpZGF0aW9uJywgJ29uU3VjY2VzcycsICdvbkVycm9yJ10pO1xuXG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAnZm9ybScsXG4gICAgICBfZXh0ZW5kcyh7fSwgbm9uRm9ybXN5UHJvcHMsIHsgb25TdWJtaXQ6IHRoaXMuc3VibWl0IH0pLFxuICAgICAgdGhpcy5wcm9wcy5jaGlsZHJlblxuICAgICk7XG4gIH1cbn0pO1xuXG5pZiAoIWdsb2JhbC5leHBvcnRzICYmICFnbG9iYWwubW9kdWxlICYmICghZ2xvYmFsLmRlZmluZSB8fCAhZ2xvYmFsLmRlZmluZS5hbWQpKSB7XG4gIGdsb2JhbC5Gb3Jtc3kgPSBGb3Jtc3k7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRm9ybXN5O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vZm9ybXN5LXJlYWN0L2xpYi9tYWluLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhcnJheXNEaWZmZXI6IGZ1bmN0aW9uIGFycmF5c0RpZmZlcihhLCBiKSB7XG4gICAgdmFyIGlzRGlmZmVyZW50ID0gZmFsc2U7XG4gICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkge1xuICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgIGlmICghdGhpcy5pc1NhbWUoaXRlbSwgYltpbmRleF0pKSB7XG4gICAgICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzKTtcbiAgICB9XG4gICAgcmV0dXJuIGlzRGlmZmVyZW50O1xuICB9LFxuXG4gIG9iamVjdHNEaWZmZXI6IGZ1bmN0aW9uIG9iamVjdHNEaWZmZXIoYSwgYikge1xuICAgIHZhciBpc0RpZmZlcmVudCA9IGZhbHNlO1xuICAgIGlmIChPYmplY3Qua2V5cyhhKS5sZW5ndGggIT09IE9iamVjdC5rZXlzKGIpLmxlbmd0aCkge1xuICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBPYmplY3Qua2V5cyhhKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU2FtZShhW2tleV0sIGJba2V5XSkpIHtcbiAgICAgICAgICBpc0RpZmZlcmVudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0sIHRoaXMpO1xuICAgIH1cbiAgICByZXR1cm4gaXNEaWZmZXJlbnQ7XG4gIH0sXG5cbiAgaXNTYW1lOiBmdW5jdGlvbiBpc1NhbWUoYSwgYikge1xuICAgIGlmICgodHlwZW9mIGEgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGEpKSAhPT0gKHR5cGVvZiBiID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihiKSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYSkgJiYgQXJyYXkuaXNBcnJheShiKSkge1xuICAgICAgcmV0dXJuICF0aGlzLmFycmF5c0RpZmZlcihhLCBiKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gYS50b1N0cmluZygpID09PSBiLnRvU3RyaW5nKCk7XG4gICAgfSBlbHNlIGlmICgodHlwZW9mIGEgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGEpKSA9PT0gJ29iamVjdCcgJiYgYSAhPT0gbnVsbCAmJiBiICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gIXRoaXMub2JqZWN0c0RpZmZlcihhLCBiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYSA9PT0gYjtcbiAgfSxcblxuICBmaW5kOiBmdW5jdGlvbiBmaW5kKGNvbGxlY3Rpb24sIGZuKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjb2xsZWN0aW9uLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIGl0ZW0gPSBjb2xsZWN0aW9uW2ldO1xuICAgICAgaWYgKGZuKGl0ZW0pKSB7XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2Zvcm1zeS1yZWFjdC9saWIvdXRpbHMuanMiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfaXNFeGlzdHkgPSBmdW5jdGlvbiBfaXNFeGlzdHkodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQ7XG59O1xuXG52YXIgaXNFbXB0eSA9IGZ1bmN0aW9uIGlzRW1wdHkodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09PSAnJztcbn07XG5cbnZhciB2YWxpZGF0aW9ucyA9IHtcbiAgaXNEZWZhdWx0UmVxdWlyZWRWYWx1ZTogZnVuY3Rpb24gaXNEZWZhdWx0UmVxdWlyZWRWYWx1ZSh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09ICcnO1xuICB9LFxuICBpc0V4aXN0eTogZnVuY3Rpb24gaXNFeGlzdHkodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiBfaXNFeGlzdHkodmFsdWUpO1xuICB9LFxuICBtYXRjaFJlZ2V4cDogZnVuY3Rpb24gbWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgcmVnZXhwKSB7XG4gICAgcmV0dXJuICFfaXNFeGlzdHkodmFsdWUpIHx8IGlzRW1wdHkodmFsdWUpIHx8IHJlZ2V4cC50ZXN0KHZhbHVlKTtcbiAgfSxcbiAgaXNVbmRlZmluZWQ6IGZ1bmN0aW9uIGlzVW5kZWZpbmVkKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZDtcbiAgfSxcbiAgaXNFbXB0eVN0cmluZzogZnVuY3Rpb24gaXNFbXB0eVN0cmluZyh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIGlzRW1wdHkodmFsdWUpO1xuICB9LFxuICBpc0VtYWlsOiBmdW5jdGlvbiBpc0VtYWlsKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL14oKChbYS16XXxcXGR8WyEjXFwkJSYnXFwqXFwrXFwtXFwvPVxcP1xcXl9ge1xcfH1+XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkrKFxcLihbYS16XXxcXGR8WyEjXFwkJSYnXFwqXFwrXFwtXFwvPVxcP1xcXl9ge1xcfH1+XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkrKSopfCgoXFx4MjIpKCgoKFxceDIwfFxceDA5KSooXFx4MGRcXHgwYSkpPyhcXHgyMHxcXHgwOSkrKT8oKFtcXHgwMS1cXHgwOFxceDBiXFx4MGNcXHgwZS1cXHgxZlxceDdmXXxcXHgyMXxbXFx4MjMtXFx4NWJdfFtcXHg1ZC1cXHg3ZV18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfChcXFxcKFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZC1cXHg3Zl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkpKigoKFxceDIwfFxceDA5KSooXFx4MGRcXHgwYSkpPyhcXHgyMHxcXHgwOSkrKT8oXFx4MjIpKSlAKCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKVxcLikrKChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpJC9pKTtcbiAgfSxcbiAgaXNVcmw6IGZ1bmN0aW9uIGlzVXJsKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL14oaHR0cHM/fHM/ZnRwKTpcXC9cXC8oKCgoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OikqQCk/KCgoXFxkfFsxLTldXFxkfDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNV0pXFwuKFxcZHxbMS05XVxcZHwxXFxkXFxkfDJbMC00XVxcZHwyNVswLTVdKVxcLihcXGR8WzEtOV1cXGR8MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC01XSlcXC4oXFxkfFsxLTldXFxkfDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNV0pKXwoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4/KSg6XFxkKik/KShcXC8oKChbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoJVtcXGRhLWZdezJ9KXxbIVxcJCYnXFwoXFwpXFwqXFwrLDs9XXw6fEApKyhcXC8oKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCkqKSopPyk/KFxcPygoKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCl8W1xcdUUwMDAtXFx1RjhGRl18XFwvfFxcPykqKT8oIygoKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCl8XFwvfFxcPykqKT8kL2kpO1xuICB9LFxuICBpc1RydWU6IGZ1bmN0aW9uIGlzVHJ1ZSh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSB0cnVlO1xuICB9LFxuICBpc0ZhbHNlOiBmdW5jdGlvbiBpc0ZhbHNlKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IGZhbHNlO1xuICB9LFxuICBpc051bWVyaWM6IGZ1bmN0aW9uIGlzTnVtZXJpYyh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL15bLStdPyg/OlxcZCpbLl0pP1xcZCskLyk7XG4gIH0sXG4gIGlzQWxwaGE6IGZ1bmN0aW9uIGlzQWxwaGEodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXltBLVpdKyQvaSk7XG4gIH0sXG4gIGlzQWxwaGFudW1lcmljOiBmdW5jdGlvbiBpc0FscGhhbnVtZXJpYyh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eWzAtOUEtWl0rJC9pKTtcbiAgfSxcbiAgaXNJbnQ6IGZ1bmN0aW9uIGlzSW50KHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL14oPzpbLStdPyg/OjB8WzEtOV1cXGQqKSkkLyk7XG4gIH0sXG4gIGlzRmxvYXQ6IGZ1bmN0aW9uIGlzRmxvYXQodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXig/OlstK10/KD86XFxkKykpPyg/OlxcLlxcZCopPyg/OltlRV1bXFwrXFwtXT8oPzpcXGQrKSk/JC8pO1xuICB9LFxuICBpc1dvcmRzOiBmdW5jdGlvbiBpc1dvcmRzKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL15bQS1aXFxzXSskL2kpO1xuICB9LFxuICBpc1NwZWNpYWxXb3JkczogZnVuY3Rpb24gaXNTcGVjaWFsV29yZHModmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXltBLVpcXHNcXHUwMEMwLVxcdTAxN0ZdKyQvaSk7XG4gIH0sXG4gIGlzTGVuZ3RoOiBmdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZXMsIHZhbHVlLCBsZW5ndGgpIHtcbiAgICByZXR1cm4gIV9pc0V4aXN0eSh2YWx1ZSkgfHwgaXNFbXB0eSh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoID09PSBsZW5ndGg7XG4gIH0sXG4gIGVxdWFsczogZnVuY3Rpb24gZXF1YWxzKHZhbHVlcywgdmFsdWUsIGVxbCkge1xuICAgIHJldHVybiAhX2lzRXhpc3R5KHZhbHVlKSB8fCBpc0VtcHR5KHZhbHVlKSB8fCB2YWx1ZSA9PSBlcWw7XG4gIH0sXG4gIGVxdWFsc0ZpZWxkOiBmdW5jdGlvbiBlcXVhbHNGaWVsZCh2YWx1ZXMsIHZhbHVlLCBmaWVsZCkge1xuICAgIHJldHVybiB2YWx1ZSA9PSB2YWx1ZXNbZmllbGRdO1xuICB9LFxuICBtYXhMZW5ndGg6IGZ1bmN0aW9uIG1heExlbmd0aCh2YWx1ZXMsIHZhbHVlLCBsZW5ndGgpIHtcbiAgICByZXR1cm4gIV9pc0V4aXN0eSh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoIDw9IGxlbmd0aDtcbiAgfSxcbiAgbWluTGVuZ3RoOiBmdW5jdGlvbiBtaW5MZW5ndGgodmFsdWVzLCB2YWx1ZSwgbGVuZ3RoKSB7XG4gICAgcmV0dXJuICFfaXNFeGlzdHkodmFsdWUpIHx8IGlzRW1wdHkodmFsdWUpIHx8IHZhbHVlLmxlbmd0aCA+PSBsZW5ndGg7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gdmFsaWRhdGlvbnM7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9mb3Jtc3ktcmVhY3QvbGliL3ZhbGlkYXRpb25SdWxlcy5qcyIsImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBGb3Jtc3ksIHsgSE9DIH0gZnJvbSAnZm9ybXN5LXJlYWN0JztcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcclxuXHJcbmNsYXNzIElucHV0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuY2hhbmdlVmFsdWUgPSAoZXZlbnQpID0+IHtcclxuICAgICAgdGhpcy5wcm9wcy5zZXRWYWx1ZShldmVudC5jdXJyZW50VGFyZ2V0W3RoaXMucHJvcHMudHlwZSA9PT0gJ2NoZWNrYm94JyA/XHJcbiAgICAgICAgJ2NoZWNrZWQnIDogJ3ZhbHVlJ10pO1xyXG4gICAgfTtcclxuICB9XHJcbiAgcmVuZGVyICgpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHRoaXMucHJvcHMuZ2V0RXJyb3JNZXNzYWdlKCk7XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcm9maWxlLWZpZWxkXCI+XHJcbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwicHJvZmlsZS1maWVsZF9fbGFiZWxcIj57dGhpcy5wcm9wcy5sYWJlbH08L3NwYW4+XHJcbiAgICAgICAge3RoaXMucHJvcHMuZGlzYWJsZWQgP1xyXG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwicHJvZmlsZS1maWVsZF9fdmFsdWVcIj5cclxuICAgICAgICAgICAge3RoaXMucHJvcHMudmFsdWV9XHJcbiAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICA6XHJcbiAgICAgICAgICA8bGFiZWw+XHJcbiAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgIG5hbWU9e3RoaXMucHJvcHMubmFtZS50b0xvd2VyQ2FzZSgpfVxyXG4gICAgICAgICAgICAgIHR5cGU9e3RoaXMucHJvcHMudHlwZSB8fCAndGV4dCd9XHJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuY2hhbmdlVmFsdWV9XHJcbiAgICAgICAgICAgICAgdmFsdWU9e3RoaXMucHJvcHMuZ2V0VmFsdWUoKX1cclxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dGhpcy5wcm9wcy5wbGFjZWhvbGRlciB8fCAnJ30vPlxyXG4gICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJwcm9maWxlLWZpZWxkX19pbnB1dC1pY29uIGZhLXBlbmNpbCBmYSBcIj48L2k+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInNpZ251cC1mb3JtX19lcnJvci1tZXNzYWdlXCI+e2Vycm9yTWVzc2FnZX08L3NwYW4+XHJcbiAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgIH1cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuSW5wdXQucHJvcFR5cGVzID0ge1xyXG4gIHZhbHVlOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIGxhYmVsOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIG5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgY2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIHR5cGU6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgc2V0VmFsdWU6IFByb3BUeXBlcy5hbnksXHJcbiAgZ2V0VmFsdWU6IFByb3BUeXBlcy5mdW5jLFxyXG4gIGdldEVycm9yTWVzc2FnZTogUHJvcFR5cGVzLmZ1bmMsXHJcbiAgZGlzYWJsZWQ6IFByb3BUeXBlcy5ib29sLFxyXG4gIHBsYWNlaG9sZGVyOiBQcm9wVHlwZXMuc3RyaW5nXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBIT0MoSW5wdXQpO1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy9JbnB1dC9JbnB1dC5qcyIsImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBGb3Jtc3ksIHsgSE9DIH0gZnJvbSAnZm9ybXN5LXJlYWN0JztcclxuaW1wb3J0IElucHV0IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvSW5wdXQvSW5wdXQnO1xyXG5pbXBvcnQge1xyXG4gIHVwZGF0ZVByb2ZpbGVSZXF1ZXN0LFxyXG4gIGRlbGV0ZVVzZXJSZXF1ZXN0LFxyXG4gIGNsZWFyVXBkYXRlUHJvZmlsZVN0YXR1cyxcclxuICB1cGxvYWRQaG90b0ZhaWx1cmUgfSBmcm9tICcuLi8uLi9hY3Rpb25zL3VzZXJzLmFjdGlvbic7XHJcbmltcG9ydCB7IGJpbmRBY3Rpb25DcmVhdG9ycyB9IGZyb20gJ3JlZHV4JztcclxuaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvTWVzc2FnZS9NZXNzYWdlJztcclxuaW1wb3J0IHsgUG9wdXAgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL1BvcHVwL1BvcHVwJztcclxuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9CdXR0b24vQnV0dG9uJztcclxuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlYWN0LXJlZHV4JztcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcclxuaW1wb3J0ICcuL1Byb2ZpbGUuc2Nzcyc7XHJcblxyXG5jbGFzcyBQcm9maWxlIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuXHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBkaXNhYmxlZDogdHJ1ZSxcclxuICAgICAgY2FuU3VibWl0OiBmYWxzZSxcclxuICAgICAgaW1hZ2VCYXNlNjQ6IG51bGwsXHJcbiAgICAgIHBvcHVwU2hvd246IGZhbHNlLFxyXG4gICAgICB1cGRhdGVJbWFnZVN0YXR1czogJydcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRQb3B1cFNob3duID0gKGlkKSA9PiB7XHJcbiAgICBjb25zdCBjdXJyZW50U3RhdGUgPSB0aGlzLnN0YXRlLnBvcHVwU2hvd247XHJcblxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIHBvcHVwU2hvd246ICFjdXJyZW50U3RhdGVcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHVwZGF0ZVByb2ZpbGUgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICBuYW1lOiB0aGlzLm5hbWUuZ2V0VmFsdWUoKSxcclxuICAgICAgZW1haWw6IHRoaXMuZW1haWwuZ2V0VmFsdWUoKSxcclxuICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQuZ2V0VmFsdWUoKSxcclxuICAgICAgcGFzc3dvcmRSZXBlYXQ6IHRoaXMucGFzc3dvcmRSZXBlYXQuZ2V0VmFsdWUoKSxcclxuICAgICAgYXZhdGFyOiB0aGlzLmJhc2U2NFN0cixcclxuICAgICAgX2lkOiB0aGlzLnByb3BzLnVzZXIuX2lkXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMucHJvcHMudXBkYXRlUHJvZmlsZVJlcXVlc3QoZGF0YSk7XHJcbiAgfTtcclxuXHJcbiAgZW5hYmxlQnV0dG9uID0gKCkgPT4ge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGNhblN1Ym1pdDogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgZGlzYWJsZUJ1dHRvbiA9ICgpID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBjYW5TdWJtaXQ6IGZhbHNlXHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBlZGl0RGF0YSA9ICgpID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBkaXNhYmxlZDogIXRoaXMuc3RhdGUuZGlzYWJsZWRcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGRlbGV0ZVVzZXIgPSAoKSA9PiB7XHJcbiAgICB0aGlzLnByb3BzLmRlbGV0ZVVzZXJSZXF1ZXN0KHRoaXMucHJvcHMudXNlcik7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVGaWxlU2VsZWN0ID0gKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRoaXMuc2V0U3RhdGUoeyB1cGRhdGVJbWFnZVN0YXR1czogJ0xvYWRpbmcuLi4nIH0pO1xyXG4gICAgY29uc3QgZmlsZXMgPSBlLnRhcmdldC5maWxlcyA/IGUudGFyZ2V0LmZpbGVzIDogZS5kYXRhVHJhbnNmZXIuZmlsZXM7XHJcblxyXG4gICAgaWYgKGZpbGVzKSB7XHJcbiAgICAgIGNvbnN0IGZpbGUgPSBmaWxlc1swXTtcclxuXHJcbiAgICAgIGlmIChmaWxlKSB7XHJcbiAgICAgICAgY29uc3QgbWF4RmlsZVNpemUgPSAxMDI0ICogMTAyNDtcclxuXHJcbiAgICAgICAgaWYgKGZpbGUuc2l6ZSA+IG1heEZpbGVTaXplKSB7XHJcbiAgICAgICAgICB0aGlzLnByb3BzLnVwbG9hZFBob3RvRmFpbHVyZSgnRXhjZWVkaW5nIDFNQiBsaW1pdCcpO1xyXG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHVwZGF0ZUltYWdlU3RhdHVzOiAnRXhjZWVkaW5nIDFNQiBsaW1pdCcsXHJcbiAgICAgICAgICAgIHNldFBvcHVwU2hvd246IHRydWVcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuXHJcbiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IChyZWFkZXJFdmVudCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgYmluYXJ5U3RyaW5nID0gcmVhZGVyRXZlbnQudGFyZ2V0LnJlc3VsdDtcclxuXHJcbiAgICAgICAgICB0aGlzLmJhc2U2NFN0ciA9ICdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LCcgKyBidG9hKGJpbmFyeVN0cmluZyk7XHJcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaW1hZ2VCYXNlNjQ6IHRoaXMuYmFzZTY0U3RyLCB1cGRhdGVJbWFnZVN0YXR1czogJycgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmVhZGVyLnJlYWRBc0JpbmFyeVN0cmluZyhmaWxlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJldmVudERlZmF1bHQgPSAoZXZlbnQpID0+IHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRVcGRhdGUgKCkge1xyXG4gICAgaWYgKHRoaXMucHJvcHMudXBkYXRlUHJvZmlsZVN0YXR1cyA9PT0gJ0RPTkUnKSB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMucHJvcHMuaGlzdG9yeS5wdXNoKCcvJyk7XHJcbiAgICAgIH0sIDEwMDApO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMucHJvcHMuZGVsZXRlUHJvZmlsZVN0YXR1cyA9PT0gJ0RPTkUnKSB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMucHJvcHMuaGlzdG9yeS5wdXNoKCcvYXV0aCcpO1xyXG4gICAgICB9LCAxMDAwKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbmRlciA9ICgpID0+IHtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgIGNvbnN0IGRyYWdvdmVyRm9yQm9keSA9IGUgfHwgZXZlbnQ7XHJcblxyXG4gICAgICBkcmFnb3ZlckZvckJvZHkucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0sIGZhbHNlKTtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgIGNvbnN0IGRyb3BGb3JCb2R5ID0gZSB8fCBldmVudDtcclxuXHJcbiAgICAgIGRyb3BGb3JCb2R5LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9LCBmYWxzZSk7XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwicHJvZmlsZVwiPlxyXG4gICAgICAgIDxoZWFkZXIgY2xhc3NOYW1lPVwicHJvZmlsZV9faGVhZGVyXCI+XHJcbiAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwicHJvZmlsZV9faGVhZGVyLXRpdGxlXCI+XHJcbiAgICAgICAgICAgIFByb2ZpbGVcclxuICAgICAgICAgIDwvaDE+XHJcbiAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cInByb2ZpbGVfX2RlbGV0ZSBidG4gYnRuLS1kYW5nZXJcIlxyXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnNldFBvcHVwU2hvd259PlxyXG4gICAgICAgICAgICBEZWxldGUgcHJvZmlsZVxyXG4gICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgPC9oZWFkZXI+XHJcbiAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwicHJvZmlsZS1pbmZvXCI+XHJcbiAgICAgICAgICA8Rm9ybXN5LkZvcm1cclxuICAgICAgICAgICAgY2xhc3NOYW1lPVwicHJvZmlsZS1mb3JtIGNsZWFyZml4XCJcclxuICAgICAgICAgICAgb25TdWJtaXQ9e3RoaXMudXBkYXRlUHJvZmlsZX1cclxuICAgICAgICAgICAgb25WYWxpZD17dGhpcy5lbmFibGVCdXR0b259XHJcbiAgICAgICAgICAgIG9uSW52YWxpZD17dGhpcy5kaXNhYmxlQnV0dG9ufT5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3RoaXMuc3RhdGUuaW1hZ2VCYXNlNjQgfHwgdGhpcy5wcm9wcy51c2VyLmF2YXRhciA/XHJcbiAgICAgICAgICAgICAgJ3Byb2ZpbGVfX3Bob3RvJyA6ICdwcm9maWxlX19waG90byBwcm9maWxlX19waG90by0tbm9hdmF0YXInfSA+XHJcbiAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmltYWdlQmFzZTY0IHx8IHRoaXMucHJvcHMudXNlci5hdmF0YXIgPyA8aW1nXHJcbiAgICAgICAgICAgICAgICAgICAgc3JjPXsgdGhpcy5zdGF0ZS5pbWFnZUJhc2U2NCB8fCB0aGlzLnByb3BzLnVzZXIuYXZhdGFyIH1cclxuICAgICAgICAgICAgICAgICAgICBhbHQ9XCJhdmF0YXJcIi8+IDogbnVsbFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHJvZmlsZS1pbmZvX19maWVsZHNcIj5cclxuICAgICAgICAgICAgICA8SW5wdXRcclxuICAgICAgICAgICAgICAgIGxhYmVsPXsnTkFNRSd9XHJcbiAgICAgICAgICAgICAgICBuYW1lPXsnbmFtZSd9XHJcbiAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5wcm9wcy51c2VyLm5hbWV9XHJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17dGhpcy5zdGF0ZS5kaXNhYmxlZH1cclxuICAgICAgICAgICAgICAgIHJlZj17KGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMubmFtZSA9IGlucHV0O1xyXG4gICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgIHZhbGlkYXRpb25zPVwiaXNBbHBoYVwiXHJcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3I9XCJOYW1lIG11c3QgY29udGFpbiBvbmx5IGxldHRlcnNcIi8+XHJcbiAgICAgICAgICAgICAgPElucHV0XHJcbiAgICAgICAgICAgICAgICBsYWJlbD17J0VNQUlMJ31cclxuICAgICAgICAgICAgICAgIG5hbWU9eydlbWFpbCd9XHJcbiAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5wcm9wcy51c2VyLmVtYWlsfVxyXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3RoaXMuc3RhdGUuZGlzYWJsZWR9XHJcbiAgICAgICAgICAgICAgICByZWY9eyhpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmVtYWlsID0gaW5wdXQ7XHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbnM9XCJpc0VtYWlsXCJcclxuICAgICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcj1cIlRoaXMgaXMgbm90IGEgdmFsaWQgZW1haWxcIi8+XHJcbiAgICAgICAgICAgICAgeyF0aGlzLnN0YXRlLmRpc2FibGVkID9cclxuICAgICAgICAgICAgICAgIDxmaWVsZHNldCBjbGFzc05hbWU9XCJwcm9maWxlLWluZm9fX2ZpZWxkcy0tZmllbGRzZXRcIj5cclxuICAgICAgICAgICAgICAgICAgPGxlZ2VuZD48aDMgY2xhc3NOYW1lPVwicHJvZmlsZS1oZWFkaW5nXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgQ2hhbmdlIHBhc3N3b3JkOlxyXG4gICAgICAgICAgICAgICAgICA8L2gzPjwvbGVnZW5kPlxyXG4gICAgICAgICAgICAgICAgICA8SW5wdXRcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbD17J09sZCd9XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZT17J29sZC1wc3cnfVxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9eydwYXNzd29yZCd9XHJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9eydFbnRlciB0aGUgb2xkIHBhc3N3b3JkJ31cclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17dGhpcy5zdGF0ZS5kaXNhYmxlZH1cclxuICAgICAgICAgICAgICAgICAgICByZWY9eyhpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXNzd29yZE9sZCA9IGlucHV0O1xyXG4gICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbnM9IHt7XHJcbiAgICAgICAgICAgICAgICAgICAgICBtaW5MZW5ndGg6IDcsXHJcbiAgICAgICAgICAgICAgICAgICAgICBpc0FscGhhbnVtZXJpYzogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9yPXsnUGFzc3dvcmQgaXMgbm90IHZhbGlkJ30vPlxyXG4gICAgICAgICAgICAgICAgICA8SW5wdXRcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbD17J05ldyd9XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZT17J25ldy1wc3cnfVxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9eydwYXNzd29yZCd9XHJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9eydFbnRlciB0aGUgbmV3IHBhc3N3b3JkJ31cclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17dGhpcy5zdGF0ZS5kaXNhYmxlZH1cclxuICAgICAgICAgICAgICAgICAgICByZWY9eyhpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXNzd29yZCA9IGlucHV0O1xyXG4gICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbnM9IHt7XHJcbiAgICAgICAgICAgICAgICAgICAgICBtaW5MZW5ndGg6IDcsXHJcbiAgICAgICAgICAgICAgICAgICAgICBpc0FscGhhbnVtZXJpYzogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9yPXsnUGFzc3dvcmQgaXMgbm90IHZhbGlkJ30vPlxyXG4gICAgICAgICAgICAgICAgICA8SW5wdXRcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbD17J1JlcGVhdCd9XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZT17J3JlcGVhdC1wc3cnfVxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9eydwYXNzd29yZCd9XHJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9eydSZXBlYXQgdGhlIHBhc3N3b3JkJ31cclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17dGhpcy5zdGF0ZS5kaXNhYmxlZH1cclxuICAgICAgICAgICAgICAgICAgICByZWY9eyhpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXNzd29yZFJlcGVhdCA9IGlucHV0O1xyXG4gICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbnM9XCJlcXVhbHNGaWVsZDpuZXctcHN3XCJcclxuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3I9XCJQYXNzd29yZCBkb2VzIG5vdCBtYXRjaFwiLz5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZmllbGRzZXQ+IDogbnVsbFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB7IXRoaXMuc3RhdGUuZGlzYWJsZWQgP1xyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcm9maWxlLWluZm9fX3VwbG9hZC1waG90b1wiPlxyXG4gICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwicHJvZmlsZS1oZWFkaW5nXCI+VXBsb2FkIG5ldyBwaG90bzwvaDM+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJwcm9maWxlX191cGxvYWQtcGhvdG8tLWRyb3BcIlxyXG4gICAgICAgICAgICAgICAgICAgIHJlZj17ZWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWVsZEltYWdlID0gZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICBvbkRyb3A9e3RoaXMuaGFuZGxlRmlsZVNlbGVjdH1cclxuICAgICAgICAgICAgICAgICAgICBvbkRyYWdPdmVyPXt0aGlzLnByZXZlbnREZWZhdWx0fT5cclxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj5Ecm9wIHlvdXIgcGhvdG88L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInByb2ZpbGVfX3VwbG9hZC1waG90by0tYnRuXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsXHJcbiAgICAgICAgICAgICAgICAgICAgICBodG1sRm9yPVwiYWRkLXBob3RvXCJcclxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBhZGQtcGhvdG8tYnRuXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENob29zZSBmaWxlIHRvIHVwbG9hZFxyXG4gICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJmaWxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9XCJhZGQtcGhvdG9cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVGaWxlU2VsZWN0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoaWRlXCIvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+IDogbnVsbFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInByb2ZpbGUtYnRuLWdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5kaXNhYmxlZCA/XHJcbiAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwicHJvZmlsZV9fdXBkYXRlIGJ0blwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuZWRpdERhdGF9PlxyXG4gICAgICAgICAgICAgICAgICAgIFVwZGF0ZSBpbmZvXHJcbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPiA6XHJcbiAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJzdWJtaXRcIlxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXshdGhpcy5zdGF0ZS5jYW5TdWJtaXR9XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi0tc3VjY2Vzc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9XCJTYXZlIGNoYW5nZXNcIiAvPlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgeyF0aGlzLnN0YXRlLmRpc2FibGVkID9cclxuICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJwcm9maWxlX19kZWxldGUgYnRuXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmVkaXREYXRhfT5cclxuICAgICAgICAgICAgICAgICAgICBDYW5jZWxcclxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+IDogbnVsbFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvRm9ybXN5LkZvcm0+XHJcbiAgICAgICAgPC9zZWN0aW9uPlxyXG4gICAgICAgIDxNZXNzYWdlXHJcbiAgICAgICAgICBjbGVhclN0YXR1cz17dGhpcy5wcm9wcy5jbGVhclN0YXR1c31cclxuICAgICAgICAgIHN0YXR1cz17dGhpcy5wcm9wcy51cGRhdGVQcm9maWxlU3RhdHVzfVxyXG4gICAgICAgICAgdGV4dD17dGhpcy5wcm9wcy5lcnJvclRleHR9XHJcbiAgICAgICAgICBoZWFkZXI9eydFcnJvcid9IC8+XHJcbiAgICAgICAgPFBvcHVwXHJcbiAgICAgICAgICBzZXRQb3B1cFNob3duPXt0aGlzLnNldFBvcHVwU2hvd259XHJcbiAgICAgICAgICBwb3B1cFNob3duPXt0aGlzLnN0YXRlLnBvcHVwU2hvd259XHJcbiAgICAgICAgICBoZWFkZXI9XCJDb25maXJtIHRoZSBhY3Rpb25cIlxyXG4gICAgICAgICAgdGV4dD17J0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgeW91ciBhY2NvdW50Pyd9PlxyXG4gICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICBzZXRQb3B1cFNob3duPXt0aGlzLnNldFBvcHVwU2hvd259XHJcbiAgICAgICAgICAgIG9rSGFuZGxlcj17KCkgPT4ge1xyXG4gICAgICAgICAgICAgIHRoaXMuZGVsZXRlVXNlcigpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0UG9wdXBTaG93bigpO1xyXG4gICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICBjbGFzc05hbWU9eydidG4gcG9wdXBfX2J0bid9XHJcbiAgICAgICAgICAgIGlubmVyVGV4dD17J09rJ31cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgIG9rSGFuZGxlcj17KCkgPT4ge1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0UG9wdXBTaG93bigpO1xyXG4gICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICBjbGFzc05hbWU9eydidG4gYnRuLS1kZWZhdWx0IHBvcHVwX19idG4nfVxyXG4gICAgICAgICAgICBpbm5lclRleHQ9eydDYW5jZWwnfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICA8L1BvcHVwPlxyXG4gICAgICA8L3NlY3Rpb24+XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzIChzdG9yZSkge1xyXG4gIHJldHVybiB7XHJcbiAgICB1cGRhdGVQcm9maWxlU3RhdHVzOiBzdG9yZS51c2Vycy51cGRhdGVQcm9maWxlU3RhdHVzLFxyXG4gICAgZGVsZXRlUHJvZmlsZVN0YXR1czogIHN0b3JlLnVzZXJzLmRlbGV0ZVByb2ZpbGVTdGF0dXMsXHJcbiAgICBlcnJvclRleHQ6IHN0b3JlLnVzZXJzLnVzZXIuZXJyb3JUZXh0LFxyXG4gICAgdXNlcjogc3RvcmUudXNlcnMudXNlclxyXG4gIH07XHJcbn1cclxuZnVuY3Rpb24gbWFwRGlzcGF0Y2hUb1Byb3BzIChkaXNwYXRjaCkge1xyXG4gIHJldHVybiB7XHJcbiAgICB1cGRhdGVQcm9maWxlUmVxdWVzdDogYmluZEFjdGlvbkNyZWF0b3JzKHVwZGF0ZVByb2ZpbGVSZXF1ZXN0LCBkaXNwYXRjaCksXHJcbiAgICBkZWxldGVVc2VyUmVxdWVzdDogYmluZEFjdGlvbkNyZWF0b3JzKGRlbGV0ZVVzZXJSZXF1ZXN0LCBkaXNwYXRjaCksXHJcbiAgICBjbGVhclN0YXR1czogYmluZEFjdGlvbkNyZWF0b3JzKGNsZWFyVXBkYXRlUHJvZmlsZVN0YXR1cywgZGlzcGF0Y2gpLFxyXG4gICAgdXBsb2FkUGhvdG9GYWlsdXJlOiBiaW5kQWN0aW9uQ3JlYXRvcnModXBsb2FkUGhvdG9GYWlsdXJlLCBkaXNwYXRjaClcclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcywgbWFwRGlzcGF0Y2hUb1Byb3BzKShQcm9maWxlKTtcclxuXHJcblByb2ZpbGUucHJvcFR5cGVzID0ge1xyXG4gIHVwZGF0ZVByb2ZpbGVTdGF0dXM6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgdXBkYXRlUHJvZmlsZVJlcXVlc3Q6IFByb3BUeXBlcy5mdW5jLFxyXG4gIGRlbGV0ZVVzZXJSZXF1ZXN0OiBQcm9wVHlwZXMuZnVuYyxcclxuICBkZWxldGVQcm9maWxlU3RhdHVzOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIHVzZXI6IFByb3BUeXBlcy5vYmplY3QsXHJcbiAgZW1haWw6IFByb3BUeXBlcy5vYmplY3QsXHJcbiAgcGFzc3dvcmQ6IFByb3BUeXBlcy5vYmplY3QsXHJcbiAgcGFzc3dvcmRSZXBlYXQ6IFByb3BUeXBlcy5vYmplY3QsXHJcbiAgZXJyb3JUZXh0OiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIHZhbHVlOiBQcm9wVHlwZXMub2JqZWN0LFxyXG4gIGhpc3Rvcnk6IFByb3BUeXBlcy5vYmplY3QsXHJcbiAgY2xlYXJTdGF0dXM6IFByb3BUeXBlcy5mdW5jLFxyXG4gIHR5cGU6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgc2V0VmFsdWU6IFByb3BUeXBlcy5hbnksXHJcbiAgdXBsb2FkUGhvdG9GYWlsdXJlOiBQcm9wVHlwZXMuZnVuY1xyXG59O1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvcGFnZXMvUHJvZmlsZS9Qcm9maWxlLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==