webpackJsonp([6],{"./node_modules/create-react-class/index.js":function(e,t,r){"use strict";var a=r("./node_modules/react/react.js"),i=r("./node_modules/create-react-class/factory.js");if(void 0===a)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var s=(new a.Component).updater;e.exports=i(a.Component,a.isValidElement,s)},"./node_modules/form-data-to-object/index.js":function(e,t,r){"use strict";function a(e){return Object.keys(e).reduce(function(t,r){var a=r.match(/[^\[]*/i),i=r.match(/\[.*?\]/g)||[];i=[a[0]].concat(i).map(function(e){return e.replace(/\[|\]/g,"")});for(var s=t;i.length;){var n=i.shift();n in s?s=s[n]:(s[n]=i.length?isNaN(i[0])?{}:[]:e[r],s=s[n])}return t},{})}function i(e){function t(e,r,a){return Array.isArray(a)||"[object Object]"===Object.prototype.toString.call(a)?(Object.keys(a).forEach(function(i){t(e,r+"["+i+"]",a[i])}),e):(e[r]=a,e)}return Object.keys(e).reduce(function(r,a){return t(r,a,e[a])},{})}e.exports={fromObj:i,toObj:a}},"./node_modules/formsy-react/lib/Decorator.js":function(e,t,r){"use strict";(function(t){var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},i=t.React||r("./node_modules/react/react.js"),s=r("./node_modules/create-react-class/index.js"),n=r("./node_modules/formsy-react/lib/Mixin.js");e.exports=function(){return function(e){return s({mixins:[n],render:function(){return i.createElement(e,a({setValidations:this.setValidations,setValue:this.setValue,resetValue:this.resetValue,getValue:this.getValue,hasValue:this.hasValue,getErrorMessage:this.getErrorMessage,getErrorMessages:this.getErrorMessages,isFormDisabled:this.isFormDisabled,isValid:this.isValid,isPristine:this.isPristine,isFormSubmitted:this.isFormSubmitted,isRequired:this.isRequired,showRequired:this.showRequired,showError:this.showError,isValidValue:this.isValidValue},this.props))}})}}}).call(t,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/formsy-react/lib/HOC.js":function(e,t,r){"use strict";(function(t){function a(e){return e.displayName||e.name||("string"==typeof e?e:"Component")}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},s=t.React||r("./node_modules/react/react.js"),n=r("./node_modules/create-react-class/index.js"),o=r("./node_modules/formsy-react/lib/Mixin.js");e.exports=function(e){return n({displayName:"Formsy("+a(e)+")",mixins:[o],render:function(){var t=this.props.innerRef,r=i({setValidations:this.setValidations,setValue:this.setValue,resetValue:this.resetValue,getValue:this.getValue,hasValue:this.hasValue,getErrorMessage:this.getErrorMessage,getErrorMessages:this.getErrorMessages,isFormDisabled:this.isFormDisabled,isValid:this.isValid,isPristine:this.isPristine,isFormSubmitted:this.isFormSubmitted,isRequired:this.isRequired,showRequired:this.showRequired,showError:this.showError,isValidValue:this.isValidValue},this.props);return t&&(r.ref=t),s.createElement(e,r)}})}}).call(t,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/formsy-react/lib/Mixin.js":function(e,t,r){"use strict";(function(t){var a=r("./node_modules/prop-types/index.js"),i=r("./node_modules/formsy-react/lib/utils.js"),s=(t.React||r("./node_modules/react/react.js"),function(e){return"string"==typeof e?e.split(/\,(?![^{\[]*[}\]])/g).reduce(function(e,t){var r=t.split(":"),a=r.shift();if(r=r.map(function(e){try{return JSON.parse(e)}catch(t){return e}}),r.length>1)throw new Error("Formsy does not support multiple args on string validations. Use object format of validations instead.");return e[a]=!r.length||r[0],e},{}):e||{}});e.exports={getInitialState:function(){return{_value:this.props.value,_isRequired:!1,_isValid:!0,_isPristine:!0,_pristineValue:this.props.value,_validationError:[],_externalError:null,_formSubmitted:!1}},contextTypes:{formsy:a.object},getDefaultProps:function(){return{validationError:"",validationErrors:{}}},componentWillMount:function(){var e=function(){this.setValidations(this.props.validations,this.props.required),this.context.formsy.attachToForm(this)}.bind(this);if(!this.props.name)throw new Error("Form Input requires a name property when used");e()},componentWillReceiveProps:function(e){this.setValidations(e.validations,e.required)},componentDidUpdate:function(e){i.isSame(this.props.value,e.value)||this.setValue(this.props.value),i.isSame(this.props.validations,e.validations)&&i.isSame(this.props.required,e.required)||this.context.formsy.validate(this)},componentWillUnmount:function(){this.context.formsy.detachFromForm(this)},setValidations:function(e,t){this._validations=s(e)||{},this._requiredValidations=!0===t?{isDefaultRequiredValue:!0}:s(t)},setValue:function(e){this.setState({_value:e,_isPristine:!1},function(){this.context.formsy.validate(this)}.bind(this))},resetValue:function(){this.setState({_value:this.state._pristineValue,_isPristine:!0},function(){this.context.formsy.validate(this)})},getValue:function(){return this.state._value},hasValue:function(){return""!==this.state._value},getErrorMessage:function(){var e=this.getErrorMessages();return e.length?e[0]:null},getErrorMessages:function(){return!this.isValid()||this.showRequired()?this.state._externalError||this.state._validationError||[]:[]},isFormDisabled:function(){return this.context.formsy.isFormDisabled()},isValid:function(){return this.state._isValid},isPristine:function(){return this.state._isPristine},isFormSubmitted:function(){return this.state._formSubmitted},isRequired:function(){return!!this.props.required},showRequired:function(){return this.state._isRequired},showError:function(){return!this.showRequired()&&!this.isValid()},isValidValue:function(e){return this.context.formsy.isValidValue.call(null,this,e)}}}).call(t,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/formsy-react/lib/main.js":function(e,t,r){"use strict";(function(t){function a(e,t){var r={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},n="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)},o=r("./node_modules/prop-types/index.js"),u=t.React||r("./node_modules/react/react.js"),l=r("./node_modules/create-react-class/index.js"),d={},c=r("./node_modules/formsy-react/lib/validationRules.js"),f=r("./node_modules/form-data-to-object/index.js"),p=r("./node_modules/formsy-react/lib/utils.js"),m=r("./node_modules/formsy-react/lib/Mixin.js"),h=r("./node_modules/formsy-react/lib/HOC.js"),F=r("./node_modules/formsy-react/lib/Decorator.js"),v={},g=[];d.Mixin=m,d.HOC=h,d.Decorator=F,d.defaults=function(e){v=e},d.addValidationRule=function(e,t){c[e]=t},d.Form=l({displayName:"Formsy",getInitialState:function(){return{isValid:!0,isSubmitting:!1,canChange:!1}},getDefaultProps:function(){return{onSuccess:function(){},onError:function(){},onSubmit:function(){},onValidSubmit:function(){},onInvalidSubmit:function(){},onValid:function(){},onInvalid:function(){},onChange:function(){},validationErrors:null,preventExternalInvalidation:!1}},childContextTypes:{formsy:o.object},getChildContext:function(){var e=this;return{formsy:{attachToForm:this.attachToForm,detachFromForm:this.detachFromForm,validate:this.validate,isFormDisabled:this.isFormDisabled,isValidValue:function(t,r){return e.runValidation(t,r).isValid}}}},componentWillMount:function(){this.inputs=[]},componentDidMount:function(){this.validateForm()},componentWillUpdate:function(){this.prevInputNames=this.inputs.map(function(e){return e.props.name})},componentDidUpdate:function(){this.props.validationErrors&&"object"===n(this.props.validationErrors)&&Object.keys(this.props.validationErrors).length>0&&this.setInputValidationErrors(this.props.validationErrors);var e=this.inputs.map(function(e){return e.props.name});p.arraysDiffer(this.prevInputNames,e)&&this.validateForm()},reset:function(e){this.setFormPristine(!0),this.resetModel(e)},submit:function(e){e&&e.preventDefault(),this.setFormPristine(!1);var t=this.getModel();this.props.onSubmit(t,this.resetModel,this.updateInputsWithError),this.state.isValid?this.props.onValidSubmit(t,this.resetModel,this.updateInputsWithError):this.props.onInvalidSubmit(t,this.resetModel,this.updateInputsWithError)},mapModel:function(e){return this.props.mapping?this.props.mapping(e):f.toObj(Object.keys(e).reduce(function(t,r){for(var a=r.split("."),i=t;a.length;){var s=a.shift();i=i[s]=a.length?i[s]||{}:e[r]}return t},{}))},getModel:function(){var e=this.getCurrentValues();return this.mapModel(e)},resetModel:function(e){this.inputs.forEach(function(t){var r=t.props.name;e&&e.hasOwnProperty(r)?t.setValue(e[r]):t.resetValue()}),this.validateForm()},setInputValidationErrors:function(e){this.inputs.forEach(function(t){var r=t.props.name,a=[{_isValid:!(r in e),_validationError:"string"==typeof e[r]?[e[r]]:e[r]}];t.setState.apply(t,a)})},isChanged:function(){return!p.isSame(this.getPristineValues(),this.getCurrentValues())},getPristineValues:function(){return this.inputs.reduce(function(e,t){return e[t.props.name]=t.props.value,e},{})},updateInputsWithError:function(e){var t=this;Object.keys(e).forEach(function(r,a){var i=p.find(t.inputs,function(e){return e.props.name===r});if(!i)throw new Error("You are trying to update an input that does not exist. Verify errors object with input names. "+JSON.stringify(e));var s=[{_isValid:t.props.preventExternalInvalidation||!1,_externalError:"string"==typeof e[r]?[e[r]]:e[r]}];i.setState.apply(i,s)})},isFormDisabled:function(){return this.props.disabled},getCurrentValues:function(){return this.inputs.reduce(function(e,t){return e[t.props.name]=t.state._value,e},{})},setFormPristine:function(e){this.setState({_formSubmitted:!e}),this.inputs.forEach(function(t,r){t.setState({_formSubmitted:!e,_isPristine:e})})},validate:function(e){this.state.canChange&&this.props.onChange(this.getCurrentValues(),this.isChanged());var t=this.runValidation(e);e.setState({_isValid:t.isValid,_isRequired:t.isRequired,_validationError:t.error,_externalError:null},this.validateForm)},runValidation:function(e,t){var r=this.getCurrentValues(),a=e.props.validationErrors,i=e.props.validationError;t=2===arguments.length?t:e.state._value;var s=this.runRules(t,r,e._validations),n=this.runRules(t,r,e._requiredValidations);"function"==typeof e.validate&&(s.failed=e.validate()?[]:["failed"]);var o=!!Object.keys(e._requiredValidations).length&&!!n.success.length,u=!(s.failed.length||this.props.validationErrors&&this.props.validationErrors[e.props.name]);return{isRequired:o,isValid:!o&&u,error:function(){if(u&&!o)return g;if(s.errors.length)return s.errors;if(this.props.validationErrors&&this.props.validationErrors[e.props.name])return"string"==typeof this.props.validationErrors[e.props.name]?[this.props.validationErrors[e.props.name]]:this.props.validationErrors[e.props.name];if(o){var t=a[n.success[0]];return t?[t]:null}return s.failed.length?s.failed.map(function(e){return a[e]?a[e]:i}).filter(function(e,t,r){return r.indexOf(e)===t}):void 0}.call(this)}},runRules:function(e,t,r){var a={errors:[],failed:[],success:[]};return Object.keys(r).length&&Object.keys(r).forEach(function(i){if(c[i]&&"function"==typeof r[i])throw new Error("Formsy does not allow you to override default validations: "+i);if(!c[i]&&"function"!=typeof r[i])throw new Error("Formsy does not have the validation rule: "+i);if("function"==typeof r[i]){var s=r[i](t,e);return void("string"==typeof s?(a.errors.push(s),a.failed.push(i)):s||a.failed.push(i))}if("function"!=typeof r[i]){var s=c[i](t,e,r[i]);return void("string"==typeof s?(a.errors.push(s),a.failed.push(i)):s?a.success.push(i):a.failed.push(i))}return a.success.push(i)}),a},validateForm:function(){var e=this,t=function(){var e=this.inputs.every(function(e){return e.state._isValid});this.setState({isValid:e}),e?this.props.onValid():this.props.onInvalid(),this.setState({canChange:!0})}.bind(this);this.inputs.forEach(function(r,a){var i=e.runValidation(r);i.isValid&&r.state._externalError&&(i.isValid=!1),r.setState({_isValid:i.isValid,_isRequired:i.isRequired,_validationError:i.error,_externalError:!i.isValid&&r.state._externalError?r.state._externalError:null},a===e.inputs.length-1?t:null)}),this.inputs.length||this.setState({canChange:!0})},attachToForm:function(e){-1===this.inputs.indexOf(e)&&this.inputs.push(e),this.validate(e)},detachFromForm:function(e){var t=this.inputs.indexOf(e);-1!==t&&(this.inputs=this.inputs.slice(0,t).concat(this.inputs.slice(t+1))),this.validateForm()},render:function(){var e=this.props,t=(e.mapping,e.validationErrors,e.onSubmit,e.onValid,e.onValidSubmit,e.onInvalid,e.onInvalidSubmit,e.onChange,e.reset,e.preventExternalInvalidation,e.onSuccess,e.onError,a(e,["mapping","validationErrors","onSubmit","onValid","onValidSubmit","onInvalid","onInvalidSubmit","onChange","reset","preventExternalInvalidation","onSuccess","onError"]));return u.createElement("form",s({},t,{onSubmit:this.submit}),this.props.children)}}),t.exports||t.module||t.define&&t.define.amd||(t.Formsy=d),e.exports=d}).call(t,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/formsy-react/lib/utils.js":function(e,t,r){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};e.exports={arraysDiffer:function(e,t){var r=!1;return e.length!==t.length?r=!0:e.forEach(function(e,a){this.isSame(e,t[a])||(r=!0)},this),r},objectsDiffer:function(e,t){var r=!1;return Object.keys(e).length!==Object.keys(t).length?r=!0:Object.keys(e).forEach(function(a){this.isSame(e[a],t[a])||(r=!0)},this),r},isSame:function(e,t){return(void 0===e?"undefined":i(e))===(void 0===t?"undefined":i(t))&&(Array.isArray(e)&&Array.isArray(t)?!this.arraysDiffer(e,t):"function"==typeof e?e.toString()===t.toString():"object"===(void 0===e?"undefined":i(e))&&null!==e&&null!==t?!this.objectsDiffer(e,t):e===t)},find:function(e,t){for(var r=0,a=e.length;r<a;r++){var i=e[r];if(t(i))return i}return null}}},"./node_modules/formsy-react/lib/validationRules.js":function(e,t,r){"use strict";var a=function(e){return null!==e&&void 0!==e},i=function(e){return""===e},s={isDefaultRequiredValue:function(e,t){return void 0===t||""===t},isExisty:function(e,t){return a(t)},matchRegexp:function(e,t,r){return!a(t)||i(t)||r.test(t)},isUndefined:function(e,t){return void 0===t},isEmptyString:function(e,t){return i(t)},isEmail:function(e,t){return s.matchRegexp(e,t,/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i)},isUrl:function(e,t){return s.matchRegexp(e,t,/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i)},isTrue:function(e,t){return!0===t},isFalse:function(e,t){return!1===t},isNumeric:function(e,t){return"number"==typeof t||s.matchRegexp(e,t,/^[-+]?(?:\d*[.])?\d+$/)},isAlpha:function(e,t){return s.matchRegexp(e,t,/^[A-Z]+$/i)},isAlphanumeric:function(e,t){return s.matchRegexp(e,t,/^[0-9A-Z]+$/i)},isInt:function(e,t){return s.matchRegexp(e,t,/^(?:[-+]?(?:0|[1-9]\d*))$/)},isFloat:function(e,t){return s.matchRegexp(e,t,/^(?:[-+]?(?:\d+))?(?:\.\d*)?(?:[eE][\+\-]?(?:\d+))?$/)},isWords:function(e,t){return s.matchRegexp(e,t,/^[A-Z\s]+$/i)},isSpecialWords:function(e,t){return s.matchRegexp(e,t,/^[A-Z\s\u00C0-\u017F]+$/i)},isLength:function(e,t,r){return!a(t)||i(t)||t.length===r},equals:function(e,t,r){return!a(t)||i(t)||t==r},equalsField:function(e,t,r){return t==e[r]},maxLength:function(e,t,r){return!a(t)||t.length<=r},minLength:function(e,t,r){return!a(t)||i(t)||t.length>=r}};e.exports=s},"./src/components/Auth/Field/Field.js":function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),u=r("./node_modules/react/react.js"),l=a(u),d=r("./node_modules/formsy-react/lib/main.js"),c=(a(d),r("./node_modules/prop-types/index.js")),f=a(c),p=function(e){function t(e){i(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.changeValue=function(e){r.props.setValue(e.currentTarget["checkbox"===r.props.type?"checked":"value"])},r}return n(t,e),o(t,[{key:"render",value:function(){var e=this.props.getErrorMessage();return l.default.createElement("div",{className:"signup-field-group"},l.default.createElement("label",{htmlFor:this.props.name.toLowerCase(),className:"signup-form__label"},this.props.name),l.default.createElement("input",{onChange:this.changeValue,value:this.props.getValue(),type:this.props.type||"text",name:this.props.name.toLowerCase(),className:"signup-form__input-field"}),l.default.createElement("p",{className:"caption signup-form__caption"},this.props.text),l.default.createElement("span",{className:"signup-form__error-message"},e))}}]),t}(l.default.Component);p.propTypes={name:f.default.string,text:f.default.string,className:f.default.string,type:f.default.string,setValue:f.default.any,getValue:f.default.func,validations:f.default.any,getErrorMessage:f.default.func,registration:f.default.func},t.default=(0,d.HOC)(p)},"./src/pages/Profile/Profile.js":function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return{updateProfileStatus:e.users.updateProfileStatus,deleteProfileStatus:e.users.deleteProfileStatus,errorText:e.users.user.errorText,user:e.users.user}}function u(e){return{updateProfileRequest:(0,v.bindActionCreators)(F.updateProfileRequest,e),deleteUserRequest:(0,v.bindActionCreators)(F.deleteUserRequest,e),clearStatus:(0,v.bindActionCreators)(F.clearUpdateProfileStatus,e)}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),d=r("./node_modules/react/react.js"),c=a(d),f=r("./node_modules/formsy-react/lib/main.js"),p=a(f),m=r("./src/components/Auth/Field/Field.js"),h=a(m),F=r("./src/actions/users.action.js"),v=r("./node_modules/redux/es/index.js"),g=r("./src/components/Message/Message.js"),E=r("./src/components/Popup/Popup.js"),b=r("./src/components/Button/Button.js"),y=r("./node_modules/react-redux/es/index.js"),_=r("./node_modules/prop-types/index.js"),w=a(_);r("./src/pages/Profile/Profile.scss");var x=function(e){function t(e){i(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.setPopupShown=function(e){var t=r.state.popupShown;r.setState({popupShown:!t})},r.updateProfile=function(){var e={name:r.name.getValue(),email:r.email.getValue(),password:r.password.getValue(),passwordRepeat:r.passwordRepeat.getValue(),avatar:r.base64Str,_id:r.props.user._id};r.props.updateProfileRequest(e)},r.enableButton=function(){r.setState({canSubmit:!0})},r.disableButton=function(){r.setState({canSubmit:!1})},r.editName=function(){r.setState({allowEditName:!r.state.allowEditName}),r.fieldName.classList.toggle("hidden"),r.fieldName.classList.toggle("flex-display")},r.editEmail=function(){r.setState({allowEditEmail:!r.state.allowEditEmail}),r.fieldEmail.classList.toggle("hidden"),r.fieldEmail.classList.toggle("flex-display")},r.editPassword=function(){r.setState({allowEditPassword:!r.state.allowEditPassword}),r.fieldPassword.classList.toggle("hidden"),r.fieldPassword.classList.toggle("flex-display")},r.repeatPassword=function(){r.setState({allowRepeatPassword:!r.state.allowRepeatPassword}),r.fieldRepeatPassword.classList.toggle("hidden"),r.fieldRepeatPassword.classList.toggle("flex-display")},r.editImage=function(){r.setState({allowEditImage:!r.state.allowEditImage}),r.fieldImage.classList.toggle("hidden"),r.fieldImage.classList.toggle("flex-display")},r.deleteUser=function(){r.props.deleteUserRequest(r.props.user)},r.handleFileSelect=function(e){e.preventDefault(),r.setState({updateImageStatus:"Loading..."});var t=e.dataTransfer.files;if(t){var a=t[0];if(a){if(a.size>1048576)return void r.setState({updateImageStatus:"Exceeding 1MB limit"});var i=new FileReader;i.onload=function(e){var t=e.target.result;r.base64Str="data:image/jpeg;base64,"+btoa(t),r.setState({imageBase64:r.base64Str,updateImageStatus:""})},i.readAsBinaryString(a)}}},r.preventDefault=function(e){e.preventDefault()},r.render=function(){return window.addEventListener("dragover",function(e){(e||event).preventDefault()},!1),window.addEventListener("drop",function(e){(e||event).preventDefault()},!1),c.default.createElement("div",{className:"profile-container"},c.default.createElement(g.Message,{clearStatus:r.props.clearStatus,status:r.props.updateProfileStatus,text:r.props.errorText,header:"Error"}),c.default.createElement(p.default.Form,{onSubmit:r.updateProfile,onValid:r.enableButton,onInvalid:r.disableButton,className:"signup-form edit"},c.default.createElement("div",{className:"profile-header"},c.default.createElement("div",{className:"profile-header__user-image-box"},c.default.createElement("div",{className:"profile-header__user-image-edit"},c.default.createElement("div",{className:r.props.user.avatar?"visible":"hidden"},c.default.createElement("img",{className:"profile-header__user-image",src:r.props.user.avatar})),c.default.createElement("div",{className:r.props.user.avatar?"hidden":"visible"},c.default.createElement("i",{className:"fa fa-user-circle-o photo"})),c.default.createElement("i",{className:"fa fa-pencil edit-user-info edit-image",onClick:r.editImage}),c.default.createElement("div",{className:"hidden",ref:function(e){r.fieldImage=e},onDrop:r.handleFileSelect,onDragOver:r.preventDefault},c.default.createElement("div",null,c.default.createElement("div",{className:""!==r.state.updateImageStatus?"profile-header__user-drop-aria":"profile-header__user-drop-image hidden"},r.state.updateImageStatus),c.default.createElement("img",{className:""!==r.state.updateImageStatus?"profile-header__user-image hidden":"profile-header__user-image",src:r.state.imageBase64})))),c.default.createElement("div",{className:"profile-header__user-name"},r.props.user.name))),c.default.createElement("section",{className:"edit-profile__user-info"},c.default.createElement("div",{className:"edit-profile-name"},c.default.createElement("div",{className:"edit-profile__user-name-container"},c.default.createElement("div",{className:"user-name__box"},c.default.createElement("p",{className:"user-name__title"},"Name"),c.default.createElement("span",{className:"user-name__logged-name"},r.props.user.name)),c.default.createElement("div",{className:"edit-user-info__icon"},c.default.createElement("i",{className:"fa fa-pencil edit-user-info",onClick:r.editName}))),c.default.createElement("div",{className:"hidden",ref:function(e){r.fieldName=e}},c.default.createElement(h.default,{name:" ",type:"text",text:"Enter your new name",ref:function(e){r.name=e},value:r.props.user.name,validations:"isAlpha",validationError:"This is not a valid name",required:!0}))),c.default.createElement("div",{className:"edit-profile-email"},c.default.createElement("div",{className:"edit-profile__user-email-container"},c.default.createElement("div",{className:"user-email__box"},c.default.createElement("p",{className:"user-email__title"},"Email"),c.default.createElement("span",{className:"user-email__logged-email"},r.props.user.email)),c.default.createElement("div",{className:"edit-user-info__icon"},c.default.createElement("i",{className:"fa fa-pencil edit-user-info",onClick:r.editEmail}))),c.default.createElement("div",{className:"hidden",ref:function(e){r.fieldEmail=e}},c.default.createElement(h.default,{name:" ",className:"hidden",type:"text",text:"Enter your new e-mail",ref:function(e){r.email=e},value:r.props.user.email,validations:"isEmail",validationError:"This is not a valid email",required:!0})))),c.default.createElement("section",{className:"edit-profile__user-info-password"},c.default.createElement("div",{className:"edit-profile-password"},c.default.createElement("div",{className:"edit-profile__user-password-container"},c.default.createElement("div",{className:"user-password__box"},c.default.createElement("p",{className:"user-password__title"},"Password"),c.default.createElement("span",{className:"user-password__logged-password"},r.props.user.password)),c.default.createElement("div",{className:"edit-user-info__icon"},c.default.createElement("i",{className:"fa fa-pencil edit-user-info fa-password",onClick:r.editPassword}))),c.default.createElement("div",{className:"hidden",ref:function(e){r.fieldPassword=e}},c.default.createElement(h.default,{name:"Password",type:"password",text:"Enter your new password",ref:function(e){r.password=e},validations:{minLength:7,isAlphanumeric:!0},validationError:"This is not a valid password"}))),c.default.createElement("div",{className:"edit-profile-repeat-password"},c.default.createElement("div",{className:"edit-profile__user-repeat-password-container"},c.default.createElement("div",{className:"user-repeat-password__box"},c.default.createElement("p",{className:"user-repeat-password__title"},"Repeat Password"),c.default.createElement("span",{className:"user-repeat-password__logged-password"},r.props.user.passwordRepeat)),c.default.createElement("div",{className:"edit-user-info__icon"},c.default.createElement("i",{className:"fa fa-pencil edit-user-info fa-password",onClick:r.repeatPassword}))),c.default.createElement("div",{className:"hidden",ref:function(e){r.fieldRepeatPassword=e}},c.default.createElement(h.default,{name:"Repeat Password",type:"password",text:"Please repeat your password",ref:function(e){r.passwordRepeat=e},validations:"equalsField:Password",validationError:"Password does not match"})))),c.default.createElement("div",{className:"signup-field-group signup-btn-group edit"},c.default.createElement("input",{type:"submit",disabled:!r.state.canSubmit,className:"btn btn--signup btn--signup-active edit",value:"Submit"}),c.default.createElement("div",{className:"delete-user-profile__icon"},c.default.createElement("i",{className:"fa fa-trash",onClick:r.setPopupShown})))),c.default.createElement(E.Popup,{setPopupShown:r.setPopupShown,popupShown:r.state.popupShown,header:"Confirm the action",text:"Are you sure you want to delete your account?"},c.default.createElement(b.Button,{setPopupShown:r.setPopupShown,okHandler:function(){r.deleteUser(),r.setPopupShown()},className:"btn popup__btn",innerText:"Ok"}),c.default.createElement(b.Button,{okHandler:function(){r.setPopupShown()},className:"btn btn--default popup__btn",innerText:"Cancel"})))},r.state={canSubmit:!1,allowEditName:!1,allowEditEmail:!1,allowEditImage:!1,allowEditPassword:!1,allowRepeatPassword:!1,updateImageStatus:"Drop your photo",imageBase64:null},r}return n(t,e),l(t,[{key:"componentDidUpdate",value:function(){var e=this;"DONE"===this.props.updateProfileStatus&&setTimeout(function(){e.props.history.push("/")},1e3),"DONE"===this.props.deleteProfileStatus&&setTimeout(function(){e.props.history.push("/auth")},1e3)}}]),t}(d.Component);t.default=(0,y.connect)(o,u)(x),x.propTypes={updateProfileStatus:w.default.string,updateProfileRequest:w.default.func,deleteUserRequest:w.default.func,deleteProfileStatus:w.default.string,user:w.default.object,email:w.default.object,password:w.default.object,passwordRepeat:w.default.object,errorText:w.default.string,value:w.default.object,history:w.default.object,clearStatus:w.default.func}},"./src/pages/Profile/Profile.scss":function(e,t){}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vNi5pbmRleF9idW5kbGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jcmVhdGUtcmVhY3QtY2xhc3MvaW5kZXguanM/ODBhNCoiLCJ3ZWJwYWNrOi8vLy4vfi9mb3JtLWRhdGEtdG8tb2JqZWN0L2luZGV4LmpzPzliYjUqIiwid2VicGFjazovLy8uL34vZm9ybXN5LXJlYWN0L2xpYi9EZWNvcmF0b3IuanM/NTFmYyoiLCJ3ZWJwYWNrOi8vLy4vfi9mb3Jtc3ktcmVhY3QvbGliL0hPQy5qcz9iZWY4KiIsIndlYnBhY2s6Ly8vLi9+L2Zvcm1zeS1yZWFjdC9saWIvTWl4aW4uanM/OTM1NyoiLCJ3ZWJwYWNrOi8vLy4vfi9mb3Jtc3ktcmVhY3QvbGliL21haW4uanM/ZTgxNCoiLCJ3ZWJwYWNrOi8vLy4vfi9mb3Jtc3ktcmVhY3QvbGliL3V0aWxzLmpzP2ZkMjYqIiwid2VicGFjazovLy8uL34vZm9ybXN5LXJlYWN0L2xpYi92YWxpZGF0aW9uUnVsZXMuanM/YzBhNSoiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvQXV0aC9GaWVsZC9GaWVsZC5qcz9hYmRlKiIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvUHJvZmlsZS9Qcm9maWxlLmpzIl0sIm5hbWVzIjpbIndlYnBhY2tKc29ucCIsIi4vbm9kZV9tb2R1bGVzL2NyZWF0ZS1yZWFjdC1jbGFzcy9pbmRleC5qcyIsIm1vZHVsZSIsImV4cG9ydHMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiUmVhY3QiLCJmYWN0b3J5IiwiRXJyb3IiLCJSZWFjdE5vb3BVcGRhdGVRdWV1ZSIsIkNvbXBvbmVudCIsInVwZGF0ZXIiLCJpc1ZhbGlkRWxlbWVudCIsIi4vbm9kZV9tb2R1bGVzL2Zvcm0tZGF0YS10by1vYmplY3QvaW5kZXguanMiLCJ0b09iaiIsInNvdXJjZSIsIk9iamVjdCIsImtleXMiLCJyZWR1Y2UiLCJvdXRwdXQiLCJrZXkiLCJwYXJlbnRLZXkiLCJtYXRjaCIsInBhdGhzIiwiY29uY2F0IiwibWFwIiwicmVwbGFjZSIsImN1cnJlbnRQYXRoIiwibGVuZ3RoIiwicGF0aEtleSIsInNoaWZ0IiwiaXNOYU4iLCJmcm9tT2JqIiwib2JqIiwicmVjdXIiLCJuZXdPYmoiLCJwcm9wTmFtZSIsImN1cnJWYWwiLCJBcnJheSIsImlzQXJyYXkiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJmb3JFYWNoIiwidiIsIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvRGVjb3JhdG9yLmpzIiwiZ2xvYmFsIiwiX2V4dGVuZHMiLCJhc3NpZ24iLCJ0YXJnZXQiLCJpIiwiYXJndW1lbnRzIiwiaGFzT3duUHJvcGVydHkiLCJjcmVhdGVSZWFjdENsYXNzIiwiTWl4aW4iLCJtaXhpbnMiLCJyZW5kZXIiLCJjcmVhdGVFbGVtZW50Iiwic2V0VmFsaWRhdGlvbnMiLCJ0aGlzIiwic2V0VmFsdWUiLCJyZXNldFZhbHVlIiwiZ2V0VmFsdWUiLCJoYXNWYWx1ZSIsImdldEVycm9yTWVzc2FnZSIsImdldEVycm9yTWVzc2FnZXMiLCJpc0Zvcm1EaXNhYmxlZCIsImlzVmFsaWQiLCJpc1ByaXN0aW5lIiwiaXNGb3JtU3VibWl0dGVkIiwiaXNSZXF1aXJlZCIsInNob3dSZXF1aXJlZCIsInNob3dFcnJvciIsImlzVmFsaWRWYWx1ZSIsInByb3BzIiwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9IT0MuanMiLCJnZXREaXNwbGF5TmFtZSIsImRpc3BsYXlOYW1lIiwibmFtZSIsImlubmVyUmVmIiwicHJvcHNGb3JFbGVtZW50IiwicmVmIiwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9NaXhpbi5qcyIsIlByb3BUeXBlcyIsInV0aWxzIiwiY29udmVydFZhbGlkYXRpb25zVG9PYmplY3QiLCJ2YWxpZGF0aW9ucyIsInNwbGl0IiwidmFsaWRhdGlvbiIsImFyZ3MiLCJ2YWxpZGF0ZU1ldGhvZCIsImFyZyIsIkpTT04iLCJwYXJzZSIsImUiLCJnZXRJbml0aWFsU3RhdGUiLCJfdmFsdWUiLCJ2YWx1ZSIsIl9pc1JlcXVpcmVkIiwiX2lzVmFsaWQiLCJfaXNQcmlzdGluZSIsIl9wcmlzdGluZVZhbHVlIiwiX3ZhbGlkYXRpb25FcnJvciIsIl9leHRlcm5hbEVycm9yIiwiX2Zvcm1TdWJtaXR0ZWQiLCJjb250ZXh0VHlwZXMiLCJmb3Jtc3kiLCJvYmplY3QiLCJnZXREZWZhdWx0UHJvcHMiLCJ2YWxpZGF0aW9uRXJyb3IiLCJ2YWxpZGF0aW9uRXJyb3JzIiwiY29tcG9uZW50V2lsbE1vdW50IiwiY29uZmlndXJlIiwicmVxdWlyZWQiLCJjb250ZXh0IiwiYXR0YWNoVG9Gb3JtIiwiYmluZCIsImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiLCJuZXh0UHJvcHMiLCJjb21wb25lbnREaWRVcGRhdGUiLCJwcmV2UHJvcHMiLCJpc1NhbWUiLCJ2YWxpZGF0ZSIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwiZGV0YWNoRnJvbUZvcm0iLCJfdmFsaWRhdGlvbnMiLCJfcmVxdWlyZWRWYWxpZGF0aW9ucyIsImlzRGVmYXVsdFJlcXVpcmVkVmFsdWUiLCJzZXRTdGF0ZSIsInN0YXRlIiwibWVzc2FnZXMiLCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL21haW4uanMiLCJfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMiLCJpbmRleE9mIiwiX3R5cGVvZjIiLCJTeW1ib2wiLCJpdGVyYXRvciIsImNvbnN0cnVjdG9yIiwiX3R5cGVvZiIsIkZvcm1zeSIsInZhbGlkYXRpb25SdWxlcyIsImZvcm1EYXRhVG9PYmplY3QiLCJIT0MiLCJEZWNvcmF0b3IiLCJvcHRpb25zIiwiZW1wdHlBcnJheSIsImRlZmF1bHRzIiwicGFzc2VkT3B0aW9ucyIsImFkZFZhbGlkYXRpb25SdWxlIiwiZnVuYyIsIkZvcm0iLCJpc1N1Ym1pdHRpbmciLCJjYW5DaGFuZ2UiLCJvblN1Y2Nlc3MiLCJvbkVycm9yIiwib25TdWJtaXQiLCJvblZhbGlkU3VibWl0Iiwib25JbnZhbGlkU3VibWl0Iiwib25WYWxpZCIsIm9uSW52YWxpZCIsIm9uQ2hhbmdlIiwicHJldmVudEV4dGVybmFsSW52YWxpZGF0aW9uIiwiY2hpbGRDb250ZXh0VHlwZXMiLCJnZXRDaGlsZENvbnRleHQiLCJfdGhpcyIsImNvbXBvbmVudCIsInJ1blZhbGlkYXRpb24iLCJpbnB1dHMiLCJjb21wb25lbnREaWRNb3VudCIsInZhbGlkYXRlRm9ybSIsImNvbXBvbmVudFdpbGxVcGRhdGUiLCJwcmV2SW5wdXROYW1lcyIsInNldElucHV0VmFsaWRhdGlvbkVycm9ycyIsIm5ld0lucHV0TmFtZXMiLCJhcnJheXNEaWZmZXIiLCJyZXNldCIsImRhdGEiLCJzZXRGb3JtUHJpc3RpbmUiLCJyZXNldE1vZGVsIiwic3VibWl0IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIm1vZGVsIiwiZ2V0TW9kZWwiLCJ1cGRhdGVJbnB1dHNXaXRoRXJyb3IiLCJtYXBNb2RlbCIsIm1hcHBpbmciLCJtYXBwZWRNb2RlbCIsImtleUFycmF5IiwiYmFzZSIsImN1cnJlbnRLZXkiLCJjdXJyZW50VmFsdWVzIiwiZ2V0Q3VycmVudFZhbHVlcyIsImVycm9ycyIsImFwcGx5IiwiaXNDaGFuZ2VkIiwiZ2V0UHJpc3RpbmVWYWx1ZXMiLCJfdGhpczIiLCJpbmRleCIsImZpbmQiLCJzdHJpbmdpZnkiLCJkaXNhYmxlZCIsImVycm9yIiwidmFsaWRhdGlvblJlc3VsdHMiLCJydW5SdWxlcyIsInJlcXVpcmVkUmVzdWx0cyIsImZhaWxlZCIsInN1Y2Nlc3MiLCJmaWx0ZXIiLCJ4IiwicG9zIiwiYXJyIiwicmVzdWx0cyIsInZhbGlkYXRpb25NZXRob2QiLCJwdXNoIiwiX3RoaXMzIiwib25WYWxpZGF0aW9uQ29tcGxldGUiLCJhbGxJc1ZhbGlkIiwiZXZlcnkiLCJjb21wb25lbnRQb3MiLCJzbGljZSIsIl9wcm9wcyIsIm5vbkZvcm1zeVByb3BzIiwiY2hpbGRyZW4iLCJkZWZpbmUiLCJhbWQiLCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL3V0aWxzLmpzIiwiYSIsImIiLCJpc0RpZmZlcmVudCIsIml0ZW0iLCJvYmplY3RzRGlmZmVyIiwiY29sbGVjdGlvbiIsImZuIiwibCIsIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvdmFsaWRhdGlvblJ1bGVzLmpzIiwiX2lzRXhpc3R5IiwidW5kZWZpbmVkIiwiaXNFbXB0eSIsInZhbHVlcyIsImlzRXhpc3R5IiwibWF0Y2hSZWdleHAiLCJyZWdleHAiLCJ0ZXN0IiwiaXNVbmRlZmluZWQiLCJpc0VtcHR5U3RyaW5nIiwiaXNFbWFpbCIsImlzVXJsIiwiaXNUcnVlIiwiaXNGYWxzZSIsImlzTnVtZXJpYyIsImlzQWxwaGEiLCJpc0FscGhhbnVtZXJpYyIsImlzSW50IiwiaXNGbG9hdCIsImlzV29yZHMiLCJpc1NwZWNpYWxXb3JkcyIsImlzTGVuZ3RoIiwiZXF1YWxzIiwiZXFsIiwiZXF1YWxzRmllbGQiLCJmaWVsZCIsIm1heExlbmd0aCIsIm1pbkxlbmd0aCIsIi4vc3JjL2NvbXBvbmVudHMvQXV0aC9GaWVsZC9GaWVsZC5qcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsInNlbGYiLCJSZWZlcmVuY2VFcnJvciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNyZWF0ZSIsImVudW1lcmFibGUiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGVmaW5lUHJvcGVydHkiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZGVzY3JpcHRvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIl9yZWFjdCIsIl9yZWFjdDIiLCJfZm9ybXN5UmVhY3QiLCJfcHJvcFR5cGVzIiwiX3Byb3BUeXBlczIiLCJGaWVsZCIsIl9SZWFjdCRDb21wb25lbnQiLCJnZXRQcm90b3R5cGVPZiIsImNoYW5nZVZhbHVlIiwiY3VycmVudFRhcmdldCIsInR5cGUiLCJlcnJvck1lc3NhZ2UiLCJjbGFzc05hbWUiLCJodG1sRm9yIiwidG9Mb3dlckNhc2UiLCJ0ZXh0IiwicHJvcFR5cGVzIiwic3RyaW5nIiwiYW55IiwicmVnaXN0cmF0aW9uIiwiLi9zcmMvcGFnZXMvUHJvZmlsZS9Qcm9maWxlLmpzIiwibWFwU3RhdGVUb1Byb3BzIiwic3RvcmUiLCJ1cGRhdGVQcm9maWxlU3RhdHVzIiwidXNlcnMiLCJkZWxldGVQcm9maWxlU3RhdHVzIiwiZXJyb3JUZXh0IiwidXNlciIsIm1hcERpc3BhdGNoVG9Qcm9wcyIsImRpc3BhdGNoIiwidXBkYXRlUHJvZmlsZVJlcXVlc3QiLCJfcmVkdXgiLCJiaW5kQWN0aW9uQ3JlYXRvcnMiLCJfdXNlcnMiLCJkZWxldGVVc2VyUmVxdWVzdCIsImNsZWFyU3RhdHVzIiwiY2xlYXJVcGRhdGVQcm9maWxlU3RhdHVzIiwiX2Zvcm1zeVJlYWN0MiIsIl9GaWVsZCIsIl9GaWVsZDIiLCJfTWVzc2FnZSIsIl9Qb3B1cCIsIl9CdXR0b24iLCJfcmVhY3RSZWR1eCIsIlByb2ZpbGUiLCJfQ29tcG9uZW50Iiwic2V0UG9wdXBTaG93biIsImlkIiwiY3VycmVudFN0YXRlIiwicG9wdXBTaG93biIsInVwZGF0ZVByb2ZpbGUiLCJlbWFpbCIsInBhc3N3b3JkIiwicGFzc3dvcmRSZXBlYXQiLCJhdmF0YXIiLCJiYXNlNjRTdHIiLCJfaWQiLCJlbmFibGVCdXR0b24iLCJjYW5TdWJtaXQiLCJkaXNhYmxlQnV0dG9uIiwiZWRpdE5hbWUiLCJhbGxvd0VkaXROYW1lIiwiZmllbGROYW1lIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZWRpdEVtYWlsIiwiYWxsb3dFZGl0RW1haWwiLCJmaWVsZEVtYWlsIiwiZWRpdFBhc3N3b3JkIiwiYWxsb3dFZGl0UGFzc3dvcmQiLCJmaWVsZFBhc3N3b3JkIiwicmVwZWF0UGFzc3dvcmQiLCJhbGxvd1JlcGVhdFBhc3N3b3JkIiwiZmllbGRSZXBlYXRQYXNzd29yZCIsImVkaXRJbWFnZSIsImFsbG93RWRpdEltYWdlIiwiZmllbGRJbWFnZSIsImRlbGV0ZVVzZXIiLCJoYW5kbGVGaWxlU2VsZWN0IiwidXBkYXRlSW1hZ2VTdGF0dXMiLCJmaWxlcyIsImRhdGFUcmFuc2ZlciIsImZpbGUiLCJzaXplIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsIm9ubG9hZCIsInJlYWRlckV2ZW50IiwiYmluYXJ5U3RyaW5nIiwicmVzdWx0IiwiYnRvYSIsImltYWdlQmFzZTY0IiwicmVhZEFzQmluYXJ5U3RyaW5nIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsIk1lc3NhZ2UiLCJzdGF0dXMiLCJoZWFkZXIiLCJzcmMiLCJvbkNsaWNrIiwiZWwiLCJvbkRyb3AiLCJvbkRyYWdPdmVyIiwiaW5wdXQiLCJQb3B1cCIsIkJ1dHRvbiIsIm9rSGFuZGxlciIsImlubmVyVGV4dCIsInNldFRpbWVvdXQiLCJoaXN0b3J5IiwiY29ubmVjdCIsIi4vc3JjL3BhZ2VzL1Byb2ZpbGUvUHJvZmlsZS5zY3NzIl0sIm1hcHBpbmdzIjoiQUFBQUEsY0FBYyxJQUVSQyw2Q0FDQSxTQUFVQyxFQUFRQyxFQUFTQyxHQUVqQyxZQ09BLElBQUlDLEdBQVFELEVBQVEsaUNBQ2hCRSxFQUFVRixFQUFRLCtDQUV0QixRQUFxQixLQUFWQyxFQUNULEtBQU1FLE9BQ0osb0pBTUosSUFBSUMsSUFBdUIsR0FBSUgsR0FBTUksV0FBWUMsT0FFakRSLEdBQU9DLFFBQVVHLEVBQ2ZELEVBQU1JLFVBQ05KLEVBQU1NLGVBQ05ILElESUlJLDhDQUNBLFNBQVVWLEVBQVFDLEVBQVNDLEdBRWpDLFlFbkNBLFNBQVNTLEdBQU1DLEdBQ2IsTUFBT0MsUUFBT0MsS0FBS0YsR0FBUUcsT0FBTyxTQUFVQyxFQUFRQyxHQUNsRCxHQUFJQyxHQUFZRCxFQUFJRSxNQUFNLFdBQ3RCQyxFQUFRSCxFQUFJRSxNQUFNLGVBQ3RCQyxJQUFTRixFQUFVLElBQUlHLE9BQU9ELEdB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VWhLLE9BQ25CME4sWUFBYS9CLEVBQUEzQixRQUFVdEgsT1ZvdUNuQjRQLG1DQUNBLFNBQVU5WSxFQUFRQyIsImZpbGUiOiI2LmluZGV4X2J1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIndlYnBhY2tKc29ucChbNl0se1xuXG4vKioqLyBcIi4vbm9kZV9tb2R1bGVzL2NyZWF0ZS1yZWFjdC1jbGFzcy9pbmRleC5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qKlxuICogQ29weXJpZ2h0IDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqL1xuXG5cblxudmFyIFJlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0L3JlYWN0LmpzXCIpO1xudmFyIGZhY3RvcnkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvY3JlYXRlLXJlYWN0LWNsYXNzL2ZhY3RvcnkuanNcIik7XG5cbmlmICh0eXBlb2YgUmVhY3QgPT09ICd1bmRlZmluZWQnKSB7XG4gIHRocm93IEVycm9yKCdjcmVhdGUtcmVhY3QtY2xhc3MgY291bGQgbm90IGZpbmQgdGhlIFJlYWN0IG9iamVjdC4gSWYgeW91IGFyZSB1c2luZyBzY3JpcHQgdGFncywgJyArICdtYWtlIHN1cmUgdGhhdCBSZWFjdCBpcyBiZWluZyBsb2FkZWQgYmVmb3JlIGNyZWF0ZS1yZWFjdC1jbGFzcy4nKTtcbn1cblxuLy8gSGFjayB0byBncmFiIE5vb3BVcGRhdGVRdWV1ZSBmcm9tIGlzb21vcnBoaWMgUmVhY3RcbnZhciBSZWFjdE5vb3BVcGRhdGVRdWV1ZSA9IG5ldyBSZWFjdC5Db21wb25lbnQoKS51cGRhdGVyO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoUmVhY3QuQ29tcG9uZW50LCBSZWFjdC5pc1ZhbGlkRWxlbWVudCwgUmVhY3ROb29wVXBkYXRlUXVldWUpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL25vZGVfbW9kdWxlcy9mb3JtLWRhdGEtdG8tb2JqZWN0L2luZGV4LmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbmZ1bmN0aW9uIHRvT2JqKHNvdXJjZSkge1xuICByZXR1cm4gT2JqZWN0LmtleXMoc291cmNlKS5yZWR1Y2UoZnVuY3Rpb24gKG91dHB1dCwga2V5KSB7XG4gICAgdmFyIHBhcmVudEtleSA9IGtleS5tYXRjaCgvW15cXFtdKi9pKTtcbiAgICB2YXIgcGF0aHMgPSBrZXkubWF0Y2goL1xcWy4qP1xcXS9nKSB8fCBbXTtcbiAgICBwYXRocyA9IFtwYXJlbnRLZXlbMF1dLmNvbmNhdChwYXRocykubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHJldHVybiBrZXkucmVwbGFjZSgvXFxbfFxcXS9nLCAnJyk7XG4gICAgfSk7XG4gICAgdmFyIGN1cnJlbnRQYXRoID0gb3V0cHV0O1xuICAgIHdoaWxlIChwYXRocy5sZW5ndGgpIHtcbiAgICAgIHZhciBwYXRoS2V5ID0gcGF0aHMuc2hpZnQoKTtcblxuICAgICAgaWYgKHBhdGhLZXkgaW4gY3VycmVudFBhdGgpIHtcbiAgICAgICAgY3VycmVudFBhdGggPSBjdXJyZW50UGF0aFtwYXRoS2V5XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnRQYXRoW3BhdGhLZXldID0gcGF0aHMubGVuZ3RoID8gaXNOYU4ocGF0aHNbMF0pID8ge30gOiBbXSA6IHNvdXJjZVtrZXldO1xuICAgICAgICBjdXJyZW50UGF0aCA9IGN1cnJlbnRQYXRoW3BhdGhLZXldO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBvdXRwdXQ7XG4gIH0sIHt9KTtcbn1cblxuZnVuY3Rpb24gZnJvbU9iaihvYmopIHtcbiAgZnVuY3Rpb24gcmVjdXIobmV3T2JqLCBwcm9wTmFtZSwgY3VyclZhbCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGN1cnJWYWwpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChjdXJyVmFsKSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICAgIE9iamVjdC5rZXlzKGN1cnJWYWwpLmZvckVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgcmVjdXIobmV3T2JqLCBwcm9wTmFtZSArIFwiW1wiICsgdiArIFwiXVwiLCBjdXJyVmFsW3ZdKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG5ld09iajtcbiAgICB9XG5cbiAgICBuZXdPYmpbcHJvcE5hbWVdID0gY3VyclZhbDtcbiAgICByZXR1cm4gbmV3T2JqO1xuICB9XG5cbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuICByZXR1cm4ga2V5cy5yZWR1Y2UoZnVuY3Rpb24gKG5ld09iaiwgcHJvcE5hbWUpIHtcbiAgICByZXR1cm4gcmVjdXIobmV3T2JqLCBwcm9wTmFtZSwgb2JqW3Byb3BOYW1lXSk7XG4gIH0sIHt9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGZyb21PYmo6IGZyb21PYmosXG4gIHRvT2JqOiB0b09ialxufTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9EZWNvcmF0b3IuanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1yZXR1cm4gdGFyZ2V0O1xufTtcblxudmFyIFJlYWN0ID0gZ2xvYmFsLlJlYWN0IHx8IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC9yZWFjdC5qc1wiKTtcbnZhciBjcmVhdGVSZWFjdENsYXNzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2NyZWF0ZS1yZWFjdC1jbGFzcy9pbmRleC5qc1wiKTtcbnZhciBNaXhpbiA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL01peGluLmpzXCIpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gICAgcmV0dXJuIGNyZWF0ZVJlYWN0Q2xhc3Moe1xuICAgICAgbWl4aW5zOiBbTWl4aW5dLFxuICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KENvbXBvbmVudCwgX2V4dGVuZHMoe1xuICAgICAgICAgIHNldFZhbGlkYXRpb25zOiB0aGlzLnNldFZhbGlkYXRpb25zLFxuICAgICAgICAgIHNldFZhbHVlOiB0aGlzLnNldFZhbHVlLFxuICAgICAgICAgIHJlc2V0VmFsdWU6IHRoaXMucmVzZXRWYWx1ZSxcbiAgICAgICAgICBnZXRWYWx1ZTogdGhpcy5nZXRWYWx1ZSxcbiAgICAgICAgICBoYXNWYWx1ZTogdGhpcy5oYXNWYWx1ZSxcbiAgICAgICAgICBnZXRFcnJvck1lc3NhZ2U6IHRoaXMuZ2V0RXJyb3JNZXNzYWdlLFxuICAgICAgICAgIGdldEVycm9yTWVzc2FnZXM6IHRoaXMuZ2V0RXJyb3JNZXNzYWdlcyxcbiAgICAgICAgICBpc0Zvcm1EaXNhYmxlZDogdGhpcy5pc0Zvcm1EaXNhYmxlZCxcbiAgICAgICAgICBpc1ZhbGlkOiB0aGlzLmlzVmFsaWQsXG4gICAgICAgICAgaXNQcmlzdGluZTogdGhpcy5pc1ByaXN0aW5lLFxuICAgICAgICAgIGlzRm9ybVN1Ym1pdHRlZDogdGhpcy5pc0Zvcm1TdWJtaXR0ZWQsXG4gICAgICAgICAgaXNSZXF1aXJlZDogdGhpcy5pc1JlcXVpcmVkLFxuICAgICAgICAgIHNob3dSZXF1aXJlZDogdGhpcy5zaG93UmVxdWlyZWQsXG4gICAgICAgICAgc2hvd0Vycm9yOiB0aGlzLnNob3dFcnJvcixcbiAgICAgICAgICBpc1ZhbGlkVmFsdWU6IHRoaXMuaXNWYWxpZFZhbHVlXG4gICAgICAgIH0sIHRoaXMucHJvcHMpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn07XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3dlYnBhY2svYnVpbGRpbi9nbG9iYWwuanNcIikpKVxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL0hPQy5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfXJldHVybiB0YXJnZXQ7XG59O1xuXG52YXIgUmVhY3QgPSBnbG9iYWwuUmVhY3QgfHwgX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0L3JlYWN0LmpzXCIpO1xudmFyIGNyZWF0ZVJlYWN0Q2xhc3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvY3JlYXRlLXJlYWN0LWNsYXNzL2luZGV4LmpzXCIpO1xudmFyIE1peGluID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvTWl4aW4uanNcIik7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChDb21wb25lbnQpIHtcbiAgcmV0dXJuIGNyZWF0ZVJlYWN0Q2xhc3Moe1xuICAgIGRpc3BsYXlOYW1lOiAnRm9ybXN5KCcgKyBnZXREaXNwbGF5TmFtZShDb21wb25lbnQpICsgJyknLFxuICAgIG1peGluczogW01peGluXSxcblxuICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIGlubmVyUmVmID0gdGhpcy5wcm9wcy5pbm5lclJlZjtcblxuICAgICAgdmFyIHByb3BzRm9yRWxlbWVudCA9IF9leHRlbmRzKHtcbiAgICAgICAgc2V0VmFsaWRhdGlvbnM6IHRoaXMuc2V0VmFsaWRhdGlvbnMsXG4gICAgICAgIHNldFZhbHVlOiB0aGlzLnNldFZhbHVlLFxuICAgICAgICByZXNldFZhbHVlOiB0aGlzLnJlc2V0VmFsdWUsXG4gICAgICAgIGdldFZhbHVlOiB0aGlzLmdldFZhbHVlLFxuICAgICAgICBoYXNWYWx1ZTogdGhpcy5oYXNWYWx1ZSxcbiAgICAgICAgZ2V0RXJyb3JNZXNzYWdlOiB0aGlzLmdldEVycm9yTWVzc2FnZSxcbiAgICAgICAgZ2V0RXJyb3JNZXNzYWdlczogdGhpcy5nZXRFcnJvck1lc3NhZ2VzLFxuICAgICAgICBpc0Zvcm1EaXNhYmxlZDogdGhpcy5pc0Zvcm1EaXNhYmxlZCxcbiAgICAgICAgaXNWYWxpZDogdGhpcy5pc1ZhbGlkLFxuICAgICAgICBpc1ByaXN0aW5lOiB0aGlzLmlzUHJpc3RpbmUsXG4gICAgICAgIGlzRm9ybVN1Ym1pdHRlZDogdGhpcy5pc0Zvcm1TdWJtaXR0ZWQsXG4gICAgICAgIGlzUmVxdWlyZWQ6IHRoaXMuaXNSZXF1aXJlZCxcbiAgICAgICAgc2hvd1JlcXVpcmVkOiB0aGlzLnNob3dSZXF1aXJlZCxcbiAgICAgICAgc2hvd0Vycm9yOiB0aGlzLnNob3dFcnJvcixcbiAgICAgICAgaXNWYWxpZFZhbHVlOiB0aGlzLmlzVmFsaWRWYWx1ZVxuICAgICAgfSwgdGhpcy5wcm9wcyk7XG5cbiAgICAgIGlmIChpbm5lclJlZikge1xuICAgICAgICBwcm9wc0ZvckVsZW1lbnQucmVmID0gaW5uZXJSZWY7XG4gICAgICB9XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDb21wb25lbnQsIHByb3BzRm9yRWxlbWVudCk7XG4gICAgfVxuICB9KTtcbn07XG5cbmZ1bmN0aW9uIGdldERpc3BsYXlOYW1lKENvbXBvbmVudCkge1xuICByZXR1cm4gQ29tcG9uZW50LmRpc3BsYXlOYW1lIHx8IENvbXBvbmVudC5uYW1lIHx8ICh0eXBlb2YgQ29tcG9uZW50ID09PSAnc3RyaW5nJyA/IENvbXBvbmVudCA6ICdDb21wb25lbnQnKTtcbn1cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvd2VicGFjay9idWlsZGluL2dsb2JhbC5qc1wiKSkpXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvTWl4aW4uanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XG5cbnZhciBQcm9wVHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9pbmRleC5qc1wiKTtcbnZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL3V0aWxzLmpzXCIpO1xudmFyIFJlYWN0ID0gZ2xvYmFsLlJlYWN0IHx8IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC9yZWFjdC5qc1wiKTtcblxudmFyIGNvbnZlcnRWYWxpZGF0aW9uc1RvT2JqZWN0ID0gZnVuY3Rpb24gY29udmVydFZhbGlkYXRpb25zVG9PYmplY3QodmFsaWRhdGlvbnMpIHtcblxuICBpZiAodHlwZW9mIHZhbGlkYXRpb25zID09PSAnc3RyaW5nJykge1xuXG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLnNwbGl0KC9cXCwoPyFbXntcXFtdKlt9XFxdXSkvZykucmVkdWNlKGZ1bmN0aW9uICh2YWxpZGF0aW9ucywgdmFsaWRhdGlvbikge1xuICAgICAgdmFyIGFyZ3MgPSB2YWxpZGF0aW9uLnNwbGl0KCc6Jyk7XG4gICAgICB2YXIgdmFsaWRhdGVNZXRob2QgPSBhcmdzLnNoaWZ0KCk7XG5cbiAgICAgIGFyZ3MgPSBhcmdzLm1hcChmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoYXJnKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHJldHVybiBhcmc7IC8vIEl0IGlzIGEgc3RyaW5nIGlmIGl0IGNhbiBub3QgcGFyc2UgaXRcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3Jtc3kgZG9lcyBub3Qgc3VwcG9ydCBtdWx0aXBsZSBhcmdzIG9uIHN0cmluZyB2YWxpZGF0aW9ucy4gVXNlIG9iamVjdCBmb3JtYXQgb2YgdmFsaWRhdGlvbnMgaW5zdGVhZC4nKTtcbiAgICAgIH1cblxuICAgICAgdmFsaWRhdGlvbnNbdmFsaWRhdGVNZXRob2RdID0gYXJncy5sZW5ndGggPyBhcmdzWzBdIDogdHJ1ZTtcbiAgICAgIHJldHVybiB2YWxpZGF0aW9ucztcbiAgICB9LCB7fSk7XG4gIH1cblxuICByZXR1cm4gdmFsaWRhdGlvbnMgfHwge307XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIF92YWx1ZTogdGhpcy5wcm9wcy52YWx1ZSxcbiAgICAgIF9pc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgIF9pc1ZhbGlkOiB0cnVlLFxuICAgICAgX2lzUHJpc3RpbmU6IHRydWUsXG4gICAgICBfcHJpc3RpbmVWYWx1ZTogdGhpcy5wcm9wcy52YWx1ZSxcbiAgICAgIF92YWxpZGF0aW9uRXJyb3I6IFtdLFxuICAgICAgX2V4dGVybmFsRXJyb3I6IG51bGwsXG4gICAgICBfZm9ybVN1Ym1pdHRlZDogZmFsc2VcbiAgICB9O1xuICB9LFxuICBjb250ZXh0VHlwZXM6IHtcbiAgICBmb3Jtc3k6IFByb3BUeXBlcy5vYmplY3QgLy8gV2hhdCBhYm91dCByZXF1aXJlZD9cbiAgfSxcbiAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkYXRpb25FcnJvcjogJycsXG4gICAgICB2YWxpZGF0aW9uRXJyb3JzOiB7fVxuICAgIH07XG4gIH0sXG5cbiAgY29tcG9uZW50V2lsbE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgdmFyIGNvbmZpZ3VyZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuc2V0VmFsaWRhdGlvbnModGhpcy5wcm9wcy52YWxpZGF0aW9ucywgdGhpcy5wcm9wcy5yZXF1aXJlZCk7XG5cbiAgICAgIC8vIFBhc3MgYSBmdW5jdGlvbiBpbnN0ZWFkP1xuICAgICAgdGhpcy5jb250ZXh0LmZvcm1zeS5hdHRhY2hUb0Zvcm0odGhpcyk7XG4gICAgICAvL3RoaXMucHJvcHMuX2F0dGFjaFRvRm9ybSh0aGlzKTtcbiAgICB9LmJpbmQodGhpcyk7XG5cbiAgICBpZiAoIXRoaXMucHJvcHMubmFtZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3JtIElucHV0IHJlcXVpcmVzIGEgbmFtZSBwcm9wZXJ0eSB3aGVuIHVzZWQnKTtcbiAgICB9XG5cbiAgICAvKlxuICAgIGlmICghdGhpcy5wcm9wcy5fYXR0YWNoVG9Gb3JtKSB7XG4gICAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc01vdW50ZWQoKSkgcmV0dXJuO1xuICAgICAgICBpZiAoIXRoaXMucHJvcHMuX2F0dGFjaFRvRm9ybSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRm9ybSBNaXhpbiByZXF1aXJlcyBjb21wb25lbnQgdG8gYmUgbmVzdGVkIGluIGEgRm9ybScpO1xuICAgICAgICB9XG4gICAgICAgIGNvbmZpZ3VyZSgpO1xuICAgICAgfS5iaW5kKHRoaXMpLCAwKTtcbiAgICB9XG4gICAgKi9cbiAgICBjb25maWd1cmUoKTtcbiAgfSxcblxuICAvLyBXZSBoYXZlIHRvIG1ha2UgdGhlIHZhbGlkYXRlIG1ldGhvZCBpcyBrZXB0IHdoZW4gbmV3IHByb3BzIGFyZSBhZGRlZFxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgIHRoaXMuc2V0VmFsaWRhdGlvbnMobmV4dFByb3BzLnZhbGlkYXRpb25zLCBuZXh0UHJvcHMucmVxdWlyZWQpO1xuICB9LFxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykge1xuXG4gICAgLy8gSWYgdGhlIHZhbHVlIHBhc3NlZCBoYXMgY2hhbmdlZCwgc2V0IGl0LiBJZiB2YWx1ZSBpcyBub3QgcGFzc2VkIGl0IHdpbGxcbiAgICAvLyBpbnRlcm5hbGx5IHVwZGF0ZSwgYW5kIHRoaXMgd2lsbCBuZXZlciBydW5cbiAgICBpZiAoIXV0aWxzLmlzU2FtZSh0aGlzLnByb3BzLnZhbHVlLCBwcmV2UHJvcHMudmFsdWUpKSB7XG4gICAgICB0aGlzLnNldFZhbHVlKHRoaXMucHJvcHMudmFsdWUpO1xuICAgIH1cblxuICAgIC8vIElmIHZhbGlkYXRpb25zIG9yIHJlcXVpcmVkIGlzIGNoYW5nZWQsIHJ1biBhIG5ldyB2YWxpZGF0aW9uXG4gICAgaWYgKCF1dGlscy5pc1NhbWUodGhpcy5wcm9wcy52YWxpZGF0aW9ucywgcHJldlByb3BzLnZhbGlkYXRpb25zKSB8fCAhdXRpbHMuaXNTYW1lKHRoaXMucHJvcHMucmVxdWlyZWQsIHByZXZQcm9wcy5yZXF1aXJlZCkpIHtcbiAgICAgIHRoaXMuY29udGV4dC5mb3Jtc3kudmFsaWRhdGUodGhpcyk7XG4gICAgfVxuICB9LFxuXG4gIC8vIERldGFjaCBpdCB3aGVuIGNvbXBvbmVudCB1bm1vdW50c1xuICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy5jb250ZXh0LmZvcm1zeS5kZXRhY2hGcm9tRm9ybSh0aGlzKTtcbiAgICAvL3RoaXMucHJvcHMuX2RldGFjaEZyb21Gb3JtKHRoaXMpO1xuICB9LFxuXG4gIHNldFZhbGlkYXRpb25zOiBmdW5jdGlvbiBzZXRWYWxpZGF0aW9ucyh2YWxpZGF0aW9ucywgcmVxdWlyZWQpIHtcblxuICAgIC8vIEFkZCB2YWxpZGF0aW9ucyB0byB0aGUgc3RvcmUgaXRzZWxmIGFzIHRoZSBwcm9wcyBvYmplY3QgY2FuIG5vdCBiZSBtb2RpZmllZFxuICAgIHRoaXMuX3ZhbGlkYXRpb25zID0gY29udmVydFZhbGlkYXRpb25zVG9PYmplY3QodmFsaWRhdGlvbnMpIHx8IHt9O1xuICAgIHRoaXMuX3JlcXVpcmVkVmFsaWRhdGlvbnMgPSByZXF1aXJlZCA9PT0gdHJ1ZSA/IHsgaXNEZWZhdWx0UmVxdWlyZWRWYWx1ZTogdHJ1ZSB9IDogY29udmVydFZhbGlkYXRpb25zVG9PYmplY3QocmVxdWlyZWQpO1xuICB9LFxuXG4gIC8vIFdlIHZhbGlkYXRlIGFmdGVyIHRoZSB2YWx1ZSBoYXMgYmVlbiBzZXRcbiAgc2V0VmFsdWU6IGZ1bmN0aW9uIHNldFZhbHVlKHZhbHVlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBfdmFsdWU6IHZhbHVlLFxuICAgICAgX2lzUHJpc3RpbmU6IGZhbHNlXG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5jb250ZXh0LmZvcm1zeS52YWxpZGF0ZSh0aGlzKTtcbiAgICAgIC8vdGhpcy5wcm9wcy5fdmFsaWRhdGUodGhpcyk7XG4gICAgfS5iaW5kKHRoaXMpKTtcbiAgfSxcbiAgcmVzZXRWYWx1ZTogZnVuY3Rpb24gcmVzZXRWYWx1ZSgpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIF92YWx1ZTogdGhpcy5zdGF0ZS5fcHJpc3RpbmVWYWx1ZSxcbiAgICAgIF9pc1ByaXN0aW5lOiB0cnVlXG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5jb250ZXh0LmZvcm1zeS52YWxpZGF0ZSh0aGlzKTtcbiAgICAgIC8vdGhpcy5wcm9wcy5fdmFsaWRhdGUodGhpcyk7XG4gICAgfSk7XG4gIH0sXG4gIGdldFZhbHVlOiBmdW5jdGlvbiBnZXRWYWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5fdmFsdWU7XG4gIH0sXG4gIGhhc1ZhbHVlOiBmdW5jdGlvbiBoYXNWYWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5fdmFsdWUgIT09ICcnO1xuICB9LFxuICBnZXRFcnJvck1lc3NhZ2U6IGZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSgpIHtcbiAgICB2YXIgbWVzc2FnZXMgPSB0aGlzLmdldEVycm9yTWVzc2FnZXMoKTtcbiAgICByZXR1cm4gbWVzc2FnZXMubGVuZ3RoID8gbWVzc2FnZXNbMF0gOiBudWxsO1xuICB9LFxuICBnZXRFcnJvck1lc3NhZ2VzOiBmdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2VzKCkge1xuICAgIHJldHVybiAhdGhpcy5pc1ZhbGlkKCkgfHwgdGhpcy5zaG93UmVxdWlyZWQoKSA/IHRoaXMuc3RhdGUuX2V4dGVybmFsRXJyb3IgfHwgdGhpcy5zdGF0ZS5fdmFsaWRhdGlvbkVycm9yIHx8IFtdIDogW107XG4gIH0sXG4gIGlzRm9ybURpc2FibGVkOiBmdW5jdGlvbiBpc0Zvcm1EaXNhYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZXh0LmZvcm1zeS5pc0Zvcm1EaXNhYmxlZCgpO1xuICAgIC8vcmV0dXJuIHRoaXMucHJvcHMuX2lzRm9ybURpc2FibGVkKCk7XG4gIH0sXG4gIGlzVmFsaWQ6IGZ1bmN0aW9uIGlzVmFsaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX2lzVmFsaWQ7XG4gIH0sXG4gIGlzUHJpc3RpbmU6IGZ1bmN0aW9uIGlzUHJpc3RpbmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX2lzUHJpc3RpbmU7XG4gIH0sXG4gIGlzRm9ybVN1Ym1pdHRlZDogZnVuY3Rpb24gaXNGb3JtU3VibWl0dGVkKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLl9mb3JtU3VibWl0dGVkO1xuICB9LFxuICBpc1JlcXVpcmVkOiBmdW5jdGlvbiBpc1JlcXVpcmVkKCkge1xuICAgIHJldHVybiAhIXRoaXMucHJvcHMucmVxdWlyZWQ7XG4gIH0sXG4gIHNob3dSZXF1aXJlZDogZnVuY3Rpb24gc2hvd1JlcXVpcmVkKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLl9pc1JlcXVpcmVkO1xuICB9LFxuICBzaG93RXJyb3I6IGZ1bmN0aW9uIHNob3dFcnJvcigpIHtcbiAgICByZXR1cm4gIXRoaXMuc2hvd1JlcXVpcmVkKCkgJiYgIXRoaXMuaXNWYWxpZCgpO1xuICB9LFxuICBpc1ZhbGlkVmFsdWU6IGZ1bmN0aW9uIGlzVmFsaWRWYWx1ZSh2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHQuZm9ybXN5LmlzVmFsaWRWYWx1ZS5jYWxsKG51bGwsIHRoaXMsIHZhbHVlKTtcbiAgICAvL3JldHVybiB0aGlzLnByb3BzLl9pc1ZhbGlkVmFsdWUuY2FsbChudWxsLCB0aGlzLCB2YWx1ZSk7XG4gIH1cbn07XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3dlYnBhY2svYnVpbGRpbi9nbG9iYWwuanNcIikpKVxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL21haW4uanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XG5cbnZhciBfdHlwZW9mMiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1yZXR1cm4gdGFyZ2V0O1xufTtcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgX3R5cGVvZjIoU3ltYm9sLml0ZXJhdG9yKSA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZjIob2JqKTtcbn0gOiBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YyKG9iaik7XG59O1xuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMob2JqLCBrZXlzKSB7XG4gIHZhciB0YXJnZXQgPSB7fTtmb3IgKHZhciBpIGluIG9iaikge1xuICAgIGlmIChrZXlzLmluZGV4T2YoaSkgPj0gMCkgY29udGludWU7aWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBpKSkgY29udGludWU7dGFyZ2V0W2ldID0gb2JqW2ldO1xuICB9cmV0dXJuIHRhcmdldDtcbn1cblxudmFyIFByb3BUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9wcm9wLXR5cGVzL2luZGV4LmpzXCIpO1xudmFyIFJlYWN0ID0gZ2xvYmFsLlJlYWN0IHx8IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC9yZWFjdC5qc1wiKTtcbnZhciBjcmVhdGVSZWFjdENsYXNzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2NyZWF0ZS1yZWFjdC1jbGFzcy9pbmRleC5qc1wiKTtcbnZhciBGb3Jtc3kgPSB7fTtcbnZhciB2YWxpZGF0aW9uUnVsZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi92YWxpZGF0aW9uUnVsZXMuanNcIik7XG52YXIgZm9ybURhdGFUb09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9mb3JtLWRhdGEtdG8tb2JqZWN0L2luZGV4LmpzXCIpO1xudmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvdXRpbHMuanNcIik7XG52YXIgTWl4aW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9NaXhpbi5qc1wiKTtcbnZhciBIT0MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9IT0MuanNcIik7XG52YXIgRGVjb3JhdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvRGVjb3JhdG9yLmpzXCIpO1xudmFyIG9wdGlvbnMgPSB7fTtcbnZhciBlbXB0eUFycmF5ID0gW107XG5cbkZvcm1zeS5NaXhpbiA9IE1peGluO1xuRm9ybXN5LkhPQyA9IEhPQztcbkZvcm1zeS5EZWNvcmF0b3IgPSBEZWNvcmF0b3I7XG5cbkZvcm1zeS5kZWZhdWx0cyA9IGZ1bmN0aW9uIChwYXNzZWRPcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBwYXNzZWRPcHRpb25zO1xufTtcblxuRm9ybXN5LmFkZFZhbGlkYXRpb25SdWxlID0gZnVuY3Rpb24gKG5hbWUsIGZ1bmMpIHtcbiAgdmFsaWRhdGlvblJ1bGVzW25hbWVdID0gZnVuYztcbn07XG5cbkZvcm1zeS5Gb3JtID0gY3JlYXRlUmVhY3RDbGFzcyh7XG4gIGRpc3BsYXlOYW1lOiAnRm9ybXN5JyxcbiAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiBnZXRJbml0aWFsU3RhdGUoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzVmFsaWQ6IHRydWUsXG4gICAgICBpc1N1Ym1pdHRpbmc6IGZhbHNlLFxuICAgICAgY2FuQ2hhbmdlOiBmYWxzZVxuICAgIH07XG4gIH0sXG4gIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24gZ2V0RGVmYXVsdFByb3BzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBvblN1Y2Nlc3M6IGZ1bmN0aW9uIG9uU3VjY2VzcygpIHt9LFxuICAgICAgb25FcnJvcjogZnVuY3Rpb24gb25FcnJvcigpIHt9LFxuICAgICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KCkge30sXG4gICAgICBvblZhbGlkU3VibWl0OiBmdW5jdGlvbiBvblZhbGlkU3VibWl0KCkge30sXG4gICAgICBvbkludmFsaWRTdWJtaXQ6IGZ1bmN0aW9uIG9uSW52YWxpZFN1Ym1pdCgpIHt9LFxuICAgICAgb25WYWxpZDogZnVuY3Rpb24gb25WYWxpZCgpIHt9LFxuICAgICAgb25JbnZhbGlkOiBmdW5jdGlvbiBvbkludmFsaWQoKSB7fSxcbiAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZSgpIHt9LFxuICAgICAgdmFsaWRhdGlvbkVycm9yczogbnVsbCxcbiAgICAgIHByZXZlbnRFeHRlcm5hbEludmFsaWRhdGlvbjogZmFsc2VcbiAgICB9O1xuICB9LFxuXG4gIGNoaWxkQ29udGV4dFR5cGVzOiB7XG4gICAgZm9ybXN5OiBQcm9wVHlwZXMub2JqZWN0XG4gIH0sXG4gIGdldENoaWxkQ29udGV4dDogZnVuY3Rpb24gZ2V0Q2hpbGRDb250ZXh0KCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICByZXR1cm4ge1xuICAgICAgZm9ybXN5OiB7XG4gICAgICAgIGF0dGFjaFRvRm9ybTogdGhpcy5hdHRhY2hUb0Zvcm0sXG4gICAgICAgIGRldGFjaEZyb21Gb3JtOiB0aGlzLmRldGFjaEZyb21Gb3JtLFxuICAgICAgICB2YWxpZGF0ZTogdGhpcy52YWxpZGF0ZSxcbiAgICAgICAgaXNGb3JtRGlzYWJsZWQ6IHRoaXMuaXNGb3JtRGlzYWJsZWQsXG4gICAgICAgIGlzVmFsaWRWYWx1ZTogZnVuY3Rpb24gaXNWYWxpZFZhbHVlKGNvbXBvbmVudCwgdmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMucnVuVmFsaWRhdGlvbihjb21wb25lbnQsIHZhbHVlKS5pc1ZhbGlkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfSxcblxuICAvLyBBZGQgYSBtYXAgdG8gc3RvcmUgdGhlIGlucHV0cyBvZiB0aGUgZm9ybSwgYSBtb2RlbCB0byBzdG9yZVxuICAvLyB0aGUgdmFsdWVzIG9mIHRoZSBmb3JtIGFuZCByZWdpc3RlciBjaGlsZCBpbnB1dHNcbiAgY29tcG9uZW50V2lsbE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgdGhpcy5pbnB1dHMgPSBbXTtcbiAgfSxcblxuICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy52YWxpZGF0ZUZvcm0oKTtcbiAgfSxcblxuICBjb21wb25lbnRXaWxsVXBkYXRlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVXBkYXRlKCkge1xuICAgIC8vIEtlZXAgYSByZWZlcmVuY2UgdG8gaW5wdXQgbmFtZXMgYmVmb3JlIGZvcm0gdXBkYXRlcyxcbiAgICAvLyB0byBjaGVjayBpZiBpbnB1dHMgaGFzIGNoYW5nZWQgYWZ0ZXIgcmVuZGVyXG4gICAgdGhpcy5wcmV2SW5wdXROYW1lcyA9IHRoaXMuaW5wdXRzLm1hcChmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICByZXR1cm4gY29tcG9uZW50LnByb3BzLm5hbWU7XG4gICAgfSk7XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG5cbiAgICBpZiAodGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzICYmIF90eXBlb2YodGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzKSA9PT0gJ29iamVjdCcgJiYgT2JqZWN0LmtleXModGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzKS5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLnNldElucHV0VmFsaWRhdGlvbkVycm9ycyh0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnMpO1xuICAgIH1cblxuICAgIHZhciBuZXdJbnB1dE5hbWVzID0gdGhpcy5pbnB1dHMubWFwKGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgIHJldHVybiBjb21wb25lbnQucHJvcHMubmFtZTtcbiAgICB9KTtcbiAgICBpZiAodXRpbHMuYXJyYXlzRGlmZmVyKHRoaXMucHJldklucHV0TmFtZXMsIG5ld0lucHV0TmFtZXMpKSB7XG4gICAgICB0aGlzLnZhbGlkYXRlRm9ybSgpO1xuICAgIH1cbiAgfSxcblxuICAvLyBBbGxvdyByZXNldHRpbmcgdG8gc3BlY2lmaWVkIGRhdGFcbiAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KGRhdGEpIHtcbiAgICB0aGlzLnNldEZvcm1QcmlzdGluZSh0cnVlKTtcbiAgICB0aGlzLnJlc2V0TW9kZWwoZGF0YSk7XG4gIH0sXG5cbiAgLy8gVXBkYXRlIG1vZGVsLCBzdWJtaXQgdG8gdXJsIHByb3AgYW5kIHNlbmQgdGhlIG1vZGVsXG4gIHN1Ym1pdDogZnVuY3Rpb24gc3VibWl0KGV2ZW50KSB7XG5cbiAgICBldmVudCAmJiBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgLy8gVHJpZ2dlciBmb3JtIGFzIG5vdCBwcmlzdGluZS5cbiAgICAvLyBJZiBhbnkgaW5wdXRzIGhhdmUgbm90IGJlZW4gdG91Y2hlZCB5ZXQgdGhpcyB3aWxsIG1ha2UgdGhlbSBkaXJ0eVxuICAgIC8vIHNvIHZhbGlkYXRpb24gYmVjb21lcyB2aXNpYmxlIChpZiBiYXNlZCBvbiBpc1ByaXN0aW5lKVxuICAgIHRoaXMuc2V0Rm9ybVByaXN0aW5lKGZhbHNlKTtcbiAgICB2YXIgbW9kZWwgPSB0aGlzLmdldE1vZGVsKCk7XG4gICAgdGhpcy5wcm9wcy5vblN1Ym1pdChtb2RlbCwgdGhpcy5yZXNldE1vZGVsLCB0aGlzLnVwZGF0ZUlucHV0c1dpdGhFcnJvcik7XG4gICAgdGhpcy5zdGF0ZS5pc1ZhbGlkID8gdGhpcy5wcm9wcy5vblZhbGlkU3VibWl0KG1vZGVsLCB0aGlzLnJlc2V0TW9kZWwsIHRoaXMudXBkYXRlSW5wdXRzV2l0aEVycm9yKSA6IHRoaXMucHJvcHMub25JbnZhbGlkU3VibWl0KG1vZGVsLCB0aGlzLnJlc2V0TW9kZWwsIHRoaXMudXBkYXRlSW5wdXRzV2l0aEVycm9yKTtcbiAgfSxcblxuICBtYXBNb2RlbDogZnVuY3Rpb24gbWFwTW9kZWwobW9kZWwpIHtcblxuICAgIGlmICh0aGlzLnByb3BzLm1hcHBpbmcpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLm1hcHBpbmcobW9kZWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZm9ybURhdGFUb09iamVjdC50b09iaihPYmplY3Qua2V5cyhtb2RlbCkucmVkdWNlKGZ1bmN0aW9uIChtYXBwZWRNb2RlbCwga2V5KSB7XG5cbiAgICAgICAgdmFyIGtleUFycmF5ID0ga2V5LnNwbGl0KCcuJyk7XG4gICAgICAgIHZhciBiYXNlID0gbWFwcGVkTW9kZWw7XG4gICAgICAgIHdoaWxlIChrZXlBcnJheS5sZW5ndGgpIHtcbiAgICAgICAgICB2YXIgY3VycmVudEtleSA9IGtleUFycmF5LnNoaWZ0KCk7XG4gICAgICAgICAgYmFzZSA9IGJhc2VbY3VycmVudEtleV0gPSBrZXlBcnJheS5sZW5ndGggPyBiYXNlW2N1cnJlbnRLZXldIHx8IHt9IDogbW9kZWxba2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtYXBwZWRNb2RlbDtcbiAgICAgIH0sIHt9KSk7XG4gICAgfVxuICB9LFxuXG4gIGdldE1vZGVsOiBmdW5jdGlvbiBnZXRNb2RlbCgpIHtcbiAgICB2YXIgY3VycmVudFZhbHVlcyA9IHRoaXMuZ2V0Q3VycmVudFZhbHVlcygpO1xuICAgIHJldHVybiB0aGlzLm1hcE1vZGVsKGN1cnJlbnRWYWx1ZXMpO1xuICB9LFxuXG4gIC8vIFJlc2V0IGVhY2gga2V5IGluIHRoZSBtb2RlbCB0byB0aGUgb3JpZ2luYWwgLyBpbml0aWFsIC8gc3BlY2lmaWVkIHZhbHVlXG4gIHJlc2V0TW9kZWw6IGZ1bmN0aW9uIHJlc2V0TW9kZWwoZGF0YSkge1xuICAgIHRoaXMuaW5wdXRzLmZvckVhY2goZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgdmFyIG5hbWUgPSBjb21wb25lbnQucHJvcHMubmFtZTtcbiAgICAgIGlmIChkYXRhICYmIGRhdGEuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgY29tcG9uZW50LnNldFZhbHVlKGRhdGFbbmFtZV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29tcG9uZW50LnJlc2V0VmFsdWUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLnZhbGlkYXRlRm9ybSgpO1xuICB9LFxuXG4gIHNldElucHV0VmFsaWRhdGlvbkVycm9yczogZnVuY3Rpb24gc2V0SW5wdXRWYWxpZGF0aW9uRXJyb3JzKGVycm9ycykge1xuICAgIHRoaXMuaW5wdXRzLmZvckVhY2goZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgdmFyIG5hbWUgPSBjb21wb25lbnQucHJvcHMubmFtZTtcbiAgICAgIHZhciBhcmdzID0gW3tcbiAgICAgICAgX2lzVmFsaWQ6ICEobmFtZSBpbiBlcnJvcnMpLFxuICAgICAgICBfdmFsaWRhdGlvbkVycm9yOiB0eXBlb2YgZXJyb3JzW25hbWVdID09PSAnc3RyaW5nJyA/IFtlcnJvcnNbbmFtZV1dIDogZXJyb3JzW25hbWVdXG4gICAgICB9XTtcbiAgICAgIGNvbXBvbmVudC5zZXRTdGF0ZS5hcHBseShjb21wb25lbnQsIGFyZ3MpO1xuICAgIH0pO1xuICB9LFxuXG4gIC8vIENoZWNrcyBpZiB0aGUgdmFsdWVzIGhhdmUgY2hhbmdlZCBmcm9tIHRoZWlyIGluaXRpYWwgdmFsdWVcbiAgaXNDaGFuZ2VkOiBmdW5jdGlvbiBpc0NoYW5nZWQoKSB7XG4gICAgcmV0dXJuICF1dGlscy5pc1NhbWUodGhpcy5nZXRQcmlzdGluZVZhbHVlcygpLCB0aGlzLmdldEN1cnJlbnRWYWx1ZXMoKSk7XG4gIH0sXG5cbiAgZ2V0UHJpc3RpbmVWYWx1ZXM6IGZ1bmN0aW9uIGdldFByaXN0aW5lVmFsdWVzKCkge1xuICAgIHJldHVybiB0aGlzLmlucHV0cy5yZWR1Y2UoZnVuY3Rpb24gKGRhdGEsIGNvbXBvbmVudCkge1xuICAgICAgdmFyIG5hbWUgPSBjb21wb25lbnQucHJvcHMubmFtZTtcbiAgICAgIGRhdGFbbmFtZV0gPSBjb21wb25lbnQucHJvcHMudmFsdWU7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9LCB7fSk7XG4gIH0sXG5cbiAgLy8gR28gdGhyb3VnaCBlcnJvcnMgZnJvbSBzZXJ2ZXIgYW5kIGdyYWIgdGhlIGNvbXBvbmVudHNcbiAgLy8gc3RvcmVkIGluIHRoZSBpbnB1dHMgbWFwLiBDaGFuZ2UgdGhlaXIgc3RhdGUgdG8gaW52YWxpZFxuICAvLyBhbmQgc2V0IHRoZSBzZXJ2ZXJFcnJvciBtZXNzYWdlXG4gIHVwZGF0ZUlucHV0c1dpdGhFcnJvcjogZnVuY3Rpb24gdXBkYXRlSW5wdXRzV2l0aEVycm9yKGVycm9ycykge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgT2JqZWN0LmtleXMoZXJyb3JzKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lLCBpbmRleCkge1xuICAgICAgdmFyIGNvbXBvbmVudCA9IHV0aWxzLmZpbmQoX3RoaXMyLmlucHV0cywgZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgICByZXR1cm4gY29tcG9uZW50LnByb3BzLm5hbWUgPT09IG5hbWU7XG4gICAgICB9KTtcbiAgICAgIGlmICghY29tcG9uZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignWW91IGFyZSB0cnlpbmcgdG8gdXBkYXRlIGFuIGlucHV0IHRoYXQgZG9lcyBub3QgZXhpc3QuICcgKyAnVmVyaWZ5IGVycm9ycyBvYmplY3Qgd2l0aCBpbnB1dCBuYW1lcy4gJyArIEpTT04uc3RyaW5naWZ5KGVycm9ycykpO1xuICAgICAgfVxuICAgICAgdmFyIGFyZ3MgPSBbe1xuICAgICAgICBfaXNWYWxpZDogX3RoaXMyLnByb3BzLnByZXZlbnRFeHRlcm5hbEludmFsaWRhdGlvbiB8fCBmYWxzZSxcbiAgICAgICAgX2V4dGVybmFsRXJyb3I6IHR5cGVvZiBlcnJvcnNbbmFtZV0gPT09ICdzdHJpbmcnID8gW2Vycm9yc1tuYW1lXV0gOiBlcnJvcnNbbmFtZV1cbiAgICAgIH1dO1xuICAgICAgY29tcG9uZW50LnNldFN0YXRlLmFwcGx5KGNvbXBvbmVudCwgYXJncyk7XG4gICAgfSk7XG4gIH0sXG5cbiAgaXNGb3JtRGlzYWJsZWQ6IGZ1bmN0aW9uIGlzRm9ybURpc2FibGVkKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmRpc2FibGVkO1xuICB9LFxuXG4gIGdldEN1cnJlbnRWYWx1ZXM6IGZ1bmN0aW9uIGdldEN1cnJlbnRWYWx1ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5wdXRzLnJlZHVjZShmdW5jdGlvbiAoZGF0YSwgY29tcG9uZW50KSB7XG4gICAgICB2YXIgbmFtZSA9IGNvbXBvbmVudC5wcm9wcy5uYW1lO1xuICAgICAgZGF0YVtuYW1lXSA9IGNvbXBvbmVudC5zdGF0ZS5fdmFsdWU7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9LCB7fSk7XG4gIH0sXG5cbiAgc2V0Rm9ybVByaXN0aW5lOiBmdW5jdGlvbiBzZXRGb3JtUHJpc3RpbmUoaXNQcmlzdGluZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgX2Zvcm1TdWJtaXR0ZWQ6ICFpc1ByaXN0aW5lXG4gICAgfSk7XG5cbiAgICAvLyBJdGVyYXRlIHRocm91Z2ggZWFjaCBjb21wb25lbnQgYW5kIHNldCBpdCBhcyBwcmlzdGluZVxuICAgIC8vIG9yIFwiZGlydHlcIi5cbiAgICB0aGlzLmlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChjb21wb25lbnQsIGluZGV4KSB7XG4gICAgICBjb21wb25lbnQuc2V0U3RhdGUoe1xuICAgICAgICBfZm9ybVN1Ym1pdHRlZDogIWlzUHJpc3RpbmUsXG4gICAgICAgIF9pc1ByaXN0aW5lOiBpc1ByaXN0aW5lXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSxcblxuICAvLyBVc2UgdGhlIGJpbmRlZCB2YWx1ZXMgYW5kIHRoZSBhY3R1YWwgaW5wdXQgdmFsdWUgdG9cbiAgLy8gdmFsaWRhdGUgdGhlIGlucHV0IGFuZCBzZXQgaXRzIHN0YXRlLiBUaGVuIGNoZWNrIHRoZVxuICAvLyBzdGF0ZSBvZiB0aGUgZm9ybSBpdHNlbGZcbiAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKGNvbXBvbmVudCkge1xuXG4gICAgLy8gVHJpZ2dlciBvbkNoYW5nZVxuICAgIGlmICh0aGlzLnN0YXRlLmNhbkNoYW5nZSkge1xuICAgICAgdGhpcy5wcm9wcy5vbkNoYW5nZSh0aGlzLmdldEN1cnJlbnRWYWx1ZXMoKSwgdGhpcy5pc0NoYW5nZWQoKSk7XG4gICAgfVxuXG4gICAgdmFyIHZhbGlkYXRpb24gPSB0aGlzLnJ1blZhbGlkYXRpb24oY29tcG9uZW50KTtcbiAgICAvLyBSdW4gdGhyb3VnaCB0aGUgdmFsaWRhdGlvbnMsIHNwbGl0IHRoZW0gdXAgYW5kIGNhbGxcbiAgICAvLyB0aGUgdmFsaWRhdG9yIElGIHRoZXJlIGlzIGEgdmFsdWUgb3IgaXQgaXMgcmVxdWlyZWRcbiAgICBjb21wb25lbnQuc2V0U3RhdGUoe1xuICAgICAgX2lzVmFsaWQ6IHZhbGlkYXRpb24uaXNWYWxpZCxcbiAgICAgIF9pc1JlcXVpcmVkOiB2YWxpZGF0aW9uLmlzUmVxdWlyZWQsXG4gICAgICBfdmFsaWRhdGlvbkVycm9yOiB2YWxpZGF0aW9uLmVycm9yLFxuICAgICAgX2V4dGVybmFsRXJyb3I6IG51bGxcbiAgICB9LCB0aGlzLnZhbGlkYXRlRm9ybSk7XG4gIH0sXG5cbiAgLy8gQ2hlY2tzIHZhbGlkYXRpb24gb24gY3VycmVudCB2YWx1ZSBvciBhIHBhc3NlZCB2YWx1ZVxuICBydW5WYWxpZGF0aW9uOiBmdW5jdGlvbiBydW5WYWxpZGF0aW9uKGNvbXBvbmVudCwgdmFsdWUpIHtcblxuICAgIHZhciBjdXJyZW50VmFsdWVzID0gdGhpcy5nZXRDdXJyZW50VmFsdWVzKCk7XG4gICAgdmFyIHZhbGlkYXRpb25FcnJvcnMgPSBjb21wb25lbnQucHJvcHMudmFsaWRhdGlvbkVycm9ycztcbiAgICB2YXIgdmFsaWRhdGlvbkVycm9yID0gY29tcG9uZW50LnByb3BzLnZhbGlkYXRpb25FcnJvcjtcbiAgICB2YWx1ZSA9IGFyZ3VtZW50cy5sZW5ndGggPT09IDIgPyB2YWx1ZSA6IGNvbXBvbmVudC5zdGF0ZS5fdmFsdWU7XG5cbiAgICB2YXIgdmFsaWRhdGlvblJlc3VsdHMgPSB0aGlzLnJ1blJ1bGVzKHZhbHVlLCBjdXJyZW50VmFsdWVzLCBjb21wb25lbnQuX3ZhbGlkYXRpb25zKTtcbiAgICB2YXIgcmVxdWlyZWRSZXN1bHRzID0gdGhpcy5ydW5SdWxlcyh2YWx1ZSwgY3VycmVudFZhbHVlcywgY29tcG9uZW50Ll9yZXF1aXJlZFZhbGlkYXRpb25zKTtcblxuICAgIC8vIHRoZSBjb21wb25lbnQgZGVmaW5lcyBhbiBleHBsaWNpdCB2YWxpZGF0ZSBmdW5jdGlvblxuICAgIGlmICh0eXBlb2YgY29tcG9uZW50LnZhbGlkYXRlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHZhbGlkYXRpb25SZXN1bHRzLmZhaWxlZCA9IGNvbXBvbmVudC52YWxpZGF0ZSgpID8gW10gOiBbJ2ZhaWxlZCddO1xuICAgIH1cblxuICAgIHZhciBpc1JlcXVpcmVkID0gT2JqZWN0LmtleXMoY29tcG9uZW50Ll9yZXF1aXJlZFZhbGlkYXRpb25zKS5sZW5ndGggPyAhIXJlcXVpcmVkUmVzdWx0cy5zdWNjZXNzLmxlbmd0aCA6IGZhbHNlO1xuICAgIHZhciBpc1ZhbGlkID0gIXZhbGlkYXRpb25SZXN1bHRzLmZhaWxlZC5sZW5ndGggJiYgISh0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnMgJiYgdGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzW2NvbXBvbmVudC5wcm9wcy5uYW1lXSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXNSZXF1aXJlZDogaXNSZXF1aXJlZCxcbiAgICAgIGlzVmFsaWQ6IGlzUmVxdWlyZWQgPyBmYWxzZSA6IGlzVmFsaWQsXG4gICAgICBlcnJvcjogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIGlmIChpc1ZhbGlkICYmICFpc1JlcXVpcmVkKSB7XG4gICAgICAgICAgcmV0dXJuIGVtcHR5QXJyYXk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmFsaWRhdGlvblJlc3VsdHMuZXJyb3JzLmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybiB2YWxpZGF0aW9uUmVzdWx0cy5lcnJvcnM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzICYmIHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9yc1tjb21wb25lbnQucHJvcHMubmFtZV0pIHtcbiAgICAgICAgICByZXR1cm4gdHlwZW9mIHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9yc1tjb21wb25lbnQucHJvcHMubmFtZV0gPT09ICdzdHJpbmcnID8gW3RoaXMucHJvcHMudmFsaWRhdGlvbkVycm9yc1tjb21wb25lbnQucHJvcHMubmFtZV1dIDogdGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzW2NvbXBvbmVudC5wcm9wcy5uYW1lXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1JlcXVpcmVkKSB7XG4gICAgICAgICAgdmFyIGVycm9yID0gdmFsaWRhdGlvbkVycm9yc1tyZXF1aXJlZFJlc3VsdHMuc3VjY2Vzc1swXV07XG4gICAgICAgICAgcmV0dXJuIGVycm9yID8gW2Vycm9yXSA6IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmFsaWRhdGlvblJlc3VsdHMuZmFpbGVkLmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybiB2YWxpZGF0aW9uUmVzdWx0cy5mYWlsZWQubWFwKGZ1bmN0aW9uIChmYWlsZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWxpZGF0aW9uRXJyb3JzW2ZhaWxlZF0gPyB2YWxpZGF0aW9uRXJyb3JzW2ZhaWxlZF0gOiB2YWxpZGF0aW9uRXJyb3I7XG4gICAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uICh4LCBwb3MsIGFycikge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIGR1cGxpY2F0ZXNcbiAgICAgICAgICAgIHJldHVybiBhcnIuaW5kZXhPZih4KSA9PT0gcG9zO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LmNhbGwodGhpcylcbiAgICB9O1xuICB9LFxuXG4gIHJ1blJ1bGVzOiBmdW5jdGlvbiBydW5SdWxlcyh2YWx1ZSwgY3VycmVudFZhbHVlcywgdmFsaWRhdGlvbnMpIHtcblxuICAgIHZhciByZXN1bHRzID0ge1xuICAgICAgZXJyb3JzOiBbXSxcbiAgICAgIGZhaWxlZDogW10sXG4gICAgICBzdWNjZXNzOiBbXVxuICAgIH07XG4gICAgaWYgKE9iamVjdC5rZXlzKHZhbGlkYXRpb25zKS5sZW5ndGgpIHtcbiAgICAgIE9iamVjdC5rZXlzKHZhbGlkYXRpb25zKS5mb3JFYWNoKGZ1bmN0aW9uICh2YWxpZGF0aW9uTWV0aG9kKSB7XG5cbiAgICAgICAgaWYgKHZhbGlkYXRpb25SdWxlc1t2YWxpZGF0aW9uTWV0aG9kXSAmJiB0eXBlb2YgdmFsaWRhdGlvbnNbdmFsaWRhdGlvbk1ldGhvZF0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm1zeSBkb2VzIG5vdCBhbGxvdyB5b3UgdG8gb3ZlcnJpZGUgZGVmYXVsdCB2YWxpZGF0aW9uczogJyArIHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF2YWxpZGF0aW9uUnVsZXNbdmFsaWRhdGlvbk1ldGhvZF0gJiYgdHlwZW9mIHZhbGlkYXRpb25zW3ZhbGlkYXRpb25NZXRob2RdICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3Jtc3kgZG9lcyBub3QgaGF2ZSB0aGUgdmFsaWRhdGlvbiBydWxlOiAnICsgdmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIHZhbGlkYXRpb25zW3ZhbGlkYXRpb25NZXRob2RdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdmFyIHZhbGlkYXRpb24gPSB2YWxpZGF0aW9uc1t2YWxpZGF0aW9uTWV0aG9kXShjdXJyZW50VmFsdWVzLCB2YWx1ZSk7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2YWxpZGF0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmVzdWx0cy5lcnJvcnMucHVzaCh2YWxpZGF0aW9uKTtcbiAgICAgICAgICAgIHJlc3VsdHMuZmFpbGVkLnB1c2godmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgICAgfSBlbHNlIGlmICghdmFsaWRhdGlvbikge1xuICAgICAgICAgICAgcmVzdWx0cy5mYWlsZWQucHVzaCh2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWxpZGF0aW9uc1t2YWxpZGF0aW9uTWV0aG9kXSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHZhciB2YWxpZGF0aW9uID0gdmFsaWRhdGlvblJ1bGVzW3ZhbGlkYXRpb25NZXRob2RdKGN1cnJlbnRWYWx1ZXMsIHZhbHVlLCB2YWxpZGF0aW9uc1t2YWxpZGF0aW9uTWV0aG9kXSk7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2YWxpZGF0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmVzdWx0cy5lcnJvcnMucHVzaCh2YWxpZGF0aW9uKTtcbiAgICAgICAgICAgIHJlc3VsdHMuZmFpbGVkLnB1c2godmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgICAgfSBlbHNlIGlmICghdmFsaWRhdGlvbikge1xuICAgICAgICAgICAgcmVzdWx0cy5mYWlsZWQucHVzaCh2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0cy5zdWNjZXNzLnB1c2godmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHRzLnN1Y2Nlc3MucHVzaCh2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzO1xuICB9LFxuXG4gIC8vIFZhbGlkYXRlIHRoZSBmb3JtIGJ5IGdvaW5nIHRocm91Z2ggYWxsIGNoaWxkIGlucHV0IGNvbXBvbmVudHNcbiAgLy8gYW5kIGNoZWNrIHRoZWlyIHN0YXRlXG4gIHZhbGlkYXRlRm9ybTogZnVuY3Rpb24gdmFsaWRhdGVGb3JtKCkge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgLy8gV2UgbmVlZCBhIGNhbGxiYWNrIGFzIHdlIGFyZSB2YWxpZGF0aW5nIGFsbCBpbnB1dHMgYWdhaW4uIFRoaXMgd2lsbFxuICAgIC8vIHJ1biB3aGVuIHRoZSBsYXN0IGNvbXBvbmVudCBoYXMgc2V0IGl0cyBzdGF0ZVxuICAgIHZhciBvblZhbGlkYXRpb25Db21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhbGxJc1ZhbGlkID0gdGhpcy5pbnB1dHMuZXZlcnkoZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgICByZXR1cm4gY29tcG9uZW50LnN0YXRlLl9pc1ZhbGlkO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBpc1ZhbGlkOiBhbGxJc1ZhbGlkXG4gICAgICB9KTtcblxuICAgICAgaWYgKGFsbElzVmFsaWQpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vblZhbGlkKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnByb3BzLm9uSW52YWxpZCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBUZWxsIHRoZSBmb3JtIHRoYXQgaXQgY2FuIHN0YXJ0IHRvIHRyaWdnZXIgY2hhbmdlIGV2ZW50c1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGNhbkNoYW5nZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfS5iaW5kKHRoaXMpO1xuXG4gICAgLy8gUnVuIHZhbGlkYXRpb24gYWdhaW4gaW4gY2FzZSBhZmZlY3RlZCBieSBvdGhlciBpbnB1dHMuIFRoZVxuICAgIC8vIGxhc3QgY29tcG9uZW50IHZhbGlkYXRlZCB3aWxsIHJ1biB0aGUgb25WYWxpZGF0aW9uQ29tcGxldGUgY2FsbGJhY2tcbiAgICB0aGlzLmlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChjb21wb25lbnQsIGluZGV4KSB7XG4gICAgICB2YXIgdmFsaWRhdGlvbiA9IF90aGlzMy5ydW5WYWxpZGF0aW9uKGNvbXBvbmVudCk7XG4gICAgICBpZiAodmFsaWRhdGlvbi5pc1ZhbGlkICYmIGNvbXBvbmVudC5zdGF0ZS5fZXh0ZXJuYWxFcnJvcikge1xuICAgICAgICB2YWxpZGF0aW9uLmlzVmFsaWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGNvbXBvbmVudC5zZXRTdGF0ZSh7XG4gICAgICAgIF9pc1ZhbGlkOiB2YWxpZGF0aW9uLmlzVmFsaWQsXG4gICAgICAgIF9pc1JlcXVpcmVkOiB2YWxpZGF0aW9uLmlzUmVxdWlyZWQsXG4gICAgICAgIF92YWxpZGF0aW9uRXJyb3I6IHZhbGlkYXRpb24uZXJyb3IsXG4gICAgICAgIF9leHRlcm5hbEVycm9yOiAhdmFsaWRhdGlvbi5pc1ZhbGlkICYmIGNvbXBvbmVudC5zdGF0ZS5fZXh0ZXJuYWxFcnJvciA/IGNvbXBvbmVudC5zdGF0ZS5fZXh0ZXJuYWxFcnJvciA6IG51bGxcbiAgICAgIH0sIGluZGV4ID09PSBfdGhpczMuaW5wdXRzLmxlbmd0aCAtIDEgPyBvblZhbGlkYXRpb25Db21wbGV0ZSA6IG51bGwpO1xuICAgIH0pO1xuXG4gICAgLy8gSWYgdGhlcmUgYXJlIG5vIGlucHV0cywgc2V0IHN0YXRlIHdoZXJlIGZvcm0gaXMgcmVhZHkgdG8gdHJpZ2dlclxuICAgIC8vIGNoYW5nZSBldmVudC4gTmV3IGlucHV0cyBtaWdodCBiZSBhZGRlZCBsYXRlclxuICAgIGlmICghdGhpcy5pbnB1dHMubGVuZ3RoKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgY2FuQ2hhbmdlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gTWV0aG9kIHB1dCBvbiBlYWNoIGlucHV0IGNvbXBvbmVudCB0byByZWdpc3RlclxuICAvLyBpdHNlbGYgdG8gdGhlIGZvcm1cbiAgYXR0YWNoVG9Gb3JtOiBmdW5jdGlvbiBhdHRhY2hUb0Zvcm0oY29tcG9uZW50KSB7XG5cbiAgICBpZiAodGhpcy5pbnB1dHMuaW5kZXhPZihjb21wb25lbnQpID09PSAtMSkge1xuICAgICAgdGhpcy5pbnB1dHMucHVzaChjb21wb25lbnQpO1xuICAgIH1cblxuICAgIHRoaXMudmFsaWRhdGUoY29tcG9uZW50KTtcbiAgfSxcblxuICAvLyBNZXRob2QgcHV0IG9uIGVhY2ggaW5wdXQgY29tcG9uZW50IHRvIHVucmVnaXN0ZXJcbiAgLy8gaXRzZWxmIGZyb20gdGhlIGZvcm1cbiAgZGV0YWNoRnJvbUZvcm06IGZ1bmN0aW9uIGRldGFjaEZyb21Gb3JtKGNvbXBvbmVudCkge1xuICAgIHZhciBjb21wb25lbnRQb3MgPSB0aGlzLmlucHV0cy5pbmRleE9mKGNvbXBvbmVudCk7XG5cbiAgICBpZiAoY29tcG9uZW50UG9zICE9PSAtMSkge1xuICAgICAgdGhpcy5pbnB1dHMgPSB0aGlzLmlucHV0cy5zbGljZSgwLCBjb21wb25lbnRQb3MpLmNvbmNhdCh0aGlzLmlucHV0cy5zbGljZShjb21wb25lbnRQb3MgKyAxKSk7XG4gICAgfVxuXG4gICAgdGhpcy52YWxpZGF0ZUZvcm0oKTtcbiAgfSxcbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgIG1hcHBpbmcgPSBfcHJvcHMubWFwcGluZyxcbiAgICAgICAgdmFsaWRhdGlvbkVycm9ycyA9IF9wcm9wcy52YWxpZGF0aW9uRXJyb3JzLFxuICAgICAgICBvblN1Ym1pdCA9IF9wcm9wcy5vblN1Ym1pdCxcbiAgICAgICAgb25WYWxpZCA9IF9wcm9wcy5vblZhbGlkLFxuICAgICAgICBvblZhbGlkU3VibWl0ID0gX3Byb3BzLm9uVmFsaWRTdWJtaXQsXG4gICAgICAgIG9uSW52YWxpZCA9IF9wcm9wcy5vbkludmFsaWQsXG4gICAgICAgIG9uSW52YWxpZFN1Ym1pdCA9IF9wcm9wcy5vbkludmFsaWRTdWJtaXQsXG4gICAgICAgIG9uQ2hhbmdlID0gX3Byb3BzLm9uQ2hhbmdlLFxuICAgICAgICByZXNldCA9IF9wcm9wcy5yZXNldCxcbiAgICAgICAgcHJldmVudEV4dGVybmFsSW52YWxpZGF0aW9uID0gX3Byb3BzLnByZXZlbnRFeHRlcm5hbEludmFsaWRhdGlvbixcbiAgICAgICAgb25TdWNjZXNzID0gX3Byb3BzLm9uU3VjY2VzcyxcbiAgICAgICAgb25FcnJvciA9IF9wcm9wcy5vbkVycm9yLFxuICAgICAgICBub25Gb3Jtc3lQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcHJvcHMsIFsnbWFwcGluZycsICd2YWxpZGF0aW9uRXJyb3JzJywgJ29uU3VibWl0JywgJ29uVmFsaWQnLCAnb25WYWxpZFN1Ym1pdCcsICdvbkludmFsaWQnLCAnb25JbnZhbGlkU3VibWl0JywgJ29uQ2hhbmdlJywgJ3Jlc2V0JywgJ3ByZXZlbnRFeHRlcm5hbEludmFsaWRhdGlvbicsICdvblN1Y2Nlc3MnLCAnb25FcnJvciddKTtcblxuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KCdmb3JtJywgX2V4dGVuZHMoe30sIG5vbkZvcm1zeVByb3BzLCB7IG9uU3VibWl0OiB0aGlzLnN1Ym1pdCB9KSwgdGhpcy5wcm9wcy5jaGlsZHJlbik7XG4gIH1cbn0pO1xuXG5pZiAoIWdsb2JhbC5leHBvcnRzICYmICFnbG9iYWwubW9kdWxlICYmICghZ2xvYmFsLmRlZmluZSB8fCAhZ2xvYmFsLmRlZmluZS5hbWQpKSB7XG4gIGdsb2JhbC5Gb3Jtc3kgPSBGb3Jtc3k7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRm9ybXN5O1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy93ZWJwYWNrL2J1aWxkaW4vZ2xvYmFsLmpzXCIpKSlcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi91dGlscy5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX3R5cGVvZjIgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mMihvYmopO1xufSA6IGZ1bmN0aW9uIChvYmopIHtcbiAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmogPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZjIob2JqKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhcnJheXNEaWZmZXI6IGZ1bmN0aW9uIGFycmF5c0RpZmZlcihhLCBiKSB7XG4gICAgdmFyIGlzRGlmZmVyZW50ID0gZmFsc2U7XG4gICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkge1xuICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgIGlmICghdGhpcy5pc1NhbWUoaXRlbSwgYltpbmRleF0pKSB7XG4gICAgICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzKTtcbiAgICB9XG4gICAgcmV0dXJuIGlzRGlmZmVyZW50O1xuICB9LFxuXG4gIG9iamVjdHNEaWZmZXI6IGZ1bmN0aW9uIG9iamVjdHNEaWZmZXIoYSwgYikge1xuICAgIHZhciBpc0RpZmZlcmVudCA9IGZhbHNlO1xuICAgIGlmIChPYmplY3Qua2V5cyhhKS5sZW5ndGggIT09IE9iamVjdC5rZXlzKGIpLmxlbmd0aCkge1xuICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBPYmplY3Qua2V5cyhhKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU2FtZShhW2tleV0sIGJba2V5XSkpIHtcbiAgICAgICAgICBpc0RpZmZlcmVudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0sIHRoaXMpO1xuICAgIH1cbiAgICByZXR1cm4gaXNEaWZmZXJlbnQ7XG4gIH0sXG5cbiAgaXNTYW1lOiBmdW5jdGlvbiBpc1NhbWUoYSwgYikge1xuICAgIGlmICgodHlwZW9mIGEgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGEpKSAhPT0gKHR5cGVvZiBiID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihiKSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYSkgJiYgQXJyYXkuaXNBcnJheShiKSkge1xuICAgICAgcmV0dXJuICF0aGlzLmFycmF5c0RpZmZlcihhLCBiKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gYS50b1N0cmluZygpID09PSBiLnRvU3RyaW5nKCk7XG4gICAgfSBlbHNlIGlmICgodHlwZW9mIGEgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGEpKSA9PT0gJ29iamVjdCcgJiYgYSAhPT0gbnVsbCAmJiBiICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gIXRoaXMub2JqZWN0c0RpZmZlcihhLCBiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYSA9PT0gYjtcbiAgfSxcblxuICBmaW5kOiBmdW5jdGlvbiBmaW5kKGNvbGxlY3Rpb24sIGZuKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjb2xsZWN0aW9uLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIGl0ZW0gPSBjb2xsZWN0aW9uW2ldO1xuICAgICAgaWYgKGZuKGl0ZW0pKSB7XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi92YWxpZGF0aW9uUnVsZXMuanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9pc0V4aXN0eSA9IGZ1bmN0aW9uIF9pc0V4aXN0eSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZDtcbn07XG5cbnZhciBpc0VtcHR5ID0gZnVuY3Rpb24gaXNFbXB0eSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT09ICcnO1xufTtcblxudmFyIHZhbGlkYXRpb25zID0ge1xuICBpc0RlZmF1bHRSZXF1aXJlZFZhbHVlOiBmdW5jdGlvbiBpc0RlZmF1bHRSZXF1aXJlZFZhbHVlKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gJyc7XG4gIH0sXG4gIGlzRXhpc3R5OiBmdW5jdGlvbiBpc0V4aXN0eSh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIF9pc0V4aXN0eSh2YWx1ZSk7XG4gIH0sXG4gIG1hdGNoUmVnZXhwOiBmdW5jdGlvbiBtYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCByZWdleHApIHtcbiAgICByZXR1cm4gIV9pc0V4aXN0eSh2YWx1ZSkgfHwgaXNFbXB0eSh2YWx1ZSkgfHwgcmVnZXhwLnRlc3QodmFsdWUpO1xuICB9LFxuICBpc1VuZGVmaW5lZDogZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkO1xuICB9LFxuICBpc0VtcHR5U3RyaW5nOiBmdW5jdGlvbiBpc0VtcHR5U3RyaW5nKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gaXNFbXB0eSh2YWx1ZSk7XG4gIH0sXG4gIGlzRW1haWw6IGZ1bmN0aW9uIGlzRW1haWwodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXigoKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSsoXFwuKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSspKil8KChcXHgyMikoKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPygoW1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4N2ZdfFxceDIxfFtcXHgyMy1cXHg1Yl18W1xceDVkLVxceDdlXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KFxcXFwoW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBkLVxceDdmXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSkqKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPyhcXHgyMikpKUAoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkkL2kpO1xuICB9LFxuICBpc1VybDogZnVuY3Rpb24gaXNVcmwodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXihodHRwcz98cz9mdHApOlxcL1xcLygoKChbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoJVtcXGRhLWZdezJ9KXxbIVxcJCYnXFwoXFwpXFwqXFwrLDs9XXw6KSpAKT8oKChcXGR8WzEtOV1cXGR8MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC01XSlcXC4oXFxkfFsxLTldXFxkfDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNV0pXFwuKFxcZHxbMS05XVxcZHwxXFxkXFxkfDJbMC00XVxcZHwyNVswLTVdKVxcLihcXGR8WzEtOV1cXGR8MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC01XSkpfCgoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4pKygoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKVxcLj8pKDpcXGQqKT8pKFxcLygoKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCkrKFxcLygoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OnxAKSopKik/KT8oXFw/KCgoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OnxAKXxbXFx1RTAwMC1cXHVGOEZGXXxcXC98XFw/KSopPygjKCgoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OnxAKXxcXC98XFw/KSopPyQvaSk7XG4gIH0sXG4gIGlzVHJ1ZTogZnVuY3Rpb24gaXNUcnVlKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IHRydWU7XG4gIH0sXG4gIGlzRmFsc2U6IGZ1bmN0aW9uIGlzRmFsc2UodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gZmFsc2U7XG4gIH0sXG4gIGlzTnVtZXJpYzogZnVuY3Rpb24gaXNOdW1lcmljKHZhbHVlcywgdmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXlstK10/KD86XFxkKlsuXSk/XFxkKyQvKTtcbiAgfSxcbiAgaXNBbHBoYTogZnVuY3Rpb24gaXNBbHBoYSh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eW0EtWl0rJC9pKTtcbiAgfSxcbiAgaXNBbHBoYW51bWVyaWM6IGZ1bmN0aW9uIGlzQWxwaGFudW1lcmljKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL15bMC05QS1aXSskL2kpO1xuICB9LFxuICBpc0ludDogZnVuY3Rpb24gaXNJbnQodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXig/OlstK10/KD86MHxbMS05XVxcZCopKSQvKTtcbiAgfSxcbiAgaXNGbG9hdDogZnVuY3Rpb24gaXNGbG9hdCh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eKD86Wy0rXT8oPzpcXGQrKSk/KD86XFwuXFxkKik/KD86W2VFXVtcXCtcXC1dPyg/OlxcZCspKT8kLyk7XG4gIH0sXG4gIGlzV29yZHM6IGZ1bmN0aW9uIGlzV29yZHModmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXltBLVpcXHNdKyQvaSk7XG4gIH0sXG4gIGlzU3BlY2lhbFdvcmRzOiBmdW5jdGlvbiBpc1NwZWNpYWxXb3Jkcyh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eW0EtWlxcc1xcdTAwQzAtXFx1MDE3Rl0rJC9pKTtcbiAgfSxcbiAgaXNMZW5ndGg6IGZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlcywgdmFsdWUsIGxlbmd0aCkge1xuICAgIHJldHVybiAhX2lzRXhpc3R5KHZhbHVlKSB8fCBpc0VtcHR5KHZhbHVlKSB8fCB2YWx1ZS5sZW5ndGggPT09IGxlbmd0aDtcbiAgfSxcbiAgZXF1YWxzOiBmdW5jdGlvbiBlcXVhbHModmFsdWVzLCB2YWx1ZSwgZXFsKSB7XG4gICAgcmV0dXJuICFfaXNFeGlzdHkodmFsdWUpIHx8IGlzRW1wdHkodmFsdWUpIHx8IHZhbHVlID09IGVxbDtcbiAgfSxcbiAgZXF1YWxzRmllbGQ6IGZ1bmN0aW9uIGVxdWFsc0ZpZWxkKHZhbHVlcywgdmFsdWUsIGZpZWxkKSB7XG4gICAgcmV0dXJuIHZhbHVlID09IHZhbHVlc1tmaWVsZF07XG4gIH0sXG4gIG1heExlbmd0aDogZnVuY3Rpb24gbWF4TGVuZ3RoKHZhbHVlcywgdmFsdWUsIGxlbmd0aCkge1xuICAgIHJldHVybiAhX2lzRXhpc3R5KHZhbHVlKSB8fCB2YWx1ZS5sZW5ndGggPD0gbGVuZ3RoO1xuICB9LFxuICBtaW5MZW5ndGg6IGZ1bmN0aW9uIG1pbkxlbmd0aCh2YWx1ZXMsIHZhbHVlLCBsZW5ndGgpIHtcbiAgICByZXR1cm4gIV9pc0V4aXN0eSh2YWx1ZSkgfHwgaXNFbXB0eSh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoID49IGxlbmd0aDtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB2YWxpZGF0aW9ucztcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvY29tcG9uZW50cy9BdXRoL0ZpZWxkL0ZpZWxkLmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcmVhY3QvcmVhY3QuanNcIik7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX2Zvcm1zeVJlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvbWFpbi5qc1wiKTtcblxudmFyIF9mb3Jtc3lSZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9mb3Jtc3lSZWFjdCk7XG5cbnZhciBfcHJvcFR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3Byb3AtdHlwZXMvaW5kZXguanNcIik7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIEZpZWxkID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKEZpZWxkLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBGaWVsZChwcm9wcykge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGaWVsZCk7XG5cbiAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoRmllbGQuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihGaWVsZCkpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgIF90aGlzLmNoYW5nZVZhbHVlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBfdGhpcy5wcm9wcy5zZXRWYWx1ZShldmVudC5jdXJyZW50VGFyZ2V0W190aGlzLnByb3BzLnR5cGUgPT09ICdjaGVja2JveCcgPyAnY2hlY2tlZCcgOiAndmFsdWUnXSk7XG4gICAgfTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoRmllbGQsIFt7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IHRoaXMucHJvcHMuZ2V0RXJyb3JNZXNzYWdlKCk7XG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgY2xhc3NOYW1lOiAnc2lnbnVwLWZpZWxkLWdyb3VwJyB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnbGFiZWwnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGh0bWxGb3I6IHRoaXMucHJvcHMubmFtZS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiAnc2lnbnVwLWZvcm1fX2xhYmVsJyB9LFxuICAgICAgICAgIHRoaXMucHJvcHMubmFtZVxuICAgICAgICApLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgb25DaGFuZ2U6IHRoaXMuY2hhbmdlVmFsdWUsXG4gICAgICAgICAgdmFsdWU6IHRoaXMucHJvcHMuZ2V0VmFsdWUoKSxcbiAgICAgICAgICB0eXBlOiB0aGlzLnByb3BzLnR5cGUgfHwgJ3RleHQnLFxuICAgICAgICAgIG5hbWU6IHRoaXMucHJvcHMubmFtZS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgIGNsYXNzTmFtZTogJ3NpZ251cC1mb3JtX19pbnB1dC1maWVsZCcgfSksXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdwJyxcbiAgICAgICAgICB7IGNsYXNzTmFtZTogJ2NhcHRpb24gc2lnbnVwLWZvcm1fX2NhcHRpb24nIH0sXG4gICAgICAgICAgdGhpcy5wcm9wcy50ZXh0XG4gICAgICAgICksXG4gICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICB7IGNsYXNzTmFtZTogJ3NpZ251cC1mb3JtX19lcnJvci1tZXNzYWdlJyB9LFxuICAgICAgICAgIGVycm9yTWVzc2FnZVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBGaWVsZDtcbn0oX3JlYWN0Mi5kZWZhdWx0LkNvbXBvbmVudCk7XG5cbkZpZWxkLnByb3BUeXBlcyA9IHtcbiAgbmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIHRleHQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBjbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICB0eXBlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgc2V0VmFsdWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYW55LFxuICBnZXRWYWx1ZTogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICB2YWxpZGF0aW9uczogX3Byb3BUeXBlczIuZGVmYXVsdC5hbnksXG4gIGdldEVycm9yTWVzc2FnZTogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICByZWdpc3RyYXRpb246IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuY1xufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gKDAsIF9mb3Jtc3lSZWFjdC5IT0MpKEZpZWxkKTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcGFnZXMvUHJvZmlsZS9Qcm9maWxlLmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcmVhY3QvcmVhY3QuanNcIik7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX2Zvcm1zeVJlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvbWFpbi5qc1wiKTtcblxudmFyIF9mb3Jtc3lSZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9mb3Jtc3lSZWFjdCk7XG5cbnZhciBfRmllbGQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvY29tcG9uZW50cy9BdXRoL0ZpZWxkL0ZpZWxkLmpzXCIpO1xuXG52YXIgX0ZpZWxkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0ZpZWxkKTtcblxudmFyIF91c2VycyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9hY3Rpb25zL3VzZXJzLmFjdGlvbi5qc1wiKTtcblxudmFyIF9yZWR1eCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWR1eC9lcy9pbmRleC5qc1wiKTtcblxudmFyIF9NZXNzYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2NvbXBvbmVudHMvTWVzc2FnZS9NZXNzYWdlLmpzXCIpO1xuXG52YXIgX1BvcHVwID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2NvbXBvbmVudHMvUG9wdXAvUG9wdXAuanNcIik7XG5cbnZhciBfQnV0dG9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2NvbXBvbmVudHMvQnV0dG9uL0J1dHRvbi5qc1wiKTtcblxudmFyIF9yZWFjdFJlZHV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0LXJlZHV4L2VzL2luZGV4LmpzXCIpO1xuXG52YXIgX3Byb3BUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9wcm9wLXR5cGVzL2luZGV4LmpzXCIpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG5fX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvcGFnZXMvUHJvZmlsZS9Qcm9maWxlLnNjc3NcIik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb2ZpbGUgPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoUHJvZmlsZSwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gUHJvZmlsZShwcm9wcykge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm9maWxlKTtcblxuICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm9maWxlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvZmlsZSkpLmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgIF90aGlzLnNldFBvcHVwU2hvd24gPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgIHZhciBjdXJyZW50U3RhdGUgPSBfdGhpcy5zdGF0ZS5wb3B1cFNob3duO1xuXG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHBvcHVwU2hvd246ICFjdXJyZW50U3RhdGVcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfdGhpcy51cGRhdGVQcm9maWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgIG5hbWU6IF90aGlzLm5hbWUuZ2V0VmFsdWUoKSxcbiAgICAgICAgZW1haWw6IF90aGlzLmVtYWlsLmdldFZhbHVlKCksXG4gICAgICAgIHBhc3N3b3JkOiBfdGhpcy5wYXNzd29yZC5nZXRWYWx1ZSgpLFxuICAgICAgICBwYXNzd29yZFJlcGVhdDogX3RoaXMucGFzc3dvcmRSZXBlYXQuZ2V0VmFsdWUoKSxcbiAgICAgICAgYXZhdGFyOiBfdGhpcy5iYXNlNjRTdHIsXG4gICAgICAgIF9pZDogX3RoaXMucHJvcHMudXNlci5faWRcbiAgICAgIH07XG5cbiAgICAgIF90aGlzLnByb3BzLnVwZGF0ZVByb2ZpbGVSZXF1ZXN0KGRhdGEpO1xuICAgIH07XG5cbiAgICBfdGhpcy5lbmFibGVCdXR0b24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGNhblN1Ym1pdDogdHJ1ZVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF90aGlzLmRpc2FibGVCdXR0b24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGNhblN1Ym1pdDogZmFsc2VcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfdGhpcy5lZGl0TmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgYWxsb3dFZGl0TmFtZTogIV90aGlzLnN0YXRlLmFsbG93RWRpdE5hbWVcbiAgICAgIH0pO1xuICAgICAgX3RoaXMuZmllbGROYW1lLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xuICAgICAgX3RoaXMuZmllbGROYW1lLmNsYXNzTGlzdC50b2dnbGUoJ2ZsZXgtZGlzcGxheScpO1xuICAgIH07XG5cbiAgICBfdGhpcy5lZGl0RW1haWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGFsbG93RWRpdEVtYWlsOiAhX3RoaXMuc3RhdGUuYWxsb3dFZGl0RW1haWxcbiAgICAgIH0pO1xuICAgICAgX3RoaXMuZmllbGRFbWFpbC5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKTtcbiAgICAgIF90aGlzLmZpZWxkRW1haWwuY2xhc3NMaXN0LnRvZ2dsZSgnZmxleC1kaXNwbGF5Jyk7XG4gICAgfTtcblxuICAgIF90aGlzLmVkaXRQYXNzd29yZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgYWxsb3dFZGl0UGFzc3dvcmQ6ICFfdGhpcy5zdGF0ZS5hbGxvd0VkaXRQYXNzd29yZFxuICAgICAgfSk7XG4gICAgICBfdGhpcy5maWVsZFBhc3N3b3JkLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xuICAgICAgX3RoaXMuZmllbGRQYXNzd29yZC5jbGFzc0xpc3QudG9nZ2xlKCdmbGV4LWRpc3BsYXknKTtcbiAgICB9O1xuXG4gICAgX3RoaXMucmVwZWF0UGFzc3dvcmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGFsbG93UmVwZWF0UGFzc3dvcmQ6ICFfdGhpcy5zdGF0ZS5hbGxvd1JlcGVhdFBhc3N3b3JkXG4gICAgICB9KTtcbiAgICAgIF90aGlzLmZpZWxkUmVwZWF0UGFzc3dvcmQuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7XG4gICAgICBfdGhpcy5maWVsZFJlcGVhdFBhc3N3b3JkLmNsYXNzTGlzdC50b2dnbGUoJ2ZsZXgtZGlzcGxheScpO1xuICAgIH07XG5cbiAgICBfdGhpcy5lZGl0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGFsbG93RWRpdEltYWdlOiAhX3RoaXMuc3RhdGUuYWxsb3dFZGl0SW1hZ2VcbiAgICAgIH0pO1xuICAgICAgX3RoaXMuZmllbGRJbWFnZS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKTtcbiAgICAgIF90aGlzLmZpZWxkSW1hZ2UuY2xhc3NMaXN0LnRvZ2dsZSgnZmxleC1kaXNwbGF5Jyk7XG4gICAgfTtcblxuICAgIF90aGlzLmRlbGV0ZVVzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5wcm9wcy5kZWxldGVVc2VyUmVxdWVzdChfdGhpcy5wcm9wcy51c2VyKTtcbiAgICB9O1xuXG4gICAgX3RoaXMuaGFuZGxlRmlsZVNlbGVjdCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7IHVwZGF0ZUltYWdlU3RhdHVzOiAnTG9hZGluZy4uLicgfSk7XG4gICAgICB2YXIgZmlsZXMgPSBlLmRhdGFUcmFuc2Zlci5maWxlcztcblxuICAgICAgaWYgKGZpbGVzKSB7XG4gICAgICAgIHZhciBmaWxlID0gZmlsZXNbMF07XG5cbiAgICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgICB2YXIgbWF4RmlsZVNpemUgPSAxMDI0ICogMTAyNDtcblxuICAgICAgICAgIGlmIChmaWxlLnNpemUgPiBtYXhGaWxlU2l6ZSkge1xuICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyB1cGRhdGVJbWFnZVN0YXR1czogJ0V4Y2VlZGluZyAxTUIgbGltaXQnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXG4gICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChyZWFkZXJFdmVudCkge1xuICAgICAgICAgICAgdmFyIGJpbmFyeVN0cmluZyA9IHJlYWRlckV2ZW50LnRhcmdldC5yZXN1bHQ7XG5cbiAgICAgICAgICAgIF90aGlzLmJhc2U2NFN0ciA9ICdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LCcgKyBidG9hKGJpbmFyeVN0cmluZyk7XG4gICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGltYWdlQmFzZTY0OiBfdGhpcy5iYXNlNjRTdHIsIHVwZGF0ZUltYWdlU3RhdHVzOiAnJyB9KTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgcmVhZGVyLnJlYWRBc0JpbmFyeVN0cmluZyhmaWxlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBfdGhpcy5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9O1xuXG4gICAgX3RoaXMucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIGRyYWdvdmVyRm9yQm9keSA9IGUgfHwgZXZlbnQ7XG5cbiAgICAgICAgZHJhZ292ZXJGb3JCb2R5LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9LCBmYWxzZSk7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBkcm9wRm9yQm9keSA9IGUgfHwgZXZlbnQ7XG5cbiAgICAgICAgZHJvcEZvckJvZHkucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyBjbGFzc05hbWU6ICdwcm9maWxlLWNvbnRhaW5lcicgfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX01lc3NhZ2UuTWVzc2FnZSwge1xuICAgICAgICAgIGNsZWFyU3RhdHVzOiBfdGhpcy5wcm9wcy5jbGVhclN0YXR1cyxcbiAgICAgICAgICBzdGF0dXM6IF90aGlzLnByb3BzLnVwZGF0ZVByb2ZpbGVTdGF0dXMsXG4gICAgICAgICAgdGV4dDogX3RoaXMucHJvcHMuZXJyb3JUZXh0LFxuICAgICAgICAgIGhlYWRlcjogJ0Vycm9yJyB9KSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgX2Zvcm1zeVJlYWN0Mi5kZWZhdWx0LkZvcm0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgb25TdWJtaXQ6IF90aGlzLnVwZGF0ZVByb2ZpbGUsXG4gICAgICAgICAgICBvblZhbGlkOiBfdGhpcy5lbmFibGVCdXR0b24sXG4gICAgICAgICAgICBvbkludmFsaWQ6IF90aGlzLmRpc2FibGVCdXR0b24sXG4gICAgICAgICAgICBjbGFzc05hbWU6ICdzaWdudXAtZm9ybSBlZGl0JyB9LFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2ZpbGUtaGVhZGVyJyB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2ZpbGUtaGVhZGVyX191c2VyLWltYWdlLWJveCcgfSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwcm9maWxlLWhlYWRlcl9fdXNlci1pbWFnZS1lZGl0JyB9LFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogX3RoaXMucHJvcHMudXNlci5hdmF0YXIgPyAndmlzaWJsZScgOiAnaGlkZGVuJyB9LFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2ltZycsIHsgY2xhc3NOYW1lOiAncHJvZmlsZS1oZWFkZXJfX3VzZXItaW1hZ2UnLFxuICAgICAgICAgICAgICAgICAgICBzcmM6IF90aGlzLnByb3BzLnVzZXIuYXZhdGFyIH0pXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IF90aGlzLnByb3BzLnVzZXIuYXZhdGFyID8gJ2hpZGRlbicgOiAndmlzaWJsZScgfSxcbiAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpJywgeyBjbGFzc05hbWU6ICdmYSBmYS11c2VyLWNpcmNsZS1vIHBob3RvJyB9KVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2knLCB7IGNsYXNzTmFtZTogJ2ZhIGZhLXBlbmNpbCBlZGl0LXVzZXItaW5mbyBlZGl0LWltYWdlJyxcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IF90aGlzLmVkaXRJbWFnZSB9KSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdoaWRkZW4nLFxuICAgICAgICAgICAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihlbCkge1xuICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmZpZWxkSW1hZ2UgPSBlbDtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb25Ecm9wOiBfdGhpcy5oYW5kbGVGaWxlU2VsZWN0LFxuICAgICAgICAgICAgICAgICAgICBvbkRyYWdPdmVyOiBfdGhpcy5wcmV2ZW50RGVmYXVsdCB9LFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogX3RoaXMuc3RhdGUudXBkYXRlSW1hZ2VTdGF0dXMgIT09ICcnID8gJ3Byb2ZpbGUtaGVhZGVyX191c2VyLWRyb3AtYXJpYScgOiAncHJvZmlsZS1oZWFkZXJfX3VzZXItZHJvcC1pbWFnZSBoaWRkZW4nIH0sXG4gICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3RhdGUudXBkYXRlSW1hZ2VTdGF0dXNcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2ltZycsIHsgY2xhc3NOYW1lOiBfdGhpcy5zdGF0ZS51cGRhdGVJbWFnZVN0YXR1cyAhPT0gJycgPyAncHJvZmlsZS1oZWFkZXJfX3VzZXItaW1hZ2UgaGlkZGVuJyA6ICdwcm9maWxlLWhlYWRlcl9fdXNlci1pbWFnZScsXG4gICAgICAgICAgICAgICAgICAgICAgc3JjOiBfdGhpcy5zdGF0ZS5pbWFnZUJhc2U2NCB9KVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdwcm9maWxlLWhlYWRlcl9fdXNlci1uYW1lJyB9LFxuICAgICAgICAgICAgICAgIF90aGlzLnByb3BzLnVzZXIubmFtZVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdzZWN0aW9uJyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZWRpdC1wcm9maWxlX191c2VyLWluZm8nIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZWRpdC1wcm9maWxlLW5hbWUnIH0sXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZWRpdC1wcm9maWxlX191c2VyLW5hbWUtY29udGFpbmVyJyB9LFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3VzZXItbmFtZV9fYm94JyB9LFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICd1c2VyLW5hbWVfX3RpdGxlJyB9LFxuICAgICAgICAgICAgICAgICAgICAnTmFtZSdcbiAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3VzZXItbmFtZV9fbG9nZ2VkLW5hbWUnIH0sXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByb3BzLnVzZXIubmFtZVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZWRpdC11c2VyLWluZm9fX2ljb24nIH0sXG4gICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaScsIHsgY2xhc3NOYW1lOiAnZmEgZmEtcGVuY2lsIGVkaXQtdXNlci1pbmZvJyxcbiAgICAgICAgICAgICAgICAgICAgb25DbGljazogX3RoaXMuZWRpdE5hbWUgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2hpZGRlbicsXG4gICAgICAgICAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihlbCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5maWVsZE5hbWUgPSBlbDtcbiAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfRmllbGQyLmRlZmF1bHQsIHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6ICcgJyxcbiAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgICAgICAgIHRleHQ6ICdFbnRlciB5b3VyIG5ldyBuYW1lJyxcbiAgICAgICAgICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKGlucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLm5hbWUgPSBpbnB1dDtcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB2YWx1ZTogX3RoaXMucHJvcHMudXNlci5uYW1lLFxuICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbnM6ICdpc0FscGhhJyxcbiAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcjogJ1RoaXMgaXMgbm90IGEgdmFsaWQgbmFtZScsXG4gICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZWRpdC1wcm9maWxlLWVtYWlsJyB9LFxuICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2VkaXQtcHJvZmlsZV9fdXNlci1lbWFpbC1jb250YWluZXInIH0sXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAndXNlci1lbWFpbF9fYm94JyB9LFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICd1c2VyLWVtYWlsX190aXRsZScgfSxcbiAgICAgICAgICAgICAgICAgICAgJ0VtYWlsJ1xuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAndXNlci1lbWFpbF9fbG9nZ2VkLWVtYWlsJyB9LFxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9wcy51c2VyLmVtYWlsXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdlZGl0LXVzZXItaW5mb19faWNvbicgfSxcbiAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpJywgeyBjbGFzc05hbWU6ICdmYSBmYS1wZW5jaWwgZWRpdC11c2VyLWluZm8nLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBfdGhpcy5lZGl0RW1haWwgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2hpZGRlbicsXG4gICAgICAgICAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihlbCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5maWVsZEVtYWlsID0gZWw7XG4gICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0ZpZWxkMi5kZWZhdWx0LCB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiAnICcsXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdoaWRkZW4nLFxuICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgICAgICAgdGV4dDogJ0VudGVyIHlvdXIgbmV3IGUtbWFpbCcsXG4gICAgICAgICAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihpbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbWFpbCA9IGlucHV0O1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBfdGhpcy5wcm9wcy51c2VyLmVtYWlsLFxuICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbnM6ICdpc0VtYWlsJyxcbiAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcjogJ1RoaXMgaXMgbm90IGEgdmFsaWQgZW1haWwnLFxuICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdzZWN0aW9uJyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZWRpdC1wcm9maWxlX191c2VyLWluZm8tcGFzc3dvcmQnIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZWRpdC1wcm9maWxlLXBhc3N3b3JkJyB9LFxuICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2VkaXQtcHJvZmlsZV9fdXNlci1wYXNzd29yZC1jb250YWluZXInIH0sXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAndXNlci1wYXNzd29yZF9fYm94JyB9LFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICd1c2VyLXBhc3N3b3JkX190aXRsZScgfSxcbiAgICAgICAgICAgICAgICAgICAgJ1Bhc3N3b3JkJ1xuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAndXNlci1wYXNzd29yZF9fbG9nZ2VkLXBhc3N3b3JkJyB9LFxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9wcy51c2VyLnBhc3N3b3JkXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdlZGl0LXVzZXItaW5mb19faWNvbicgfSxcbiAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpJywgeyBjbGFzc05hbWU6ICdmYSBmYS1wZW5jaWwgZWRpdC11c2VyLWluZm8gZmEtcGFzc3dvcmQnLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBfdGhpcy5lZGl0UGFzc3dvcmQgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2hpZGRlbicsXG4gICAgICAgICAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihlbCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5maWVsZFBhc3N3b3JkID0gZWw7XG4gICAgICAgICAgICAgICAgICB9IH0sXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0ZpZWxkMi5kZWZhdWx0LCB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiAnUGFzc3dvcmQnLFxuICAgICAgICAgICAgICAgICAgdHlwZTogJ3Bhc3N3b3JkJyxcbiAgICAgICAgICAgICAgICAgIHRleHQ6ICdFbnRlciB5b3VyIG5ldyBwYXNzd29yZCcsXG4gICAgICAgICAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihpbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYXNzd29yZCA9IGlucHV0O1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIG1pbkxlbmd0aDogNyxcbiAgICAgICAgICAgICAgICAgICAgaXNBbHBoYW51bWVyaWM6IHRydWVcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3I6ICdUaGlzIGlzIG5vdCBhIHZhbGlkIHBhc3N3b3JkJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZWRpdC1wcm9maWxlLXJlcGVhdC1wYXNzd29yZCcgfSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdlZGl0LXByb2ZpbGVfX3VzZXItcmVwZWF0LXBhc3N3b3JkLWNvbnRhaW5lcicgfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICd1c2VyLXJlcGVhdC1wYXNzd29yZF9fYm94JyB9LFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdwJyxcbiAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICd1c2VyLXJlcGVhdC1wYXNzd29yZF9fdGl0bGUnIH0sXG4gICAgICAgICAgICAgICAgICAgICdSZXBlYXQgUGFzc3dvcmQnXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICd1c2VyLXJlcGVhdC1wYXNzd29yZF9fbG9nZ2VkLXBhc3N3b3JkJyB9LFxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9wcy51c2VyLnBhc3N3b3JkUmVwZWF0XG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdlZGl0LXVzZXItaW5mb19faWNvbicgfSxcbiAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpJywgeyBjbGFzc05hbWU6ICdmYSBmYS1wZW5jaWwgZWRpdC11c2VyLWluZm8gZmEtcGFzc3dvcmQnLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBfdGhpcy5yZXBlYXRQYXNzd29yZCB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnaGlkZGVuJyxcbiAgICAgICAgICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmZpZWxkUmVwZWF0UGFzc3dvcmQgPSBlbDtcbiAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfRmllbGQyLmRlZmF1bHQsIHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6ICdSZXBlYXQgUGFzc3dvcmQnLFxuICAgICAgICAgICAgICAgICAgdHlwZTogJ3Bhc3N3b3JkJyxcbiAgICAgICAgICAgICAgICAgIHRleHQ6ICdQbGVhc2UgcmVwZWF0IHlvdXIgcGFzc3dvcmQnLFxuICAgICAgICAgICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYoaW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucGFzc3dvcmRSZXBlYXQgPSBpbnB1dDtcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uczogJ2VxdWFsc0ZpZWxkOlBhc3N3b3JkJyxcbiAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcjogJ1Bhc3N3b3JkIGRvZXMgbm90IG1hdGNoJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3NpZ251cC1maWVsZC1ncm91cCBzaWdudXAtYnRuLWdyb3VwIGVkaXQnIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdWJtaXQnLFxuICAgICAgICAgICAgICBkaXNhYmxlZDogIV90aGlzLnN0YXRlLmNhblN1Ym1pdCxcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYnRuIGJ0bi0tc2lnbnVwIGJ0bi0tc2lnbnVwLWFjdGl2ZSBlZGl0JyxcbiAgICAgICAgICAgICAgdmFsdWU6ICdTdWJtaXQnIH0pLFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2RlbGV0ZS11c2VyLXByb2ZpbGVfX2ljb24nIH0sXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpJywgeyBjbGFzc05hbWU6ICdmYSBmYS10cmFzaCcsXG4gICAgICAgICAgICAgICAgb25DbGljazogX3RoaXMuc2V0UG9wdXBTaG93biB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgKSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgX1BvcHVwLlBvcHVwLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNldFBvcHVwU2hvd246IF90aGlzLnNldFBvcHVwU2hvd24sXG4gICAgICAgICAgICBwb3B1cFNob3duOiBfdGhpcy5zdGF0ZS5wb3B1cFNob3duLFxuICAgICAgICAgICAgaGVhZGVyOiAnQ29uZmlybSB0aGUgYWN0aW9uJyxcbiAgICAgICAgICAgIHRleHQ6ICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHlvdXIgYWNjb3VudD8nIH0sXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0J1dHRvbi5CdXR0b24sIHtcbiAgICAgICAgICAgIHNldFBvcHVwU2hvd246IF90aGlzLnNldFBvcHVwU2hvd24sXG4gICAgICAgICAgICBva0hhbmRsZXI6IGZ1bmN0aW9uIG9rSGFuZGxlcigpIHtcbiAgICAgICAgICAgICAgX3RoaXMuZGVsZXRlVXNlcigpO1xuICAgICAgICAgICAgICBfdGhpcy5zZXRQb3B1cFNob3duKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xhc3NOYW1lOiAnYnRuIHBvcHVwX19idG4nLFxuICAgICAgICAgICAgaW5uZXJUZXh0OiAnT2snXG4gICAgICAgICAgfSksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0J1dHRvbi5CdXR0b24sIHtcbiAgICAgICAgICAgIG9rSGFuZGxlcjogZnVuY3Rpb24gb2tIYW5kbGVyKCkge1xuICAgICAgICAgICAgICBfdGhpcy5zZXRQb3B1cFNob3duKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xhc3NOYW1lOiAnYnRuIGJ0bi0tZGVmYXVsdCBwb3B1cF9fYnRuJyxcbiAgICAgICAgICAgIGlubmVyVGV4dDogJ0NhbmNlbCdcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICApO1xuICAgIH07XG5cbiAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGNhblN1Ym1pdDogZmFsc2UsXG4gICAgICBhbGxvd0VkaXROYW1lOiBmYWxzZSxcbiAgICAgIGFsbG93RWRpdEVtYWlsOiBmYWxzZSxcbiAgICAgIGFsbG93RWRpdEltYWdlOiBmYWxzZSxcbiAgICAgIGFsbG93RWRpdFBhc3N3b3JkOiBmYWxzZSxcbiAgICAgIGFsbG93UmVwZWF0UGFzc3dvcmQ6IGZhbHNlLFxuICAgICAgdXBkYXRlSW1hZ2VTdGF0dXM6ICdEcm9wIHlvdXIgcGhvdG8nLFxuICAgICAgaW1hZ2VCYXNlNjQ6IG51bGxcbiAgICB9O1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhQcm9maWxlLCBbe1xuICAgIGtleTogJ2NvbXBvbmVudERpZFVwZGF0ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy5wcm9wcy51cGRhdGVQcm9maWxlU3RhdHVzID09PSAnRE9ORScpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXMyLnByb3BzLmhpc3RvcnkucHVzaCgnLycpO1xuICAgICAgICB9LCAxMDAwKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnByb3BzLmRlbGV0ZVByb2ZpbGVTdGF0dXMgPT09ICdET05FJykge1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczIucHJvcHMuaGlzdG9yeS5wdXNoKCcvYXV0aCcpO1xuICAgICAgICB9LCAxMDAwKTtcbiAgICAgIH1cbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUHJvZmlsZTtcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbmZ1bmN0aW9uIG1hcFN0YXRlVG9Qcm9wcyhzdG9yZSkge1xuICByZXR1cm4ge1xuICAgIHVwZGF0ZVByb2ZpbGVTdGF0dXM6IHN0b3JlLnVzZXJzLnVwZGF0ZVByb2ZpbGVTdGF0dXMsXG4gICAgZGVsZXRlUHJvZmlsZVN0YXR1czogc3RvcmUudXNlcnMuZGVsZXRlUHJvZmlsZVN0YXR1cyxcbiAgICBlcnJvclRleHQ6IHN0b3JlLnVzZXJzLnVzZXIuZXJyb3JUZXh0LFxuICAgIHVzZXI6IHN0b3JlLnVzZXJzLnVzZXJcbiAgfTtcbn1cbmZ1bmN0aW9uIG1hcERpc3BhdGNoVG9Qcm9wcyhkaXNwYXRjaCkge1xuICByZXR1cm4ge1xuICAgIHVwZGF0ZVByb2ZpbGVSZXF1ZXN0OiAoMCwgX3JlZHV4LmJpbmRBY3Rpb25DcmVhdG9ycykoX3VzZXJzLnVwZGF0ZVByb2ZpbGVSZXF1ZXN0LCBkaXNwYXRjaCksXG4gICAgZGVsZXRlVXNlclJlcXVlc3Q6ICgwLCBfcmVkdXguYmluZEFjdGlvbkNyZWF0b3JzKShfdXNlcnMuZGVsZXRlVXNlclJlcXVlc3QsIGRpc3BhdGNoKSxcbiAgICBjbGVhclN0YXR1czogKDAsIF9yZWR1eC5iaW5kQWN0aW9uQ3JlYXRvcnMpKF91c2Vycy5jbGVhclVwZGF0ZVByb2ZpbGVTdGF0dXMsIGRpc3BhdGNoKVxuICB9O1xufVxuXG5leHBvcnRzLmRlZmF1bHQgPSAoMCwgX3JlYWN0UmVkdXguY29ubmVjdCkobWFwU3RhdGVUb1Byb3BzLCBtYXBEaXNwYXRjaFRvUHJvcHMpKFByb2ZpbGUpO1xuXG5cblByb2ZpbGUucHJvcFR5cGVzID0ge1xuICB1cGRhdGVQcm9maWxlU3RhdHVzOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgdXBkYXRlUHJvZmlsZVJlcXVlc3Q6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgZGVsZXRlVXNlclJlcXVlc3Q6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgZGVsZXRlUHJvZmlsZVN0YXR1czogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIHVzZXI6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBlbWFpbDogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIHBhc3N3b3JkOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgcGFzc3dvcmRSZXBlYXQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBlcnJvclRleHQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICB2YWx1ZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIGhpc3Rvcnk6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBjbGVhclN0YXR1czogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jXG59O1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9wYWdlcy9Qcm9maWxlL1Byb2ZpbGUuc2Nzc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG4vKioqLyB9KVxuXG59KTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gNi5pbmRleF9idW5kbGUuanMiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIGZhY3RvcnkgPSByZXF1aXJlKCcuL2ZhY3RvcnknKTtcblxuaWYgKHR5cGVvZiBSZWFjdCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgdGhyb3cgRXJyb3IoXG4gICAgJ2NyZWF0ZS1yZWFjdC1jbGFzcyBjb3VsZCBub3QgZmluZCB0aGUgUmVhY3Qgb2JqZWN0LiBJZiB5b3UgYXJlIHVzaW5nIHNjcmlwdCB0YWdzLCAnICtcbiAgICAgICdtYWtlIHN1cmUgdGhhdCBSZWFjdCBpcyBiZWluZyBsb2FkZWQgYmVmb3JlIGNyZWF0ZS1yZWFjdC1jbGFzcy4nXG4gICk7XG59XG5cbi8vIEhhY2sgdG8gZ3JhYiBOb29wVXBkYXRlUXVldWUgZnJvbSBpc29tb3JwaGljIFJlYWN0XG52YXIgUmVhY3ROb29wVXBkYXRlUXVldWUgPSBuZXcgUmVhY3QuQ29tcG9uZW50KCkudXBkYXRlcjtcblxubW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KFxuICBSZWFjdC5Db21wb25lbnQsXG4gIFJlYWN0LmlzVmFsaWRFbGVtZW50LFxuICBSZWFjdE5vb3BVcGRhdGVRdWV1ZVxuKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vY3JlYXRlLXJlYWN0LWNsYXNzL2luZGV4LmpzIiwiZnVuY3Rpb24gdG9PYmooc291cmNlKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhzb3VyY2UpLnJlZHVjZShmdW5jdGlvbiAob3V0cHV0LCBrZXkpIHtcbiAgICB2YXIgcGFyZW50S2V5ID0ga2V5Lm1hdGNoKC9bXlxcW10qL2kpO1xuICAgIHZhciBwYXRocyA9IGtleS5tYXRjaCgvXFxbLio/XFxdL2cpIHx8IFtdO1xuICAgIHBhdGhzID0gW3BhcmVudEtleVswXV0uY29uY2F0KHBhdGhzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuIGtleS5yZXBsYWNlKC9cXFt8XFxdL2csICcnKTtcbiAgICB9KTtcbiAgICB2YXIgY3VycmVudFBhdGggPSBvdXRwdXQ7XG4gICAgd2hpbGUgKHBhdGhzLmxlbmd0aCkge1xuICAgICAgdmFyIHBhdGhLZXkgPSBwYXRocy5zaGlmdCgpO1xuXG4gICAgICBpZiAocGF0aEtleSBpbiBjdXJyZW50UGF0aCkge1xuICAgICAgICBjdXJyZW50UGF0aCA9IGN1cnJlbnRQYXRoW3BhdGhLZXldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudFBhdGhbcGF0aEtleV0gPSBwYXRocy5sZW5ndGggPyBpc05hTihwYXRoc1swXSkgPyB7fSA6IFtdIDogc291cmNlW2tleV07XG4gICAgICAgIGN1cnJlbnRQYXRoID0gY3VycmVudFBhdGhbcGF0aEtleV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfSwge30pO1xufVxuXG5mdW5jdGlvbiBmcm9tT2JqKG9iaikge1xuICBmdW5jdGlvbiByZWN1cihuZXdPYmosIHByb3BOYW1lLCBjdXJyVmFsKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY3VyclZhbCkgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGN1cnJWYWwpID09PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgICAgT2JqZWN0LmtleXMoY3VyclZhbCkuZm9yRWFjaChmdW5jdGlvbih2KSB7XG4gICAgICAgIHJlY3VyKG5ld09iaiwgcHJvcE5hbWUgKyBcIltcIiArIHYgKyBcIl1cIiwgY3VyclZhbFt2XSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBuZXdPYmo7XG4gICAgfVxuXG4gICAgbmV3T2JqW3Byb3BOYW1lXSA9IGN1cnJWYWw7XG4gICAgcmV0dXJuIG5ld09iajtcbiAgfVxuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcbiAgcmV0dXJuIGtleXMucmVkdWNlKGZ1bmN0aW9uKG5ld09iaiwgcHJvcE5hbWUpIHtcbiAgICByZXR1cm4gcmVjdXIobmV3T2JqLCBwcm9wTmFtZSwgb2JqW3Byb3BOYW1lXSk7XG4gIH0sIHt9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGZyb21PYmo6IGZyb21PYmosXG4gIHRvT2JqOiB0b09ialxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vZm9ybS1kYXRhLXRvLW9iamVjdC9pbmRleC5qcyIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIFJlYWN0ID0gZ2xvYmFsLlJlYWN0IHx8IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgY3JlYXRlUmVhY3RDbGFzcyA9IHJlcXVpcmUoJ2NyZWF0ZS1yZWFjdC1jbGFzcycpO1xudmFyIE1peGluID0gcmVxdWlyZSgnLi9NaXhpbi5qcycpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gICAgcmV0dXJuIGNyZWF0ZVJlYWN0Q2xhc3Moe1xuICAgICAgbWl4aW5zOiBbTWl4aW5dLFxuICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KENvbXBvbmVudCwgX2V4dGVuZHMoe1xuICAgICAgICAgIHNldFZhbGlkYXRpb25zOiB0aGlzLnNldFZhbGlkYXRpb25zLFxuICAgICAgICAgIHNldFZhbHVlOiB0aGlzLnNldFZhbHVlLFxuICAgICAgICAgIHJlc2V0VmFsdWU6IHRoaXMucmVzZXRWYWx1ZSxcbiAgICAgICAgICBnZXRWYWx1ZTogdGhpcy5nZXRWYWx1ZSxcbiAgICAgICAgICBoYXNWYWx1ZTogdGhpcy5oYXNWYWx1ZSxcbiAgICAgICAgICBnZXRFcnJvck1lc3NhZ2U6IHRoaXMuZ2V0RXJyb3JNZXNzYWdlLFxuICAgICAgICAgIGdldEVycm9yTWVzc2FnZXM6IHRoaXMuZ2V0RXJyb3JNZXNzYWdlcyxcbiAgICAgICAgICBpc0Zvcm1EaXNhYmxlZDogdGhpcy5pc0Zvcm1EaXNhYmxlZCxcbiAgICAgICAgICBpc1ZhbGlkOiB0aGlzLmlzVmFsaWQsXG4gICAgICAgICAgaXNQcmlzdGluZTogdGhpcy5pc1ByaXN0aW5lLFxuICAgICAgICAgIGlzRm9ybVN1Ym1pdHRlZDogdGhpcy5pc0Zvcm1TdWJtaXR0ZWQsXG4gICAgICAgICAgaXNSZXF1aXJlZDogdGhpcy5pc1JlcXVpcmVkLFxuICAgICAgICAgIHNob3dSZXF1aXJlZDogdGhpcy5zaG93UmVxdWlyZWQsXG4gICAgICAgICAgc2hvd0Vycm9yOiB0aGlzLnNob3dFcnJvcixcbiAgICAgICAgICBpc1ZhbGlkVmFsdWU6IHRoaXMuaXNWYWxpZFZhbHVlXG4gICAgICAgIH0sIHRoaXMucHJvcHMpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9mb3Jtc3ktcmVhY3QvbGliL0RlY29yYXRvci5qcyIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIFJlYWN0ID0gZ2xvYmFsLlJlYWN0IHx8IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgY3JlYXRlUmVhY3RDbGFzcyA9IHJlcXVpcmUoJ2NyZWF0ZS1yZWFjdC1jbGFzcycpO1xudmFyIE1peGluID0gcmVxdWlyZSgnLi9NaXhpbi5qcycpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gIHJldHVybiBjcmVhdGVSZWFjdENsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogJ0Zvcm1zeSgnICsgZ2V0RGlzcGxheU5hbWUoQ29tcG9uZW50KSArICcpJyxcbiAgICBtaXhpbnM6IFtNaXhpbl0sXG5cbiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBpbm5lclJlZiA9IHRoaXMucHJvcHMuaW5uZXJSZWY7XG5cbiAgICAgIHZhciBwcm9wc0ZvckVsZW1lbnQgPSBfZXh0ZW5kcyh7XG4gICAgICAgIHNldFZhbGlkYXRpb25zOiB0aGlzLnNldFZhbGlkYXRpb25zLFxuICAgICAgICBzZXRWYWx1ZTogdGhpcy5zZXRWYWx1ZSxcbiAgICAgICAgcmVzZXRWYWx1ZTogdGhpcy5yZXNldFZhbHVlLFxuICAgICAgICBnZXRWYWx1ZTogdGhpcy5nZXRWYWx1ZSxcbiAgICAgICAgaGFzVmFsdWU6IHRoaXMuaGFzVmFsdWUsXG4gICAgICAgIGdldEVycm9yTWVzc2FnZTogdGhpcy5nZXRFcnJvck1lc3NhZ2UsXG4gICAgICAgIGdldEVycm9yTWVzc2FnZXM6IHRoaXMuZ2V0RXJyb3JNZXNzYWdlcyxcbiAgICAgICAgaXNGb3JtRGlzYWJsZWQ6IHRoaXMuaXNGb3JtRGlzYWJsZWQsXG4gICAgICAgIGlzVmFsaWQ6IHRoaXMuaXNWYWxpZCxcbiAgICAgICAgaXNQcmlzdGluZTogdGhpcy5pc1ByaXN0aW5lLFxuICAgICAgICBpc0Zvcm1TdWJtaXR0ZWQ6IHRoaXMuaXNGb3JtU3VibWl0dGVkLFxuICAgICAgICBpc1JlcXVpcmVkOiB0aGlzLmlzUmVxdWlyZWQsXG4gICAgICAgIHNob3dSZXF1aXJlZDogdGhpcy5zaG93UmVxdWlyZWQsXG4gICAgICAgIHNob3dFcnJvcjogdGhpcy5zaG93RXJyb3IsXG4gICAgICAgIGlzVmFsaWRWYWx1ZTogdGhpcy5pc1ZhbGlkVmFsdWVcbiAgICAgIH0sIHRoaXMucHJvcHMpO1xuXG4gICAgICBpZiAoaW5uZXJSZWYpIHtcbiAgICAgICAgcHJvcHNGb3JFbGVtZW50LnJlZiA9IGlubmVyUmVmO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29tcG9uZW50LCBwcm9wc0ZvckVsZW1lbnQpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5mdW5jdGlvbiBnZXREaXNwbGF5TmFtZShDb21wb25lbnQpIHtcbiAgcmV0dXJuIENvbXBvbmVudC5kaXNwbGF5TmFtZSB8fCBDb21wb25lbnQubmFtZSB8fCAodHlwZW9mIENvbXBvbmVudCA9PT0gJ3N0cmluZycgPyBDb21wb25lbnQgOiAnQ29tcG9uZW50Jyk7XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9mb3Jtc3ktcmVhY3QvbGliL0hPQy5qcyIsIid1c2Ugc3RyaWN0JztcblxudmFyIFByb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMuanMnKTtcbnZhciBSZWFjdCA9IGdsb2JhbC5SZWFjdCB8fCByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgY29udmVydFZhbGlkYXRpb25zVG9PYmplY3QgPSBmdW5jdGlvbiBjb252ZXJ0VmFsaWRhdGlvbnNUb09iamVjdCh2YWxpZGF0aW9ucykge1xuXG4gIGlmICh0eXBlb2YgdmFsaWRhdGlvbnMgPT09ICdzdHJpbmcnKSB7XG5cbiAgICByZXR1cm4gdmFsaWRhdGlvbnMuc3BsaXQoL1xcLCg/IVtee1xcW10qW31cXF1dKS9nKS5yZWR1Y2UoZnVuY3Rpb24gKHZhbGlkYXRpb25zLCB2YWxpZGF0aW9uKSB7XG4gICAgICB2YXIgYXJncyA9IHZhbGlkYXRpb24uc3BsaXQoJzonKTtcbiAgICAgIHZhciB2YWxpZGF0ZU1ldGhvZCA9IGFyZ3Muc2hpZnQoKTtcblxuICAgICAgYXJncyA9IGFyZ3MubWFwKGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShhcmcpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgcmV0dXJuIGFyZzsgLy8gSXQgaXMgYSBzdHJpbmcgaWYgaXQgY2FuIG5vdCBwYXJzZSBpdFxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gMSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm1zeSBkb2VzIG5vdCBzdXBwb3J0IG11bHRpcGxlIGFyZ3Mgb24gc3RyaW5nIHZhbGlkYXRpb25zLiBVc2Ugb2JqZWN0IGZvcm1hdCBvZiB2YWxpZGF0aW9ucyBpbnN0ZWFkLicpO1xuICAgICAgfVxuXG4gICAgICB2YWxpZGF0aW9uc1t2YWxpZGF0ZU1ldGhvZF0gPSBhcmdzLmxlbmd0aCA/IGFyZ3NbMF0gOiB0cnVlO1xuICAgICAgcmV0dXJuIHZhbGlkYXRpb25zO1xuICAgIH0sIHt9KTtcbiAgfVxuXG4gIHJldHVybiB2YWxpZGF0aW9ucyB8fCB7fTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgX3ZhbHVlOiB0aGlzLnByb3BzLnZhbHVlLFxuICAgICAgX2lzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgX2lzVmFsaWQ6IHRydWUsXG4gICAgICBfaXNQcmlzdGluZTogdHJ1ZSxcbiAgICAgIF9wcmlzdGluZVZhbHVlOiB0aGlzLnByb3BzLnZhbHVlLFxuICAgICAgX3ZhbGlkYXRpb25FcnJvcjogW10sXG4gICAgICBfZXh0ZXJuYWxFcnJvcjogbnVsbCxcbiAgICAgIF9mb3JtU3VibWl0dGVkOiBmYWxzZVxuICAgIH07XG4gIH0sXG4gIGNvbnRleHRUeXBlczoge1xuICAgIGZvcm1zeTogUHJvcFR5cGVzLm9iamVjdCAvLyBXaGF0IGFib3V0IHJlcXVpcmVkP1xuICB9LFxuICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsaWRhdGlvbkVycm9yOiAnJyxcbiAgICAgIHZhbGlkYXRpb25FcnJvcnM6IHt9XG4gICAgfTtcbiAgfSxcblxuICBjb21wb25lbnRXaWxsTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICB2YXIgY29uZmlndXJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5zZXRWYWxpZGF0aW9ucyh0aGlzLnByb3BzLnZhbGlkYXRpb25zLCB0aGlzLnByb3BzLnJlcXVpcmVkKTtcblxuICAgICAgLy8gUGFzcyBhIGZ1bmN0aW9uIGluc3RlYWQ/XG4gICAgICB0aGlzLmNvbnRleHQuZm9ybXN5LmF0dGFjaFRvRm9ybSh0aGlzKTtcbiAgICAgIC8vdGhpcy5wcm9wcy5fYXR0YWNoVG9Gb3JtKHRoaXMpO1xuICAgIH0uYmluZCh0aGlzKTtcblxuICAgIGlmICghdGhpcy5wcm9wcy5uYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm0gSW5wdXQgcmVxdWlyZXMgYSBuYW1lIHByb3BlcnR5IHdoZW4gdXNlZCcpO1xuICAgIH1cblxuICAgIC8qXG4gICAgaWYgKCF0aGlzLnByb3BzLl9hdHRhY2hUb0Zvcm0pIHtcbiAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzTW91bnRlZCgpKSByZXR1cm47XG4gICAgICAgIGlmICghdGhpcy5wcm9wcy5fYXR0YWNoVG9Gb3JtKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3JtIE1peGluIHJlcXVpcmVzIGNvbXBvbmVudCB0byBiZSBuZXN0ZWQgaW4gYSBGb3JtJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uZmlndXJlKCk7XG4gICAgICB9LmJpbmQodGhpcyksIDApO1xuICAgIH1cbiAgICAqL1xuICAgIGNvbmZpZ3VyZSgpO1xuICB9LFxuXG4gIC8vIFdlIGhhdmUgdG8gbWFrZSB0aGUgdmFsaWRhdGUgbWV0aG9kIGlzIGtlcHQgd2hlbiBuZXcgcHJvcHMgYXJlIGFkZGVkXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHM6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgdGhpcy5zZXRWYWxpZGF0aW9ucyhuZXh0UHJvcHMudmFsaWRhdGlvbnMsIG5leHRQcm9wcy5yZXF1aXJlZCk7XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzKSB7XG5cbiAgICAvLyBJZiB0aGUgdmFsdWUgcGFzc2VkIGhhcyBjaGFuZ2VkLCBzZXQgaXQuIElmIHZhbHVlIGlzIG5vdCBwYXNzZWQgaXQgd2lsbFxuICAgIC8vIGludGVybmFsbHkgdXBkYXRlLCBhbmQgdGhpcyB3aWxsIG5ldmVyIHJ1blxuICAgIGlmICghdXRpbHMuaXNTYW1lKHRoaXMucHJvcHMudmFsdWUsIHByZXZQcm9wcy52YWx1ZSkpIHtcbiAgICAgIHRoaXMuc2V0VmFsdWUodGhpcy5wcm9wcy52YWx1ZSk7XG4gICAgfVxuXG4gICAgLy8gSWYgdmFsaWRhdGlvbnMgb3IgcmVxdWlyZWQgaXMgY2hhbmdlZCwgcnVuIGEgbmV3IHZhbGlkYXRpb25cbiAgICBpZiAoIXV0aWxzLmlzU2FtZSh0aGlzLnByb3BzLnZhbGlkYXRpb25zLCBwcmV2UHJvcHMudmFsaWRhdGlvbnMpIHx8ICF1dGlscy5pc1NhbWUodGhpcy5wcm9wcy5yZXF1aXJlZCwgcHJldlByb3BzLnJlcXVpcmVkKSkge1xuICAgICAgdGhpcy5jb250ZXh0LmZvcm1zeS52YWxpZGF0ZSh0aGlzKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gRGV0YWNoIGl0IHdoZW4gY29tcG9uZW50IHVubW91bnRzXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50OiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICB0aGlzLmNvbnRleHQuZm9ybXN5LmRldGFjaEZyb21Gb3JtKHRoaXMpO1xuICAgIC8vdGhpcy5wcm9wcy5fZGV0YWNoRnJvbUZvcm0odGhpcyk7XG4gIH0sXG5cbiAgc2V0VmFsaWRhdGlvbnM6IGZ1bmN0aW9uIHNldFZhbGlkYXRpb25zKHZhbGlkYXRpb25zLCByZXF1aXJlZCkge1xuXG4gICAgLy8gQWRkIHZhbGlkYXRpb25zIHRvIHRoZSBzdG9yZSBpdHNlbGYgYXMgdGhlIHByb3BzIG9iamVjdCBjYW4gbm90IGJlIG1vZGlmaWVkXG4gICAgdGhpcy5fdmFsaWRhdGlvbnMgPSBjb252ZXJ0VmFsaWRhdGlvbnNUb09iamVjdCh2YWxpZGF0aW9ucykgfHwge307XG4gICAgdGhpcy5fcmVxdWlyZWRWYWxpZGF0aW9ucyA9IHJlcXVpcmVkID09PSB0cnVlID8geyBpc0RlZmF1bHRSZXF1aXJlZFZhbHVlOiB0cnVlIH0gOiBjb252ZXJ0VmFsaWRhdGlvbnNUb09iamVjdChyZXF1aXJlZCk7XG4gIH0sXG5cbiAgLy8gV2UgdmFsaWRhdGUgYWZ0ZXIgdGhlIHZhbHVlIGhhcyBiZWVuIHNldFxuICBzZXRWYWx1ZTogZnVuY3Rpb24gc2V0VmFsdWUodmFsdWUpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIF92YWx1ZTogdmFsdWUsXG4gICAgICBfaXNQcmlzdGluZTogZmFsc2VcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmNvbnRleHQuZm9ybXN5LnZhbGlkYXRlKHRoaXMpO1xuICAgICAgLy90aGlzLnByb3BzLl92YWxpZGF0ZSh0aGlzKTtcbiAgICB9LmJpbmQodGhpcykpO1xuICB9LFxuICByZXNldFZhbHVlOiBmdW5jdGlvbiByZXNldFZhbHVlKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgX3ZhbHVlOiB0aGlzLnN0YXRlLl9wcmlzdGluZVZhbHVlLFxuICAgICAgX2lzUHJpc3RpbmU6IHRydWVcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmNvbnRleHQuZm9ybXN5LnZhbGlkYXRlKHRoaXMpO1xuICAgICAgLy90aGlzLnByb3BzLl92YWxpZGF0ZSh0aGlzKTtcbiAgICB9KTtcbiAgfSxcbiAgZ2V0VmFsdWU6IGZ1bmN0aW9uIGdldFZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLl92YWx1ZTtcbiAgfSxcbiAgaGFzVmFsdWU6IGZ1bmN0aW9uIGhhc1ZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLl92YWx1ZSAhPT0gJyc7XG4gIH0sXG4gIGdldEVycm9yTWVzc2FnZTogZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKCkge1xuICAgIHZhciBtZXNzYWdlcyA9IHRoaXMuZ2V0RXJyb3JNZXNzYWdlcygpO1xuICAgIHJldHVybiBtZXNzYWdlcy5sZW5ndGggPyBtZXNzYWdlc1swXSA6IG51bGw7XG4gIH0sXG4gIGdldEVycm9yTWVzc2FnZXM6IGZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZXMoKSB7XG4gICAgcmV0dXJuICF0aGlzLmlzVmFsaWQoKSB8fCB0aGlzLnNob3dSZXF1aXJlZCgpID8gdGhpcy5zdGF0ZS5fZXh0ZXJuYWxFcnJvciB8fCB0aGlzLnN0YXRlLl92YWxpZGF0aW9uRXJyb3IgfHwgW10gOiBbXTtcbiAgfSxcbiAgaXNGb3JtRGlzYWJsZWQ6IGZ1bmN0aW9uIGlzRm9ybURpc2FibGVkKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHQuZm9ybXN5LmlzRm9ybURpc2FibGVkKCk7XG4gICAgLy9yZXR1cm4gdGhpcy5wcm9wcy5faXNGb3JtRGlzYWJsZWQoKTtcbiAgfSxcbiAgaXNWYWxpZDogZnVuY3Rpb24gaXNWYWxpZCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5faXNWYWxpZDtcbiAgfSxcbiAgaXNQcmlzdGluZTogZnVuY3Rpb24gaXNQcmlzdGluZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5faXNQcmlzdGluZTtcbiAgfSxcbiAgaXNGb3JtU3VibWl0dGVkOiBmdW5jdGlvbiBpc0Zvcm1TdWJtaXR0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX2Zvcm1TdWJtaXR0ZWQ7XG4gIH0sXG4gIGlzUmVxdWlyZWQ6IGZ1bmN0aW9uIGlzUmVxdWlyZWQoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5wcm9wcy5yZXF1aXJlZDtcbiAgfSxcbiAgc2hvd1JlcXVpcmVkOiBmdW5jdGlvbiBzaG93UmVxdWlyZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX2lzUmVxdWlyZWQ7XG4gIH0sXG4gIHNob3dFcnJvcjogZnVuY3Rpb24gc2hvd0Vycm9yKCkge1xuICAgIHJldHVybiAhdGhpcy5zaG93UmVxdWlyZWQoKSAmJiAhdGhpcy5pc1ZhbGlkKCk7XG4gIH0sXG4gIGlzVmFsaWRWYWx1ZTogZnVuY3Rpb24gaXNWYWxpZFZhbHVlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGV4dC5mb3Jtc3kuaXNWYWxpZFZhbHVlLmNhbGwobnVsbCwgdGhpcywgdmFsdWUpO1xuICAgIC8vcmV0dXJuIHRoaXMucHJvcHMuX2lzVmFsaWRWYWx1ZS5jYWxsKG51bGwsIHRoaXMsIHZhbHVlKTtcbiAgfVxufTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2Zvcm1zeS1yZWFjdC9saWIvTWl4aW4uanMiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKG9iaiwga2V5cykgeyB2YXIgdGFyZ2V0ID0ge307IGZvciAodmFyIGkgaW4gb2JqKSB7IGlmIChrZXlzLmluZGV4T2YoaSkgPj0gMCkgY29udGludWU7IGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgaSkpIGNvbnRpbnVlOyB0YXJnZXRbaV0gPSBvYmpbaV07IH0gcmV0dXJuIHRhcmdldDsgfVxuXG52YXIgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xudmFyIFJlYWN0ID0gZ2xvYmFsLlJlYWN0IHx8IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgY3JlYXRlUmVhY3RDbGFzcyA9IHJlcXVpcmUoJ2NyZWF0ZS1yZWFjdC1jbGFzcycpO1xudmFyIEZvcm1zeSA9IHt9O1xudmFyIHZhbGlkYXRpb25SdWxlcyA9IHJlcXVpcmUoJy4vdmFsaWRhdGlvblJ1bGVzLmpzJyk7XG52YXIgZm9ybURhdGFUb09iamVjdCA9IHJlcXVpcmUoJ2Zvcm0tZGF0YS10by1vYmplY3QnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMuanMnKTtcbnZhciBNaXhpbiA9IHJlcXVpcmUoJy4vTWl4aW4uanMnKTtcbnZhciBIT0MgPSByZXF1aXJlKCcuL0hPQy5qcycpO1xudmFyIERlY29yYXRvciA9IHJlcXVpcmUoJy4vRGVjb3JhdG9yLmpzJyk7XG52YXIgb3B0aW9ucyA9IHt9O1xudmFyIGVtcHR5QXJyYXkgPSBbXTtcblxuRm9ybXN5Lk1peGluID0gTWl4aW47XG5Gb3Jtc3kuSE9DID0gSE9DO1xuRm9ybXN5LkRlY29yYXRvciA9IERlY29yYXRvcjtcblxuRm9ybXN5LmRlZmF1bHRzID0gZnVuY3Rpb24gKHBhc3NlZE9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IHBhc3NlZE9wdGlvbnM7XG59O1xuXG5Gb3Jtc3kuYWRkVmFsaWRhdGlvblJ1bGUgPSBmdW5jdGlvbiAobmFtZSwgZnVuYykge1xuICB2YWxpZGF0aW9uUnVsZXNbbmFtZV0gPSBmdW5jO1xufTtcblxuRm9ybXN5LkZvcm0gPSBjcmVhdGVSZWFjdENsYXNzKHtcbiAgZGlzcGxheU5hbWU6ICdGb3Jtc3knLFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaXNWYWxpZDogdHJ1ZSxcbiAgICAgIGlzU3VibWl0dGluZzogZmFsc2UsXG4gICAgICBjYW5DaGFuZ2U6IGZhbHNlXG4gICAgfTtcbiAgfSxcbiAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9uU3VjY2VzczogZnVuY3Rpb24gb25TdWNjZXNzKCkge30sXG4gICAgICBvbkVycm9yOiBmdW5jdGlvbiBvbkVycm9yKCkge30sXG4gICAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoKSB7fSxcbiAgICAgIG9uVmFsaWRTdWJtaXQ6IGZ1bmN0aW9uIG9uVmFsaWRTdWJtaXQoKSB7fSxcbiAgICAgIG9uSW52YWxpZFN1Ym1pdDogZnVuY3Rpb24gb25JbnZhbGlkU3VibWl0KCkge30sXG4gICAgICBvblZhbGlkOiBmdW5jdGlvbiBvblZhbGlkKCkge30sXG4gICAgICBvbkludmFsaWQ6IGZ1bmN0aW9uIG9uSW52YWxpZCgpIHt9LFxuICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKCkge30sXG4gICAgICB2YWxpZGF0aW9uRXJyb3JzOiBudWxsLFxuICAgICAgcHJldmVudEV4dGVybmFsSW52YWxpZGF0aW9uOiBmYWxzZVxuICAgIH07XG4gIH0sXG5cbiAgY2hpbGRDb250ZXh0VHlwZXM6IHtcbiAgICBmb3Jtc3k6IFByb3BUeXBlcy5vYmplY3RcbiAgfSxcbiAgZ2V0Q2hpbGRDb250ZXh0OiBmdW5jdGlvbiBnZXRDaGlsZENvbnRleHQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHJldHVybiB7XG4gICAgICBmb3Jtc3k6IHtcbiAgICAgICAgYXR0YWNoVG9Gb3JtOiB0aGlzLmF0dGFjaFRvRm9ybSxcbiAgICAgICAgZGV0YWNoRnJvbUZvcm06IHRoaXMuZGV0YWNoRnJvbUZvcm0sXG4gICAgICAgIHZhbGlkYXRlOiB0aGlzLnZhbGlkYXRlLFxuICAgICAgICBpc0Zvcm1EaXNhYmxlZDogdGhpcy5pc0Zvcm1EaXNhYmxlZCxcbiAgICAgICAgaXNWYWxpZFZhbHVlOiBmdW5jdGlvbiBpc1ZhbGlkVmFsdWUoY29tcG9uZW50LCB2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiBfdGhpcy5ydW5WYWxpZGF0aW9uKGNvbXBvbmVudCwgdmFsdWUpLmlzVmFsaWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9LFxuXG4gIC8vIEFkZCBhIG1hcCB0byBzdG9yZSB0aGUgaW5wdXRzIG9mIHRoZSBmb3JtLCBhIG1vZGVsIHRvIHN0b3JlXG4gIC8vIHRoZSB2YWx1ZXMgb2YgdGhlIGZvcm0gYW5kIHJlZ2lzdGVyIGNoaWxkIGlucHV0c1xuICBjb21wb25lbnRXaWxsTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICB0aGlzLmlucHV0cyA9IFtdO1xuICB9LFxuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnZhbGlkYXRlRm9ybSgpO1xuICB9LFxuXG4gIGNvbXBvbmVudFdpbGxVcGRhdGU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVcGRhdGUoKSB7XG4gICAgLy8gS2VlcCBhIHJlZmVyZW5jZSB0byBpbnB1dCBuYW1lcyBiZWZvcmUgZm9ybSB1cGRhdGVzLFxuICAgIC8vIHRvIGNoZWNrIGlmIGlucHV0cyBoYXMgY2hhbmdlZCBhZnRlciByZW5kZXJcbiAgICB0aGlzLnByZXZJbnB1dE5hbWVzID0gdGhpcy5pbnB1dHMubWFwKGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgIHJldHVybiBjb21wb25lbnQucHJvcHMubmFtZTtcbiAgICB9KTtcbiAgfSxcblxuICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcblxuICAgIGlmICh0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnMgJiYgX3R5cGVvZih0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnMpID09PSAnb2JqZWN0JyAmJiBPYmplY3Qua2V5cyh0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnMpLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuc2V0SW5wdXRWYWxpZGF0aW9uRXJyb3JzKHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9ycyk7XG4gICAgfVxuXG4gICAgdmFyIG5ld0lucHV0TmFtZXMgPSB0aGlzLmlucHV0cy5tYXAoZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgcmV0dXJuIGNvbXBvbmVudC5wcm9wcy5uYW1lO1xuICAgIH0pO1xuICAgIGlmICh1dGlscy5hcnJheXNEaWZmZXIodGhpcy5wcmV2SW5wdXROYW1lcywgbmV3SW5wdXROYW1lcykpIHtcbiAgICAgIHRoaXMudmFsaWRhdGVGb3JtKCk7XG4gICAgfVxuICB9LFxuXG4gIC8vIEFsbG93IHJlc2V0dGluZyB0byBzcGVjaWZpZWQgZGF0YVxuICByZXNldDogZnVuY3Rpb24gcmVzZXQoZGF0YSkge1xuICAgIHRoaXMuc2V0Rm9ybVByaXN0aW5lKHRydWUpO1xuICAgIHRoaXMucmVzZXRNb2RlbChkYXRhKTtcbiAgfSxcblxuICAvLyBVcGRhdGUgbW9kZWwsIHN1Ym1pdCB0byB1cmwgcHJvcCBhbmQgc2VuZCB0aGUgbW9kZWxcbiAgc3VibWl0OiBmdW5jdGlvbiBzdWJtaXQoZXZlbnQpIHtcblxuICAgIGV2ZW50ICYmIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAvLyBUcmlnZ2VyIGZvcm0gYXMgbm90IHByaXN0aW5lLlxuICAgIC8vIElmIGFueSBpbnB1dHMgaGF2ZSBub3QgYmVlbiB0b3VjaGVkIHlldCB0aGlzIHdpbGwgbWFrZSB0aGVtIGRpcnR5XG4gICAgLy8gc28gdmFsaWRhdGlvbiBiZWNvbWVzIHZpc2libGUgKGlmIGJhc2VkIG9uIGlzUHJpc3RpbmUpXG4gICAgdGhpcy5zZXRGb3JtUHJpc3RpbmUoZmFsc2UpO1xuICAgIHZhciBtb2RlbCA9IHRoaXMuZ2V0TW9kZWwoKTtcbiAgICB0aGlzLnByb3BzLm9uU3VibWl0KG1vZGVsLCB0aGlzLnJlc2V0TW9kZWwsIHRoaXMudXBkYXRlSW5wdXRzV2l0aEVycm9yKTtcbiAgICB0aGlzLnN0YXRlLmlzVmFsaWQgPyB0aGlzLnByb3BzLm9uVmFsaWRTdWJtaXQobW9kZWwsIHRoaXMucmVzZXRNb2RlbCwgdGhpcy51cGRhdGVJbnB1dHNXaXRoRXJyb3IpIDogdGhpcy5wcm9wcy5vbkludmFsaWRTdWJtaXQobW9kZWwsIHRoaXMucmVzZXRNb2RlbCwgdGhpcy51cGRhdGVJbnB1dHNXaXRoRXJyb3IpO1xuICB9LFxuXG4gIG1hcE1vZGVsOiBmdW5jdGlvbiBtYXBNb2RlbChtb2RlbCkge1xuXG4gICAgaWYgKHRoaXMucHJvcHMubWFwcGluZykge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMubWFwcGluZyhtb2RlbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmb3JtRGF0YVRvT2JqZWN0LnRvT2JqKE9iamVjdC5rZXlzKG1vZGVsKS5yZWR1Y2UoZnVuY3Rpb24gKG1hcHBlZE1vZGVsLCBrZXkpIHtcblxuICAgICAgICB2YXIga2V5QXJyYXkgPSBrZXkuc3BsaXQoJy4nKTtcbiAgICAgICAgdmFyIGJhc2UgPSBtYXBwZWRNb2RlbDtcbiAgICAgICAgd2hpbGUgKGtleUFycmF5Lmxlbmd0aCkge1xuICAgICAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5QXJyYXkuc2hpZnQoKTtcbiAgICAgICAgICBiYXNlID0gYmFzZVtjdXJyZW50S2V5XSA9IGtleUFycmF5Lmxlbmd0aCA/IGJhc2VbY3VycmVudEtleV0gfHwge30gOiBtb2RlbFtrZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1hcHBlZE1vZGVsO1xuICAgICAgfSwge30pKTtcbiAgICB9XG4gIH0sXG5cbiAgZ2V0TW9kZWw6IGZ1bmN0aW9uIGdldE1vZGVsKCkge1xuICAgIHZhciBjdXJyZW50VmFsdWVzID0gdGhpcy5nZXRDdXJyZW50VmFsdWVzKCk7XG4gICAgcmV0dXJuIHRoaXMubWFwTW9kZWwoY3VycmVudFZhbHVlcyk7XG4gIH0sXG5cbiAgLy8gUmVzZXQgZWFjaCBrZXkgaW4gdGhlIG1vZGVsIHRvIHRoZSBvcmlnaW5hbCAvIGluaXRpYWwgLyBzcGVjaWZpZWQgdmFsdWVcbiAgcmVzZXRNb2RlbDogZnVuY3Rpb24gcmVzZXRNb2RlbChkYXRhKSB7XG4gICAgdGhpcy5pbnB1dHMuZm9yRWFjaChmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICB2YXIgbmFtZSA9IGNvbXBvbmVudC5wcm9wcy5uYW1lO1xuICAgICAgaWYgKGRhdGEgJiYgZGF0YS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICBjb21wb25lbnQuc2V0VmFsdWUoZGF0YVtuYW1lXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb21wb25lbnQucmVzZXRWYWx1ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMudmFsaWRhdGVGb3JtKCk7XG4gIH0sXG5cbiAgc2V0SW5wdXRWYWxpZGF0aW9uRXJyb3JzOiBmdW5jdGlvbiBzZXRJbnB1dFZhbGlkYXRpb25FcnJvcnMoZXJyb3JzKSB7XG4gICAgdGhpcy5pbnB1dHMuZm9yRWFjaChmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICB2YXIgbmFtZSA9IGNvbXBvbmVudC5wcm9wcy5uYW1lO1xuICAgICAgdmFyIGFyZ3MgPSBbe1xuICAgICAgICBfaXNWYWxpZDogIShuYW1lIGluIGVycm9ycyksXG4gICAgICAgIF92YWxpZGF0aW9uRXJyb3I6IHR5cGVvZiBlcnJvcnNbbmFtZV0gPT09ICdzdHJpbmcnID8gW2Vycm9yc1tuYW1lXV0gOiBlcnJvcnNbbmFtZV1cbiAgICAgIH1dO1xuICAgICAgY29tcG9uZW50LnNldFN0YXRlLmFwcGx5KGNvbXBvbmVudCwgYXJncyk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLy8gQ2hlY2tzIGlmIHRoZSB2YWx1ZXMgaGF2ZSBjaGFuZ2VkIGZyb20gdGhlaXIgaW5pdGlhbCB2YWx1ZVxuICBpc0NoYW5nZWQ6IGZ1bmN0aW9uIGlzQ2hhbmdlZCgpIHtcbiAgICByZXR1cm4gIXV0aWxzLmlzU2FtZSh0aGlzLmdldFByaXN0aW5lVmFsdWVzKCksIHRoaXMuZ2V0Q3VycmVudFZhbHVlcygpKTtcbiAgfSxcblxuICBnZXRQcmlzdGluZVZhbHVlczogZnVuY3Rpb24gZ2V0UHJpc3RpbmVWYWx1ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5wdXRzLnJlZHVjZShmdW5jdGlvbiAoZGF0YSwgY29tcG9uZW50KSB7XG4gICAgICB2YXIgbmFtZSA9IGNvbXBvbmVudC5wcm9wcy5uYW1lO1xuICAgICAgZGF0YVtuYW1lXSA9IGNvbXBvbmVudC5wcm9wcy52YWx1ZTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0sIHt9KTtcbiAgfSxcblxuICAvLyBHbyB0aHJvdWdoIGVycm9ycyBmcm9tIHNlcnZlciBhbmQgZ3JhYiB0aGUgY29tcG9uZW50c1xuICAvLyBzdG9yZWQgaW4gdGhlIGlucHV0cyBtYXAuIENoYW5nZSB0aGVpciBzdGF0ZSB0byBpbnZhbGlkXG4gIC8vIGFuZCBzZXQgdGhlIHNlcnZlckVycm9yIG1lc3NhZ2VcbiAgdXBkYXRlSW5wdXRzV2l0aEVycm9yOiBmdW5jdGlvbiB1cGRhdGVJbnB1dHNXaXRoRXJyb3IoZXJyb3JzKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICBPYmplY3Qua2V5cyhlcnJvcnMpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUsIGluZGV4KSB7XG4gICAgICB2YXIgY29tcG9uZW50ID0gdXRpbHMuZmluZChfdGhpczIuaW5wdXRzLCBmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICAgIHJldHVybiBjb21wb25lbnQucHJvcHMubmFtZSA9PT0gbmFtZTtcbiAgICAgIH0pO1xuICAgICAgaWYgKCFjb21wb25lbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgYXJlIHRyeWluZyB0byB1cGRhdGUgYW4gaW5wdXQgdGhhdCBkb2VzIG5vdCBleGlzdC4gJyArICdWZXJpZnkgZXJyb3JzIG9iamVjdCB3aXRoIGlucHV0IG5hbWVzLiAnICsgSlNPTi5zdHJpbmdpZnkoZXJyb3JzKSk7XG4gICAgICB9XG4gICAgICB2YXIgYXJncyA9IFt7XG4gICAgICAgIF9pc1ZhbGlkOiBfdGhpczIucHJvcHMucHJldmVudEV4dGVybmFsSW52YWxpZGF0aW9uIHx8IGZhbHNlLFxuICAgICAgICBfZXh0ZXJuYWxFcnJvcjogdHlwZW9mIGVycm9yc1tuYW1lXSA9PT0gJ3N0cmluZycgPyBbZXJyb3JzW25hbWVdXSA6IGVycm9yc1tuYW1lXVxuICAgICAgfV07XG4gICAgICBjb21wb25lbnQuc2V0U3RhdGUuYXBwbHkoY29tcG9uZW50LCBhcmdzKTtcbiAgICB9KTtcbiAgfSxcblxuICBpc0Zvcm1EaXNhYmxlZDogZnVuY3Rpb24gaXNGb3JtRGlzYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuZGlzYWJsZWQ7XG4gIH0sXG5cbiAgZ2V0Q3VycmVudFZhbHVlczogZnVuY3Rpb24gZ2V0Q3VycmVudFZhbHVlcygpIHtcbiAgICByZXR1cm4gdGhpcy5pbnB1dHMucmVkdWNlKGZ1bmN0aW9uIChkYXRhLCBjb21wb25lbnQpIHtcbiAgICAgIHZhciBuYW1lID0gY29tcG9uZW50LnByb3BzLm5hbWU7XG4gICAgICBkYXRhW25hbWVdID0gY29tcG9uZW50LnN0YXRlLl92YWx1ZTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0sIHt9KTtcbiAgfSxcblxuICBzZXRGb3JtUHJpc3RpbmU6IGZ1bmN0aW9uIHNldEZvcm1QcmlzdGluZShpc1ByaXN0aW5lKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBfZm9ybVN1Ym1pdHRlZDogIWlzUHJpc3RpbmVcbiAgICB9KTtcblxuICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBlYWNoIGNvbXBvbmVudCBhbmQgc2V0IGl0IGFzIHByaXN0aW5lXG4gICAgLy8gb3IgXCJkaXJ0eVwiLlxuICAgIHRoaXMuaW5wdXRzLmZvckVhY2goZnVuY3Rpb24gKGNvbXBvbmVudCwgaW5kZXgpIHtcbiAgICAgIGNvbXBvbmVudC5zZXRTdGF0ZSh7XG4gICAgICAgIF9mb3JtU3VibWl0dGVkOiAhaXNQcmlzdGluZSxcbiAgICAgICAgX2lzUHJpc3RpbmU6IGlzUHJpc3RpbmVcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LFxuXG4gIC8vIFVzZSB0aGUgYmluZGVkIHZhbHVlcyBhbmQgdGhlIGFjdHVhbCBpbnB1dCB2YWx1ZSB0b1xuICAvLyB2YWxpZGF0ZSB0aGUgaW5wdXQgYW5kIHNldCBpdHMgc3RhdGUuIFRoZW4gY2hlY2sgdGhlXG4gIC8vIHN0YXRlIG9mIHRoZSBmb3JtIGl0c2VsZlxuICB2YWxpZGF0ZTogZnVuY3Rpb24gdmFsaWRhdGUoY29tcG9uZW50KSB7XG5cbiAgICAvLyBUcmlnZ2VyIG9uQ2hhbmdlXG4gICAgaWYgKHRoaXMuc3RhdGUuY2FuQ2hhbmdlKSB7XG4gICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHRoaXMuZ2V0Q3VycmVudFZhbHVlcygpLCB0aGlzLmlzQ2hhbmdlZCgpKTtcbiAgICB9XG5cbiAgICB2YXIgdmFsaWRhdGlvbiA9IHRoaXMucnVuVmFsaWRhdGlvbihjb21wb25lbnQpO1xuICAgIC8vIFJ1biB0aHJvdWdoIHRoZSB2YWxpZGF0aW9ucywgc3BsaXQgdGhlbSB1cCBhbmQgY2FsbFxuICAgIC8vIHRoZSB2YWxpZGF0b3IgSUYgdGhlcmUgaXMgYSB2YWx1ZSBvciBpdCBpcyByZXF1aXJlZFxuICAgIGNvbXBvbmVudC5zZXRTdGF0ZSh7XG4gICAgICBfaXNWYWxpZDogdmFsaWRhdGlvbi5pc1ZhbGlkLFxuICAgICAgX2lzUmVxdWlyZWQ6IHZhbGlkYXRpb24uaXNSZXF1aXJlZCxcbiAgICAgIF92YWxpZGF0aW9uRXJyb3I6IHZhbGlkYXRpb24uZXJyb3IsXG4gICAgICBfZXh0ZXJuYWxFcnJvcjogbnVsbFxuICAgIH0sIHRoaXMudmFsaWRhdGVGb3JtKTtcbiAgfSxcblxuICAvLyBDaGVja3MgdmFsaWRhdGlvbiBvbiBjdXJyZW50IHZhbHVlIG9yIGEgcGFzc2VkIHZhbHVlXG4gIHJ1blZhbGlkYXRpb246IGZ1bmN0aW9uIHJ1blZhbGlkYXRpb24oY29tcG9uZW50LCB2YWx1ZSkge1xuXG4gICAgdmFyIGN1cnJlbnRWYWx1ZXMgPSB0aGlzLmdldEN1cnJlbnRWYWx1ZXMoKTtcbiAgICB2YXIgdmFsaWRhdGlvbkVycm9ycyA9IGNvbXBvbmVudC5wcm9wcy52YWxpZGF0aW9uRXJyb3JzO1xuICAgIHZhciB2YWxpZGF0aW9uRXJyb3IgPSBjb21wb25lbnQucHJvcHMudmFsaWRhdGlvbkVycm9yO1xuICAgIHZhbHVlID0gYXJndW1lbnRzLmxlbmd0aCA9PT0gMiA/IHZhbHVlIDogY29tcG9uZW50LnN0YXRlLl92YWx1ZTtcblxuICAgIHZhciB2YWxpZGF0aW9uUmVzdWx0cyA9IHRoaXMucnVuUnVsZXModmFsdWUsIGN1cnJlbnRWYWx1ZXMsIGNvbXBvbmVudC5fdmFsaWRhdGlvbnMpO1xuICAgIHZhciByZXF1aXJlZFJlc3VsdHMgPSB0aGlzLnJ1blJ1bGVzKHZhbHVlLCBjdXJyZW50VmFsdWVzLCBjb21wb25lbnQuX3JlcXVpcmVkVmFsaWRhdGlvbnMpO1xuXG4gICAgLy8gdGhlIGNvbXBvbmVudCBkZWZpbmVzIGFuIGV4cGxpY2l0IHZhbGlkYXRlIGZ1bmN0aW9uXG4gICAgaWYgKHR5cGVvZiBjb21wb25lbnQudmFsaWRhdGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdmFsaWRhdGlvblJlc3VsdHMuZmFpbGVkID0gY29tcG9uZW50LnZhbGlkYXRlKCkgPyBbXSA6IFsnZmFpbGVkJ107XG4gICAgfVxuXG4gICAgdmFyIGlzUmVxdWlyZWQgPSBPYmplY3Qua2V5cyhjb21wb25lbnQuX3JlcXVpcmVkVmFsaWRhdGlvbnMpLmxlbmd0aCA/ICEhcmVxdWlyZWRSZXN1bHRzLnN1Y2Nlc3MubGVuZ3RoIDogZmFsc2U7XG4gICAgdmFyIGlzVmFsaWQgPSAhdmFsaWRhdGlvblJlc3VsdHMuZmFpbGVkLmxlbmd0aCAmJiAhKHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9ycyAmJiB0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnNbY29tcG9uZW50LnByb3BzLm5hbWVdKTtcblxuICAgIHJldHVybiB7XG4gICAgICBpc1JlcXVpcmVkOiBpc1JlcXVpcmVkLFxuICAgICAgaXNWYWxpZDogaXNSZXF1aXJlZCA/IGZhbHNlIDogaXNWYWxpZCxcbiAgICAgIGVycm9yOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgaWYgKGlzVmFsaWQgJiYgIWlzUmVxdWlyZWQpIHtcbiAgICAgICAgICByZXR1cm4gZW1wdHlBcnJheTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2YWxpZGF0aW9uUmVzdWx0cy5lcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbGlkYXRpb25SZXN1bHRzLmVycm9ycztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnMgJiYgdGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzW2NvbXBvbmVudC5wcm9wcy5uYW1lXSkge1xuICAgICAgICAgIHJldHVybiB0eXBlb2YgdGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzW2NvbXBvbmVudC5wcm9wcy5uYW1lXSA9PT0gJ3N0cmluZycgPyBbdGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzW2NvbXBvbmVudC5wcm9wcy5uYW1lXV0gOiB0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnNbY29tcG9uZW50LnByb3BzLm5hbWVdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzUmVxdWlyZWQpIHtcbiAgICAgICAgICB2YXIgZXJyb3IgPSB2YWxpZGF0aW9uRXJyb3JzW3JlcXVpcmVkUmVzdWx0cy5zdWNjZXNzWzBdXTtcbiAgICAgICAgICByZXR1cm4gZXJyb3IgPyBbZXJyb3JdIDogbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2YWxpZGF0aW9uUmVzdWx0cy5mYWlsZWQubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbGlkYXRpb25SZXN1bHRzLmZhaWxlZC5tYXAoZnVuY3Rpb24gKGZhaWxlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbGlkYXRpb25FcnJvcnNbZmFpbGVkXSA/IHZhbGlkYXRpb25FcnJvcnNbZmFpbGVkXSA6IHZhbGlkYXRpb25FcnJvcjtcbiAgICAgICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKHgsIHBvcywgYXJyKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgZHVwbGljYXRlc1xuICAgICAgICAgICAgcmV0dXJuIGFyci5pbmRleE9mKHgpID09PSBwb3M7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0uY2FsbCh0aGlzKVxuICAgIH07XG4gIH0sXG5cbiAgcnVuUnVsZXM6IGZ1bmN0aW9uIHJ1blJ1bGVzKHZhbHVlLCBjdXJyZW50VmFsdWVzLCB2YWxpZGF0aW9ucykge1xuXG4gICAgdmFyIHJlc3VsdHMgPSB7XG4gICAgICBlcnJvcnM6IFtdLFxuICAgICAgZmFpbGVkOiBbXSxcbiAgICAgIHN1Y2Nlc3M6IFtdXG4gICAgfTtcbiAgICBpZiAoT2JqZWN0LmtleXModmFsaWRhdGlvbnMpLmxlbmd0aCkge1xuICAgICAgT2JqZWN0LmtleXModmFsaWRhdGlvbnMpLmZvckVhY2goZnVuY3Rpb24gKHZhbGlkYXRpb25NZXRob2QpIHtcblxuICAgICAgICBpZiAodmFsaWRhdGlvblJ1bGVzW3ZhbGlkYXRpb25NZXRob2RdICYmIHR5cGVvZiB2YWxpZGF0aW9uc1t2YWxpZGF0aW9uTWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRm9ybXN5IGRvZXMgbm90IGFsbG93IHlvdSB0byBvdmVycmlkZSBkZWZhdWx0IHZhbGlkYXRpb25zOiAnICsgdmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXZhbGlkYXRpb25SdWxlc1t2YWxpZGF0aW9uTWV0aG9kXSAmJiB0eXBlb2YgdmFsaWRhdGlvbnNbdmFsaWRhdGlvbk1ldGhvZF0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm1zeSBkb2VzIG5vdCBoYXZlIHRoZSB2YWxpZGF0aW9uIHJ1bGU6ICcgKyB2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgdmFsaWRhdGlvbnNbdmFsaWRhdGlvbk1ldGhvZF0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB2YXIgdmFsaWRhdGlvbiA9IHZhbGlkYXRpb25zW3ZhbGlkYXRpb25NZXRob2RdKGN1cnJlbnRWYWx1ZXMsIHZhbHVlKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbGlkYXRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXN1bHRzLmVycm9ycy5wdXNoKHZhbGlkYXRpb24pO1xuICAgICAgICAgICAgcmVzdWx0cy5mYWlsZWQucHVzaCh2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCF2YWxpZGF0aW9uKSB7XG4gICAgICAgICAgICByZXN1bHRzLmZhaWxlZC5wdXNoKHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbGlkYXRpb25zW3ZhbGlkYXRpb25NZXRob2RdICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdmFyIHZhbGlkYXRpb24gPSB2YWxpZGF0aW9uUnVsZXNbdmFsaWRhdGlvbk1ldGhvZF0oY3VycmVudFZhbHVlcywgdmFsdWUsIHZhbGlkYXRpb25zW3ZhbGlkYXRpb25NZXRob2RdKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHZhbGlkYXRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXN1bHRzLmVycm9ycy5wdXNoKHZhbGlkYXRpb24pO1xuICAgICAgICAgICAgcmVzdWx0cy5mYWlsZWQucHVzaCh2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCF2YWxpZGF0aW9uKSB7XG4gICAgICAgICAgICByZXN1bHRzLmZhaWxlZC5wdXNoKHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHRzLnN1Y2Nlc3MucHVzaCh2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdHMuc3VjY2Vzcy5wdXNoKHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH0sXG5cbiAgLy8gVmFsaWRhdGUgdGhlIGZvcm0gYnkgZ29pbmcgdGhyb3VnaCBhbGwgY2hpbGQgaW5wdXQgY29tcG9uZW50c1xuICAvLyBhbmQgY2hlY2sgdGhlaXIgc3RhdGVcbiAgdmFsaWRhdGVGb3JtOiBmdW5jdGlvbiB2YWxpZGF0ZUZvcm0oKSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAvLyBXZSBuZWVkIGEgY2FsbGJhY2sgYXMgd2UgYXJlIHZhbGlkYXRpbmcgYWxsIGlucHV0cyBhZ2Fpbi4gVGhpcyB3aWxsXG4gICAgLy8gcnVuIHdoZW4gdGhlIGxhc3QgY29tcG9uZW50IGhhcyBzZXQgaXRzIHN0YXRlXG4gICAgdmFyIG9uVmFsaWRhdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFsbElzVmFsaWQgPSB0aGlzLmlucHV0cy5ldmVyeShmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICAgIHJldHVybiBjb21wb25lbnQuc3RhdGUuX2lzVmFsaWQ7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGlzVmFsaWQ6IGFsbElzVmFsaWRcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoYWxsSXNWYWxpZCkge1xuICAgICAgICB0aGlzLnByb3BzLm9uVmFsaWQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucHJvcHMub25JbnZhbGlkKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFRlbGwgdGhlIGZvcm0gdGhhdCBpdCBjYW4gc3RhcnQgdG8gdHJpZ2dlciBjaGFuZ2UgZXZlbnRzXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgY2FuQ2hhbmdlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9LmJpbmQodGhpcyk7XG5cbiAgICAvLyBSdW4gdmFsaWRhdGlvbiBhZ2FpbiBpbiBjYXNlIGFmZmVjdGVkIGJ5IG90aGVyIGlucHV0cy4gVGhlXG4gICAgLy8gbGFzdCBjb21wb25lbnQgdmFsaWRhdGVkIHdpbGwgcnVuIHRoZSBvblZhbGlkYXRpb25Db21wbGV0ZSBjYWxsYmFja1xuICAgIHRoaXMuaW5wdXRzLmZvckVhY2goZnVuY3Rpb24gKGNvbXBvbmVudCwgaW5kZXgpIHtcbiAgICAgIHZhciB2YWxpZGF0aW9uID0gX3RoaXMzLnJ1blZhbGlkYXRpb24oY29tcG9uZW50KTtcbiAgICAgIGlmICh2YWxpZGF0aW9uLmlzVmFsaWQgJiYgY29tcG9uZW50LnN0YXRlLl9leHRlcm5hbEVycm9yKSB7XG4gICAgICAgIHZhbGlkYXRpb24uaXNWYWxpZCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgY29tcG9uZW50LnNldFN0YXRlKHtcbiAgICAgICAgX2lzVmFsaWQ6IHZhbGlkYXRpb24uaXNWYWxpZCxcbiAgICAgICAgX2lzUmVxdWlyZWQ6IHZhbGlkYXRpb24uaXNSZXF1aXJlZCxcbiAgICAgICAgX3ZhbGlkYXRpb25FcnJvcjogdmFsaWRhdGlvbi5lcnJvcixcbiAgICAgICAgX2V4dGVybmFsRXJyb3I6ICF2YWxpZGF0aW9uLmlzVmFsaWQgJiYgY29tcG9uZW50LnN0YXRlLl9leHRlcm5hbEVycm9yID8gY29tcG9uZW50LnN0YXRlLl9leHRlcm5hbEVycm9yIDogbnVsbFxuICAgICAgfSwgaW5kZXggPT09IF90aGlzMy5pbnB1dHMubGVuZ3RoIC0gMSA/IG9uVmFsaWRhdGlvbkNvbXBsZXRlIDogbnVsbCk7XG4gICAgfSk7XG5cbiAgICAvLyBJZiB0aGVyZSBhcmUgbm8gaW5wdXRzLCBzZXQgc3RhdGUgd2hlcmUgZm9ybSBpcyByZWFkeSB0byB0cmlnZ2VyXG4gICAgLy8gY2hhbmdlIGV2ZW50LiBOZXcgaW5wdXRzIG1pZ2h0IGJlIGFkZGVkIGxhdGVyXG4gICAgaWYgKCF0aGlzLmlucHV0cy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBjYW5DaGFuZ2U6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvLyBNZXRob2QgcHV0IG9uIGVhY2ggaW5wdXQgY29tcG9uZW50IHRvIHJlZ2lzdGVyXG4gIC8vIGl0c2VsZiB0byB0aGUgZm9ybVxuICBhdHRhY2hUb0Zvcm06IGZ1bmN0aW9uIGF0dGFjaFRvRm9ybShjb21wb25lbnQpIHtcblxuICAgIGlmICh0aGlzLmlucHV0cy5pbmRleE9mKGNvbXBvbmVudCkgPT09IC0xKSB7XG4gICAgICB0aGlzLmlucHV0cy5wdXNoKGNvbXBvbmVudCk7XG4gICAgfVxuXG4gICAgdGhpcy52YWxpZGF0ZShjb21wb25lbnQpO1xuICB9LFxuXG4gIC8vIE1ldGhvZCBwdXQgb24gZWFjaCBpbnB1dCBjb21wb25lbnQgdG8gdW5yZWdpc3RlclxuICAvLyBpdHNlbGYgZnJvbSB0aGUgZm9ybVxuICBkZXRhY2hGcm9tRm9ybTogZnVuY3Rpb24gZGV0YWNoRnJvbUZvcm0oY29tcG9uZW50KSB7XG4gICAgdmFyIGNvbXBvbmVudFBvcyA9IHRoaXMuaW5wdXRzLmluZGV4T2YoY29tcG9uZW50KTtcblxuICAgIGlmIChjb21wb25lbnRQb3MgIT09IC0xKSB7XG4gICAgICB0aGlzLmlucHV0cyA9IHRoaXMuaW5wdXRzLnNsaWNlKDAsIGNvbXBvbmVudFBvcykuY29uY2F0KHRoaXMuaW5wdXRzLnNsaWNlKGNvbXBvbmVudFBvcyArIDEpKTtcbiAgICB9XG5cbiAgICB0aGlzLnZhbGlkYXRlRm9ybSgpO1xuICB9LFxuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgbWFwcGluZyA9IF9wcm9wcy5tYXBwaW5nLFxuICAgICAgICB2YWxpZGF0aW9uRXJyb3JzID0gX3Byb3BzLnZhbGlkYXRpb25FcnJvcnMsXG4gICAgICAgIG9uU3VibWl0ID0gX3Byb3BzLm9uU3VibWl0LFxuICAgICAgICBvblZhbGlkID0gX3Byb3BzLm9uVmFsaWQsXG4gICAgICAgIG9uVmFsaWRTdWJtaXQgPSBfcHJvcHMub25WYWxpZFN1Ym1pdCxcbiAgICAgICAgb25JbnZhbGlkID0gX3Byb3BzLm9uSW52YWxpZCxcbiAgICAgICAgb25JbnZhbGlkU3VibWl0ID0gX3Byb3BzLm9uSW52YWxpZFN1Ym1pdCxcbiAgICAgICAgb25DaGFuZ2UgPSBfcHJvcHMub25DaGFuZ2UsXG4gICAgICAgIHJlc2V0ID0gX3Byb3BzLnJlc2V0LFxuICAgICAgICBwcmV2ZW50RXh0ZXJuYWxJbnZhbGlkYXRpb24gPSBfcHJvcHMucHJldmVudEV4dGVybmFsSW52YWxpZGF0aW9uLFxuICAgICAgICBvblN1Y2Nlc3MgPSBfcHJvcHMub25TdWNjZXNzLFxuICAgICAgICBvbkVycm9yID0gX3Byb3BzLm9uRXJyb3IsXG4gICAgICAgIG5vbkZvcm1zeVByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9wcm9wcywgWydtYXBwaW5nJywgJ3ZhbGlkYXRpb25FcnJvcnMnLCAnb25TdWJtaXQnLCAnb25WYWxpZCcsICdvblZhbGlkU3VibWl0JywgJ29uSW52YWxpZCcsICdvbkludmFsaWRTdWJtaXQnLCAnb25DaGFuZ2UnLCAncmVzZXQnLCAncHJldmVudEV4dGVybmFsSW52YWxpZGF0aW9uJywgJ29uU3VjY2VzcycsICdvbkVycm9yJ10pO1xuXG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAnZm9ybScsXG4gICAgICBfZXh0ZW5kcyh7fSwgbm9uRm9ybXN5UHJvcHMsIHsgb25TdWJtaXQ6IHRoaXMuc3VibWl0IH0pLFxuICAgICAgdGhpcy5wcm9wcy5jaGlsZHJlblxuICAgICk7XG4gIH1cbn0pO1xuXG5pZiAoIWdsb2JhbC5leHBvcnRzICYmICFnbG9iYWwubW9kdWxlICYmICghZ2xvYmFsLmRlZmluZSB8fCAhZ2xvYmFsLmRlZmluZS5hbWQpKSB7XG4gIGdsb2JhbC5Gb3Jtc3kgPSBGb3Jtc3k7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRm9ybXN5O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vZm9ybXN5LXJlYWN0L2xpYi9tYWluLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhcnJheXNEaWZmZXI6IGZ1bmN0aW9uIGFycmF5c0RpZmZlcihhLCBiKSB7XG4gICAgdmFyIGlzRGlmZmVyZW50ID0gZmFsc2U7XG4gICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkge1xuICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgIGlmICghdGhpcy5pc1NhbWUoaXRlbSwgYltpbmRleF0pKSB7XG4gICAgICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzKTtcbiAgICB9XG4gICAgcmV0dXJuIGlzRGlmZmVyZW50O1xuICB9LFxuXG4gIG9iamVjdHNEaWZmZXI6IGZ1bmN0aW9uIG9iamVjdHNEaWZmZXIoYSwgYikge1xuICAgIHZhciBpc0RpZmZlcmVudCA9IGZhbHNlO1xuICAgIGlmIChPYmplY3Qua2V5cyhhKS5sZW5ndGggIT09IE9iamVjdC5rZXlzKGIpLmxlbmd0aCkge1xuICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBPYmplY3Qua2V5cyhhKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU2FtZShhW2tleV0sIGJba2V5XSkpIHtcbiAgICAgICAgICBpc0RpZmZlcmVudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0sIHRoaXMpO1xuICAgIH1cbiAgICByZXR1cm4gaXNEaWZmZXJlbnQ7XG4gIH0sXG5cbiAgaXNTYW1lOiBmdW5jdGlvbiBpc1NhbWUoYSwgYikge1xuICAgIGlmICgodHlwZW9mIGEgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGEpKSAhPT0gKHR5cGVvZiBiID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihiKSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYSkgJiYgQXJyYXkuaXNBcnJheShiKSkge1xuICAgICAgcmV0dXJuICF0aGlzLmFycmF5c0RpZmZlcihhLCBiKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gYS50b1N0cmluZygpID09PSBiLnRvU3RyaW5nKCk7XG4gICAgfSBlbHNlIGlmICgodHlwZW9mIGEgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGEpKSA9PT0gJ29iamVjdCcgJiYgYSAhPT0gbnVsbCAmJiBiICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gIXRoaXMub2JqZWN0c0RpZmZlcihhLCBiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYSA9PT0gYjtcbiAgfSxcblxuICBmaW5kOiBmdW5jdGlvbiBmaW5kKGNvbGxlY3Rpb24sIGZuKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjb2xsZWN0aW9uLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIGl0ZW0gPSBjb2xsZWN0aW9uW2ldO1xuICAgICAgaWYgKGZuKGl0ZW0pKSB7XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2Zvcm1zeS1yZWFjdC9saWIvdXRpbHMuanMiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfaXNFeGlzdHkgPSBmdW5jdGlvbiBfaXNFeGlzdHkodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQ7XG59O1xuXG52YXIgaXNFbXB0eSA9IGZ1bmN0aW9uIGlzRW1wdHkodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09PSAnJztcbn07XG5cbnZhciB2YWxpZGF0aW9ucyA9IHtcbiAgaXNEZWZhdWx0UmVxdWlyZWRWYWx1ZTogZnVuY3Rpb24gaXNEZWZhdWx0UmVxdWlyZWRWYWx1ZSh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09ICcnO1xuICB9LFxuICBpc0V4aXN0eTogZnVuY3Rpb24gaXNFeGlzdHkodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiBfaXNFeGlzdHkodmFsdWUpO1xuICB9LFxuICBtYXRjaFJlZ2V4cDogZnVuY3Rpb24gbWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgcmVnZXhwKSB7XG4gICAgcmV0dXJuICFfaXNFeGlzdHkodmFsdWUpIHx8IGlzRW1wdHkodmFsdWUpIHx8IHJlZ2V4cC50ZXN0KHZhbHVlKTtcbiAgfSxcbiAgaXNVbmRlZmluZWQ6IGZ1bmN0aW9uIGlzVW5kZWZpbmVkKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZDtcbiAgfSxcbiAgaXNFbXB0eVN0cmluZzogZnVuY3Rpb24gaXNFbXB0eVN0cmluZyh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIGlzRW1wdHkodmFsdWUpO1xuICB9LFxuICBpc0VtYWlsOiBmdW5jdGlvbiBpc0VtYWlsKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL14oKChbYS16XXxcXGR8WyEjXFwkJSYnXFwqXFwrXFwtXFwvPVxcP1xcXl9ge1xcfH1+XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkrKFxcLihbYS16XXxcXGR8WyEjXFwkJSYnXFwqXFwrXFwtXFwvPVxcP1xcXl9ge1xcfH1+XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkrKSopfCgoXFx4MjIpKCgoKFxceDIwfFxceDA5KSooXFx4MGRcXHgwYSkpPyhcXHgyMHxcXHgwOSkrKT8oKFtcXHgwMS1cXHgwOFxceDBiXFx4MGNcXHgwZS1cXHgxZlxceDdmXXxcXHgyMXxbXFx4MjMtXFx4NWJdfFtcXHg1ZC1cXHg3ZV18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfChcXFxcKFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZC1cXHg3Zl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkpKigoKFxceDIwfFxceDA5KSooXFx4MGRcXHgwYSkpPyhcXHgyMHxcXHgwOSkrKT8oXFx4MjIpKSlAKCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKVxcLikrKChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpJC9pKTtcbiAgfSxcbiAgaXNVcmw6IGZ1bmN0aW9uIGlzVXJsKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL14oaHR0cHM/fHM/ZnRwKTpcXC9cXC8oKCgoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OikqQCk/KCgoXFxkfFsxLTldXFxkfDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNV0pXFwuKFxcZHxbMS05XVxcZHwxXFxkXFxkfDJbMC00XVxcZHwyNVswLTVdKVxcLihcXGR8WzEtOV1cXGR8MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC01XSlcXC4oXFxkfFsxLTldXFxkfDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNV0pKXwoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4/KSg6XFxkKik/KShcXC8oKChbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoJVtcXGRhLWZdezJ9KXxbIVxcJCYnXFwoXFwpXFwqXFwrLDs9XXw6fEApKyhcXC8oKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCkqKSopPyk/KFxcPygoKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCl8W1xcdUUwMDAtXFx1RjhGRl18XFwvfFxcPykqKT8oIygoKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCl8XFwvfFxcPykqKT8kL2kpO1xuICB9LFxuICBpc1RydWU6IGZ1bmN0aW9uIGlzVHJ1ZSh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSB0cnVlO1xuICB9LFxuICBpc0ZhbHNlOiBmdW5jdGlvbiBpc0ZhbHNlKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IGZhbHNlO1xuICB9LFxuICBpc051bWVyaWM6IGZ1bmN0aW9uIGlzTnVtZXJpYyh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL15bLStdPyg/OlxcZCpbLl0pP1xcZCskLyk7XG4gIH0sXG4gIGlzQWxwaGE6IGZ1bmN0aW9uIGlzQWxwaGEodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXltBLVpdKyQvaSk7XG4gIH0sXG4gIGlzQWxwaGFudW1lcmljOiBmdW5jdGlvbiBpc0FscGhhbnVtZXJpYyh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eWzAtOUEtWl0rJC9pKTtcbiAgfSxcbiAgaXNJbnQ6IGZ1bmN0aW9uIGlzSW50KHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL14oPzpbLStdPyg/OjB8WzEtOV1cXGQqKSkkLyk7XG4gIH0sXG4gIGlzRmxvYXQ6IGZ1bmN0aW9uIGlzRmxvYXQodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXig/OlstK10/KD86XFxkKykpPyg/OlxcLlxcZCopPyg/OltlRV1bXFwrXFwtXT8oPzpcXGQrKSk/JC8pO1xuICB9LFxuICBpc1dvcmRzOiBmdW5jdGlvbiBpc1dvcmRzKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL15bQS1aXFxzXSskL2kpO1xuICB9LFxuICBpc1NwZWNpYWxXb3JkczogZnVuY3Rpb24gaXNTcGVjaWFsV29yZHModmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXltBLVpcXHNcXHUwMEMwLVxcdTAxN0ZdKyQvaSk7XG4gIH0sXG4gIGlzTGVuZ3RoOiBmdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZXMsIHZhbHVlLCBsZW5ndGgpIHtcbiAgICByZXR1cm4gIV9pc0V4aXN0eSh2YWx1ZSkgfHwgaXNFbXB0eSh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoID09PSBsZW5ndGg7XG4gIH0sXG4gIGVxdWFsczogZnVuY3Rpb24gZXF1YWxzKHZhbHVlcywgdmFsdWUsIGVxbCkge1xuICAgIHJldHVybiAhX2lzRXhpc3R5KHZhbHVlKSB8fCBpc0VtcHR5KHZhbHVlKSB8fCB2YWx1ZSA9PSBlcWw7XG4gIH0sXG4gIGVxdWFsc0ZpZWxkOiBmdW5jdGlvbiBlcXVhbHNGaWVsZCh2YWx1ZXMsIHZhbHVlLCBmaWVsZCkge1xuICAgIHJldHVybiB2YWx1ZSA9PSB2YWx1ZXNbZmllbGRdO1xuICB9LFxuICBtYXhMZW5ndGg6IGZ1bmN0aW9uIG1heExlbmd0aCh2YWx1ZXMsIHZhbHVlLCBsZW5ndGgpIHtcbiAgICByZXR1cm4gIV9pc0V4aXN0eSh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoIDw9IGxlbmd0aDtcbiAgfSxcbiAgbWluTGVuZ3RoOiBmdW5jdGlvbiBtaW5MZW5ndGgodmFsdWVzLCB2YWx1ZSwgbGVuZ3RoKSB7XG4gICAgcmV0dXJuICFfaXNFeGlzdHkodmFsdWUpIHx8IGlzRW1wdHkodmFsdWUpIHx8IHZhbHVlLmxlbmd0aCA+PSBsZW5ndGg7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gdmFsaWRhdGlvbnM7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9mb3Jtc3ktcmVhY3QvbGliL3ZhbGlkYXRpb25SdWxlcy5qcyIsImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBGb3Jtc3ksIHsgSE9DIH0gZnJvbSAnZm9ybXN5LXJlYWN0JztcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcclxuXHJcbmNsYXNzIEZpZWxkIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuY2hhbmdlVmFsdWUgPSAoZXZlbnQpID0+IHtcclxuICAgICAgdGhpcy5wcm9wcy5zZXRWYWx1ZShldmVudC5jdXJyZW50VGFyZ2V0W3RoaXMucHJvcHMudHlwZSA9PT0gJ2NoZWNrYm94JyA/XHJcbiAgICAgICAgJ2NoZWNrZWQnIDogJ3ZhbHVlJ10pO1xyXG4gICAgfTtcclxuICB9XHJcbiAgcmVuZGVyICgpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHRoaXMucHJvcHMuZ2V0RXJyb3JNZXNzYWdlKCk7XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaWdudXAtZmllbGQtZ3JvdXBcIj5cclxuICAgICAgICA8bGFiZWxcclxuICAgICAgICAgIGh0bWxGb3I9eyB0aGlzLnByb3BzLm5hbWUudG9Mb3dlckNhc2UoKSB9XHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJzaWdudXAtZm9ybV9fbGFiZWxcIj5cclxuICAgICAgICAgIHsgdGhpcy5wcm9wcy5uYW1lIH1cclxuICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgb25DaGFuZ2U9e3RoaXMuY2hhbmdlVmFsdWV9XHJcbiAgICAgICAgICB2YWx1ZT17dGhpcy5wcm9wcy5nZXRWYWx1ZSgpfVxyXG4gICAgICAgICAgdHlwZT17dGhpcy5wcm9wcy50eXBlIHx8ICd0ZXh0J31cclxuICAgICAgICAgIG5hbWU9eyB0aGlzLnByb3BzLm5hbWUudG9Mb3dlckNhc2UoKSB9XHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJzaWdudXAtZm9ybV9faW5wdXQtZmllbGRcIi8+XHJcbiAgICAgICAgPHAgY2xhc3NOYW1lPVwiY2FwdGlvbiBzaWdudXAtZm9ybV9fY2FwdGlvblwiPlxyXG4gICAgICAgICAgeyB0aGlzLnByb3BzLnRleHQgfVxyXG4gICAgICAgIDwvcD5cclxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJzaWdudXAtZm9ybV9fZXJyb3ItbWVzc2FnZVwiPntlcnJvck1lc3NhZ2V9PC9zcGFuPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5GaWVsZC5wcm9wVHlwZXMgPSB7XHJcbiAgbmFtZTogUHJvcFR5cGVzLnN0cmluZyxcclxuICB0ZXh0OiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZyxcclxuICB0eXBlOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIHNldFZhbHVlOiBQcm9wVHlwZXMuYW55LFxyXG4gIGdldFZhbHVlOiBQcm9wVHlwZXMuZnVuYyxcclxuICB2YWxpZGF0aW9uczogUHJvcFR5cGVzLmFueSxcclxuICBnZXRFcnJvck1lc3NhZ2U6IFByb3BUeXBlcy5mdW5jLFxyXG4gIHJlZ2lzdHJhdGlvbjogUHJvcFR5cGVzLmZ1bmNcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEhPQyhGaWVsZCk7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb21wb25lbnRzL0F1dGgvRmllbGQvRmllbGQuanMiLCJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgRm9ybXN5LCB7IEhPQyB9IGZyb20gJ2Zvcm1zeS1yZWFjdCc7XHJcbmltcG9ydCBGaWVsZCBmcm9tICcuLi8uLi9jb21wb25lbnRzL0F1dGgvRmllbGQvRmllbGQnO1xyXG5pbXBvcnQgeyB1cGRhdGVQcm9maWxlUmVxdWVzdCwgZGVsZXRlVXNlclJlcXVlc3QsXHJcbiAgY2xlYXJVcGRhdGVQcm9maWxlU3RhdHVzIH0gZnJvbSAnLi4vLi4vYWN0aW9ucy91c2Vycy5hY3Rpb24nO1xyXG5pbXBvcnQgeyBiaW5kQWN0aW9uQ3JlYXRvcnMgfSBmcm9tICdyZWR1eCc7XHJcbmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL01lc3NhZ2UvTWVzc2FnZSc7XHJcbmltcG9ydCB7IFBvcHVwIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9Qb3B1cC9Qb3B1cCc7XHJcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvQnV0dG9uL0J1dHRvbic7XHJcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCc7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XHJcbmltcG9ydCAnLi9Qcm9maWxlLnNjc3MnO1xyXG5cclxuY2xhc3MgUHJvZmlsZSBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcblxyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgY2FuU3VibWl0OiBmYWxzZSxcclxuICAgICAgYWxsb3dFZGl0TmFtZTogZmFsc2UsXHJcbiAgICAgIGFsbG93RWRpdEVtYWlsOiBmYWxzZSxcclxuICAgICAgYWxsb3dFZGl0SW1hZ2U6IGZhbHNlLFxyXG4gICAgICBhbGxvd0VkaXRQYXNzd29yZDogZmFsc2UsXHJcbiAgICAgIGFsbG93UmVwZWF0UGFzc3dvcmQ6IGZhbHNlLFxyXG4gICAgICB1cGRhdGVJbWFnZVN0YXR1czogJ0Ryb3AgeW91ciBwaG90bycsXHJcbiAgICAgIGltYWdlQmFzZTY0OiBudWxsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0UG9wdXBTaG93biA9IChpZCkgPT4ge1xyXG4gICAgY29uc3QgY3VycmVudFN0YXRlID0gdGhpcy5zdGF0ZS5wb3B1cFNob3duO1xyXG5cclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBwb3B1cFNob3duOiAhY3VycmVudFN0YXRlXHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICB1cGRhdGVQcm9maWxlID0gKCkgPT4ge1xyXG4gICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgbmFtZTogdGhpcy5uYW1lLmdldFZhbHVlKCksXHJcbiAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLmdldFZhbHVlKCksXHJcbiAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkLmdldFZhbHVlKCksXHJcbiAgICAgIHBhc3N3b3JkUmVwZWF0OiB0aGlzLnBhc3N3b3JkUmVwZWF0LmdldFZhbHVlKCksXHJcbiAgICAgIGF2YXRhcjogdGhpcy5iYXNlNjRTdHIsXHJcbiAgICAgIF9pZDogdGhpcy5wcm9wcy51c2VyLl9pZFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnByb3BzLnVwZGF0ZVByb2ZpbGVSZXF1ZXN0KGRhdGEpO1xyXG4gIH07XHJcblxyXG4gIGVuYWJsZUJ1dHRvbiA9ICgpID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBjYW5TdWJtaXQ6IHRydWVcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGRpc2FibGVCdXR0b24gPSAoKSA9PiB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgY2FuU3VibWl0OiBmYWxzZVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgZWRpdE5hbWUgPSAoKSA9PiB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgYWxsb3dFZGl0TmFtZTogIXRoaXMuc3RhdGUuYWxsb3dFZGl0TmFtZVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLmZpZWxkTmFtZS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKTtcclxuICAgIHRoaXMuZmllbGROYW1lLmNsYXNzTGlzdC50b2dnbGUoJ2ZsZXgtZGlzcGxheScpO1xyXG4gIH07XHJcblxyXG4gIGVkaXRFbWFpbCA9ICgpID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBhbGxvd0VkaXRFbWFpbDogIXRoaXMuc3RhdGUuYWxsb3dFZGl0RW1haWxcclxuICAgIH0pO1xyXG4gICAgdGhpcy5maWVsZEVtYWlsLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xyXG4gICAgdGhpcy5maWVsZEVtYWlsLmNsYXNzTGlzdC50b2dnbGUoJ2ZsZXgtZGlzcGxheScpO1xyXG4gIH07XHJcblxyXG4gIGVkaXRQYXNzd29yZCA9ICgpID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBhbGxvd0VkaXRQYXNzd29yZDogIXRoaXMuc3RhdGUuYWxsb3dFZGl0UGFzc3dvcmRcclxuICAgIH0pO1xyXG4gICAgdGhpcy5maWVsZFBhc3N3b3JkLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xyXG4gICAgdGhpcy5maWVsZFBhc3N3b3JkLmNsYXNzTGlzdC50b2dnbGUoJ2ZsZXgtZGlzcGxheScpO1xyXG4gIH07XHJcblxyXG4gIHJlcGVhdFBhc3N3b3JkID0gKCkgPT4ge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGFsbG93UmVwZWF0UGFzc3dvcmQ6ICF0aGlzLnN0YXRlLmFsbG93UmVwZWF0UGFzc3dvcmRcclxuICAgIH0pO1xyXG4gICAgdGhpcy5maWVsZFJlcGVhdFBhc3N3b3JkLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xyXG4gICAgdGhpcy5maWVsZFJlcGVhdFBhc3N3b3JkLmNsYXNzTGlzdC50b2dnbGUoJ2ZsZXgtZGlzcGxheScpO1xyXG4gIH07XHJcblxyXG4gIGVkaXRJbWFnZSA9ICgpID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBhbGxvd0VkaXRJbWFnZTogIXRoaXMuc3RhdGUuYWxsb3dFZGl0SW1hZ2VcclxuICAgIH0pO1xyXG4gICAgdGhpcy5maWVsZEltYWdlLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xyXG4gICAgdGhpcy5maWVsZEltYWdlLmNsYXNzTGlzdC50b2dnbGUoJ2ZsZXgtZGlzcGxheScpO1xyXG4gIH07XHJcblxyXG4gIGRlbGV0ZVVzZXIgPSAoKSA9PiB7XHJcbiAgICB0aGlzLnByb3BzLmRlbGV0ZVVzZXJSZXF1ZXN0KHRoaXMucHJvcHMudXNlcik7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVGaWxlU2VsZWN0ID0gKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRoaXMuc2V0U3RhdGUoeyB1cGRhdGVJbWFnZVN0YXR1czogJ0xvYWRpbmcuLi4nIH0pO1xyXG4gICAgY29uc3QgZmlsZXMgPSBlLmRhdGFUcmFuc2Zlci5maWxlcztcclxuXHJcbiAgICBpZiAoZmlsZXMpIHtcclxuICAgICAgY29uc3QgZmlsZSA9IGZpbGVzWzBdO1xyXG5cclxuICAgICAgaWYgKGZpbGUpIHtcclxuICAgICAgICBjb25zdCBtYXhGaWxlU2l6ZSA9IDEwMjQgKiAxMDI0O1xyXG5cclxuICAgICAgICBpZiAoZmlsZS5zaXplID4gbWF4RmlsZVNpemUpIHtcclxuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyB1cGRhdGVJbWFnZVN0YXR1czogJ0V4Y2VlZGluZyAxTUIgbGltaXQnIH0pO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuXHJcbiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IChyZWFkZXJFdmVudCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgYmluYXJ5U3RyaW5nID0gcmVhZGVyRXZlbnQudGFyZ2V0LnJlc3VsdDtcclxuXHJcbiAgICAgICAgICB0aGlzLmJhc2U2NFN0ciA9ICdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LCcgKyBidG9hKGJpbmFyeVN0cmluZyk7XHJcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaW1hZ2VCYXNlNjQ6IHRoaXMuYmFzZTY0U3RyLCB1cGRhdGVJbWFnZVN0YXR1czogJycgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmVhZGVyLnJlYWRBc0JpbmFyeVN0cmluZyhmaWxlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBwcmV2ZW50RGVmYXVsdCA9IChldmVudCkgPT4ge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZFVwZGF0ZSAoKSB7XHJcbiAgICBpZiAodGhpcy5wcm9wcy51cGRhdGVQcm9maWxlU3RhdHVzID09PSAnRE9ORScpIHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5oaXN0b3J5LnB1c2goJy8nKTtcclxuICAgICAgfSwgMTAwMCk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5wcm9wcy5kZWxldGVQcm9maWxlU3RhdHVzID09PSAnRE9ORScpIHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5oaXN0b3J5LnB1c2goJy9hdXRoJyk7XHJcbiAgICAgIH0sIDEwMDApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyID0gKCkgPT4ge1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgY29uc3QgZHJhZ292ZXJGb3JCb2R5ID0gZSB8fCBldmVudDtcclxuXHJcbiAgICAgIGRyYWdvdmVyRm9yQm9keS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSwgZmFsc2UpO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICBjb25zdCBkcm9wRm9yQm9keSA9IGUgfHwgZXZlbnQ7XHJcblxyXG4gICAgICBkcm9wRm9yQm9keS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSwgZmFsc2UpO1xyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHJvZmlsZS1jb250YWluZXJcIj5cclxuICAgICAgICA8TWVzc2FnZVxyXG4gICAgICAgICAgY2xlYXJTdGF0dXM9e3RoaXMucHJvcHMuY2xlYXJTdGF0dXN9XHJcbiAgICAgICAgICBzdGF0dXM9e3RoaXMucHJvcHMudXBkYXRlUHJvZmlsZVN0YXR1c31cclxuICAgICAgICAgIHRleHQ9e3RoaXMucHJvcHMuZXJyb3JUZXh0fVxyXG4gICAgICAgICAgaGVhZGVyPXsnRXJyb3InfSAvPlxyXG4gICAgICAgIDxGb3Jtc3kuRm9ybVxyXG4gICAgICAgICAgb25TdWJtaXQ9e3RoaXMudXBkYXRlUHJvZmlsZX1cclxuICAgICAgICAgIG9uVmFsaWQ9e3RoaXMuZW5hYmxlQnV0dG9ufVxyXG4gICAgICAgICAgb25JbnZhbGlkPXt0aGlzLmRpc2FibGVCdXR0b259XHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJzaWdudXAtZm9ybSBlZGl0XCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInByb2ZpbGUtaGVhZGVyXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHJvZmlsZS1oZWFkZXJfX3VzZXItaW1hZ2UtYm94XCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcm9maWxlLWhlYWRlcl9fdXNlci1pbWFnZS1lZGl0XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17dGhpcy5wcm9wcy51c2VyLmF2YXRhciA/XHJcbiAgICAgICAgICAgICAgICAgICd2aXNpYmxlJyA6XHJcbiAgICAgICAgICAgICAgICAgICdoaWRkZW4nXHJcbiAgICAgICAgICAgICAgICB9PlxyXG4gICAgICAgICAgICAgICAgICA8aW1nIGNsYXNzTmFtZT1cInByb2ZpbGUtaGVhZGVyX191c2VyLWltYWdlXCJcclxuICAgICAgICAgICAgICAgICAgICBzcmM9e3RoaXMucHJvcHMudXNlci5hdmF0YXJ9IC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXt0aGlzLnByb3BzLnVzZXIuYXZhdGFyID9cclxuICAgICAgICAgICAgICAgICAgJ2hpZGRlbicgOlxyXG4gICAgICAgICAgICAgICAgICAndmlzaWJsZSdcclxuICAgICAgICAgICAgICAgIH0+XHJcbiAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLXVzZXItY2lyY2xlLW8gcGhvdG9cIj48L2k+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLXBlbmNpbCBlZGl0LXVzZXItaW5mbyBlZGl0LWltYWdlXCJcclxuICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5lZGl0SW1hZ2V9IC8+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhpZGRlblwiXHJcbiAgICAgICAgICAgICAgICAgIHJlZj17KGVsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWVsZEltYWdlID0gZWw7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICBvbkRyb3A9e3RoaXMuaGFuZGxlRmlsZVNlbGVjdH1cclxuICAgICAgICAgICAgICAgICAgb25EcmFnT3Zlcj17dGhpcy5wcmV2ZW50RGVmYXVsdH0+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS51cGRhdGVJbWFnZVN0YXR1cyAhPT0gJycgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAncHJvZmlsZS1oZWFkZXJfX3VzZXItZHJvcC1hcmlhJyA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdwcm9maWxlLWhlYWRlcl9fdXNlci1kcm9wLWltYWdlIGhpZGRlbidcclxuICAgICAgICAgICAgICAgICAgICB9Pnt0aGlzLnN0YXRlLnVwZGF0ZUltYWdlU3RhdHVzfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3NOYW1lPXtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUudXBkYXRlSW1hZ2VTdGF0dXMgIT09ICcnID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3Byb2ZpbGUtaGVhZGVyX191c2VyLWltYWdlIGhpZGRlbicgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAncHJvZmlsZS1oZWFkZXJfX3VzZXItaW1hZ2UnXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgc3JjPXt0aGlzLnN0YXRlLmltYWdlQmFzZTY0fSAvPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcm9maWxlLWhlYWRlcl9fdXNlci1uYW1lXCI+XHJcbiAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy51c2VyLm5hbWV9XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9XCJlZGl0LXByb2ZpbGVfX3VzZXItaW5mb1wiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImVkaXQtcHJvZmlsZS1uYW1lXCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJlZGl0LXByb2ZpbGVfX3VzZXItbmFtZS1jb250YWluZXJcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidXNlci1uYW1lX19ib3hcIj5cclxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidXNlci1uYW1lX190aXRsZVwiPk5hbWU8L3A+XHJcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInVzZXItbmFtZV9fbG9nZ2VkLW5hbWVcIj5cclxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy51c2VyLm5hbWV9XHJcbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJlZGl0LXVzZXItaW5mb19faWNvblwiPlxyXG4gICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1wZW5jaWwgZWRpdC11c2VyLWluZm9cIlxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuZWRpdE5hbWV9IC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoaWRkZW5cIlxyXG4gICAgICAgICAgICAgICAgcmVmPXsoZWwpID0+IHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5maWVsZE5hbWUgPSBlbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0+XHJcbiAgICAgICAgICAgICAgICA8RmllbGRcclxuICAgICAgICAgICAgICAgICAgbmFtZT1cIiBcIlxyXG4gICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgICAgICAgIHRleHQ9eydFbnRlciB5b3VyIG5ldyBuYW1lJ31cclxuICAgICAgICAgICAgICAgICAgcmVmPXsoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hbWUgPSBpbnB1dDtcclxuICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMucHJvcHMudXNlci5uYW1lfVxyXG4gICAgICAgICAgICAgICAgICB2YWxpZGF0aW9ucz1cImlzQWxwaGFcIlxyXG4gICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3I9XCJUaGlzIGlzIG5vdCBhIHZhbGlkIG5hbWVcIlxyXG4gICAgICAgICAgICAgICAgICByZXF1aXJlZFxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZWRpdC1wcm9maWxlLWVtYWlsXCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJlZGl0LXByb2ZpbGVfX3VzZXItZW1haWwtY29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInVzZXItZW1haWxfX2JveFwiPlxyXG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ1c2VyLWVtYWlsX190aXRsZVwiPkVtYWlsPC9wPlxyXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ1c2VyLWVtYWlsX19sb2dnZWQtZW1haWxcIj5cclxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy51c2VyLmVtYWlsfVxyXG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZWRpdC11c2VyLWluZm9fX2ljb25cIj5cclxuICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtcGVuY2lsIGVkaXQtdXNlci1pbmZvXCJcclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmVkaXRFbWFpbH0gLz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhpZGRlblwiXHJcbiAgICAgICAgICAgICAgICByZWY9eyhlbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmZpZWxkRW1haWwgPSBlbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0+XHJcbiAgICAgICAgICAgICAgICA8RmllbGRcclxuICAgICAgICAgICAgICAgICAgbmFtZT1cIiBcIlxyXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoaWRkZW5cIlxyXG4gICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgICAgICAgIHRleHQ9eydFbnRlciB5b3VyIG5ldyBlLW1haWwnfVxyXG4gICAgICAgICAgICAgICAgICByZWY9eyhpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1haWwgPSBpbnB1dDtcclxuICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMucHJvcHMudXNlci5lbWFpbH1cclxuICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbnM9XCJpc0VtYWlsXCJcclxuICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9yPVwiVGhpcyBpcyBub3QgYSB2YWxpZCBlbWFpbFwiXHJcbiAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9zZWN0aW9uPlxyXG4gICAgICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9XCJlZGl0LXByb2ZpbGVfX3VzZXItaW5mby1wYXNzd29yZFwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImVkaXQtcHJvZmlsZS1wYXNzd29yZFwiPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZWRpdC1wcm9maWxlX191c2VyLXBhc3N3b3JkLWNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1c2VyLXBhc3N3b3JkX19ib3hcIj5cclxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidXNlci1wYXNzd29yZF9fdGl0bGVcIj5QYXNzd29yZDwvcD5cclxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidXNlci1wYXNzd29yZF9fbG9nZ2VkLXBhc3N3b3JkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMudXNlci5wYXNzd29yZH1cclxuICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImVkaXQtdXNlci1pbmZvX19pY29uXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLXBlbmNpbCBlZGl0LXVzZXItaW5mbyBmYS1wYXNzd29yZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5lZGl0UGFzc3dvcmR9IC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoaWRkZW5cIlxyXG4gICAgICAgICAgICAgICAgcmVmPXsoZWwpID0+IHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5maWVsZFBhc3N3b3JkID0gZWw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9PlxyXG4gICAgICAgICAgICAgICAgPEZpZWxkXHJcbiAgICAgICAgICAgICAgICAgIG5hbWU9XCJQYXNzd29yZFwiXHJcbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwYXNzd29yZFwiXHJcbiAgICAgICAgICAgICAgICAgIHRleHQ9eydFbnRlciB5b3VyIG5ldyBwYXNzd29yZCd9XHJcbiAgICAgICAgICAgICAgICAgIHJlZj17KGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXNzd29yZCA9IGlucHV0O1xyXG4gICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICB2YWxpZGF0aW9ucz0ge3tcclxuICAgICAgICAgICAgICAgICAgICBtaW5MZW5ndGg6IDcsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNBbHBoYW51bWVyaWM6IHRydWVcclxuICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9yPVwiVGhpcyBpcyBub3QgYSB2YWxpZCBwYXNzd29yZFwiXHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJlZGl0LXByb2ZpbGUtcmVwZWF0LXBhc3N3b3JkXCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJlZGl0LXByb2ZpbGVfX3VzZXItcmVwZWF0LXBhc3N3b3JkLWNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1c2VyLXJlcGVhdC1wYXNzd29yZF9fYm94XCI+XHJcbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInVzZXItcmVwZWF0LXBhc3N3b3JkX190aXRsZVwiPlJlcGVhdCBQYXNzd29yZDwvcD5cclxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidXNlci1yZXBlYXQtcGFzc3dvcmRfX2xvZ2dlZC1wYXNzd29yZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLnVzZXIucGFzc3dvcmRSZXBlYXR9XHJcbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJlZGl0LXVzZXItaW5mb19faWNvblwiPlxyXG4gICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1wZW5jaWwgZWRpdC11c2VyLWluZm8gZmEtcGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucmVwZWF0UGFzc3dvcmR9IC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoaWRkZW5cIlxyXG4gICAgICAgICAgICAgICAgcmVmPXsoZWwpID0+IHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5maWVsZFJlcGVhdFBhc3N3b3JkID0gZWw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9PlxyXG4gICAgICAgICAgICAgICAgPEZpZWxkXHJcbiAgICAgICAgICAgICAgICAgIG5hbWU9XCJSZXBlYXQgUGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgICB0eXBlPVwicGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgICB0ZXh0PXsnUGxlYXNlIHJlcGVhdCB5b3VyIHBhc3N3b3JkJ31cclxuICAgICAgICAgICAgICAgICAgcmVmPXsoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhc3N3b3JkUmVwZWF0ID0gaW5wdXQ7XHJcbiAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25zPVwiZXF1YWxzRmllbGQ6UGFzc3dvcmRcIlxyXG4gICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3I9XCJQYXNzd29yZCBkb2VzIG5vdCBtYXRjaFwiXHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvc2VjdGlvbj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2lnbnVwLWZpZWxkLWdyb3VwIHNpZ251cC1idG4tZ3JvdXAgZWRpdFwiPlxyXG4gICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcclxuICAgICAgICAgICAgICBkaXNhYmxlZD17IXRoaXMuc3RhdGUuY2FuU3VibWl0fVxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tLXNpZ251cCBidG4tLXNpZ251cC1hY3RpdmUgZWRpdFwiXHJcbiAgICAgICAgICAgICAgdmFsdWU9XCJTdWJtaXRcIiAvPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGVsZXRlLXVzZXItcHJvZmlsZV9faWNvblwiPlxyXG4gICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS10cmFzaFwiXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5zZXRQb3B1cFNob3dufSAvPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L0Zvcm1zeS5Gb3JtPlxyXG4gICAgICAgIDxQb3B1cFxyXG4gICAgICAgICAgc2V0UG9wdXBTaG93bj17dGhpcy5zZXRQb3B1cFNob3dufVxyXG4gICAgICAgICAgcG9wdXBTaG93bj17dGhpcy5zdGF0ZS5wb3B1cFNob3dufVxyXG4gICAgICAgICAgaGVhZGVyPVwiQ29uZmlybSB0aGUgYWN0aW9uXCJcclxuICAgICAgICAgIHRleHQ9eydBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHlvdXIgYWNjb3VudD8nfT5cclxuICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgc2V0UG9wdXBTaG93bj17dGhpcy5zZXRQb3B1cFNob3dufVxyXG4gICAgICAgICAgICBva0hhbmRsZXI9eygpID0+IHtcclxuICAgICAgICAgICAgICB0aGlzLmRlbGV0ZVVzZXIoKTtcclxuICAgICAgICAgICAgICB0aGlzLnNldFBvcHVwU2hvd24oKTtcclxuICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgY2xhc3NOYW1lPXtcclxuICAgICAgICAgICAgICAnYnRuIHBvcHVwX19idG4nfVxyXG4gICAgICAgICAgICBpbm5lclRleHQ9eydPayd9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICBva0hhbmRsZXI9eygpID0+IHtcclxuICAgICAgICAgICAgICB0aGlzLnNldFBvcHVwU2hvd24oKTtcclxuICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgY2xhc3NOYW1lPXsnYnRuIGJ0bi0tZGVmYXVsdCBwb3B1cF9fYnRuJ31cclxuICAgICAgICAgICAgaW5uZXJUZXh0PXsnQ2FuY2VsJ31cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgPC9Qb3B1cD5cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzIChzdG9yZSkge1xyXG4gIHJldHVybiB7XHJcbiAgICB1cGRhdGVQcm9maWxlU3RhdHVzOiBzdG9yZS51c2Vycy51cGRhdGVQcm9maWxlU3RhdHVzLFxyXG4gICAgZGVsZXRlUHJvZmlsZVN0YXR1czogIHN0b3JlLnVzZXJzLmRlbGV0ZVByb2ZpbGVTdGF0dXMsXHJcbiAgICBlcnJvclRleHQ6IHN0b3JlLnVzZXJzLnVzZXIuZXJyb3JUZXh0LFxyXG4gICAgdXNlcjogc3RvcmUudXNlcnMudXNlclxyXG4gIH07XHJcbn1cclxuZnVuY3Rpb24gbWFwRGlzcGF0Y2hUb1Byb3BzIChkaXNwYXRjaCkge1xyXG4gIHJldHVybiB7XHJcbiAgICB1cGRhdGVQcm9maWxlUmVxdWVzdDogYmluZEFjdGlvbkNyZWF0b3JzKHVwZGF0ZVByb2ZpbGVSZXF1ZXN0LCBkaXNwYXRjaCksXHJcbiAgICBkZWxldGVVc2VyUmVxdWVzdDogYmluZEFjdGlvbkNyZWF0b3JzKGRlbGV0ZVVzZXJSZXF1ZXN0LCBkaXNwYXRjaCksXHJcbiAgICBjbGVhclN0YXR1czogYmluZEFjdGlvbkNyZWF0b3JzKGNsZWFyVXBkYXRlUHJvZmlsZVN0YXR1cywgZGlzcGF0Y2gpXHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMsIG1hcERpc3BhdGNoVG9Qcm9wcykoUHJvZmlsZSk7XHJcblxyXG5Qcm9maWxlLnByb3BUeXBlcyA9IHtcclxuICB1cGRhdGVQcm9maWxlU3RhdHVzOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIHVwZGF0ZVByb2ZpbGVSZXF1ZXN0OiBQcm9wVHlwZXMuZnVuYyxcclxuICBkZWxldGVVc2VyUmVxdWVzdDogUHJvcFR5cGVzLmZ1bmMsXHJcbiAgZGVsZXRlUHJvZmlsZVN0YXR1czogUHJvcFR5cGVzLnN0cmluZyxcclxuICB1c2VyOiBQcm9wVHlwZXMub2JqZWN0LFxyXG4gIGVtYWlsOiBQcm9wVHlwZXMub2JqZWN0LFxyXG4gIHBhc3N3b3JkOiBQcm9wVHlwZXMub2JqZWN0LFxyXG4gIHBhc3N3b3JkUmVwZWF0OiBQcm9wVHlwZXMub2JqZWN0LFxyXG4gIGVycm9yVGV4dDogUHJvcFR5cGVzLnN0cmluZyxcclxuICB2YWx1ZTogUHJvcFR5cGVzLm9iamVjdCxcclxuICBoaXN0b3J5OiBQcm9wVHlwZXMub2JqZWN0LFxyXG4gIGNsZWFyU3RhdHVzOiBQcm9wVHlwZXMuZnVuY1xyXG59O1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvcGFnZXMvUHJvZmlsZS9Qcm9maWxlLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==