webpackJsonp([6],{"./node_modules/create-react-class/index.js":function(e,t,r){"use strict";var a=r("./node_modules/react/react.js"),i=r("./node_modules/create-react-class/factory.js");if(void 0===a)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var s=(new a.Component).updater;e.exports=i(a.Component,a.isValidElement,s)},"./node_modules/form-data-to-object/index.js":function(e,t,r){"use strict";function a(e){return Object.keys(e).reduce(function(t,r){var a=r.match(/[^\[]*/i),i=r.match(/\[.*?\]/g)||[];i=[a[0]].concat(i).map(function(e){return e.replace(/\[|\]/g,"")});for(var s=t;i.length;){var n=i.shift();n in s?s=s[n]:(s[n]=i.length?isNaN(i[0])?{}:[]:e[r],s=s[n])}return t},{})}function i(e){function t(e,r,a){return Array.isArray(a)||"[object Object]"===Object.prototype.toString.call(a)?(Object.keys(a).forEach(function(i){t(e,r+"["+i+"]",a[i])}),e):(e[r]=a,e)}return Object.keys(e).reduce(function(r,a){return t(r,a,e[a])},{})}e.exports={fromObj:i,toObj:a}},"./node_modules/formsy-react/lib/Decorator.js":function(e,t,r){"use strict";(function(t){var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},i=t.React||r("./node_modules/react/react.js"),s=r("./node_modules/create-react-class/index.js"),n=r("./node_modules/formsy-react/lib/Mixin.js");e.exports=function(){return function(e){return s({mixins:[n],render:function(){return i.createElement(e,a({setValidations:this.setValidations,setValue:this.setValue,resetValue:this.resetValue,getValue:this.getValue,hasValue:this.hasValue,getErrorMessage:this.getErrorMessage,getErrorMessages:this.getErrorMessages,isFormDisabled:this.isFormDisabled,isValid:this.isValid,isPristine:this.isPristine,isFormSubmitted:this.isFormSubmitted,isRequired:this.isRequired,showRequired:this.showRequired,showError:this.showError,isValidValue:this.isValidValue},this.props))}})}}}).call(t,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/formsy-react/lib/HOC.js":function(e,t,r){"use strict";(function(t){function a(e){return e.displayName||e.name||("string"==typeof e?e:"Component")}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},s=t.React||r("./node_modules/react/react.js"),n=r("./node_modules/create-react-class/index.js"),o=r("./node_modules/formsy-react/lib/Mixin.js");e.exports=function(e){return n({displayName:"Formsy("+a(e)+")",mixins:[o],render:function(){var t=this.props.innerRef,r=i({setValidations:this.setValidations,setValue:this.setValue,resetValue:this.resetValue,getValue:this.getValue,hasValue:this.hasValue,getErrorMessage:this.getErrorMessage,getErrorMessages:this.getErrorMessages,isFormDisabled:this.isFormDisabled,isValid:this.isValid,isPristine:this.isPristine,isFormSubmitted:this.isFormSubmitted,isRequired:this.isRequired,showRequired:this.showRequired,showError:this.showError,isValidValue:this.isValidValue},this.props);return t&&(r.ref=t),s.createElement(e,r)}})}}).call(t,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/formsy-react/lib/Mixin.js":function(e,t,r){"use strict";(function(t){var a=r("./node_modules/prop-types/index.js"),i=r("./node_modules/formsy-react/lib/utils.js"),s=(t.React||r("./node_modules/react/react.js"),function(e){return"string"==typeof e?e.split(/\,(?![^{\[]*[}\]])/g).reduce(function(e,t){var r=t.split(":"),a=r.shift();if(r=r.map(function(e){try{return JSON.parse(e)}catch(t){return e}}),r.length>1)throw new Error("Formsy does not support multiple args on string validations. Use object format of validations instead.");return e[a]=!r.length||r[0],e},{}):e||{}});e.exports={getInitialState:function(){return{_value:this.props.value,_isRequired:!1,_isValid:!0,_isPristine:!0,_pristineValue:this.props.value,_validationError:[],_externalError:null,_formSubmitted:!1}},contextTypes:{formsy:a.object},getDefaultProps:function(){return{validationError:"",validationErrors:{}}},componentWillMount:function(){var e=function(){this.setValidations(this.props.validations,this.props.required),this.context.formsy.attachToForm(this)}.bind(this);if(!this.props.name)throw new Error("Form Input requires a name property when used");e()},componentWillReceiveProps:function(e){this.setValidations(e.validations,e.required)},componentDidUpdate:function(e){i.isSame(this.props.value,e.value)||this.setValue(this.props.value),i.isSame(this.props.validations,e.validations)&&i.isSame(this.props.required,e.required)||this.context.formsy.validate(this)},componentWillUnmount:function(){this.context.formsy.detachFromForm(this)},setValidations:function(e,t){this._validations=s(e)||{},this._requiredValidations=!0===t?{isDefaultRequiredValue:!0}:s(t)},setValue:function(e){this.setState({_value:e,_isPristine:!1},function(){this.context.formsy.validate(this)}.bind(this))},resetValue:function(){this.setState({_value:this.state._pristineValue,_isPristine:!0},function(){this.context.formsy.validate(this)})},getValue:function(){return this.state._value},hasValue:function(){return""!==this.state._value},getErrorMessage:function(){var e=this.getErrorMessages();return e.length?e[0]:null},getErrorMessages:function(){return!this.isValid()||this.showRequired()?this.state._externalError||this.state._validationError||[]:[]},isFormDisabled:function(){return this.context.formsy.isFormDisabled()},isValid:function(){return this.state._isValid},isPristine:function(){return this.state._isPristine},isFormSubmitted:function(){return this.state._formSubmitted},isRequired:function(){return!!this.props.required},showRequired:function(){return this.state._isRequired},showError:function(){return!this.showRequired()&&!this.isValid()},isValidValue:function(e){return this.context.formsy.isValidValue.call(null,this,e)}}}).call(t,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/formsy-react/lib/main.js":function(e,t,r){"use strict";(function(t){function a(e,t){var r={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},n="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)},o=r("./node_modules/prop-types/index.js"),u=t.React||r("./node_modules/react/react.js"),l=r("./node_modules/create-react-class/index.js"),d={},c=r("./node_modules/formsy-react/lib/validationRules.js"),f=r("./node_modules/form-data-to-object/index.js"),p=r("./node_modules/formsy-react/lib/utils.js"),m=r("./node_modules/formsy-react/lib/Mixin.js"),h=r("./node_modules/formsy-react/lib/HOC.js"),F=r("./node_modules/formsy-react/lib/Decorator.js"),v={},g=[];d.Mixin=m,d.HOC=h,d.Decorator=F,d.defaults=function(e){v=e},d.addValidationRule=function(e,t){c[e]=t},d.Form=l({displayName:"Formsy",getInitialState:function(){return{isValid:!0,isSubmitting:!1,canChange:!1}},getDefaultProps:function(){return{onSuccess:function(){},onError:function(){},onSubmit:function(){},onValidSubmit:function(){},onInvalidSubmit:function(){},onValid:function(){},onInvalid:function(){},onChange:function(){},validationErrors:null,preventExternalInvalidation:!1}},childContextTypes:{formsy:o.object},getChildContext:function(){var e=this;return{formsy:{attachToForm:this.attachToForm,detachFromForm:this.detachFromForm,validate:this.validate,isFormDisabled:this.isFormDisabled,isValidValue:function(t,r){return e.runValidation(t,r).isValid}}}},componentWillMount:function(){this.inputs=[]},componentDidMount:function(){this.validateForm()},componentWillUpdate:function(){this.prevInputNames=this.inputs.map(function(e){return e.props.name})},componentDidUpdate:function(){this.props.validationErrors&&"object"===n(this.props.validationErrors)&&Object.keys(this.props.validationErrors).length>0&&this.setInputValidationErrors(this.props.validationErrors);var e=this.inputs.map(function(e){return e.props.name});p.arraysDiffer(this.prevInputNames,e)&&this.validateForm()},reset:function(e){this.setFormPristine(!0),this.resetModel(e)},submit:function(e){e&&e.preventDefault(),this.setFormPristine(!1);var t=this.getModel();this.props.onSubmit(t,this.resetModel,this.updateInputsWithError),this.state.isValid?this.props.onValidSubmit(t,this.resetModel,this.updateInputsWithError):this.props.onInvalidSubmit(t,this.resetModel,this.updateInputsWithError)},mapModel:function(e){return this.props.mapping?this.props.mapping(e):f.toObj(Object.keys(e).reduce(function(t,r){for(var a=r.split("."),i=t;a.length;){var s=a.shift();i=i[s]=a.length?i[s]||{}:e[r]}return t},{}))},getModel:function(){var e=this.getCurrentValues();return this.mapModel(e)},resetModel:function(e){this.inputs.forEach(function(t){var r=t.props.name;e&&e.hasOwnProperty(r)?t.setValue(e[r]):t.resetValue()}),this.validateForm()},setInputValidationErrors:function(e){this.inputs.forEach(function(t){var r=t.props.name,a=[{_isValid:!(r in e),_validationError:"string"==typeof e[r]?[e[r]]:e[r]}];t.setState.apply(t,a)})},isChanged:function(){return!p.isSame(this.getPristineValues(),this.getCurrentValues())},getPristineValues:function(){return this.inputs.reduce(function(e,t){return e[t.props.name]=t.props.value,e},{})},updateInputsWithError:function(e){var t=this;Object.keys(e).forEach(function(r,a){var i=p.find(t.inputs,function(e){return e.props.name===r});if(!i)throw new Error("You are trying to update an input that does not exist. Verify errors object with input names. "+JSON.stringify(e));var s=[{_isValid:t.props.preventExternalInvalidation||!1,_externalError:"string"==typeof e[r]?[e[r]]:e[r]}];i.setState.apply(i,s)})},isFormDisabled:function(){return this.props.disabled},getCurrentValues:function(){return this.inputs.reduce(function(e,t){return e[t.props.name]=t.state._value,e},{})},setFormPristine:function(e){this.setState({_formSubmitted:!e}),this.inputs.forEach(function(t,r){t.setState({_formSubmitted:!e,_isPristine:e})})},validate:function(e){this.state.canChange&&this.props.onChange(this.getCurrentValues(),this.isChanged());var t=this.runValidation(e);e.setState({_isValid:t.isValid,_isRequired:t.isRequired,_validationError:t.error,_externalError:null},this.validateForm)},runValidation:function(e,t){var r=this.getCurrentValues(),a=e.props.validationErrors,i=e.props.validationError;t=2===arguments.length?t:e.state._value;var s=this.runRules(t,r,e._validations),n=this.runRules(t,r,e._requiredValidations);"function"==typeof e.validate&&(s.failed=e.validate()?[]:["failed"]);var o=!!Object.keys(e._requiredValidations).length&&!!n.success.length,u=!(s.failed.length||this.props.validationErrors&&this.props.validationErrors[e.props.name]);return{isRequired:o,isValid:!o&&u,error:function(){if(u&&!o)return g;if(s.errors.length)return s.errors;if(this.props.validationErrors&&this.props.validationErrors[e.props.name])return"string"==typeof this.props.validationErrors[e.props.name]?[this.props.validationErrors[e.props.name]]:this.props.validationErrors[e.props.name];if(o){var t=a[n.success[0]];return t?[t]:null}return s.failed.length?s.failed.map(function(e){return a[e]?a[e]:i}).filter(function(e,t,r){return r.indexOf(e)===t}):void 0}.call(this)}},runRules:function(e,t,r){var a={errors:[],failed:[],success:[]};return Object.keys(r).length&&Object.keys(r).forEach(function(i){if(c[i]&&"function"==typeof r[i])throw new Error("Formsy does not allow you to override default validations: "+i);if(!c[i]&&"function"!=typeof r[i])throw new Error("Formsy does not have the validation rule: "+i);if("function"==typeof r[i]){var s=r[i](t,e);return void("string"==typeof s?(a.errors.push(s),a.failed.push(i)):s||a.failed.push(i))}if("function"!=typeof r[i]){var s=c[i](t,e,r[i]);return void("string"==typeof s?(a.errors.push(s),a.failed.push(i)):s?a.success.push(i):a.failed.push(i))}return a.success.push(i)}),a},validateForm:function(){var e=this,t=function(){var e=this.inputs.every(function(e){return e.state._isValid});this.setState({isValid:e}),e?this.props.onValid():this.props.onInvalid(),this.setState({canChange:!0})}.bind(this);this.inputs.forEach(function(r,a){var i=e.runValidation(r);i.isValid&&r.state._externalError&&(i.isValid=!1),r.setState({_isValid:i.isValid,_isRequired:i.isRequired,_validationError:i.error,_externalError:!i.isValid&&r.state._externalError?r.state._externalError:null},a===e.inputs.length-1?t:null)}),this.inputs.length||this.setState({canChange:!0})},attachToForm:function(e){-1===this.inputs.indexOf(e)&&this.inputs.push(e),this.validate(e)},detachFromForm:function(e){var t=this.inputs.indexOf(e);-1!==t&&(this.inputs=this.inputs.slice(0,t).concat(this.inputs.slice(t+1))),this.validateForm()},render:function(){var e=this.props,t=(e.mapping,e.validationErrors,e.onSubmit,e.onValid,e.onValidSubmit,e.onInvalid,e.onInvalidSubmit,e.onChange,e.reset,e.preventExternalInvalidation,e.onSuccess,e.onError,a(e,["mapping","validationErrors","onSubmit","onValid","onValidSubmit","onInvalid","onInvalidSubmit","onChange","reset","preventExternalInvalidation","onSuccess","onError"]));return u.createElement("form",s({},t,{onSubmit:this.submit}),this.props.children)}}),t.exports||t.module||t.define&&t.define.amd||(t.Formsy=d),e.exports=d}).call(t,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/formsy-react/lib/utils.js":function(e,t,r){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};e.exports={arraysDiffer:function(e,t){var r=!1;return e.length!==t.length?r=!0:e.forEach(function(e,a){this.isSame(e,t[a])||(r=!0)},this),r},objectsDiffer:function(e,t){var r=!1;return Object.keys(e).length!==Object.keys(t).length?r=!0:Object.keys(e).forEach(function(a){this.isSame(e[a],t[a])||(r=!0)},this),r},isSame:function(e,t){return(void 0===e?"undefined":i(e))===(void 0===t?"undefined":i(t))&&(Array.isArray(e)&&Array.isArray(t)?!this.arraysDiffer(e,t):"function"==typeof e?e.toString()===t.toString():"object"===(void 0===e?"undefined":i(e))&&null!==e&&null!==t?!this.objectsDiffer(e,t):e===t)},find:function(e,t){for(var r=0,a=e.length;r<a;r++){var i=e[r];if(t(i))return i}return null}}},"./node_modules/formsy-react/lib/validationRules.js":function(e,t,r){"use strict";var a=function(e){return null!==e&&void 0!==e},i=function(e){return""===e},s={isDefaultRequiredValue:function(e,t){return void 0===t||""===t},isExisty:function(e,t){return a(t)},matchRegexp:function(e,t,r){return!a(t)||i(t)||r.test(t)},isUndefined:function(e,t){return void 0===t},isEmptyString:function(e,t){return i(t)},isEmail:function(e,t){return s.matchRegexp(e,t,/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i)},isUrl:function(e,t){return s.matchRegexp(e,t,/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i)},isTrue:function(e,t){return!0===t},isFalse:function(e,t){return!1===t},isNumeric:function(e,t){return"number"==typeof t||s.matchRegexp(e,t,/^[-+]?(?:\d*[.])?\d+$/)},isAlpha:function(e,t){return s.matchRegexp(e,t,/^[A-Z]+$/i)},isAlphanumeric:function(e,t){return s.matchRegexp(e,t,/^[0-9A-Z]+$/i)},isInt:function(e,t){return s.matchRegexp(e,t,/^(?:[-+]?(?:0|[1-9]\d*))$/)},isFloat:function(e,t){return s.matchRegexp(e,t,/^(?:[-+]?(?:\d+))?(?:\.\d*)?(?:[eE][\+\-]?(?:\d+))?$/)},isWords:function(e,t){return s.matchRegexp(e,t,/^[A-Z\s]+$/i)},isSpecialWords:function(e,t){return s.matchRegexp(e,t,/^[A-Z\s\u00C0-\u017F]+$/i)},isLength:function(e,t,r){return!a(t)||i(t)||t.length===r},equals:function(e,t,r){return!a(t)||i(t)||t==r},equalsField:function(e,t,r){return t==e[r]},maxLength:function(e,t,r){return!a(t)||t.length<=r},minLength:function(e,t,r){return!a(t)||i(t)||t.length>=r}};e.exports=s},"./src/components/Auth/Field/Field.js":function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),u=r("./node_modules/react/react.js"),l=a(u),d=r("./node_modules/formsy-react/lib/main.js"),c=(a(d),r("./node_modules/prop-types/index.js")),f=a(c),p=function(e){function t(e){i(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.changeValue=function(e){r.props.setValue(e.currentTarget["checkbox"===r.props.type?"checked":"value"])},r}return n(t,e),o(t,[{key:"render",value:function(){var e=this.props.getErrorMessage();return l.default.createElement("div",{className:"signup-field-group"},l.default.createElement("label",{htmlFor:this.props.name.toLowerCase(),className:"signup-form__label"},this.props.name),l.default.createElement("input",{onChange:this.changeValue,value:this.props.getValue(),type:this.props.type||"text",name:this.props.name.toLowerCase(),className:"signup-form__input-field"}),l.default.createElement("p",{className:"caption signup-form__caption"},this.props.text),l.default.createElement("span",{className:"signup-form__error-message"},e))}}]),t}(l.default.Component);p.propTypes={name:f.default.string,text:f.default.string,className:f.default.string,type:f.default.string,setValue:f.default.any,getValue:f.default.func,validations:f.default.any,getErrorMessage:f.default.func,registration:f.default.func},t.default=(0,d.HOC)(p)},"./src/pages/Profile/Profile.js":function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return{updateProfileStatus:e.users.updateProfileStatus,errorText:e.users.user.errorText,user:e.users.user}}function u(e){return{updateProfileRequest:(0,v.bindActionCreators)(F.updateProfileRequest,e),deleteUserRequest:(0,v.bindActionCreators)(F.deleteUserRequest,e),clearStatus:(0,v.bindActionCreators)(F.clearUpdateProfileStatus,e)}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),d=r("./node_modules/react/react.js"),c=a(d),f=r("./node_modules/formsy-react/lib/main.js"),p=a(f),m=r("./src/components/Auth/Field/Field.js"),h=a(m),F=r("./src/actions/users.action.js"),v=r("./node_modules/redux/es/index.js"),g=r("./src/components/Message/Message.js"),E=r("./src/components/Popup/Popup.js"),b=r("./src/components/Button/Button.js"),y=r("./node_modules/react-redux/es/index.js"),_=r("./node_modules/prop-types/index.js"),w=a(_);r("./src/pages/Profile/Profile.scss");var x=function(e){function t(e){i(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.setPopupShown=function(e){var t=r.state.popupShown;r.setState({popupShown:!t})},r.updateProfile=function(){var e={name:r.name.getValue(),email:r.email.getValue(),password:r.password.getValue(),passwordRepeat:r.passwordRepeat.getValue(),avatar:r.base64Str,_id:r.props.user._id};r.props.updateProfileRequest(e)},r.enableButton=function(){r.setState({canSubmit:!0})},r.disableButton=function(){r.setState({canSubmit:!1})},r.editName=function(){r.setState({allowEditName:!r.state.allowEditName}),r.fieldName.classList.toggle("hidden"),r.fieldName.classList.toggle("flex-display")},r.editEmail=function(){r.setState({allowEditEmail:!r.state.allowEditEmail}),r.fieldEmail.classList.toggle("hidden"),r.fieldEmail.classList.toggle("flex-display")},r.editPassword=function(){r.setState({allowEditPassword:!r.state.allowEditPassword}),r.fieldPassword.classList.toggle("hidden"),r.fieldPassword.classList.toggle("flex-display")},r.repeatPassword=function(){r.setState({allowRepeatPassword:!r.state.allowRepeatPassword}),r.fieldRepeatPassword.classList.toggle("hidden"),r.fieldRepeatPassword.classList.toggle("flex-display")},r.editImage=function(){r.setState({allowEditImage:!r.state.allowEditImage}),r.fieldImage.classList.toggle("hidden"),r.fieldImage.classList.toggle("flex-display")},r.deleteUser=function(){r.props.deleteUserRequest(r.props.user)},r.handleFileSelect=function(e){e.preventDefault(),r.setState({updateImageStatus:"Loading..."});var t=e.dataTransfer.files;if(t){var a=t[0];if(a){if(a.size>1048576)return void r.setState({updateImageStatus:"Exceeding 1MB limit"});var i=new FileReader;i.onload=function(e){var t=e.target.result;r.base64Str="data:image/jpeg;base64,"+btoa(t),r.setState({imageBase64:r.base64Str,updateImageStatus:""})},i.readAsBinaryString(a)}}},r.preventDefault=function(e){e.preventDefault()},r.render=function(){return window.addEventListener("dragover",function(e){e||event;event.preventDefault()},!1),window.addEventListener("drop",function(e){(e||event).preventDefault()},!1),c.default.createElement("div",{className:"profile-container"},c.default.createElement(g.Message,{clearStatus:r.props.clearStatus,status:r.props.updateProfileStatus,text:r.props.errorText,header:"Error"}),c.default.createElement(p.default.Form,{onSubmit:r.updateProfile,onValid:r.enableButton,onInvalid:r.disableButton,className:"signup-form edit"},c.default.createElement("div",{className:"profile-header"},c.default.createElement("div",{className:"profile-header__user-image-box"},c.default.createElement("div",{className:"profile-header__user-image-edit"},c.default.createElement("div",{className:r.props.user.avatar?"visible":"hidden"},c.default.createElement("img",{className:"profile-header__user-image",src:r.props.user.avatar})),c.default.createElement("div",{className:r.props.user.avatar?"hidden":"visible"},c.default.createElement("i",{className:"fa fa-user-circle-o photo"})),c.default.createElement("i",{className:"fa fa-pencil edit-user-info edit-image",onClick:r.editImage}),c.default.createElement("div",{className:"hidden",ref:function(e){r.fieldImage=e},onDrop:r.handleFileSelect,onDragOver:r.preventDefault},c.default.createElement("div",null,c.default.createElement("div",{className:""!==r.state.updateImageStatus?"profile-header__user-drop-aria":"profile-header__user-drop-image hidden"},r.state.updateImageStatus),c.default.createElement("img",{className:""!==r.state.updateImageStatus?"profile-header__user-image hidden":"profile-header__user-image",src:r.state.imageBase64})))),c.default.createElement("div",{className:"profile-header__user-name"},r.props.user.name))),c.default.createElement("section",{className:"edit-profile__user-info"},c.default.createElement("div",{className:"edit-profile-name"},c.default.createElement("div",{className:"edit-profile__user-name-container"},c.default.createElement("div",{className:"user-name__box"},c.default.createElement("p",{className:"user-name__title"},"Name"),c.default.createElement("span",{className:"user-name__logged-name"},r.props.user.name)),c.default.createElement("div",{className:"edit-user-info__icon"},c.default.createElement("i",{className:"fa fa-pencil edit-user-info",onClick:r.editName}))),c.default.createElement("div",{className:"hidden",ref:function(e){r.fieldName=e}},c.default.createElement(h.default,{name:" ",type:"text",text:"Enter your new name",ref:function(e){r.name=e},value:r.props.user.name,validations:"isAlpha",validationError:"This is not a valid name",required:!0}))),c.default.createElement("div",{className:"edit-profile-email"},c.default.createElement("div",{className:"edit-profile__user-email-container"},c.default.createElement("div",{className:"user-email__box"},c.default.createElement("p",{className:"user-email__title"},"Email"),c.default.createElement("span",{className:"user-email__logged-email"},r.props.user.email)),c.default.createElement("div",{className:"edit-user-info__icon"},c.default.createElement("i",{className:"fa fa-pencil edit-user-info",onClick:r.editEmail}))),c.default.createElement("div",{className:"hidden",ref:function(e){r.fieldEmail=e}},c.default.createElement(h.default,{name:" ",className:"hidden",type:"text",text:"Enter your new e-mail",ref:function(e){r.email=e},value:r.props.user.email,validations:"isEmail",validationError:"This is not a valid email",required:!0})))),c.default.createElement("section",{className:"edit-profile__user-info-password"},c.default.createElement("div",{className:"edit-profile-password"},c.default.createElement("div",{className:"edit-profile__user-password-container"},c.default.createElement("div",{className:"user-password__box"},c.default.createElement("p",{className:"user-password__title"},"Password"),c.default.createElement("span",{className:"user-password__logged-password"},r.props.user.password)),c.default.createElement("div",{className:"edit-user-info__icon"},c.default.createElement("i",{className:"fa fa-pencil edit-user-info fa-password",onClick:r.editPassword}))),c.default.createElement("div",{className:"hidden",ref:function(e){r.fieldPassword=e}},c.default.createElement(h.default,{name:"Password",type:"password",text:"Enter your new password",ref:function(e){r.password=e},validations:{minLength:7,isAlphanumeric:!0},validationError:"This is not a valid password"}))),c.default.createElement("div",{className:"edit-profile-repeat-password"},c.default.createElement("div",{className:"edit-profile__user-repeat-password-container"},c.default.createElement("div",{className:"user-repeat-password__box"},c.default.createElement("p",{className:"user-repeat-password__title"},"Repeat Password"),c.default.createElement("span",{className:"user-repeat-password__logged-password"},r.props.user.passwordRepeat)),c.default.createElement("div",{className:"edit-user-info__icon"},c.default.createElement("i",{className:"fa fa-pencil edit-user-info fa-password",onClick:r.repeatPassword}))),c.default.createElement("div",{className:"hidden",ref:function(e){r.fieldRepeatPassword=e}},c.default.createElement(h.default,{name:"Repeat Password",type:"password",text:"Please repeat your password",ref:function(e){r.passwordRepeat=e},validations:"equalsField:Password",validationError:"Password does not match"})))),c.default.createElement("div",{className:"signup-field-group signup-btn-group edit"},c.default.createElement("input",{type:"submit",disabled:!r.state.canSubmit,className:"btn btn--signup btn--signup-active edit",value:"Submit"}),c.default.createElement("div",{className:"delete-user-profile__icon"},c.default.createElement("i",{className:"fa fa-trash",onClick:r.setPopupShown})))),c.default.createElement(E.Popup,{setPopupShown:r.setPopupShown,popupShown:r.state.popupShown,header:"Confirm the action",text:"Are you sure you want to delete your account?"},c.default.createElement(b.Button,{setPopupShown:r.setPopupShown,okHandler:function(){r.deleteUser(),r.setPopupShown()},className:"btn popup__btn",innerText:"Ok"}),c.default.createElement(b.Button,{okHandler:function(){r.setPopupShown()},className:"btn btn--default popup__btn",innerText:"Cancel"})))},r.state={canSubmit:!1,allowEditName:!1,allowEditEmail:!1,allowEditImage:!1,allowEditPassword:!1,allowRepeatPassword:!1,updateImageStatus:"Drop your photo",imageBase64:null},r}return n(t,e),l(t,[{key:"componentDidUpdate",value:function(){var e=this;"DONE"===this.props.updateProfileStatus&&setTimeout(function(){e.props.history.push("/")},1e3)}}]),t}(d.Component);t.default=(0,y.connect)(o,u)(x),x.propTypes={updateProfileStatus:w.default.string,updateProfileRequest:w.default.func,deleteUserRequest:w.default.func,user:w.default.object,email:w.default.object,password:w.default.object,passwordRepeat:w.default.object,errorText:w.default.string,value:w.default.object,history:w.default.object,clearStatus:w.default.func}},"./src/pages/Profile/Profile.scss":function(e,t){}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vNi5pbmRleF9idW5kbGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jcmVhdGUtcmVhY3QtY2xhc3MvaW5kZXguanM/ODBhNCoiLCJ3ZWJwYWNrOi8vLy4vfi9mb3JtLWRhdGEtdG8tb2JqZWN0L2luZGV4LmpzPzliYjUqIiwid2VicGFjazovLy8uL34vZm9ybXN5LXJlYWN0L2xpYi9EZWNvcmF0b3IuanM/NTFmYyoiLCJ3ZWJwYWNrOi8vLy4vfi9mb3Jtc3ktcmVhY3QvbGliL0hPQy5qcz9iZWY4KiIsIndlYnBhY2s6Ly8vLi9+L2Zvcm1zeS1yZWFjdC9saWIvTWl4aW4uanM/OTM1NyoiLCJ3ZWJwYWNrOi8vLy4vfi9mb3Jtc3ktcmVhY3QvbGliL21haW4uanM/ZTgxNCoiLCJ3ZWJwYWNrOi8vLy4vfi9mb3Jtc3ktcmVhY3QvbGliL3V0aWxzLmpzP2ZkMjYqIiwid2VicGFjazovLy8uL34vZm9ybXN5LXJlYWN0L2xpYi92YWxpZGF0aW9uUnVsZXMuanM/YzBhNSoiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvQXV0aC9GaWVsZC9GaWVsZC5qcz9hYmRlKiIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvUHJvZmlsZS9Qcm9maWxlLmpzIl0sIm5hbWVzIjpbIndlYnBhY2tKc29ucCIsIi4vbm9kZV9tb2R1bGVzL2NyZWF0ZS1yZWFjdC1jbGFzcy9pbmRleC5qcyIsIm1vZHVsZSIsImV4cG9ydHMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiUmVhY3QiLCJmYWN0b3J5IiwiRXJyb3IiLCJSZWFjdE5vb3BVcGRhdGVRdWV1ZSIsIkNvbXBvbmVudCIsInVwZGF0ZXIiLCJpc1ZhbGlkRWxlbWVudCIsIi4vbm9kZV9tb2R1bGVzL2Zvcm0tZGF0YS10by1vYmplY3QvaW5kZXguanMiLCJ0b09iaiIsInNvdXJjZSIsIk9iamVjdCIsImtleXMiLCJyZWR1Y2UiLCJvdXRwdXQiLCJrZXkiLCJwYXJlbnRLZXkiLCJtYXRjaCIsInBhdGhzIiwiY29uY2F0IiwibWFwIiwicmVwbGFjZSIsImN1cnJlbnRQYXRoIiwibGVuZ3RoIiwicGF0aEtleSIsInNoaWZ0IiwiaXNOYU4iLCJmcm9tT2JqIiwib2JqIiwicmVjdXIiLCJuZXdPYmoiLCJwcm9wTmFtZSIsImN1cnJWYWwiLCJBcnJheSIsImlzQXJyYXkiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJmb3JFYWNoIiwidiIsIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvRGVjb3JhdG9yLmpzIiwiZ2xvYmFsIiwiX2V4dGVuZHMiLCJhc3NpZ24iLCJ0YXJnZXQiLCJpIiwiYXJndW1lbnRzIiwiaGFzT3duUHJvcGVydHkiLCJjcmVhdGVSZWFjdENsYXNzIiwiTWl4aW4iLCJtaXhpbnMiLCJyZW5kZXIiLCJjcmVhdGVFbGVtZW50Iiwic2V0VmFsaWRhdGlvbnMiLCJ0aGlzIiwic2V0VmFsdWUiLCJyZXNldFZhbHVlIiwiZ2V0VmFsdWUiLCJoYXNWYWx1ZSIsImdldEVycm9yTWVzc2FnZSIsImdldEVycm9yTWVzc2FnZXMiLCJpc0Zvcm1EaXNhYmxlZCIsImlzVmFsaWQiLCJpc1ByaXN0aW5lIiwiaXNGb3JtU3VibWl0dGVkIiwiaXNSZXF1aXJlZCIsInNob3dSZXF1aXJlZCIsInNob3dFcnJvciIsImlzVmFsaWRWYWx1ZSIsInByb3BzIiwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9IT0MuanMiLCJnZXREaXNwbGF5TmFtZSIsImRpc3BsYXlOYW1lIiwibmFtZSIsImlubmVyUmVmIiwicHJvcHNGb3JFbGVtZW50IiwicmVmIiwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9NaXhpbi5qcyIsIlByb3BUeXBlcyIsInV0aWxzIiwiY29udmVydFZhbGlkYXRpb25zVG9PYmplY3QiLCJ2YWxpZGF0aW9ucyIsInNwbGl0IiwidmFsaWRhdGlvbiIsImFyZ3MiLCJ2YWxpZGF0ZU1ldGhvZCIsImFyZyIsIkpTT04iLCJwYXJzZSIsImUiLCJnZXRJbml0aWFsU3RhdGUiLCJfdmFsdWUiLCJ2YWx1ZSIsIl9pc1JlcXVpcmVkIiwiX2lzVmFsaWQiLCJfaXNQcmlzdGluZSIsIl9wcmlzdGluZVZhbHVlIiwiX3ZhbGlkYXRpb25FcnJvciIsIl9leHRlcm5hbEVycm9yIiwiX2Zvcm1TdWJtaXR0ZWQiLCJjb250ZXh0VHlwZXMiLCJmb3Jtc3kiLCJvYmplY3QiLCJnZXREZWZhdWx0UHJvcHMiLCJ2YWxpZGF0aW9uRXJyb3IiLCJ2YWxpZGF0aW9uRXJyb3JzIiwiY29tcG9uZW50V2lsbE1vdW50IiwiY29uZmlndXJlIiwicmVxdWlyZWQiLCJjb250ZXh0IiwiYXR0YWNoVG9Gb3JtIiwiYmluZCIsImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiLCJuZXh0UHJvcHMiLCJjb21wb25lbnREaWRVcGRhdGUiLCJwcmV2UHJvcHMiLCJpc1NhbWUiLCJ2YWxpZGF0ZSIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwiZGV0YWNoRnJvbUZvcm0iLCJfdmFsaWRhdGlvbnMiLCJfcmVxdWlyZWRWYWxpZGF0aW9ucyIsImlzRGVmYXVsdFJlcXVpcmVkVmFsdWUiLCJzZXRTdGF0ZSIsInN0YXRlIiwibWVzc2FnZXMiLCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL21haW4uanMiLCJfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMiLCJpbmRleE9mIiwiX3R5cGVvZjIiLCJTeW1ib2wiLCJpdGVyYXRvciIsImNvbnN0cnVjdG9yIiwiX3R5cGVvZiIsIkZvcm1zeSIsInZhbGlkYXRpb25SdWxlcyIsImZvcm1EYXRhVG9PYmplY3QiLCJIT0MiLCJEZWNvcmF0b3IiLCJvcHRpb25zIiwiZW1wdHlBcnJheSIsImRlZmF1bHRzIiwicGFzc2VkT3B0aW9ucyIsImFkZFZhbGlkYXRpb25SdWxlIiwiZnVuYyIsIkZvcm0iLCJpc1N1Ym1pdHRpbmciLCJjYW5DaGFuZ2UiLCJvblN1Y2Nlc3MiLCJvbkVycm9yIiwib25TdWJtaXQiLCJvblZhbGlkU3VibWl0Iiwib25JbnZhbGlkU3VibWl0Iiwib25WYWxpZCIsIm9uSW52YWxpZCIsIm9uQ2hhbmdlIiwicHJldmVudEV4dGVybmFsSW52YWxpZGF0aW9uIiwiY2hpbGRDb250ZXh0VHlwZXMiLCJnZXRDaGlsZENvbnRleHQiLCJfdGhpcyIsImNvbXBvbmVudCIsInJ1blZhbGlkYXRpb24iLCJpbnB1dHMiLCJjb21wb25lbnREaWRNb3VudCIsInZhbGlkYXRlRm9ybSIsImNvbXBvbmVudFdpbGxVcGRhdGUiLCJwcmV2SW5wdXROYW1lcyIsInNldElucHV0VmFsaWRhdGlvbkVycm9ycyIsIm5ld0lucHV0TmFtZXMiLCJhcnJheXNEaWZmZXIiLCJyZXNldCIsImRhdGEiLCJzZXRGb3JtUHJpc3RpbmUiLCJyZXNldE1vZGVsIiwic3VibWl0IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIm1vZGVsIiwiZ2V0TW9kZWwiLCJ1cGRhdGVJbnB1dHNXaXRoRXJyb3IiLCJtYXBNb2RlbCIsIm1hcHBpbmciLCJtYXBwZWRNb2RlbCIsImtleUFycmF5IiwiYmFzZSIsImN1cnJlbnRLZXkiLCJjdXJyZW50VmFsdWVzIiwiZ2V0Q3VycmVudFZhbHVlcyIsImVycm9ycyIsImFwcGx5IiwiaXNDaGFuZ2VkIiwiZ2V0UHJpc3RpbmVWYWx1ZXMiLCJfdGhpczIiLCJpbmRleCIsImZpbmQiLCJzdHJpbmdpZnkiLCJkaXNhYmxlZCIsImVycm9yIiwidmFsaWRhdGlvblJlc3VsdHMiLCJydW5SdWxlcyIsInJlcXVpcmVkUmVzdWx0cyIsImZhaWxlZCIsInN1Y2Nlc3MiLCJmaWx0ZXIiLCJ4IiwicG9zIiwiYXJyIiwicmVzdWx0cyIsInZhbGlkYXRpb25NZXRob2QiLCJwdXNoIiwiX3RoaXMzIiwib25WYWxpZGF0aW9uQ29tcGxldGUiLCJhbGxJc1ZhbGlkIiwiZXZlcnkiLCJjb21wb25lbnRQb3MiLCJzbGljZSIsIl9wcm9wcyIsIm5vbkZvcm1zeVByb3BzIiwiY2hpbGRyZW4iLCJkZWZpbmUiLCJhbWQiLCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL3V0aWxzLmpzIiwiYSIsImIiLCJpc0RpZmZlcmVudCIsIml0ZW0iLCJvYmplY3RzRGlmZmVyIiwiY29sbGVjdGlvbiIsImZuIiwibCIsIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvdmFsaWRhdGlvblJ1bGVzLmpzIiwiX2lzRXhpc3R5IiwidW5kZWZpbmVkIiwiaXNFbXB0eSIsInZhbHVlcyIsImlzRXhpc3R5IiwibWF0Y2hSZWdleHAiLCJyZWdleHAiLCJ0ZXN0IiwiaXNVbmRlZmluZWQiLCJpc0VtcHR5U3RyaW5nIiwiaXNFbWFpbCIsImlzVXJsIiwiaXNUcnVlIiwiaXNGYWxzZSIsImlzTnVtZXJpYyIsImlzQWxwaGEiLCJpc0FscGhhbnVtZXJpYyIsImlzSW50IiwiaXNGbG9hdCIsImlzV29yZHMiLCJpc1NwZWNpYWxXb3JkcyIsImlzTGVuZ3RoIiwiZXF1YWxzIiwiZXFsIiwiZXF1YWxzRmllbGQiLCJmaWVsZCIsIm1heExlbmd0aCIsIm1pbkxlbmd0aCIsIi4vc3JjL2NvbXBvbmVudHMvQXV0aC9GaWVsZC9GaWVsZC5qcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsInNlbGYiLCJSZWZlcmVuY2VFcnJvciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNyZWF0ZSIsImVudW1lcmFibGUiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGVmaW5lUHJvcGVydHkiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZGVzY3JpcHRvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIl9yZWFjdCIsIl9yZWFjdDIiLCJfZm9ybXN5UmVhY3QiLCJfcHJvcFR5cGVzIiwiX3Byb3BUeXBlczIiLCJGaWVsZCIsIl9SZWFjdCRDb21wb25lbnQiLCJnZXRQcm90b3R5cGVPZiIsImNoYW5nZVZhbHVlIiwiY3VycmVudFRhcmdldCIsInR5cGUiLCJlcnJvck1lc3NhZ2UiLCJjbGFzc05hbWUiLCJodG1sRm9yIiwidG9Mb3dlckNhc2UiLCJ0ZXh0IiwicHJvcFR5cGVzIiwic3RyaW5nIiwiYW55IiwicmVnaXN0cmF0aW9uIiwiLi9zcmMvcGFnZXMvUHJvZmlsZS9Qcm9maWxlLmpzIiwibWFwU3RhdGVUb1Byb3BzIiwic3RvcmUiLCJ1cGRhdGVQcm9maWxlU3RhdHVzIiwidXNlcnMiLCJlcnJvclRleHQiLCJ1c2VyIiwibWFwRGlzcGF0Y2hUb1Byb3BzIiwiZGlzcGF0Y2giLCJ1cGRhdGVQcm9maWxlUmVxdWVzdCIsIl9yZWR1eCIsImJpbmRBY3Rpb25DcmVhdG9ycyIsIl91c2VycyIsImRlbGV0ZVVzZXJSZXF1ZXN0IiwiY2xlYXJTdGF0dXMiLCJjbGVhclVwZGF0ZVByb2ZpbGVTdGF0dXMiLCJfZm9ybXN5UmVhY3QyIiwiX0ZpZWxkIiwiX0ZpZWxkMiIsIl9NZXNzYWdlIiwiX1BvcHVwIiwiX0J1dHRvbiIsIl9yZWFjdFJlZHV4IiwiUHJvZmlsZSIsIl9Db21wb25lbnQiLCJzZXRQb3B1cFNob3duIiwiaWQiLCJjdXJyZW50U3RhdGUiLCJwb3B1cFNob3duIiwidXBkYXRlUHJvZmlsZSIsImVtYWlsIiwicGFzc3dvcmQiLCJwYXNzd29yZFJlcGVhdCIsImF2YXRhciIsImJhc2U2NFN0ciIsIl9pZCIsImVuYWJsZUJ1dHRvbiIsImNhblN1Ym1pdCIsImRpc2FibGVCdXR0b24iLCJlZGl0TmFtZSIsImFsbG93RWRpdE5hbWUiLCJmaWVsZE5hbWUiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJlZGl0RW1haWwiLCJhbGxvd0VkaXRFbWFpbCIsImZpZWxkRW1haWwiLCJlZGl0UGFzc3dvcmQiLCJhbGxvd0VkaXRQYXNzd29yZCIsImZpZWxkUGFzc3dvcmQiLCJyZXBlYXRQYXNzd29yZCIsImFsbG93UmVwZWF0UGFzc3dvcmQiLCJmaWVsZFJlcGVhdFBhc3N3b3JkIiwiZWRpdEltYWdlIiwiYWxsb3dFZGl0SW1hZ2UiLCJmaWVsZEltYWdlIiwiZGVsZXRlVXNlciIsImhhbmRsZUZpbGVTZWxlY3QiLCJ1cGRhdGVJbWFnZVN0YXR1cyIsImZpbGVzIiwiZGF0YVRyYW5zZmVyIiwiZmlsZSIsInNpemUiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwicmVhZGVyRXZlbnQiLCJiaW5hcnlTdHJpbmciLCJyZXN1bHQiLCJidG9hIiwiaW1hZ2VCYXNlNjQiLCJyZWFkQXNCaW5hcnlTdHJpbmciLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiTWVzc2FnZSIsInN0YXR1cyIsImhlYWRlciIsInNyYyIsIm9uQ2xpY2siLCJlbCIsIm9uRHJvcCIsIm9uRHJhZ092ZXIiLCJpbnB1dCIsIlBvcHVwIiwiQnV0dG9uIiwib2tIYW5kbGVyIiwiaW5uZXJUZXh0Iiwic2V0VGltZW91dCIsImhpc3RvcnkiLCJjb25uZWN0IiwiLi9zcmMvcGFnZXMvUHJvZmlsZS9Qcm9maWxlLnNjc3MiXSwibWFwcGluZ3MiOiJBQUFBQSxjQUFjLElBRVJDLDZDQUNBLFNBQVVDLEVBQVFDLEVBQVNDLEdBRWpDLFlDT0EsSUFBSUMsR0FBUUQsRUFBUSxpQ0FDaEJFLEVBQVVGLEVBQVEsK0NBRXRCLFFBQXFCLEtBQVZDLEVBQ1QsS0FBTUUsT0FDSixvSkFNSixJQUFJQyxJQUF1QixHQUFJSCxHQUFNSSxXQUFZQyxPQUVqRFIsR0FBT0MsUUFBVUcsRUFDZkQsRUFBTUksVUFDTkosRUFBTU0sZUFDTkgsSURJSUksOENBQ0EsU0FBVVYsRUFBUUMsRUFBU0MsR0FFakMsWUVuQ0EsU0FBU1MsR0FBTUMsR0FDYixNQUFPQyxRQUFPQyxLQUFLRixHQUFRRyxPQUFPLFNBQVVDLEVBQVFDLEdBQ2xELEdBQUlDLEdBQVlELEVBQUlFLE1BQU0sV0FDdEJDLEVBQVFILEVBQUlFLE1BQU0sZUFDdEJDLElBQVNGLEVBQVUsSUFBSUcsT0FBT0QsR0FBT0UsSUFBSSxTQUFVTCxHQUNqRCxN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TixjQUFBa1IsRUFBQStELFFBQ0VDLFVBQVcsV0FDVHZPLEVBQUsySyxpQkFFUGpDLFVBQVcsOEJBQ1g4RixVQUFXLGNBOVduQnhPLEVBQUtuQyxPQUNIME4sV0FBVyxFQUNYRyxlQUFlLEVBQ2ZLLGdCQUFnQixFQUNoQlMsZ0JBQWdCLEVBQ2hCTixtQkFBbUIsRUFDbkJHLHFCQUFxQixFQUNyQk8sa0JBQW1CLGtCQUNuQlksWUFBYSxNQVhHeE4sRVZvbERwQixNQWhkQStHLEdBQVUwRCxFQUFTQyxHQW1jbkJqRCxFQUFhZ0QsSUFDWHpULElBQUsscUJBQ0w2RSxNQUFPLFdVNThDYSxHQUFBb0csR0FBQTFJLElBQ21CLFVBQW5DQSxLQUFLZSxNQUFNK08scUJBQ2JvRixXQUFXLFdBQ1R4TSxFQUFLM0gsTUFBTW9VLFFBQVF4TCxLQUFLLE1BQ3ZCLFNWbTlDQXVILEdBQ1AzQyxFQUFPeFIsVUFpQlROLEdBQVF1USxTVTl0Q08sRUFBQWlFLEVBQUFtRSxTQUFReEYsRUFBaUJNLEdBQW9CZ0IsR0FFNURBLEVBQVEzQixXQUNOTyxvQkFBcUJuQixFQUFBM0IsUUFBVXdDLE9BQy9CWSxxQkFBc0J6QixFQUFBM0IsUUFBVXRILEtBQ2hDOEssa0JBQW1CN0IsRUFBQTNCLFFBQVV0SCxLQUM3QnVLLEtBQU10QixFQUFBM0IsUUFBVWhLLE9BQ2hCeU8sTUFBTzlDLEVBQUEzQixRQUFVaEssT0FDakIwTyxTQUFVL0MsRUFBQTNCLFFBQVVoSyxPQUNwQjJPLGVBQWdCaEQsRUFBQTNCLFFBQVVoSyxPQUMxQmdOLFVBQVdyQixFQUFBM0IsUUFBVXdDLE9BQ3JCbE4sTUFBT3FNLEVBQUEzQixRQUFVaEssT0FDakJtUyxRQUFTeEcsRUFBQTNCLFFBQVVoSyxPQUNuQnlOLFlBQWE5QixFQUFBM0IsUUFBVXRILE9Wb3VDbkIyUCxtQ0FDQSxTQUFVN1ksRUFBUUMiLCJmaWxlIjoiNi5pbmRleF9idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3ZWJwYWNrSnNvbnAoWzZdLHtcblxuLyoqKi8gXCIuL25vZGVfbW9kdWxlcy9jcmVhdGUtcmVhY3QtY2xhc3MvaW5kZXguanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIENvcHlyaWdodCAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKi9cblxuXG5cbnZhciBSZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC9yZWFjdC5qc1wiKTtcbnZhciBmYWN0b3J5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2NyZWF0ZS1yZWFjdC1jbGFzcy9mYWN0b3J5LmpzXCIpO1xuXG5pZiAodHlwZW9mIFJlYWN0ID09PSAndW5kZWZpbmVkJykge1xuICB0aHJvdyBFcnJvcignY3JlYXRlLXJlYWN0LWNsYXNzIGNvdWxkIG5vdCBmaW5kIHRoZSBSZWFjdCBvYmplY3QuIElmIHlvdSBhcmUgdXNpbmcgc2NyaXB0IHRhZ3MsICcgKyAnbWFrZSBzdXJlIHRoYXQgUmVhY3QgaXMgYmVpbmcgbG9hZGVkIGJlZm9yZSBjcmVhdGUtcmVhY3QtY2xhc3MuJyk7XG59XG5cbi8vIEhhY2sgdG8gZ3JhYiBOb29wVXBkYXRlUXVldWUgZnJvbSBpc29tb3JwaGljIFJlYWN0XG52YXIgUmVhY3ROb29wVXBkYXRlUXVldWUgPSBuZXcgUmVhY3QuQ29tcG9uZW50KCkudXBkYXRlcjtcblxubW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KFJlYWN0LkNvbXBvbmVudCwgUmVhY3QuaXNWYWxpZEVsZW1lbnQsIFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlKTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvZm9ybS1kYXRhLXRvLW9iamVjdC9pbmRleC5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5mdW5jdGlvbiB0b09iaihzb3VyY2UpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKHNvdXJjZSkucmVkdWNlKGZ1bmN0aW9uIChvdXRwdXQsIGtleSkge1xuICAgIHZhciBwYXJlbnRLZXkgPSBrZXkubWF0Y2goL1teXFxbXSovaSk7XG4gICAgdmFyIHBhdGhzID0ga2V5Lm1hdGNoKC9cXFsuKj9cXF0vZykgfHwgW107XG4gICAgcGF0aHMgPSBbcGFyZW50S2V5WzBdXS5jb25jYXQocGF0aHMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICByZXR1cm4ga2V5LnJlcGxhY2UoL1xcW3xcXF0vZywgJycpO1xuICAgIH0pO1xuICAgIHZhciBjdXJyZW50UGF0aCA9IG91dHB1dDtcbiAgICB3aGlsZSAocGF0aHMubGVuZ3RoKSB7XG4gICAgICB2YXIgcGF0aEtleSA9IHBhdGhzLnNoaWZ0KCk7XG5cbiAgICAgIGlmIChwYXRoS2V5IGluIGN1cnJlbnRQYXRoKSB7XG4gICAgICAgIGN1cnJlbnRQYXRoID0gY3VycmVudFBhdGhbcGF0aEtleV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50UGF0aFtwYXRoS2V5XSA9IHBhdGhzLmxlbmd0aCA/IGlzTmFOKHBhdGhzWzBdKSA/IHt9IDogW10gOiBzb3VyY2Vba2V5XTtcbiAgICAgICAgY3VycmVudFBhdGggPSBjdXJyZW50UGF0aFtwYXRoS2V5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb3V0cHV0O1xuICB9LCB7fSk7XG59XG5cbmZ1bmN0aW9uIGZyb21PYmoob2JqKSB7XG4gIGZ1bmN0aW9uIHJlY3VyKG5ld09iaiwgcHJvcE5hbWUsIGN1cnJWYWwpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShjdXJyVmFsKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoY3VyclZhbCkgPT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XG4gICAgICBPYmplY3Qua2V5cyhjdXJyVmFsKS5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHJlY3VyKG5ld09iaiwgcHJvcE5hbWUgKyBcIltcIiArIHYgKyBcIl1cIiwgY3VyclZhbFt2XSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBuZXdPYmo7XG4gICAgfVxuXG4gICAgbmV3T2JqW3Byb3BOYW1lXSA9IGN1cnJWYWw7XG4gICAgcmV0dXJuIG5ld09iajtcbiAgfVxuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcbiAgcmV0dXJuIGtleXMucmVkdWNlKGZ1bmN0aW9uIChuZXdPYmosIHByb3BOYW1lKSB7XG4gICAgcmV0dXJuIHJlY3VyKG5ld09iaiwgcHJvcE5hbWUsIG9ialtwcm9wTmFtZV0pO1xuICB9LCB7fSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBmcm9tT2JqOiBmcm9tT2JqLFxuICB0b09iajogdG9PYmpcbn07XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvRGVjb3JhdG9yLmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO2ZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9cmV0dXJuIHRhcmdldDtcbn07XG5cbnZhciBSZWFjdCA9IGdsb2JhbC5SZWFjdCB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcmVhY3QvcmVhY3QuanNcIik7XG52YXIgY3JlYXRlUmVhY3RDbGFzcyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9jcmVhdGUtcmVhY3QtY2xhc3MvaW5kZXguanNcIik7XG52YXIgTWl4aW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9NaXhpbi5qc1wiKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZnVuY3Rpb24gKENvbXBvbmVudCkge1xuICAgIHJldHVybiBjcmVhdGVSZWFjdENsYXNzKHtcbiAgICAgIG1peGluczogW01peGluXSxcbiAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDb21wb25lbnQsIF9leHRlbmRzKHtcbiAgICAgICAgICBzZXRWYWxpZGF0aW9uczogdGhpcy5zZXRWYWxpZGF0aW9ucyxcbiAgICAgICAgICBzZXRWYWx1ZTogdGhpcy5zZXRWYWx1ZSxcbiAgICAgICAgICByZXNldFZhbHVlOiB0aGlzLnJlc2V0VmFsdWUsXG4gICAgICAgICAgZ2V0VmFsdWU6IHRoaXMuZ2V0VmFsdWUsXG4gICAgICAgICAgaGFzVmFsdWU6IHRoaXMuaGFzVmFsdWUsXG4gICAgICAgICAgZ2V0RXJyb3JNZXNzYWdlOiB0aGlzLmdldEVycm9yTWVzc2FnZSxcbiAgICAgICAgICBnZXRFcnJvck1lc3NhZ2VzOiB0aGlzLmdldEVycm9yTWVzc2FnZXMsXG4gICAgICAgICAgaXNGb3JtRGlzYWJsZWQ6IHRoaXMuaXNGb3JtRGlzYWJsZWQsXG4gICAgICAgICAgaXNWYWxpZDogdGhpcy5pc1ZhbGlkLFxuICAgICAgICAgIGlzUHJpc3RpbmU6IHRoaXMuaXNQcmlzdGluZSxcbiAgICAgICAgICBpc0Zvcm1TdWJtaXR0ZWQ6IHRoaXMuaXNGb3JtU3VibWl0dGVkLFxuICAgICAgICAgIGlzUmVxdWlyZWQ6IHRoaXMuaXNSZXF1aXJlZCxcbiAgICAgICAgICBzaG93UmVxdWlyZWQ6IHRoaXMuc2hvd1JlcXVpcmVkLFxuICAgICAgICAgIHNob3dFcnJvcjogdGhpcy5zaG93RXJyb3IsXG4gICAgICAgICAgaXNWYWxpZFZhbHVlOiB0aGlzLmlzVmFsaWRWYWx1ZVxuICAgICAgICB9LCB0aGlzLnByb3BzKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59O1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy93ZWJwYWNrL2J1aWxkaW4vZ2xvYmFsLmpzXCIpKSlcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9IT0MuanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1yZXR1cm4gdGFyZ2V0O1xufTtcblxudmFyIFJlYWN0ID0gZ2xvYmFsLlJlYWN0IHx8IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC9yZWFjdC5qc1wiKTtcbnZhciBjcmVhdGVSZWFjdENsYXNzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2NyZWF0ZS1yZWFjdC1jbGFzcy9pbmRleC5qc1wiKTtcbnZhciBNaXhpbiA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL01peGluLmpzXCIpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gIHJldHVybiBjcmVhdGVSZWFjdENsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogJ0Zvcm1zeSgnICsgZ2V0RGlzcGxheU5hbWUoQ29tcG9uZW50KSArICcpJyxcbiAgICBtaXhpbnM6IFtNaXhpbl0sXG5cbiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBpbm5lclJlZiA9IHRoaXMucHJvcHMuaW5uZXJSZWY7XG5cbiAgICAgIHZhciBwcm9wc0ZvckVsZW1lbnQgPSBfZXh0ZW5kcyh7XG4gICAgICAgIHNldFZhbGlkYXRpb25zOiB0aGlzLnNldFZhbGlkYXRpb25zLFxuICAgICAgICBzZXRWYWx1ZTogdGhpcy5zZXRWYWx1ZSxcbiAgICAgICAgcmVzZXRWYWx1ZTogdGhpcy5yZXNldFZhbHVlLFxuICAgICAgICBnZXRWYWx1ZTogdGhpcy5nZXRWYWx1ZSxcbiAgICAgICAgaGFzVmFsdWU6IHRoaXMuaGFzVmFsdWUsXG4gICAgICAgIGdldEVycm9yTWVzc2FnZTogdGhpcy5nZXRFcnJvck1lc3NhZ2UsXG4gICAgICAgIGdldEVycm9yTWVzc2FnZXM6IHRoaXMuZ2V0RXJyb3JNZXNzYWdlcyxcbiAgICAgICAgaXNGb3JtRGlzYWJsZWQ6IHRoaXMuaXNGb3JtRGlzYWJsZWQsXG4gICAgICAgIGlzVmFsaWQ6IHRoaXMuaXNWYWxpZCxcbiAgICAgICAgaXNQcmlzdGluZTogdGhpcy5pc1ByaXN0aW5lLFxuICAgICAgICBpc0Zvcm1TdWJtaXR0ZWQ6IHRoaXMuaXNGb3JtU3VibWl0dGVkLFxuICAgICAgICBpc1JlcXVpcmVkOiB0aGlzLmlzUmVxdWlyZWQsXG4gICAgICAgIHNob3dSZXF1aXJlZDogdGhpcy5zaG93UmVxdWlyZWQsXG4gICAgICAgIHNob3dFcnJvcjogdGhpcy5zaG93RXJyb3IsXG4gICAgICAgIGlzVmFsaWRWYWx1ZTogdGhpcy5pc1ZhbGlkVmFsdWVcbiAgICAgIH0sIHRoaXMucHJvcHMpO1xuXG4gICAgICBpZiAoaW5uZXJSZWYpIHtcbiAgICAgICAgcHJvcHNGb3JFbGVtZW50LnJlZiA9IGlubmVyUmVmO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29tcG9uZW50LCBwcm9wc0ZvckVsZW1lbnQpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5mdW5jdGlvbiBnZXREaXNwbGF5TmFtZShDb21wb25lbnQpIHtcbiAgcmV0dXJuIENvbXBvbmVudC5kaXNwbGF5TmFtZSB8fCBDb21wb25lbnQubmFtZSB8fCAodHlwZW9mIENvbXBvbmVudCA9PT0gJ3N0cmluZycgPyBDb21wb25lbnQgOiAnQ29tcG9uZW50Jyk7XG59XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3dlYnBhY2svYnVpbGRpbi9nbG9iYWwuanNcIikpKVxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL01peGluLmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge1xuXG52YXIgUHJvcFR5cGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3Byb3AtdHlwZXMvaW5kZXguanNcIik7XG52YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi91dGlscy5qc1wiKTtcbnZhciBSZWFjdCA9IGdsb2JhbC5SZWFjdCB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcmVhY3QvcmVhY3QuanNcIik7XG5cbnZhciBjb252ZXJ0VmFsaWRhdGlvbnNUb09iamVjdCA9IGZ1bmN0aW9uIGNvbnZlcnRWYWxpZGF0aW9uc1RvT2JqZWN0KHZhbGlkYXRpb25zKSB7XG5cbiAgaWYgKHR5cGVvZiB2YWxpZGF0aW9ucyA9PT0gJ3N0cmluZycpIHtcblxuICAgIHJldHVybiB2YWxpZGF0aW9ucy5zcGxpdCgvXFwsKD8hW157XFxbXSpbfVxcXV0pL2cpLnJlZHVjZShmdW5jdGlvbiAodmFsaWRhdGlvbnMsIHZhbGlkYXRpb24pIHtcbiAgICAgIHZhciBhcmdzID0gdmFsaWRhdGlvbi5zcGxpdCgnOicpO1xuICAgICAgdmFyIHZhbGlkYXRlTWV0aG9kID0gYXJncy5zaGlmdCgpO1xuXG4gICAgICBhcmdzID0gYXJncy5tYXAoZnVuY3Rpb24gKGFyZykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGFyZyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICByZXR1cm4gYXJnOyAvLyBJdCBpcyBhIHN0cmluZyBpZiBpdCBjYW4gbm90IHBhcnNlIGl0XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoYXJncy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRm9ybXN5IGRvZXMgbm90IHN1cHBvcnQgbXVsdGlwbGUgYXJncyBvbiBzdHJpbmcgdmFsaWRhdGlvbnMuIFVzZSBvYmplY3QgZm9ybWF0IG9mIHZhbGlkYXRpb25zIGluc3RlYWQuJyk7XG4gICAgICB9XG5cbiAgICAgIHZhbGlkYXRpb25zW3ZhbGlkYXRlTWV0aG9kXSA9IGFyZ3MubGVuZ3RoID8gYXJnc1swXSA6IHRydWU7XG4gICAgICByZXR1cm4gdmFsaWRhdGlvbnM7XG4gICAgfSwge30pO1xuICB9XG5cbiAgcmV0dXJuIHZhbGlkYXRpb25zIHx8IHt9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKCkge1xuICAgIHJldHVybiB7XG4gICAgICBfdmFsdWU6IHRoaXMucHJvcHMudmFsdWUsXG4gICAgICBfaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICBfaXNWYWxpZDogdHJ1ZSxcbiAgICAgIF9pc1ByaXN0aW5lOiB0cnVlLFxuICAgICAgX3ByaXN0aW5lVmFsdWU6IHRoaXMucHJvcHMudmFsdWUsXG4gICAgICBfdmFsaWRhdGlvbkVycm9yOiBbXSxcbiAgICAgIF9leHRlcm5hbEVycm9yOiBudWxsLFxuICAgICAgX2Zvcm1TdWJtaXR0ZWQ6IGZhbHNlXG4gICAgfTtcbiAgfSxcbiAgY29udGV4dFR5cGVzOiB7XG4gICAgZm9ybXN5OiBQcm9wVHlwZXMub2JqZWN0IC8vIFdoYXQgYWJvdXQgcmVxdWlyZWQ/XG4gIH0sXG4gIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24gZ2V0RGVmYXVsdFByb3BzKCkge1xuICAgIHJldHVybiB7XG4gICAgICB2YWxpZGF0aW9uRXJyb3I6ICcnLFxuICAgICAgdmFsaWRhdGlvbkVycm9yczoge31cbiAgICB9O1xuICB9LFxuXG4gIGNvbXBvbmVudFdpbGxNb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIHZhciBjb25maWd1cmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnNldFZhbGlkYXRpb25zKHRoaXMucHJvcHMudmFsaWRhdGlvbnMsIHRoaXMucHJvcHMucmVxdWlyZWQpO1xuXG4gICAgICAvLyBQYXNzIGEgZnVuY3Rpb24gaW5zdGVhZD9cbiAgICAgIHRoaXMuY29udGV4dC5mb3Jtc3kuYXR0YWNoVG9Gb3JtKHRoaXMpO1xuICAgICAgLy90aGlzLnByb3BzLl9hdHRhY2hUb0Zvcm0odGhpcyk7XG4gICAgfS5iaW5kKHRoaXMpO1xuXG4gICAgaWYgKCF0aGlzLnByb3BzLm5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRm9ybSBJbnB1dCByZXF1aXJlcyBhIG5hbWUgcHJvcGVydHkgd2hlbiB1c2VkJyk7XG4gICAgfVxuXG4gICAgLypcbiAgICBpZiAoIXRoaXMucHJvcHMuX2F0dGFjaFRvRm9ybSkge1xuICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNNb3VudGVkKCkpIHJldHVybjtcbiAgICAgICAgaWYgKCF0aGlzLnByb3BzLl9hdHRhY2hUb0Zvcm0pIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm0gTWl4aW4gcmVxdWlyZXMgY29tcG9uZW50IHRvIGJlIG5lc3RlZCBpbiBhIEZvcm0nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25maWd1cmUoKTtcbiAgICAgIH0uYmluZCh0aGlzKSwgMCk7XG4gICAgfVxuICAgICovXG4gICAgY29uZmlndXJlKCk7XG4gIH0sXG5cbiAgLy8gV2UgaGF2ZSB0byBtYWtlIHRoZSB2YWxpZGF0ZSBtZXRob2QgaXMga2VwdCB3aGVuIG5ldyBwcm9wcyBhcmUgYWRkZWRcbiAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICB0aGlzLnNldFZhbGlkYXRpb25zKG5leHRQcm9wcy52YWxpZGF0aW9ucywgbmV4dFByb3BzLnJlcXVpcmVkKTtcbiAgfSxcblxuICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcblxuICAgIC8vIElmIHRoZSB2YWx1ZSBwYXNzZWQgaGFzIGNoYW5nZWQsIHNldCBpdC4gSWYgdmFsdWUgaXMgbm90IHBhc3NlZCBpdCB3aWxsXG4gICAgLy8gaW50ZXJuYWxseSB1cGRhdGUsIGFuZCB0aGlzIHdpbGwgbmV2ZXIgcnVuXG4gICAgaWYgKCF1dGlscy5pc1NhbWUodGhpcy5wcm9wcy52YWx1ZSwgcHJldlByb3BzLnZhbHVlKSkge1xuICAgICAgdGhpcy5zZXRWYWx1ZSh0aGlzLnByb3BzLnZhbHVlKTtcbiAgICB9XG5cbiAgICAvLyBJZiB2YWxpZGF0aW9ucyBvciByZXF1aXJlZCBpcyBjaGFuZ2VkLCBydW4gYSBuZXcgdmFsaWRhdGlvblxuICAgIGlmICghdXRpbHMuaXNTYW1lKHRoaXMucHJvcHMudmFsaWRhdGlvbnMsIHByZXZQcm9wcy52YWxpZGF0aW9ucykgfHwgIXV0aWxzLmlzU2FtZSh0aGlzLnByb3BzLnJlcXVpcmVkLCBwcmV2UHJvcHMucmVxdWlyZWQpKSB7XG4gICAgICB0aGlzLmNvbnRleHQuZm9ybXN5LnZhbGlkYXRlKHRoaXMpO1xuICAgIH1cbiAgfSxcblxuICAvLyBEZXRhY2ggaXQgd2hlbiBjb21wb25lbnQgdW5tb3VudHNcbiAgY29tcG9uZW50V2lsbFVubW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMuY29udGV4dC5mb3Jtc3kuZGV0YWNoRnJvbUZvcm0odGhpcyk7XG4gICAgLy90aGlzLnByb3BzLl9kZXRhY2hGcm9tRm9ybSh0aGlzKTtcbiAgfSxcblxuICBzZXRWYWxpZGF0aW9uczogZnVuY3Rpb24gc2V0VmFsaWRhdGlvbnModmFsaWRhdGlvbnMsIHJlcXVpcmVkKSB7XG5cbiAgICAvLyBBZGQgdmFsaWRhdGlvbnMgdG8gdGhlIHN0b3JlIGl0c2VsZiBhcyB0aGUgcHJvcHMgb2JqZWN0IGNhbiBub3QgYmUgbW9kaWZpZWRcbiAgICB0aGlzLl92YWxpZGF0aW9ucyA9IGNvbnZlcnRWYWxpZGF0aW9uc1RvT2JqZWN0KHZhbGlkYXRpb25zKSB8fCB7fTtcbiAgICB0aGlzLl9yZXF1aXJlZFZhbGlkYXRpb25zID0gcmVxdWlyZWQgPT09IHRydWUgPyB7IGlzRGVmYXVsdFJlcXVpcmVkVmFsdWU6IHRydWUgfSA6IGNvbnZlcnRWYWxpZGF0aW9uc1RvT2JqZWN0KHJlcXVpcmVkKTtcbiAgfSxcblxuICAvLyBXZSB2YWxpZGF0ZSBhZnRlciB0aGUgdmFsdWUgaGFzIGJlZW4gc2V0XG4gIHNldFZhbHVlOiBmdW5jdGlvbiBzZXRWYWx1ZSh2YWx1ZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgX3ZhbHVlOiB2YWx1ZSxcbiAgICAgIF9pc1ByaXN0aW5lOiBmYWxzZVxuICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuY29udGV4dC5mb3Jtc3kudmFsaWRhdGUodGhpcyk7XG4gICAgICAvL3RoaXMucHJvcHMuX3ZhbGlkYXRlKHRoaXMpO1xuICAgIH0uYmluZCh0aGlzKSk7XG4gIH0sXG4gIHJlc2V0VmFsdWU6IGZ1bmN0aW9uIHJlc2V0VmFsdWUoKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBfdmFsdWU6IHRoaXMuc3RhdGUuX3ByaXN0aW5lVmFsdWUsXG4gICAgICBfaXNQcmlzdGluZTogdHJ1ZVxuICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuY29udGV4dC5mb3Jtc3kudmFsaWRhdGUodGhpcyk7XG4gICAgICAvL3RoaXMucHJvcHMuX3ZhbGlkYXRlKHRoaXMpO1xuICAgIH0pO1xuICB9LFxuICBnZXRWYWx1ZTogZnVuY3Rpb24gZ2V0VmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX3ZhbHVlO1xuICB9LFxuICBoYXNWYWx1ZTogZnVuY3Rpb24gaGFzVmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX3ZhbHVlICE9PSAnJztcbiAgfSxcbiAgZ2V0RXJyb3JNZXNzYWdlOiBmdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2UoKSB7XG4gICAgdmFyIG1lc3NhZ2VzID0gdGhpcy5nZXRFcnJvck1lc3NhZ2VzKCk7XG4gICAgcmV0dXJuIG1lc3NhZ2VzLmxlbmd0aCA/IG1lc3NhZ2VzWzBdIDogbnVsbDtcbiAgfSxcbiAgZ2V0RXJyb3JNZXNzYWdlczogZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlcygpIHtcbiAgICByZXR1cm4gIXRoaXMuaXNWYWxpZCgpIHx8IHRoaXMuc2hvd1JlcXVpcmVkKCkgPyB0aGlzLnN0YXRlLl9leHRlcm5hbEVycm9yIHx8IHRoaXMuc3RhdGUuX3ZhbGlkYXRpb25FcnJvciB8fCBbXSA6IFtdO1xuICB9LFxuICBpc0Zvcm1EaXNhYmxlZDogZnVuY3Rpb24gaXNGb3JtRGlzYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGV4dC5mb3Jtc3kuaXNGb3JtRGlzYWJsZWQoKTtcbiAgICAvL3JldHVybiB0aGlzLnByb3BzLl9pc0Zvcm1EaXNhYmxlZCgpO1xuICB9LFxuICBpc1ZhbGlkOiBmdW5jdGlvbiBpc1ZhbGlkKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLl9pc1ZhbGlkO1xuICB9LFxuICBpc1ByaXN0aW5lOiBmdW5jdGlvbiBpc1ByaXN0aW5lKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLl9pc1ByaXN0aW5lO1xuICB9LFxuICBpc0Zvcm1TdWJtaXR0ZWQ6IGZ1bmN0aW9uIGlzRm9ybVN1Ym1pdHRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5fZm9ybVN1Ym1pdHRlZDtcbiAgfSxcbiAgaXNSZXF1aXJlZDogZnVuY3Rpb24gaXNSZXF1aXJlZCgpIHtcbiAgICByZXR1cm4gISF0aGlzLnByb3BzLnJlcXVpcmVkO1xuICB9LFxuICBzaG93UmVxdWlyZWQ6IGZ1bmN0aW9uIHNob3dSZXF1aXJlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5faXNSZXF1aXJlZDtcbiAgfSxcbiAgc2hvd0Vycm9yOiBmdW5jdGlvbiBzaG93RXJyb3IoKSB7XG4gICAgcmV0dXJuICF0aGlzLnNob3dSZXF1aXJlZCgpICYmICF0aGlzLmlzVmFsaWQoKTtcbiAgfSxcbiAgaXNWYWxpZFZhbHVlOiBmdW5jdGlvbiBpc1ZhbGlkVmFsdWUodmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZXh0LmZvcm1zeS5pc1ZhbGlkVmFsdWUuY2FsbChudWxsLCB0aGlzLCB2YWx1ZSk7XG4gICAgLy9yZXR1cm4gdGhpcy5wcm9wcy5faXNWYWxpZFZhbHVlLmNhbGwobnVsbCwgdGhpcywgdmFsdWUpO1xuICB9XG59O1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy93ZWJwYWNrL2J1aWxkaW4vZ2xvYmFsLmpzXCIpKSlcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9ub2RlX21vZHVsZXMvZm9ybXN5LXJlYWN0L2xpYi9tYWluLmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge1xuXG52YXIgX3R5cGVvZjIgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO2ZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9cmV0dXJuIHRhcmdldDtcbn07XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIF90eXBlb2YyKFN5bWJvbC5pdGVyYXRvcikgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiB0eXBlb2Ygb2JqID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YyKG9iaik7XG59IDogZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iaiA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mMihvYmopO1xufTtcblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKG9iaiwga2V5cykge1xuICB2YXIgdGFyZ2V0ID0ge307Zm9yICh2YXIgaSBpbiBvYmopIHtcbiAgICBpZiAoa2V5cy5pbmRleE9mKGkpID49IDApIGNvbnRpbnVlO2lmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgaSkpIGNvbnRpbnVlO3RhcmdldFtpXSA9IG9ialtpXTtcbiAgfXJldHVybiB0YXJnZXQ7XG59XG5cbnZhciBQcm9wVHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9pbmRleC5qc1wiKTtcbnZhciBSZWFjdCA9IGdsb2JhbC5SZWFjdCB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcmVhY3QvcmVhY3QuanNcIik7XG52YXIgY3JlYXRlUmVhY3RDbGFzcyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9jcmVhdGUtcmVhY3QtY2xhc3MvaW5kZXguanNcIik7XG52YXIgRm9ybXN5ID0ge307XG52YXIgdmFsaWRhdGlvblJ1bGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvdmFsaWRhdGlvblJ1bGVzLmpzXCIpO1xudmFyIGZvcm1EYXRhVG9PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvZm9ybS1kYXRhLXRvLW9iamVjdC9pbmRleC5qc1wiKTtcbnZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL3V0aWxzLmpzXCIpO1xudmFyIE1peGluID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvTWl4aW4uanNcIik7XG52YXIgSE9DID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvSE9DLmpzXCIpO1xudmFyIERlY29yYXRvciA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL0RlY29yYXRvci5qc1wiKTtcbnZhciBvcHRpb25zID0ge307XG52YXIgZW1wdHlBcnJheSA9IFtdO1xuXG5Gb3Jtc3kuTWl4aW4gPSBNaXhpbjtcbkZvcm1zeS5IT0MgPSBIT0M7XG5Gb3Jtc3kuRGVjb3JhdG9yID0gRGVjb3JhdG9yO1xuXG5Gb3Jtc3kuZGVmYXVsdHMgPSBmdW5jdGlvbiAocGFzc2VkT3B0aW9ucykge1xuICBvcHRpb25zID0gcGFzc2VkT3B0aW9ucztcbn07XG5cbkZvcm1zeS5hZGRWYWxpZGF0aW9uUnVsZSA9IGZ1bmN0aW9uIChuYW1lLCBmdW5jKSB7XG4gIHZhbGlkYXRpb25SdWxlc1tuYW1lXSA9IGZ1bmM7XG59O1xuXG5Gb3Jtc3kuRm9ybSA9IGNyZWF0ZVJlYWN0Q2xhc3Moe1xuICBkaXNwbGF5TmFtZTogJ0Zvcm1zeScsXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpc1ZhbGlkOiB0cnVlLFxuICAgICAgaXNTdWJtaXR0aW5nOiBmYWxzZSxcbiAgICAgIGNhbkNoYW5nZTogZmFsc2VcbiAgICB9O1xuICB9LFxuICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgb25TdWNjZXNzOiBmdW5jdGlvbiBvblN1Y2Nlc3MoKSB7fSxcbiAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uIG9uRXJyb3IoKSB7fSxcbiAgICAgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdCgpIHt9LFxuICAgICAgb25WYWxpZFN1Ym1pdDogZnVuY3Rpb24gb25WYWxpZFN1Ym1pdCgpIHt9LFxuICAgICAgb25JbnZhbGlkU3VibWl0OiBmdW5jdGlvbiBvbkludmFsaWRTdWJtaXQoKSB7fSxcbiAgICAgIG9uVmFsaWQ6IGZ1bmN0aW9uIG9uVmFsaWQoKSB7fSxcbiAgICAgIG9uSW52YWxpZDogZnVuY3Rpb24gb25JbnZhbGlkKCkge30sXG4gICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoKSB7fSxcbiAgICAgIHZhbGlkYXRpb25FcnJvcnM6IG51bGwsXG4gICAgICBwcmV2ZW50RXh0ZXJuYWxJbnZhbGlkYXRpb246IGZhbHNlXG4gICAgfTtcbiAgfSxcblxuICBjaGlsZENvbnRleHRUeXBlczoge1xuICAgIGZvcm1zeTogUHJvcFR5cGVzLm9iamVjdFxuICB9LFxuICBnZXRDaGlsZENvbnRleHQ6IGZ1bmN0aW9uIGdldENoaWxkQ29udGV4dCgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGZvcm1zeToge1xuICAgICAgICBhdHRhY2hUb0Zvcm06IHRoaXMuYXR0YWNoVG9Gb3JtLFxuICAgICAgICBkZXRhY2hGcm9tRm9ybTogdGhpcy5kZXRhY2hGcm9tRm9ybSxcbiAgICAgICAgdmFsaWRhdGU6IHRoaXMudmFsaWRhdGUsXG4gICAgICAgIGlzRm9ybURpc2FibGVkOiB0aGlzLmlzRm9ybURpc2FibGVkLFxuICAgICAgICBpc1ZhbGlkVmFsdWU6IGZ1bmN0aW9uIGlzVmFsaWRWYWx1ZShjb21wb25lbnQsIHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLnJ1blZhbGlkYXRpb24oY29tcG9uZW50LCB2YWx1ZSkuaXNWYWxpZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH0sXG5cbiAgLy8gQWRkIGEgbWFwIHRvIHN0b3JlIHRoZSBpbnB1dHMgb2YgdGhlIGZvcm0sIGEgbW9kZWwgdG8gc3RvcmVcbiAgLy8gdGhlIHZhbHVlcyBvZiB0aGUgZm9ybSBhbmQgcmVnaXN0ZXIgY2hpbGQgaW5wdXRzXG4gIGNvbXBvbmVudFdpbGxNb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIHRoaXMuaW5wdXRzID0gW107XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMudmFsaWRhdGVGb3JtKCk7XG4gIH0sXG5cbiAgY29tcG9uZW50V2lsbFVwZGF0ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVwZGF0ZSgpIHtcbiAgICAvLyBLZWVwIGEgcmVmZXJlbmNlIHRvIGlucHV0IG5hbWVzIGJlZm9yZSBmb3JtIHVwZGF0ZXMsXG4gICAgLy8gdG8gY2hlY2sgaWYgaW5wdXRzIGhhcyBjaGFuZ2VkIGFmdGVyIHJlbmRlclxuICAgIHRoaXMucHJldklucHV0TmFtZXMgPSB0aGlzLmlucHV0cy5tYXAoZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgcmV0dXJuIGNvbXBvbmVudC5wcm9wcy5uYW1lO1xuICAgIH0pO1xuICB9LFxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKCkge1xuXG4gICAgaWYgKHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9ycyAmJiBfdHlwZW9mKHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9ycykgPT09ICdvYmplY3QnICYmIE9iamVjdC5rZXlzKHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9ycykubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5zZXRJbnB1dFZhbGlkYXRpb25FcnJvcnModGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzKTtcbiAgICB9XG5cbiAgICB2YXIgbmV3SW5wdXROYW1lcyA9IHRoaXMuaW5wdXRzLm1hcChmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICByZXR1cm4gY29tcG9uZW50LnByb3BzLm5hbWU7XG4gICAgfSk7XG4gICAgaWYgKHV0aWxzLmFycmF5c0RpZmZlcih0aGlzLnByZXZJbnB1dE5hbWVzLCBuZXdJbnB1dE5hbWVzKSkge1xuICAgICAgdGhpcy52YWxpZGF0ZUZvcm0oKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gQWxsb3cgcmVzZXR0aW5nIHRvIHNwZWNpZmllZCBkYXRhXG4gIHJlc2V0OiBmdW5jdGlvbiByZXNldChkYXRhKSB7XG4gICAgdGhpcy5zZXRGb3JtUHJpc3RpbmUodHJ1ZSk7XG4gICAgdGhpcy5yZXNldE1vZGVsKGRhdGEpO1xuICB9LFxuXG4gIC8vIFVwZGF0ZSBtb2RlbCwgc3VibWl0IHRvIHVybCBwcm9wIGFuZCBzZW5kIHRoZSBtb2RlbFxuICBzdWJtaXQ6IGZ1bmN0aW9uIHN1Ym1pdChldmVudCkge1xuXG4gICAgZXZlbnQgJiYgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIC8vIFRyaWdnZXIgZm9ybSBhcyBub3QgcHJpc3RpbmUuXG4gICAgLy8gSWYgYW55IGlucHV0cyBoYXZlIG5vdCBiZWVuIHRvdWNoZWQgeWV0IHRoaXMgd2lsbCBtYWtlIHRoZW0gZGlydHlcbiAgICAvLyBzbyB2YWxpZGF0aW9uIGJlY29tZXMgdmlzaWJsZSAoaWYgYmFzZWQgb24gaXNQcmlzdGluZSlcbiAgICB0aGlzLnNldEZvcm1QcmlzdGluZShmYWxzZSk7XG4gICAgdmFyIG1vZGVsID0gdGhpcy5nZXRNb2RlbCgpO1xuICAgIHRoaXMucHJvcHMub25TdWJtaXQobW9kZWwsIHRoaXMucmVzZXRNb2RlbCwgdGhpcy51cGRhdGVJbnB1dHNXaXRoRXJyb3IpO1xuICAgIHRoaXMuc3RhdGUuaXNWYWxpZCA/IHRoaXMucHJvcHMub25WYWxpZFN1Ym1pdChtb2RlbCwgdGhpcy5yZXNldE1vZGVsLCB0aGlzLnVwZGF0ZUlucHV0c1dpdGhFcnJvcikgOiB0aGlzLnByb3BzLm9uSW52YWxpZFN1Ym1pdChtb2RlbCwgdGhpcy5yZXNldE1vZGVsLCB0aGlzLnVwZGF0ZUlucHV0c1dpdGhFcnJvcik7XG4gIH0sXG5cbiAgbWFwTW9kZWw6IGZ1bmN0aW9uIG1hcE1vZGVsKG1vZGVsKSB7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5tYXBwaW5nKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5tYXBwaW5nKG1vZGVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZvcm1EYXRhVG9PYmplY3QudG9PYmooT2JqZWN0LmtleXMobW9kZWwpLnJlZHVjZShmdW5jdGlvbiAobWFwcGVkTW9kZWwsIGtleSkge1xuXG4gICAgICAgIHZhciBrZXlBcnJheSA9IGtleS5zcGxpdCgnLicpO1xuICAgICAgICB2YXIgYmFzZSA9IG1hcHBlZE1vZGVsO1xuICAgICAgICB3aGlsZSAoa2V5QXJyYXkubGVuZ3RoKSB7XG4gICAgICAgICAgdmFyIGN1cnJlbnRLZXkgPSBrZXlBcnJheS5zaGlmdCgpO1xuICAgICAgICAgIGJhc2UgPSBiYXNlW2N1cnJlbnRLZXldID0ga2V5QXJyYXkubGVuZ3RoID8gYmFzZVtjdXJyZW50S2V5XSB8fCB7fSA6IG1vZGVsW2tleV07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWFwcGVkTW9kZWw7XG4gICAgICB9LCB7fSkpO1xuICAgIH1cbiAgfSxcblxuICBnZXRNb2RlbDogZnVuY3Rpb24gZ2V0TW9kZWwoKSB7XG4gICAgdmFyIGN1cnJlbnRWYWx1ZXMgPSB0aGlzLmdldEN1cnJlbnRWYWx1ZXMoKTtcbiAgICByZXR1cm4gdGhpcy5tYXBNb2RlbChjdXJyZW50VmFsdWVzKTtcbiAgfSxcblxuICAvLyBSZXNldCBlYWNoIGtleSBpbiB0aGUgbW9kZWwgdG8gdGhlIG9yaWdpbmFsIC8gaW5pdGlhbCAvIHNwZWNpZmllZCB2YWx1ZVxuICByZXNldE1vZGVsOiBmdW5jdGlvbiByZXNldE1vZGVsKGRhdGEpIHtcbiAgICB0aGlzLmlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgIHZhciBuYW1lID0gY29tcG9uZW50LnByb3BzLm5hbWU7XG4gICAgICBpZiAoZGF0YSAmJiBkYXRhLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIGNvbXBvbmVudC5zZXRWYWx1ZShkYXRhW25hbWVdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbXBvbmVudC5yZXNldFZhbHVlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy52YWxpZGF0ZUZvcm0oKTtcbiAgfSxcblxuICBzZXRJbnB1dFZhbGlkYXRpb25FcnJvcnM6IGZ1bmN0aW9uIHNldElucHV0VmFsaWRhdGlvbkVycm9ycyhlcnJvcnMpIHtcbiAgICB0aGlzLmlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgIHZhciBuYW1lID0gY29tcG9uZW50LnByb3BzLm5hbWU7XG4gICAgICB2YXIgYXJncyA9IFt7XG4gICAgICAgIF9pc1ZhbGlkOiAhKG5hbWUgaW4gZXJyb3JzKSxcbiAgICAgICAgX3ZhbGlkYXRpb25FcnJvcjogdHlwZW9mIGVycm9yc1tuYW1lXSA9PT0gJ3N0cmluZycgPyBbZXJyb3JzW25hbWVdXSA6IGVycm9yc1tuYW1lXVxuICAgICAgfV07XG4gICAgICBjb21wb25lbnQuc2V0U3RhdGUuYXBwbHkoY29tcG9uZW50LCBhcmdzKTtcbiAgICB9KTtcbiAgfSxcblxuICAvLyBDaGVja3MgaWYgdGhlIHZhbHVlcyBoYXZlIGNoYW5nZWQgZnJvbSB0aGVpciBpbml0aWFsIHZhbHVlXG4gIGlzQ2hhbmdlZDogZnVuY3Rpb24gaXNDaGFuZ2VkKCkge1xuICAgIHJldHVybiAhdXRpbHMuaXNTYW1lKHRoaXMuZ2V0UHJpc3RpbmVWYWx1ZXMoKSwgdGhpcy5nZXRDdXJyZW50VmFsdWVzKCkpO1xuICB9LFxuXG4gIGdldFByaXN0aW5lVmFsdWVzOiBmdW5jdGlvbiBnZXRQcmlzdGluZVZhbHVlcygpIHtcbiAgICByZXR1cm4gdGhpcy5pbnB1dHMucmVkdWNlKGZ1bmN0aW9uIChkYXRhLCBjb21wb25lbnQpIHtcbiAgICAgIHZhciBuYW1lID0gY29tcG9uZW50LnByb3BzLm5hbWU7XG4gICAgICBkYXRhW25hbWVdID0gY29tcG9uZW50LnByb3BzLnZhbHVlO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSwge30pO1xuICB9LFxuXG4gIC8vIEdvIHRocm91Z2ggZXJyb3JzIGZyb20gc2VydmVyIGFuZCBncmFiIHRoZSBjb21wb25lbnRzXG4gIC8vIHN0b3JlZCBpbiB0aGUgaW5wdXRzIG1hcC4gQ2hhbmdlIHRoZWlyIHN0YXRlIHRvIGludmFsaWRcbiAgLy8gYW5kIHNldCB0aGUgc2VydmVyRXJyb3IgbWVzc2FnZVxuICB1cGRhdGVJbnB1dHNXaXRoRXJyb3I6IGZ1bmN0aW9uIHVwZGF0ZUlucHV0c1dpdGhFcnJvcihlcnJvcnMpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIE9iamVjdC5rZXlzKGVycm9ycykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSwgaW5kZXgpIHtcbiAgICAgIHZhciBjb21wb25lbnQgPSB1dGlscy5maW5kKF90aGlzMi5pbnB1dHMsIGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudC5wcm9wcy5uYW1lID09PSBuYW1lO1xuICAgICAgfSk7XG4gICAgICBpZiAoIWNvbXBvbmVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBhcmUgdHJ5aW5nIHRvIHVwZGF0ZSBhbiBpbnB1dCB0aGF0IGRvZXMgbm90IGV4aXN0LiAnICsgJ1ZlcmlmeSBlcnJvcnMgb2JqZWN0IHdpdGggaW5wdXQgbmFtZXMuICcgKyBKU09OLnN0cmluZ2lmeShlcnJvcnMpKTtcbiAgICAgIH1cbiAgICAgIHZhciBhcmdzID0gW3tcbiAgICAgICAgX2lzVmFsaWQ6IF90aGlzMi5wcm9wcy5wcmV2ZW50RXh0ZXJuYWxJbnZhbGlkYXRpb24gfHwgZmFsc2UsXG4gICAgICAgIF9leHRlcm5hbEVycm9yOiB0eXBlb2YgZXJyb3JzW25hbWVdID09PSAnc3RyaW5nJyA/IFtlcnJvcnNbbmFtZV1dIDogZXJyb3JzW25hbWVdXG4gICAgICB9XTtcbiAgICAgIGNvbXBvbmVudC5zZXRTdGF0ZS5hcHBseShjb21wb25lbnQsIGFyZ3MpO1xuICAgIH0pO1xuICB9LFxuXG4gIGlzRm9ybURpc2FibGVkOiBmdW5jdGlvbiBpc0Zvcm1EaXNhYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5kaXNhYmxlZDtcbiAgfSxcblxuICBnZXRDdXJyZW50VmFsdWVzOiBmdW5jdGlvbiBnZXRDdXJyZW50VmFsdWVzKCkge1xuICAgIHJldHVybiB0aGlzLmlucHV0cy5yZWR1Y2UoZnVuY3Rpb24gKGRhdGEsIGNvbXBvbmVudCkge1xuICAgICAgdmFyIG5hbWUgPSBjb21wb25lbnQucHJvcHMubmFtZTtcbiAgICAgIGRhdGFbbmFtZV0gPSBjb21wb25lbnQuc3RhdGUuX3ZhbHVlO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSwge30pO1xuICB9LFxuXG4gIHNldEZvcm1QcmlzdGluZTogZnVuY3Rpb24gc2V0Rm9ybVByaXN0aW5lKGlzUHJpc3RpbmUpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIF9mb3JtU3VibWl0dGVkOiAhaXNQcmlzdGluZVxuICAgIH0pO1xuXG4gICAgLy8gSXRlcmF0ZSB0aHJvdWdoIGVhY2ggY29tcG9uZW50IGFuZCBzZXQgaXQgYXMgcHJpc3RpbmVcbiAgICAvLyBvciBcImRpcnR5XCIuXG4gICAgdGhpcy5pbnB1dHMuZm9yRWFjaChmdW5jdGlvbiAoY29tcG9uZW50LCBpbmRleCkge1xuICAgICAgY29tcG9uZW50LnNldFN0YXRlKHtcbiAgICAgICAgX2Zvcm1TdWJtaXR0ZWQ6ICFpc1ByaXN0aW5lLFxuICAgICAgICBfaXNQcmlzdGluZTogaXNQcmlzdGluZVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLy8gVXNlIHRoZSBiaW5kZWQgdmFsdWVzIGFuZCB0aGUgYWN0dWFsIGlucHV0IHZhbHVlIHRvXG4gIC8vIHZhbGlkYXRlIHRoZSBpbnB1dCBhbmQgc2V0IGl0cyBzdGF0ZS4gVGhlbiBjaGVjayB0aGVcbiAgLy8gc3RhdGUgb2YgdGhlIGZvcm0gaXRzZWxmXG4gIHZhbGlkYXRlOiBmdW5jdGlvbiB2YWxpZGF0ZShjb21wb25lbnQpIHtcblxuICAgIC8vIFRyaWdnZXIgb25DaGFuZ2VcbiAgICBpZiAodGhpcy5zdGF0ZS5jYW5DaGFuZ2UpIHtcbiAgICAgIHRoaXMucHJvcHMub25DaGFuZ2UodGhpcy5nZXRDdXJyZW50VmFsdWVzKCksIHRoaXMuaXNDaGFuZ2VkKCkpO1xuICAgIH1cblxuICAgIHZhciB2YWxpZGF0aW9uID0gdGhpcy5ydW5WYWxpZGF0aW9uKGNvbXBvbmVudCk7XG4gICAgLy8gUnVuIHRocm91Z2ggdGhlIHZhbGlkYXRpb25zLCBzcGxpdCB0aGVtIHVwIGFuZCBjYWxsXG4gICAgLy8gdGhlIHZhbGlkYXRvciBJRiB0aGVyZSBpcyBhIHZhbHVlIG9yIGl0IGlzIHJlcXVpcmVkXG4gICAgY29tcG9uZW50LnNldFN0YXRlKHtcbiAgICAgIF9pc1ZhbGlkOiB2YWxpZGF0aW9uLmlzVmFsaWQsXG4gICAgICBfaXNSZXF1aXJlZDogdmFsaWRhdGlvbi5pc1JlcXVpcmVkLFxuICAgICAgX3ZhbGlkYXRpb25FcnJvcjogdmFsaWRhdGlvbi5lcnJvcixcbiAgICAgIF9leHRlcm5hbEVycm9yOiBudWxsXG4gICAgfSwgdGhpcy52YWxpZGF0ZUZvcm0pO1xuICB9LFxuXG4gIC8vIENoZWNrcyB2YWxpZGF0aW9uIG9uIGN1cnJlbnQgdmFsdWUgb3IgYSBwYXNzZWQgdmFsdWVcbiAgcnVuVmFsaWRhdGlvbjogZnVuY3Rpb24gcnVuVmFsaWRhdGlvbihjb21wb25lbnQsIHZhbHVlKSB7XG5cbiAgICB2YXIgY3VycmVudFZhbHVlcyA9IHRoaXMuZ2V0Q3VycmVudFZhbHVlcygpO1xuICAgIHZhciB2YWxpZGF0aW9uRXJyb3JzID0gY29tcG9uZW50LnByb3BzLnZhbGlkYXRpb25FcnJvcnM7XG4gICAgdmFyIHZhbGlkYXRpb25FcnJvciA9IGNvbXBvbmVudC5wcm9wcy52YWxpZGF0aW9uRXJyb3I7XG4gICAgdmFsdWUgPSBhcmd1bWVudHMubGVuZ3RoID09PSAyID8gdmFsdWUgOiBjb21wb25lbnQuc3RhdGUuX3ZhbHVlO1xuXG4gICAgdmFyIHZhbGlkYXRpb25SZXN1bHRzID0gdGhpcy5ydW5SdWxlcyh2YWx1ZSwgY3VycmVudFZhbHVlcywgY29tcG9uZW50Ll92YWxpZGF0aW9ucyk7XG4gICAgdmFyIHJlcXVpcmVkUmVzdWx0cyA9IHRoaXMucnVuUnVsZXModmFsdWUsIGN1cnJlbnRWYWx1ZXMsIGNvbXBvbmVudC5fcmVxdWlyZWRWYWxpZGF0aW9ucyk7XG5cbiAgICAvLyB0aGUgY29tcG9uZW50IGRlZmluZXMgYW4gZXhwbGljaXQgdmFsaWRhdGUgZnVuY3Rpb25cbiAgICBpZiAodHlwZW9mIGNvbXBvbmVudC52YWxpZGF0ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB2YWxpZGF0aW9uUmVzdWx0cy5mYWlsZWQgPSBjb21wb25lbnQudmFsaWRhdGUoKSA/IFtdIDogWydmYWlsZWQnXTtcbiAgICB9XG5cbiAgICB2YXIgaXNSZXF1aXJlZCA9IE9iamVjdC5rZXlzKGNvbXBvbmVudC5fcmVxdWlyZWRWYWxpZGF0aW9ucykubGVuZ3RoID8gISFyZXF1aXJlZFJlc3VsdHMuc3VjY2Vzcy5sZW5ndGggOiBmYWxzZTtcbiAgICB2YXIgaXNWYWxpZCA9ICF2YWxpZGF0aW9uUmVzdWx0cy5mYWlsZWQubGVuZ3RoICYmICEodGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzICYmIHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9yc1tjb21wb25lbnQucHJvcHMubmFtZV0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzUmVxdWlyZWQ6IGlzUmVxdWlyZWQsXG4gICAgICBpc1ZhbGlkOiBpc1JlcXVpcmVkID8gZmFsc2UgOiBpc1ZhbGlkLFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBpZiAoaXNWYWxpZCAmJiAhaXNSZXF1aXJlZCkge1xuICAgICAgICAgIHJldHVybiBlbXB0eUFycmF5O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhbGlkYXRpb25SZXN1bHRzLmVycm9ycy5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gdmFsaWRhdGlvblJlc3VsdHMuZXJyb3JzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9ycyAmJiB0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnNbY29tcG9uZW50LnByb3BzLm5hbWVdKSB7XG4gICAgICAgICAgcmV0dXJuIHR5cGVvZiB0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnNbY29tcG9uZW50LnByb3BzLm5hbWVdID09PSAnc3RyaW5nJyA/IFt0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnNbY29tcG9uZW50LnByb3BzLm5hbWVdXSA6IHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9yc1tjb21wb25lbnQucHJvcHMubmFtZV07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNSZXF1aXJlZCkge1xuICAgICAgICAgIHZhciBlcnJvciA9IHZhbGlkYXRpb25FcnJvcnNbcmVxdWlyZWRSZXN1bHRzLnN1Y2Nlc3NbMF1dO1xuICAgICAgICAgIHJldHVybiBlcnJvciA/IFtlcnJvcl0gOiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhbGlkYXRpb25SZXN1bHRzLmZhaWxlZC5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gdmFsaWRhdGlvblJlc3VsdHMuZmFpbGVkLm1hcChmdW5jdGlvbiAoZmFpbGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsaWRhdGlvbkVycm9yc1tmYWlsZWRdID8gdmFsaWRhdGlvbkVycm9yc1tmYWlsZWRdIDogdmFsaWRhdGlvbkVycm9yO1xuICAgICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoeCwgcG9zLCBhcnIpIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSBkdXBsaWNhdGVzXG4gICAgICAgICAgICByZXR1cm4gYXJyLmluZGV4T2YoeCkgPT09IHBvcztcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfS5jYWxsKHRoaXMpXG4gICAgfTtcbiAgfSxcblxuICBydW5SdWxlczogZnVuY3Rpb24gcnVuUnVsZXModmFsdWUsIGN1cnJlbnRWYWx1ZXMsIHZhbGlkYXRpb25zKSB7XG5cbiAgICB2YXIgcmVzdWx0cyA9IHtcbiAgICAgIGVycm9yczogW10sXG4gICAgICBmYWlsZWQ6IFtdLFxuICAgICAgc3VjY2VzczogW11cbiAgICB9O1xuICAgIGlmIChPYmplY3Qua2V5cyh2YWxpZGF0aW9ucykubGVuZ3RoKSB7XG4gICAgICBPYmplY3Qua2V5cyh2YWxpZGF0aW9ucykuZm9yRWFjaChmdW5jdGlvbiAodmFsaWRhdGlvbk1ldGhvZCkge1xuXG4gICAgICAgIGlmICh2YWxpZGF0aW9uUnVsZXNbdmFsaWRhdGlvbk1ldGhvZF0gJiYgdHlwZW9mIHZhbGlkYXRpb25zW3ZhbGlkYXRpb25NZXRob2RdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3Jtc3kgZG9lcyBub3QgYWxsb3cgeW91IHRvIG92ZXJyaWRlIGRlZmF1bHQgdmFsaWRhdGlvbnM6ICcgKyB2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdmFsaWRhdGlvblJ1bGVzW3ZhbGlkYXRpb25NZXRob2RdICYmIHR5cGVvZiB2YWxpZGF0aW9uc1t2YWxpZGF0aW9uTWV0aG9kXSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRm9ybXN5IGRvZXMgbm90IGhhdmUgdGhlIHZhbGlkYXRpb24gcnVsZTogJyArIHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiB2YWxpZGF0aW9uc1t2YWxpZGF0aW9uTWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHZhciB2YWxpZGF0aW9uID0gdmFsaWRhdGlvbnNbdmFsaWRhdGlvbk1ldGhvZF0oY3VycmVudFZhbHVlcywgdmFsdWUpO1xuICAgICAgICAgIGlmICh0eXBlb2YgdmFsaWRhdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJlc3VsdHMuZXJyb3JzLnB1c2godmFsaWRhdGlvbik7XG4gICAgICAgICAgICByZXN1bHRzLmZhaWxlZC5wdXNoKHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIXZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgIHJlc3VsdHMuZmFpbGVkLnB1c2godmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsaWRhdGlvbnNbdmFsaWRhdGlvbk1ldGhvZF0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB2YXIgdmFsaWRhdGlvbiA9IHZhbGlkYXRpb25SdWxlc1t2YWxpZGF0aW9uTWV0aG9kXShjdXJyZW50VmFsdWVzLCB2YWx1ZSwgdmFsaWRhdGlvbnNbdmFsaWRhdGlvbk1ldGhvZF0pO1xuICAgICAgICAgIGlmICh0eXBlb2YgdmFsaWRhdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJlc3VsdHMuZXJyb3JzLnB1c2godmFsaWRhdGlvbik7XG4gICAgICAgICAgICByZXN1bHRzLmZhaWxlZC5wdXNoKHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIXZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgIHJlc3VsdHMuZmFpbGVkLnB1c2godmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdHMuc3VjY2Vzcy5wdXNoKHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0cy5zdWNjZXNzLnB1c2godmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfSxcblxuICAvLyBWYWxpZGF0ZSB0aGUgZm9ybSBieSBnb2luZyB0aHJvdWdoIGFsbCBjaGlsZCBpbnB1dCBjb21wb25lbnRzXG4gIC8vIGFuZCBjaGVjayB0aGVpciBzdGF0ZVxuICB2YWxpZGF0ZUZvcm06IGZ1bmN0aW9uIHZhbGlkYXRlRm9ybSgpIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIC8vIFdlIG5lZWQgYSBjYWxsYmFjayBhcyB3ZSBhcmUgdmFsaWRhdGluZyBhbGwgaW5wdXRzIGFnYWluLiBUaGlzIHdpbGxcbiAgICAvLyBydW4gd2hlbiB0aGUgbGFzdCBjb21wb25lbnQgaGFzIHNldCBpdHMgc3RhdGVcbiAgICB2YXIgb25WYWxpZGF0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYWxsSXNWYWxpZCA9IHRoaXMuaW5wdXRzLmV2ZXJ5KGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudC5zdGF0ZS5faXNWYWxpZDtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgaXNWYWxpZDogYWxsSXNWYWxpZFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChhbGxJc1ZhbGlkKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25WYWxpZCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vbkludmFsaWQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gVGVsbCB0aGUgZm9ybSB0aGF0IGl0IGNhbiBzdGFydCB0byB0cmlnZ2VyIGNoYW5nZSBldmVudHNcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBjYW5DaGFuZ2U6IHRydWVcbiAgICAgIH0pO1xuICAgIH0uYmluZCh0aGlzKTtcblxuICAgIC8vIFJ1biB2YWxpZGF0aW9uIGFnYWluIGluIGNhc2UgYWZmZWN0ZWQgYnkgb3RoZXIgaW5wdXRzLiBUaGVcbiAgICAvLyBsYXN0IGNvbXBvbmVudCB2YWxpZGF0ZWQgd2lsbCBydW4gdGhlIG9uVmFsaWRhdGlvbkNvbXBsZXRlIGNhbGxiYWNrXG4gICAgdGhpcy5pbnB1dHMuZm9yRWFjaChmdW5jdGlvbiAoY29tcG9uZW50LCBpbmRleCkge1xuICAgICAgdmFyIHZhbGlkYXRpb24gPSBfdGhpczMucnVuVmFsaWRhdGlvbihjb21wb25lbnQpO1xuICAgICAgaWYgKHZhbGlkYXRpb24uaXNWYWxpZCAmJiBjb21wb25lbnQuc3RhdGUuX2V4dGVybmFsRXJyb3IpIHtcbiAgICAgICAgdmFsaWRhdGlvbi5pc1ZhbGlkID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBjb21wb25lbnQuc2V0U3RhdGUoe1xuICAgICAgICBfaXNWYWxpZDogdmFsaWRhdGlvbi5pc1ZhbGlkLFxuICAgICAgICBfaXNSZXF1aXJlZDogdmFsaWRhdGlvbi5pc1JlcXVpcmVkLFxuICAgICAgICBfdmFsaWRhdGlvbkVycm9yOiB2YWxpZGF0aW9uLmVycm9yLFxuICAgICAgICBfZXh0ZXJuYWxFcnJvcjogIXZhbGlkYXRpb24uaXNWYWxpZCAmJiBjb21wb25lbnQuc3RhdGUuX2V4dGVybmFsRXJyb3IgPyBjb21wb25lbnQuc3RhdGUuX2V4dGVybmFsRXJyb3IgOiBudWxsXG4gICAgICB9LCBpbmRleCA9PT0gX3RoaXMzLmlucHV0cy5sZW5ndGggLSAxID8gb25WYWxpZGF0aW9uQ29tcGxldGUgOiBudWxsKTtcbiAgICB9KTtcblxuICAgIC8vIElmIHRoZXJlIGFyZSBubyBpbnB1dHMsIHNldCBzdGF0ZSB3aGVyZSBmb3JtIGlzIHJlYWR5IHRvIHRyaWdnZXJcbiAgICAvLyBjaGFuZ2UgZXZlbnQuIE5ldyBpbnB1dHMgbWlnaHQgYmUgYWRkZWQgbGF0ZXJcbiAgICBpZiAoIXRoaXMuaW5wdXRzLmxlbmd0aCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGNhbkNoYW5nZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIC8vIE1ldGhvZCBwdXQgb24gZWFjaCBpbnB1dCBjb21wb25lbnQgdG8gcmVnaXN0ZXJcbiAgLy8gaXRzZWxmIHRvIHRoZSBmb3JtXG4gIGF0dGFjaFRvRm9ybTogZnVuY3Rpb24gYXR0YWNoVG9Gb3JtKGNvbXBvbmVudCkge1xuXG4gICAgaWYgKHRoaXMuaW5wdXRzLmluZGV4T2YoY29tcG9uZW50KSA9PT0gLTEpIHtcbiAgICAgIHRoaXMuaW5wdXRzLnB1c2goY29tcG9uZW50KTtcbiAgICB9XG5cbiAgICB0aGlzLnZhbGlkYXRlKGNvbXBvbmVudCk7XG4gIH0sXG5cbiAgLy8gTWV0aG9kIHB1dCBvbiBlYWNoIGlucHV0IGNvbXBvbmVudCB0byB1bnJlZ2lzdGVyXG4gIC8vIGl0c2VsZiBmcm9tIHRoZSBmb3JtXG4gIGRldGFjaEZyb21Gb3JtOiBmdW5jdGlvbiBkZXRhY2hGcm9tRm9ybShjb21wb25lbnQpIHtcbiAgICB2YXIgY29tcG9uZW50UG9zID0gdGhpcy5pbnB1dHMuaW5kZXhPZihjb21wb25lbnQpO1xuXG4gICAgaWYgKGNvbXBvbmVudFBvcyAhPT0gLTEpIHtcbiAgICAgIHRoaXMuaW5wdXRzID0gdGhpcy5pbnB1dHMuc2xpY2UoMCwgY29tcG9uZW50UG9zKS5jb25jYXQodGhpcy5pbnB1dHMuc2xpY2UoY29tcG9uZW50UG9zICsgMSkpO1xuICAgIH1cblxuICAgIHRoaXMudmFsaWRhdGVGb3JtKCk7XG4gIH0sXG4gIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICBtYXBwaW5nID0gX3Byb3BzLm1hcHBpbmcsXG4gICAgICAgIHZhbGlkYXRpb25FcnJvcnMgPSBfcHJvcHMudmFsaWRhdGlvbkVycm9ycyxcbiAgICAgICAgb25TdWJtaXQgPSBfcHJvcHMub25TdWJtaXQsXG4gICAgICAgIG9uVmFsaWQgPSBfcHJvcHMub25WYWxpZCxcbiAgICAgICAgb25WYWxpZFN1Ym1pdCA9IF9wcm9wcy5vblZhbGlkU3VibWl0LFxuICAgICAgICBvbkludmFsaWQgPSBfcHJvcHMub25JbnZhbGlkLFxuICAgICAgICBvbkludmFsaWRTdWJtaXQgPSBfcHJvcHMub25JbnZhbGlkU3VibWl0LFxuICAgICAgICBvbkNoYW5nZSA9IF9wcm9wcy5vbkNoYW5nZSxcbiAgICAgICAgcmVzZXQgPSBfcHJvcHMucmVzZXQsXG4gICAgICAgIHByZXZlbnRFeHRlcm5hbEludmFsaWRhdGlvbiA9IF9wcm9wcy5wcmV2ZW50RXh0ZXJuYWxJbnZhbGlkYXRpb24sXG4gICAgICAgIG9uU3VjY2VzcyA9IF9wcm9wcy5vblN1Y2Nlc3MsXG4gICAgICAgIG9uRXJyb3IgPSBfcHJvcHMub25FcnJvcixcbiAgICAgICAgbm9uRm9ybXN5UHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3Byb3BzLCBbJ21hcHBpbmcnLCAndmFsaWRhdGlvbkVycm9ycycsICdvblN1Ym1pdCcsICdvblZhbGlkJywgJ29uVmFsaWRTdWJtaXQnLCAnb25JbnZhbGlkJywgJ29uSW52YWxpZFN1Ym1pdCcsICdvbkNoYW5nZScsICdyZXNldCcsICdwcmV2ZW50RXh0ZXJuYWxJbnZhbGlkYXRpb24nLCAnb25TdWNjZXNzJywgJ29uRXJyb3InXSk7XG5cbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudCgnZm9ybScsIF9leHRlbmRzKHt9LCBub25Gb3Jtc3lQcm9wcywgeyBvblN1Ym1pdDogdGhpcy5zdWJtaXQgfSksIHRoaXMucHJvcHMuY2hpbGRyZW4pO1xuICB9XG59KTtcblxuaWYgKCFnbG9iYWwuZXhwb3J0cyAmJiAhZ2xvYmFsLm1vZHVsZSAmJiAoIWdsb2JhbC5kZWZpbmUgfHwgIWdsb2JhbC5kZWZpbmUuYW1kKSkge1xuICBnbG9iYWwuRm9ybXN5ID0gRm9ybXN5O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEZvcm1zeTtcbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvd2VicGFjay9idWlsZGluL2dsb2JhbC5qc1wiKSkpXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvdXRpbHMuanNcIjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF90eXBlb2YyID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgX3R5cGVvZjIoU3ltYm9sLml0ZXJhdG9yKSA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZjIob2JqKTtcbn0gOiBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YyKG9iaik7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYXJyYXlzRGlmZmVyOiBmdW5jdGlvbiBhcnJheXNEaWZmZXIoYSwgYikge1xuICAgIHZhciBpc0RpZmZlcmVudCA9IGZhbHNlO1xuICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHtcbiAgICAgIGlzRGlmZmVyZW50ID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgYS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTYW1lKGl0ZW0sIGJbaW5kZXhdKSkge1xuICAgICAgICAgIGlzRGlmZmVyZW50ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSwgdGhpcyk7XG4gICAgfVxuICAgIHJldHVybiBpc0RpZmZlcmVudDtcbiAgfSxcblxuICBvYmplY3RzRGlmZmVyOiBmdW5jdGlvbiBvYmplY3RzRGlmZmVyKGEsIGIpIHtcbiAgICB2YXIgaXNEaWZmZXJlbnQgPSBmYWxzZTtcbiAgICBpZiAoT2JqZWN0LmtleXMoYSkubGVuZ3RoICE9PSBPYmplY3Qua2V5cyhiKS5sZW5ndGgpIHtcbiAgICAgIGlzRGlmZmVyZW50ID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgT2JqZWN0LmtleXMoYSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGlmICghdGhpcy5pc1NhbWUoYVtrZXldLCBiW2tleV0pKSB7XG4gICAgICAgICAgaXNEaWZmZXJlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzKTtcbiAgICB9XG4gICAgcmV0dXJuIGlzRGlmZmVyZW50O1xuICB9LFxuXG4gIGlzU2FtZTogZnVuY3Rpb24gaXNTYW1lKGEsIGIpIHtcbiAgICBpZiAoKHR5cGVvZiBhID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihhKSkgIT09ICh0eXBlb2YgYiA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoYikpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGEpICYmIEFycmF5LmlzQXJyYXkoYikpIHtcbiAgICAgIHJldHVybiAhdGhpcy5hcnJheXNEaWZmZXIoYSwgYik7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIGEudG9TdHJpbmcoKSA9PT0gYi50b1N0cmluZygpO1xuICAgIH0gZWxzZSBpZiAoKHR5cGVvZiBhID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihhKSkgPT09ICdvYmplY3QnICYmIGEgIT09IG51bGwgJiYgYiAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuICF0aGlzLm9iamVjdHNEaWZmZXIoYSwgYik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGEgPT09IGI7XG4gIH0sXG5cbiAgZmluZDogZnVuY3Rpb24gZmluZChjb2xsZWN0aW9uLCBmbikge1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gY29sbGVjdGlvbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gY29sbGVjdGlvbltpXTtcbiAgICAgIGlmIChmbihpdGVtKSkge1xuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vbm9kZV9tb2R1bGVzL2Zvcm1zeS1yZWFjdC9saWIvdmFsaWRhdGlvblJ1bGVzLmpzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfaXNFeGlzdHkgPSBmdW5jdGlvbiBfaXNFeGlzdHkodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQ7XG59O1xuXG52YXIgaXNFbXB0eSA9IGZ1bmN0aW9uIGlzRW1wdHkodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09PSAnJztcbn07XG5cbnZhciB2YWxpZGF0aW9ucyA9IHtcbiAgaXNEZWZhdWx0UmVxdWlyZWRWYWx1ZTogZnVuY3Rpb24gaXNEZWZhdWx0UmVxdWlyZWRWYWx1ZSh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09ICcnO1xuICB9LFxuICBpc0V4aXN0eTogZnVuY3Rpb24gaXNFeGlzdHkodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiBfaXNFeGlzdHkodmFsdWUpO1xuICB9LFxuICBtYXRjaFJlZ2V4cDogZnVuY3Rpb24gbWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgcmVnZXhwKSB7XG4gICAgcmV0dXJuICFfaXNFeGlzdHkodmFsdWUpIHx8IGlzRW1wdHkodmFsdWUpIHx8IHJlZ2V4cC50ZXN0KHZhbHVlKTtcbiAgfSxcbiAgaXNVbmRlZmluZWQ6IGZ1bmN0aW9uIGlzVW5kZWZpbmVkKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZDtcbiAgfSxcbiAgaXNFbXB0eVN0cmluZzogZnVuY3Rpb24gaXNFbXB0eVN0cmluZyh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIGlzRW1wdHkodmFsdWUpO1xuICB9LFxuICBpc0VtYWlsOiBmdW5jdGlvbiBpc0VtYWlsKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL14oKChbYS16XXxcXGR8WyEjXFwkJSYnXFwqXFwrXFwtXFwvPVxcP1xcXl9ge1xcfH1+XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkrKFxcLihbYS16XXxcXGR8WyEjXFwkJSYnXFwqXFwrXFwtXFwvPVxcP1xcXl9ge1xcfH1+XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkrKSopfCgoXFx4MjIpKCgoKFxceDIwfFxceDA5KSooXFx4MGRcXHgwYSkpPyhcXHgyMHxcXHgwOSkrKT8oKFtcXHgwMS1cXHgwOFxceDBiXFx4MGNcXHgwZS1cXHgxZlxceDdmXXxcXHgyMXxbXFx4MjMtXFx4NWJdfFtcXHg1ZC1cXHg3ZV18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfChcXFxcKFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZC1cXHg3Zl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkpKigoKFxceDIwfFxceDA5KSooXFx4MGRcXHgwYSkpPyhcXHgyMHxcXHgwOSkrKT8oXFx4MjIpKSlAKCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKVxcLikrKChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpJC9pKTtcbiAgfSxcbiAgaXNVcmw6IGZ1bmN0aW9uIGlzVXJsKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL14oaHR0cHM/fHM/ZnRwKTpcXC9cXC8oKCgoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OikqQCk/KCgoXFxkfFsxLTldXFxkfDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNV0pXFwuKFxcZHxbMS05XVxcZHwxXFxkXFxkfDJbMC00XVxcZHwyNVswLTVdKVxcLihcXGR8WzEtOV1cXGR8MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC01XSlcXC4oXFxkfFsxLTldXFxkfDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNV0pKXwoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4/KSg6XFxkKik/KShcXC8oKChbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoJVtcXGRhLWZdezJ9KXxbIVxcJCYnXFwoXFwpXFwqXFwrLDs9XXw6fEApKyhcXC8oKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCkqKSopPyk/KFxcPygoKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCl8W1xcdUUwMDAtXFx1RjhGRl18XFwvfFxcPykqKT8oIygoKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCl8XFwvfFxcPykqKT8kL2kpO1xuICB9LFxuICBpc1RydWU6IGZ1bmN0aW9uIGlzVHJ1ZSh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSB0cnVlO1xuICB9LFxuICBpc0ZhbHNlOiBmdW5jdGlvbiBpc0ZhbHNlKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IGZhbHNlO1xuICB9LFxuICBpc051bWVyaWM6IGZ1bmN0aW9uIGlzTnVtZXJpYyh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL15bLStdPyg/OlxcZCpbLl0pP1xcZCskLyk7XG4gIH0sXG4gIGlzQWxwaGE6IGZ1bmN0aW9uIGlzQWxwaGEodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXltBLVpdKyQvaSk7XG4gIH0sXG4gIGlzQWxwaGFudW1lcmljOiBmdW5jdGlvbiBpc0FscGhhbnVtZXJpYyh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eWzAtOUEtWl0rJC9pKTtcbiAgfSxcbiAgaXNJbnQ6IGZ1bmN0aW9uIGlzSW50KHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL14oPzpbLStdPyg/OjB8WzEtOV1cXGQqKSkkLyk7XG4gIH0sXG4gIGlzRmxvYXQ6IGZ1bmN0aW9uIGlzRmxvYXQodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXig/OlstK10/KD86XFxkKykpPyg/OlxcLlxcZCopPyg/OltlRV1bXFwrXFwtXT8oPzpcXGQrKSk/JC8pO1xuICB9LFxuICBpc1dvcmRzOiBmdW5jdGlvbiBpc1dvcmRzKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL15bQS1aXFxzXSskL2kpO1xuICB9LFxuICBpc1NwZWNpYWxXb3JkczogZnVuY3Rpb24gaXNTcGVjaWFsV29yZHModmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXltBLVpcXHNcXHUwMEMwLVxcdTAxN0ZdKyQvaSk7XG4gIH0sXG4gIGlzTGVuZ3RoOiBmdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZXMsIHZhbHVlLCBsZW5ndGgpIHtcbiAgICByZXR1cm4gIV9pc0V4aXN0eSh2YWx1ZSkgfHwgaXNFbXB0eSh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoID09PSBsZW5ndGg7XG4gIH0sXG4gIGVxdWFsczogZnVuY3Rpb24gZXF1YWxzKHZhbHVlcywgdmFsdWUsIGVxbCkge1xuICAgIHJldHVybiAhX2lzRXhpc3R5KHZhbHVlKSB8fCBpc0VtcHR5KHZhbHVlKSB8fCB2YWx1ZSA9PSBlcWw7XG4gIH0sXG4gIGVxdWFsc0ZpZWxkOiBmdW5jdGlvbiBlcXVhbHNGaWVsZCh2YWx1ZXMsIHZhbHVlLCBmaWVsZCkge1xuICAgIHJldHVybiB2YWx1ZSA9PSB2YWx1ZXNbZmllbGRdO1xuICB9LFxuICBtYXhMZW5ndGg6IGZ1bmN0aW9uIG1heExlbmd0aCh2YWx1ZXMsIHZhbHVlLCBsZW5ndGgpIHtcbiAgICByZXR1cm4gIV9pc0V4aXN0eSh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoIDw9IGxlbmd0aDtcbiAgfSxcbiAgbWluTGVuZ3RoOiBmdW5jdGlvbiBtaW5MZW5ndGgodmFsdWVzLCB2YWx1ZSwgbGVuZ3RoKSB7XG4gICAgcmV0dXJuICFfaXNFeGlzdHkodmFsdWUpIHx8IGlzRW1wdHkodmFsdWUpIHx8IHZhbHVlLmxlbmd0aCA+PSBsZW5ndGg7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gdmFsaWRhdGlvbnM7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2NvbXBvbmVudHMvQXV0aC9GaWVsZC9GaWVsZC5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0L3JlYWN0LmpzXCIpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9mb3Jtc3lSZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL21haW4uanNcIik7XG5cbnZhciBfZm9ybXN5UmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZm9ybXN5UmVhY3QpO1xuXG52YXIgX3Byb3BUeXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9wcm9wLXR5cGVzL2luZGV4LmpzXCIpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBGaWVsZCA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhGaWVsZCwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gRmllbGQocHJvcHMpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmllbGQpO1xuXG4gICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEZpZWxkLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRmllbGQpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICBfdGhpcy5jaGFuZ2VWYWx1ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgX3RoaXMucHJvcHMuc2V0VmFsdWUoZXZlbnQuY3VycmVudFRhcmdldFtfdGhpcy5wcm9wcy50eXBlID09PSAnY2hlY2tib3gnID8gJ2NoZWNrZWQnIDogJ3ZhbHVlJ10pO1xuICAgIH07XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKEZpZWxkLCBbe1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSB0aGlzLnByb3BzLmdldEVycm9yTWVzc2FnZSgpO1xuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7IGNsYXNzTmFtZTogJ3NpZ251cC1maWVsZC1ncm91cCcgfSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgJ2xhYmVsJyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBodG1sRm9yOiB0aGlzLnByb3BzLm5hbWUudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgIGNsYXNzTmFtZTogJ3NpZ251cC1mb3JtX19sYWJlbCcgfSxcbiAgICAgICAgICB0aGlzLnByb3BzLm5hbWVcbiAgICAgICAgKSxcbiAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmNoYW5nZVZhbHVlLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnByb3BzLmdldFZhbHVlKCksXG4gICAgICAgICAgdHlwZTogdGhpcy5wcm9wcy50eXBlIHx8ICd0ZXh0JyxcbiAgICAgICAgICBuYW1lOiB0aGlzLnByb3BzLm5hbWUudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICBjbGFzc05hbWU6ICdzaWdudXAtZm9ybV9faW5wdXQtZmllbGQnIH0pLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAncCcsXG4gICAgICAgICAgeyBjbGFzc05hbWU6ICdjYXB0aW9uIHNpZ251cC1mb3JtX19jYXB0aW9uJyB9LFxuICAgICAgICAgIHRoaXMucHJvcHMudGV4dFxuICAgICAgICApLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgeyBjbGFzc05hbWU6ICdzaWdudXAtZm9ybV9fZXJyb3ItbWVzc2FnZScgfSxcbiAgICAgICAgICBlcnJvck1lc3NhZ2VcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gRmllbGQ7XG59KF9yZWFjdDIuZGVmYXVsdC5Db21wb25lbnQpO1xuXG5GaWVsZC5wcm9wVHlwZXMgPSB7XG4gIG5hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICB0ZXh0OiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgY2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgdHlwZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIHNldFZhbHVlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmFueSxcbiAgZ2V0VmFsdWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgdmFsaWRhdGlvbnM6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYW55LFxuICBnZXRFcnJvck1lc3NhZ2U6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgcmVnaXN0cmF0aW9uOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmNcbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9ICgwLCBfZm9ybXN5UmVhY3QuSE9DKShGaWVsZCk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3BhZ2VzL1Byb2ZpbGUvUHJvZmlsZS5qc1wiOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0L3JlYWN0LmpzXCIpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9mb3Jtc3lSZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9mb3Jtc3ktcmVhY3QvbGliL21haW4uanNcIik7XG5cbnZhciBfZm9ybXN5UmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZm9ybXN5UmVhY3QpO1xuXG52YXIgX0ZpZWxkID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2NvbXBvbmVudHMvQXV0aC9GaWVsZC9GaWVsZC5qc1wiKTtcblxudmFyIF9GaWVsZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9GaWVsZCk7XG5cbnZhciBfdXNlcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvYWN0aW9ucy91c2Vycy5hY3Rpb24uanNcIik7XG5cbnZhciBfcmVkdXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcmVkdXgvZXMvaW5kZXguanNcIik7XG5cbnZhciBfTWVzc2FnZSA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9jb21wb25lbnRzL01lc3NhZ2UvTWVzc2FnZS5qc1wiKTtcblxudmFyIF9Qb3B1cCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9jb21wb25lbnRzL1BvcHVwL1BvcHVwLmpzXCIpO1xuXG52YXIgX0J1dHRvbiA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9jb21wb25lbnRzL0J1dHRvbi9CdXR0b24uanNcIik7XG5cbnZhciBfcmVhY3RSZWR1eCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC1yZWR1eC9lcy9pbmRleC5qc1wiKTtcblxudmFyIF9wcm9wVHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvcHJvcC10eXBlcy9pbmRleC5qc1wiKTtcblxudmFyIF9wcm9wVHlwZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvcFR5cGVzKTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL3BhZ2VzL1Byb2ZpbGUvUHJvZmlsZS5zY3NzXCIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm9maWxlID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFByb2ZpbGUsIF9Db21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIFByb2ZpbGUocHJvcHMpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvZmlsZSk7XG5cbiAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvZmlsZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb2ZpbGUpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICBfdGhpcy5zZXRQb3B1cFNob3duID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICB2YXIgY3VycmVudFN0YXRlID0gX3RoaXMuc3RhdGUucG9wdXBTaG93bjtcblxuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBwb3B1cFNob3duOiAhY3VycmVudFN0YXRlXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3RoaXMudXBkYXRlUHJvZmlsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICBuYW1lOiBfdGhpcy5uYW1lLmdldFZhbHVlKCksXG4gICAgICAgIGVtYWlsOiBfdGhpcy5lbWFpbC5nZXRWYWx1ZSgpLFxuICAgICAgICBwYXNzd29yZDogX3RoaXMucGFzc3dvcmQuZ2V0VmFsdWUoKSxcbiAgICAgICAgcGFzc3dvcmRSZXBlYXQ6IF90aGlzLnBhc3N3b3JkUmVwZWF0LmdldFZhbHVlKCksXG4gICAgICAgIGF2YXRhcjogX3RoaXMuYmFzZTY0U3RyLFxuICAgICAgICBfaWQ6IF90aGlzLnByb3BzLnVzZXIuX2lkXG4gICAgICB9O1xuXG4gICAgICBfdGhpcy5wcm9wcy51cGRhdGVQcm9maWxlUmVxdWVzdChkYXRhKTtcbiAgICB9O1xuXG4gICAgX3RoaXMuZW5hYmxlQnV0dG9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBjYW5TdWJtaXQ6IHRydWVcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfdGhpcy5kaXNhYmxlQnV0dG9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBjYW5TdWJtaXQ6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3RoaXMuZWRpdE5hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGFsbG93RWRpdE5hbWU6ICFfdGhpcy5zdGF0ZS5hbGxvd0VkaXROYW1lXG4gICAgICB9KTtcbiAgICAgIF90aGlzLmZpZWxkTmFtZS5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKTtcbiAgICAgIF90aGlzLmZpZWxkTmFtZS5jbGFzc0xpc3QudG9nZ2xlKCdmbGV4LWRpc3BsYXknKTtcbiAgICB9O1xuXG4gICAgX3RoaXMuZWRpdEVtYWlsID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBhbGxvd0VkaXRFbWFpbDogIV90aGlzLnN0YXRlLmFsbG93RWRpdEVtYWlsXG4gICAgICB9KTtcbiAgICAgIF90aGlzLmZpZWxkRW1haWwuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7XG4gICAgICBfdGhpcy5maWVsZEVtYWlsLmNsYXNzTGlzdC50b2dnbGUoJ2ZsZXgtZGlzcGxheScpO1xuICAgIH07XG5cbiAgICBfdGhpcy5lZGl0UGFzc3dvcmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGFsbG93RWRpdFBhc3N3b3JkOiAhX3RoaXMuc3RhdGUuYWxsb3dFZGl0UGFzc3dvcmRcbiAgICAgIH0pO1xuICAgICAgX3RoaXMuZmllbGRQYXNzd29yZC5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKTtcbiAgICAgIF90aGlzLmZpZWxkUGFzc3dvcmQuY2xhc3NMaXN0LnRvZ2dsZSgnZmxleC1kaXNwbGF5Jyk7XG4gICAgfTtcblxuICAgIF90aGlzLnJlcGVhdFBhc3N3b3JkID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBhbGxvd1JlcGVhdFBhc3N3b3JkOiAhX3RoaXMuc3RhdGUuYWxsb3dSZXBlYXRQYXNzd29yZFxuICAgICAgfSk7XG4gICAgICBfdGhpcy5maWVsZFJlcGVhdFBhc3N3b3JkLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xuICAgICAgX3RoaXMuZmllbGRSZXBlYXRQYXNzd29yZC5jbGFzc0xpc3QudG9nZ2xlKCdmbGV4LWRpc3BsYXknKTtcbiAgICB9O1xuXG4gICAgX3RoaXMuZWRpdEltYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBhbGxvd0VkaXRJbWFnZTogIV90aGlzLnN0YXRlLmFsbG93RWRpdEltYWdlXG4gICAgICB9KTtcbiAgICAgIF90aGlzLmZpZWxkSW1hZ2UuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7XG4gICAgICBfdGhpcy5maWVsZEltYWdlLmNsYXNzTGlzdC50b2dnbGUoJ2ZsZXgtZGlzcGxheScpO1xuICAgIH07XG5cbiAgICBfdGhpcy5kZWxldGVVc2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMucHJvcHMuZGVsZXRlVXNlclJlcXVlc3QoX3RoaXMucHJvcHMudXNlcik7XG4gICAgfTtcblxuICAgIF90aGlzLmhhbmRsZUZpbGVTZWxlY3QgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgX3RoaXMuc2V0U3RhdGUoeyB1cGRhdGVJbWFnZVN0YXR1czogJ0xvYWRpbmcuLi4nIH0pO1xuICAgICAgdmFyIGZpbGVzID0gZS5kYXRhVHJhbnNmZXIuZmlsZXM7XG5cbiAgICAgIGlmIChmaWxlcykge1xuICAgICAgICB2YXIgZmlsZSA9IGZpbGVzWzBdO1xuXG4gICAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgICAgdmFyIG1heEZpbGVTaXplID0gMTAyNCAqIDEwMjQ7XG5cbiAgICAgICAgICBpZiAoZmlsZS5zaXplID4gbWF4RmlsZVNpemUpIHtcbiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgdXBkYXRlSW1hZ2VTdGF0dXM6ICdFeGNlZWRpbmcgMU1CIGxpbWl0JyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcblxuICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAocmVhZGVyRXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBiaW5hcnlTdHJpbmcgPSByZWFkZXJFdmVudC50YXJnZXQucmVzdWx0O1xuXG4gICAgICAgICAgICBfdGhpcy5iYXNlNjRTdHIgPSAnZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCwnICsgYnRvYShiaW5hcnlTdHJpbmcpO1xuICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBpbWFnZUJhc2U2NDogX3RoaXMuYmFzZTY0U3RyLCB1cGRhdGVJbWFnZVN0YXR1czogJycgfSk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHJlYWRlci5yZWFkQXNCaW5hcnlTdHJpbmcoZmlsZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3RoaXMucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfTtcblxuICAgIF90aGlzLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBldm50ID0gZSB8fCBldmVudDtcblxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSwgZmFsc2UpO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgZXZudCA9IGUgfHwgZXZlbnQ7XG5cbiAgICAgICAgZXZudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSwgZmFsc2UpO1xuXG4gICAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2ZpbGUtY29udGFpbmVyJyB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfTWVzc2FnZS5NZXNzYWdlLCB7XG4gICAgICAgICAgY2xlYXJTdGF0dXM6IF90aGlzLnByb3BzLmNsZWFyU3RhdHVzLFxuICAgICAgICAgIHN0YXR1czogX3RoaXMucHJvcHMudXBkYXRlUHJvZmlsZVN0YXR1cyxcbiAgICAgICAgICB0ZXh0OiBfdGhpcy5wcm9wcy5lcnJvclRleHQsXG4gICAgICAgICAgaGVhZGVyOiAnRXJyb3InIH0pLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICBfZm9ybXN5UmVhY3QyLmRlZmF1bHQuRm9ybSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBvblN1Ym1pdDogX3RoaXMudXBkYXRlUHJvZmlsZSxcbiAgICAgICAgICAgIG9uVmFsaWQ6IF90aGlzLmVuYWJsZUJ1dHRvbixcbiAgICAgICAgICAgIG9uSW52YWxpZDogX3RoaXMuZGlzYWJsZUJ1dHRvbixcbiAgICAgICAgICAgIGNsYXNzTmFtZTogJ3NpZ251cC1mb3JtIGVkaXQnIH0sXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZmlsZS1oZWFkZXInIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAncHJvZmlsZS1oZWFkZXJfX3VzZXItaW1hZ2UtYm94JyB9LFxuICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2ZpbGUtaGVhZGVyX191c2VyLWltYWdlLWVkaXQnIH0sXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBfdGhpcy5wcm9wcy51c2VyLmF2YXRhciA/ICd2aXNpYmxlJyA6ICdoaWRkZW4nIH0sXG4gICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW1nJywgeyBjbGFzc05hbWU6ICdwcm9maWxlLWhlYWRlcl9fdXNlci1pbWFnZScsXG4gICAgICAgICAgICAgICAgICAgIHNyYzogX3RoaXMucHJvcHMudXNlci5hdmF0YXIgfSlcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogX3RoaXMucHJvcHMudXNlci5hdmF0YXIgPyAnaGlkZGVuJyA6ICd2aXNpYmxlJyB9LFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2knLCB7IGNsYXNzTmFtZTogJ2ZhIGZhLXVzZXItY2lyY2xlLW8gcGhvdG8nIH0pXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaScsIHsgY2xhc3NOYW1lOiAnZmEgZmEtcGVuY2lsIGVkaXQtdXNlci1pbmZvIGVkaXQtaW1hZ2UnLFxuICAgICAgICAgICAgICAgICAgb25DbGljazogX3RoaXMuZWRpdEltYWdlIH0pLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2hpZGRlbicsXG4gICAgICAgICAgICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKGVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmllbGRJbWFnZSA9IGVsO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvbkRyb3A6IF90aGlzLmhhbmRsZUZpbGVTZWxlY3QsXG4gICAgICAgICAgICAgICAgICAgIG9uRHJhZ092ZXI6IF90aGlzLnByZXZlbnREZWZhdWx0IH0sXG4gICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBfdGhpcy5zdGF0ZS51cGRhdGVJbWFnZVN0YXR1cyAhPT0gJycgPyAncHJvZmlsZS1oZWFkZXJfX3VzZXItZHJvcC1hcmlhJyA6ICdwcm9maWxlLWhlYWRlcl9fdXNlci1kcm9wLWltYWdlIGhpZGRlbicgfSxcbiAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdGF0ZS51cGRhdGVJbWFnZVN0YXR1c1xuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudCgnaW1nJywgeyBjbGFzc05hbWU6IF90aGlzLnN0YXRlLnVwZGF0ZUltYWdlU3RhdHVzICE9PSAnJyA/ICdwcm9maWxlLWhlYWRlcl9fdXNlci1pbWFnZSBoaWRkZW4nIDogJ3Byb2ZpbGUtaGVhZGVyX191c2VyLWltYWdlJyxcbiAgICAgICAgICAgICAgICAgICAgICBzcmM6IF90aGlzLnN0YXRlLmltYWdlQmFzZTY0IH0pXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3Byb2ZpbGUtaGVhZGVyX191c2VyLW5hbWUnIH0sXG4gICAgICAgICAgICAgICAgX3RoaXMucHJvcHMudXNlci5uYW1lXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ3NlY3Rpb24nLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdlZGl0LXByb2ZpbGVfX3VzZXItaW5mbycgfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdlZGl0LXByb2ZpbGUtbmFtZScgfSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdlZGl0LXByb2ZpbGVfX3VzZXItbmFtZS1jb250YWluZXInIH0sXG4gICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAndXNlci1uYW1lX19ib3gnIH0sXG4gICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3VzZXItbmFtZV9fdGl0bGUnIH0sXG4gICAgICAgICAgICAgICAgICAgICdOYW1lJ1xuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAndXNlci1uYW1lX19sb2dnZWQtbmFtZScgfSxcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJvcHMudXNlci5uYW1lXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdlZGl0LXVzZXItaW5mb19faWNvbicgfSxcbiAgICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpJywgeyBjbGFzc05hbWU6ICdmYSBmYS1wZW5jaWwgZWRpdC11c2VyLWluZm8nLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBfdGhpcy5lZGl0TmFtZSB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnaGlkZGVuJyxcbiAgICAgICAgICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmZpZWxkTmFtZSA9IGVsO1xuICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9GaWVsZDIuZGVmYXVsdCwge1xuICAgICAgICAgICAgICAgICAgbmFtZTogJyAnLFxuICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgICAgICAgdGV4dDogJ0VudGVyIHlvdXIgbmV3IG5hbWUnLFxuICAgICAgICAgICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYoaW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMubmFtZSA9IGlucHV0O1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBfdGhpcy5wcm9wcy51c2VyLm5hbWUsXG4gICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uczogJ2lzQWxwaGEnLFxuICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9yOiAnVGhpcyBpcyBub3QgYSB2YWxpZCBuYW1lJyxcbiAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdlZGl0LXByb2ZpbGUtZW1haWwnIH0sXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZWRpdC1wcm9maWxlX191c2VyLWVtYWlsLWNvbnRhaW5lcicgfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICd1c2VyLWVtYWlsX19ib3gnIH0sXG4gICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3VzZXItZW1haWxfX3RpdGxlJyB9LFxuICAgICAgICAgICAgICAgICAgICAnRW1haWwnXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICd1c2VyLWVtYWlsX19sb2dnZWQtZW1haWwnIH0sXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByb3BzLnVzZXIuZW1haWxcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2VkaXQtdXNlci1pbmZvX19pY29uJyB9LFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2knLCB7IGNsYXNzTmFtZTogJ2ZhIGZhLXBlbmNpbCBlZGl0LXVzZXItaW5mbycsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IF90aGlzLmVkaXRFbWFpbCB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnaGlkZGVuJyxcbiAgICAgICAgICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmZpZWxkRW1haWwgPSBlbDtcbiAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfRmllbGQyLmRlZmF1bHQsIHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6ICcgJyxcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2hpZGRlbicsXG4gICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICAgICAgICB0ZXh0OiAnRW50ZXIgeW91ciBuZXcgZS1tYWlsJyxcbiAgICAgICAgICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKGlucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmVtYWlsID0gaW5wdXQ7XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgdmFsdWU6IF90aGlzLnByb3BzLnVzZXIuZW1haWwsXG4gICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uczogJ2lzRW1haWwnLFxuICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9yOiAnVGhpcyBpcyBub3QgYSB2YWxpZCBlbWFpbCcsXG4gICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ3NlY3Rpb24nLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdlZGl0LXByb2ZpbGVfX3VzZXItaW5mby1wYXNzd29yZCcgfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdlZGl0LXByb2ZpbGUtcGFzc3dvcmQnIH0sXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZWRpdC1wcm9maWxlX191c2VyLXBhc3N3b3JkLWNvbnRhaW5lcicgfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICd1c2VyLXBhc3N3b3JkX19ib3gnIH0sXG4gICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3VzZXItcGFzc3dvcmRfX3RpdGxlJyB9LFxuICAgICAgICAgICAgICAgICAgICAnUGFzc3dvcmQnXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICd1c2VyLXBhc3N3b3JkX19sb2dnZWQtcGFzc3dvcmQnIH0sXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByb3BzLnVzZXIucGFzc3dvcmRcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2VkaXQtdXNlci1pbmZvX19pY29uJyB9LFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2knLCB7IGNsYXNzTmFtZTogJ2ZhIGZhLXBlbmNpbCBlZGl0LXVzZXItaW5mbyBmYS1wYXNzd29yZCcsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IF90aGlzLmVkaXRQYXNzd29yZCB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnaGlkZGVuJyxcbiAgICAgICAgICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmZpZWxkUGFzc3dvcmQgPSBlbDtcbiAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfRmllbGQyLmRlZmF1bHQsIHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6ICdQYXNzd29yZCcsXG4gICAgICAgICAgICAgICAgICB0eXBlOiAncGFzc3dvcmQnLFxuICAgICAgICAgICAgICAgICAgdGV4dDogJ0VudGVyIHlvdXIgbmV3IHBhc3N3b3JkJyxcbiAgICAgICAgICAgICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKGlucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnBhc3N3b3JkID0gaW5wdXQ7XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgbWluTGVuZ3RoOiA3LFxuICAgICAgICAgICAgICAgICAgICBpc0FscGhhbnVtZXJpYzogdHJ1ZVxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcjogJ1RoaXMgaXMgbm90IGEgdmFsaWQgcGFzc3dvcmQnXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdlZGl0LXByb2ZpbGUtcmVwZWF0LXBhc3N3b3JkJyB9LFxuICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2VkaXQtcHJvZmlsZV9fdXNlci1yZXBlYXQtcGFzc3dvcmQtY29udGFpbmVyJyB9LFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3VzZXItcmVwZWF0LXBhc3N3b3JkX19ib3gnIH0sXG4gICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ3AnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3VzZXItcmVwZWF0LXBhc3N3b3JkX190aXRsZScgfSxcbiAgICAgICAgICAgICAgICAgICAgJ1JlcGVhdCBQYXNzd29yZCdcbiAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3VzZXItcmVwZWF0LXBhc3N3b3JkX19sb2dnZWQtcGFzc3dvcmQnIH0sXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByb3BzLnVzZXIucGFzc3dvcmRSZXBlYXRcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogJ2VkaXQtdXNlci1pbmZvX19pY29uJyB9LFxuICAgICAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2knLCB7IGNsYXNzTmFtZTogJ2ZhIGZhLXBlbmNpbCBlZGl0LXVzZXItaW5mbyBmYS1wYXNzd29yZCcsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IF90aGlzLnJlcGVhdFBhc3N3b3JkIH0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdoaWRkZW4nLFxuICAgICAgICAgICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYoZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmllbGRSZXBlYXRQYXNzd29yZCA9IGVsO1xuICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9GaWVsZDIuZGVmYXVsdCwge1xuICAgICAgICAgICAgICAgICAgbmFtZTogJ1JlcGVhdCBQYXNzd29yZCcsXG4gICAgICAgICAgICAgICAgICB0eXBlOiAncGFzc3dvcmQnLFxuICAgICAgICAgICAgICAgICAgdGV4dDogJ1BsZWFzZSByZXBlYXQgeW91ciBwYXNzd29yZCcsXG4gICAgICAgICAgICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihpbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYXNzd29yZFJlcGVhdCA9IGlucHV0O1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25zOiAnZXF1YWxzRmllbGQ6UGFzc3dvcmQnLFxuICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9yOiAnUGFzc3dvcmQgZG9lcyBub3QgbWF0Y2gnXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnc2lnbnVwLWZpZWxkLWdyb3VwIHNpZ251cC1idG4tZ3JvdXAgZWRpdCcgfSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N1Ym1pdCcsXG4gICAgICAgICAgICAgIGRpc2FibGVkOiAhX3RoaXMuc3RhdGUuY2FuU3VibWl0LFxuICAgICAgICAgICAgICBjbGFzc05hbWU6ICdidG4gYnRuLS1zaWdudXAgYnRuLS1zaWdudXAtYWN0aXZlIGVkaXQnLFxuICAgICAgICAgICAgICB2YWx1ZTogJ1N1Ym1pdCcgfSksXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiAnZGVsZXRlLXVzZXItcHJvZmlsZV9faWNvbicgfSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2knLCB7IGNsYXNzTmFtZTogJ2ZhIGZhLXRyYXNoJyxcbiAgICAgICAgICAgICAgICBvbkNsaWNrOiBfdGhpcy5zZXRQb3B1cFNob3duIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApLFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICBfUG9wdXAuUG9wdXAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgc2V0UG9wdXBTaG93bjogX3RoaXMuc2V0UG9wdXBTaG93bixcbiAgICAgICAgICAgIHBvcHVwU2hvd246IF90aGlzLnN0YXRlLnBvcHVwU2hvd24sXG4gICAgICAgICAgICBoZWFkZXI6ICdDb25maXJtIHRoZSBhY3Rpb24nLFxuICAgICAgICAgICAgdGV4dDogJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgeW91ciBhY2NvdW50PycgfSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfQnV0dG9uLkJ1dHRvbiwge1xuICAgICAgICAgICAgc2V0UG9wdXBTaG93bjogX3RoaXMuc2V0UG9wdXBTaG93bixcbiAgICAgICAgICAgIG9rSGFuZGxlcjogZnVuY3Rpb24gb2tIYW5kbGVyKCkge1xuICAgICAgICAgICAgICBfdGhpcy5kZWxldGVVc2VyKCk7XG4gICAgICAgICAgICAgIF90aGlzLnNldFBvcHVwU2hvd24oKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbGFzc05hbWU6ICdidG4gcG9wdXBfX2J0bicsXG4gICAgICAgICAgICBpbm5lclRleHQ6ICdPaydcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfQnV0dG9uLkJ1dHRvbiwge1xuICAgICAgICAgICAgb2tIYW5kbGVyOiBmdW5jdGlvbiBva0hhbmRsZXIoKSB7XG4gICAgICAgICAgICAgIF90aGlzLnNldFBvcHVwU2hvd24oKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbGFzc05hbWU6ICdidG4gYnRuLS1kZWZhdWx0IHBvcHVwX19idG4nLFxuICAgICAgICAgICAgaW5uZXJUZXh0OiAnQ2FuY2VsJ1xuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfTtcblxuICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgY2FuU3VibWl0OiBmYWxzZSxcbiAgICAgIGFsbG93RWRpdE5hbWU6IGZhbHNlLFxuICAgICAgYWxsb3dFZGl0RW1haWw6IGZhbHNlLFxuICAgICAgYWxsb3dFZGl0SW1hZ2U6IGZhbHNlLFxuICAgICAgYWxsb3dFZGl0UGFzc3dvcmQ6IGZhbHNlLFxuICAgICAgYWxsb3dSZXBlYXRQYXNzd29yZDogZmFsc2UsXG4gICAgICB1cGRhdGVJbWFnZVN0YXR1czogJ0Ryb3AgeW91ciBwaG90bycsXG4gICAgICBpbWFnZUJhc2U2NDogbnVsbFxuICAgIH07XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb2ZpbGUsIFt7XG4gICAga2V5OiAnY29tcG9uZW50RGlkVXBkYXRlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLnVwZGF0ZVByb2ZpbGVTdGF0dXMgPT09ICdET05FJykge1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczIucHJvcHMuaGlzdG9yeS5wdXNoKCcvJyk7XG4gICAgICAgIH0sIDEwMDApO1xuICAgICAgfVxuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQcm9maWxlO1xufShfcmVhY3QuQ29tcG9uZW50KTtcblxuZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzKHN0b3JlKSB7XG4gIHJldHVybiB7XG4gICAgdXBkYXRlUHJvZmlsZVN0YXR1czogc3RvcmUudXNlcnMudXBkYXRlUHJvZmlsZVN0YXR1cyxcbiAgICBlcnJvclRleHQ6IHN0b3JlLnVzZXJzLnVzZXIuZXJyb3JUZXh0LFxuICAgIHVzZXI6IHN0b3JlLnVzZXJzLnVzZXJcbiAgfTtcbn1cbmZ1bmN0aW9uIG1hcERpc3BhdGNoVG9Qcm9wcyhkaXNwYXRjaCkge1xuICByZXR1cm4ge1xuICAgIHVwZGF0ZVByb2ZpbGVSZXF1ZXN0OiAoMCwgX3JlZHV4LmJpbmRBY3Rpb25DcmVhdG9ycykoX3VzZXJzLnVwZGF0ZVByb2ZpbGVSZXF1ZXN0LCBkaXNwYXRjaCksXG4gICAgZGVsZXRlVXNlclJlcXVlc3Q6ICgwLCBfcmVkdXguYmluZEFjdGlvbkNyZWF0b3JzKShfdXNlcnMuZGVsZXRlVXNlclJlcXVlc3QsIGRpc3BhdGNoKSxcbiAgICBjbGVhclN0YXR1czogKDAsIF9yZWR1eC5iaW5kQWN0aW9uQ3JlYXRvcnMpKF91c2Vycy5jbGVhclVwZGF0ZVByb2ZpbGVTdGF0dXMsIGRpc3BhdGNoKVxuICB9O1xufVxuXG5leHBvcnRzLmRlZmF1bHQgPSAoMCwgX3JlYWN0UmVkdXguY29ubmVjdCkobWFwU3RhdGVUb1Byb3BzLCBtYXBEaXNwYXRjaFRvUHJvcHMpKFByb2ZpbGUpO1xuXG5cblByb2ZpbGUucHJvcFR5cGVzID0ge1xuICB1cGRhdGVQcm9maWxlU3RhdHVzOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgdXBkYXRlUHJvZmlsZVJlcXVlc3Q6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgZGVsZXRlVXNlclJlcXVlc3Q6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgdXNlcjogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIGVtYWlsOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgcGFzc3dvcmQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBwYXNzd29yZFJlcGVhdDogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIGVycm9yVGV4dDogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIHZhbHVlOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgaGlzdG9yeTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIGNsZWFyU3RhdHVzOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmNcbn07XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3BhZ2VzL1Byb2ZpbGUvUHJvZmlsZS5zY3NzXCI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cbi8qKiovIH0pXG5cbn0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyA2LmluZGV4X2J1bmRsZS5qcyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG52YXIgZmFjdG9yeSA9IHJlcXVpcmUoJy4vZmFjdG9yeScpO1xuXG5pZiAodHlwZW9mIFJlYWN0ID09PSAndW5kZWZpbmVkJykge1xuICB0aHJvdyBFcnJvcihcbiAgICAnY3JlYXRlLXJlYWN0LWNsYXNzIGNvdWxkIG5vdCBmaW5kIHRoZSBSZWFjdCBvYmplY3QuIElmIHlvdSBhcmUgdXNpbmcgc2NyaXB0IHRhZ3MsICcgK1xuICAgICAgJ21ha2Ugc3VyZSB0aGF0IFJlYWN0IGlzIGJlaW5nIGxvYWRlZCBiZWZvcmUgY3JlYXRlLXJlYWN0LWNsYXNzLidcbiAgKTtcbn1cblxuLy8gSGFjayB0byBncmFiIE5vb3BVcGRhdGVRdWV1ZSBmcm9tIGlzb21vcnBoaWMgUmVhY3RcbnZhciBSZWFjdE5vb3BVcGRhdGVRdWV1ZSA9IG5ldyBSZWFjdC5Db21wb25lbnQoKS51cGRhdGVyO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoXG4gIFJlYWN0LkNvbXBvbmVudCxcbiAgUmVhY3QuaXNWYWxpZEVsZW1lbnQsXG4gIFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlXG4pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9jcmVhdGUtcmVhY3QtY2xhc3MvaW5kZXguanMiLCJmdW5jdGlvbiB0b09iaihzb3VyY2UpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKHNvdXJjZSkucmVkdWNlKGZ1bmN0aW9uIChvdXRwdXQsIGtleSkge1xuICAgIHZhciBwYXJlbnRLZXkgPSBrZXkubWF0Y2goL1teXFxbXSovaSk7XG4gICAgdmFyIHBhdGhzID0ga2V5Lm1hdGNoKC9cXFsuKj9cXF0vZykgfHwgW107XG4gICAgcGF0aHMgPSBbcGFyZW50S2V5WzBdXS5jb25jYXQocGF0aHMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICByZXR1cm4ga2V5LnJlcGxhY2UoL1xcW3xcXF0vZywgJycpO1xuICAgIH0pO1xuICAgIHZhciBjdXJyZW50UGF0aCA9IG91dHB1dDtcbiAgICB3aGlsZSAocGF0aHMubGVuZ3RoKSB7XG4gICAgICB2YXIgcGF0aEtleSA9IHBhdGhzLnNoaWZ0KCk7XG5cbiAgICAgIGlmIChwYXRoS2V5IGluIGN1cnJlbnRQYXRoKSB7XG4gICAgICAgIGN1cnJlbnRQYXRoID0gY3VycmVudFBhdGhbcGF0aEtleV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50UGF0aFtwYXRoS2V5XSA9IHBhdGhzLmxlbmd0aCA/IGlzTmFOKHBhdGhzWzBdKSA/IHt9IDogW10gOiBzb3VyY2Vba2V5XTtcbiAgICAgICAgY3VycmVudFBhdGggPSBjdXJyZW50UGF0aFtwYXRoS2V5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb3V0cHV0O1xuICB9LCB7fSk7XG59XG5cbmZ1bmN0aW9uIGZyb21PYmoob2JqKSB7XG4gIGZ1bmN0aW9uIHJlY3VyKG5ld09iaiwgcHJvcE5hbWUsIGN1cnJWYWwpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShjdXJyVmFsKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoY3VyclZhbCkgPT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XG4gICAgICBPYmplY3Qua2V5cyhjdXJyVmFsKS5mb3JFYWNoKGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgcmVjdXIobmV3T2JqLCBwcm9wTmFtZSArIFwiW1wiICsgdiArIFwiXVwiLCBjdXJyVmFsW3ZdKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG5ld09iajtcbiAgICB9XG5cbiAgICBuZXdPYmpbcHJvcE5hbWVdID0gY3VyclZhbDtcbiAgICByZXR1cm4gbmV3T2JqO1xuICB9XG5cbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuICByZXR1cm4ga2V5cy5yZWR1Y2UoZnVuY3Rpb24obmV3T2JqLCBwcm9wTmFtZSkge1xuICAgIHJldHVybiByZWN1cihuZXdPYmosIHByb3BOYW1lLCBvYmpbcHJvcE5hbWVdKTtcbiAgfSwge30pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZnJvbU9iajogZnJvbU9iaixcbiAgdG9PYmo6IHRvT2JqXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9mb3JtLWRhdGEtdG8tb2JqZWN0L2luZGV4LmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgUmVhY3QgPSBnbG9iYWwuUmVhY3QgfHwgcmVxdWlyZSgncmVhY3QnKTtcbnZhciBjcmVhdGVSZWFjdENsYXNzID0gcmVxdWlyZSgnY3JlYXRlLXJlYWN0LWNsYXNzJyk7XG52YXIgTWl4aW4gPSByZXF1aXJlKCcuL01peGluLmpzJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChDb21wb25lbnQpIHtcbiAgICByZXR1cm4gY3JlYXRlUmVhY3RDbGFzcyh7XG4gICAgICBtaXhpbnM6IFtNaXhpbl0sXG4gICAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29tcG9uZW50LCBfZXh0ZW5kcyh7XG4gICAgICAgICAgc2V0VmFsaWRhdGlvbnM6IHRoaXMuc2V0VmFsaWRhdGlvbnMsXG4gICAgICAgICAgc2V0VmFsdWU6IHRoaXMuc2V0VmFsdWUsXG4gICAgICAgICAgcmVzZXRWYWx1ZTogdGhpcy5yZXNldFZhbHVlLFxuICAgICAgICAgIGdldFZhbHVlOiB0aGlzLmdldFZhbHVlLFxuICAgICAgICAgIGhhc1ZhbHVlOiB0aGlzLmhhc1ZhbHVlLFxuICAgICAgICAgIGdldEVycm9yTWVzc2FnZTogdGhpcy5nZXRFcnJvck1lc3NhZ2UsXG4gICAgICAgICAgZ2V0RXJyb3JNZXNzYWdlczogdGhpcy5nZXRFcnJvck1lc3NhZ2VzLFxuICAgICAgICAgIGlzRm9ybURpc2FibGVkOiB0aGlzLmlzRm9ybURpc2FibGVkLFxuICAgICAgICAgIGlzVmFsaWQ6IHRoaXMuaXNWYWxpZCxcbiAgICAgICAgICBpc1ByaXN0aW5lOiB0aGlzLmlzUHJpc3RpbmUsXG4gICAgICAgICAgaXNGb3JtU3VibWl0dGVkOiB0aGlzLmlzRm9ybVN1Ym1pdHRlZCxcbiAgICAgICAgICBpc1JlcXVpcmVkOiB0aGlzLmlzUmVxdWlyZWQsXG4gICAgICAgICAgc2hvd1JlcXVpcmVkOiB0aGlzLnNob3dSZXF1aXJlZCxcbiAgICAgICAgICBzaG93RXJyb3I6IHRoaXMuc2hvd0Vycm9yLFxuICAgICAgICAgIGlzVmFsaWRWYWx1ZTogdGhpcy5pc1ZhbGlkVmFsdWVcbiAgICAgICAgfSwgdGhpcy5wcm9wcykpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xufTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2Zvcm1zeS1yZWFjdC9saWIvRGVjb3JhdG9yLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgUmVhY3QgPSBnbG9iYWwuUmVhY3QgfHwgcmVxdWlyZSgncmVhY3QnKTtcbnZhciBjcmVhdGVSZWFjdENsYXNzID0gcmVxdWlyZSgnY3JlYXRlLXJlYWN0LWNsYXNzJyk7XG52YXIgTWl4aW4gPSByZXF1aXJlKCcuL01peGluLmpzJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChDb21wb25lbnQpIHtcbiAgcmV0dXJuIGNyZWF0ZVJlYWN0Q2xhc3Moe1xuICAgIGRpc3BsYXlOYW1lOiAnRm9ybXN5KCcgKyBnZXREaXNwbGF5TmFtZShDb21wb25lbnQpICsgJyknLFxuICAgIG1peGluczogW01peGluXSxcblxuICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIGlubmVyUmVmID0gdGhpcy5wcm9wcy5pbm5lclJlZjtcblxuICAgICAgdmFyIHByb3BzRm9yRWxlbWVudCA9IF9leHRlbmRzKHtcbiAgICAgICAgc2V0VmFsaWRhdGlvbnM6IHRoaXMuc2V0VmFsaWRhdGlvbnMsXG4gICAgICAgIHNldFZhbHVlOiB0aGlzLnNldFZhbHVlLFxuICAgICAgICByZXNldFZhbHVlOiB0aGlzLnJlc2V0VmFsdWUsXG4gICAgICAgIGdldFZhbHVlOiB0aGlzLmdldFZhbHVlLFxuICAgICAgICBoYXNWYWx1ZTogdGhpcy5oYXNWYWx1ZSxcbiAgICAgICAgZ2V0RXJyb3JNZXNzYWdlOiB0aGlzLmdldEVycm9yTWVzc2FnZSxcbiAgICAgICAgZ2V0RXJyb3JNZXNzYWdlczogdGhpcy5nZXRFcnJvck1lc3NhZ2VzLFxuICAgICAgICBpc0Zvcm1EaXNhYmxlZDogdGhpcy5pc0Zvcm1EaXNhYmxlZCxcbiAgICAgICAgaXNWYWxpZDogdGhpcy5pc1ZhbGlkLFxuICAgICAgICBpc1ByaXN0aW5lOiB0aGlzLmlzUHJpc3RpbmUsXG4gICAgICAgIGlzRm9ybVN1Ym1pdHRlZDogdGhpcy5pc0Zvcm1TdWJtaXR0ZWQsXG4gICAgICAgIGlzUmVxdWlyZWQ6IHRoaXMuaXNSZXF1aXJlZCxcbiAgICAgICAgc2hvd1JlcXVpcmVkOiB0aGlzLnNob3dSZXF1aXJlZCxcbiAgICAgICAgc2hvd0Vycm9yOiB0aGlzLnNob3dFcnJvcixcbiAgICAgICAgaXNWYWxpZFZhbHVlOiB0aGlzLmlzVmFsaWRWYWx1ZVxuICAgICAgfSwgdGhpcy5wcm9wcyk7XG5cbiAgICAgIGlmIChpbm5lclJlZikge1xuICAgICAgICBwcm9wc0ZvckVsZW1lbnQucmVmID0gaW5uZXJSZWY7XG4gICAgICB9XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDb21wb25lbnQsIHByb3BzRm9yRWxlbWVudCk7XG4gICAgfVxuICB9KTtcbn07XG5cbmZ1bmN0aW9uIGdldERpc3BsYXlOYW1lKENvbXBvbmVudCkge1xuICByZXR1cm4gQ29tcG9uZW50LmRpc3BsYXlOYW1lIHx8IENvbXBvbmVudC5uYW1lIHx8ICh0eXBlb2YgQ29tcG9uZW50ID09PSAnc3RyaW5nJyA/IENvbXBvbmVudCA6ICdDb21wb25lbnQnKTtcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2Zvcm1zeS1yZWFjdC9saWIvSE9DLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgUHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscy5qcycpO1xudmFyIFJlYWN0ID0gZ2xvYmFsLlJlYWN0IHx8IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBjb252ZXJ0VmFsaWRhdGlvbnNUb09iamVjdCA9IGZ1bmN0aW9uIGNvbnZlcnRWYWxpZGF0aW9uc1RvT2JqZWN0KHZhbGlkYXRpb25zKSB7XG5cbiAgaWYgKHR5cGVvZiB2YWxpZGF0aW9ucyA9PT0gJ3N0cmluZycpIHtcblxuICAgIHJldHVybiB2YWxpZGF0aW9ucy5zcGxpdCgvXFwsKD8hW157XFxbXSpbfVxcXV0pL2cpLnJlZHVjZShmdW5jdGlvbiAodmFsaWRhdGlvbnMsIHZhbGlkYXRpb24pIHtcbiAgICAgIHZhciBhcmdzID0gdmFsaWRhdGlvbi5zcGxpdCgnOicpO1xuICAgICAgdmFyIHZhbGlkYXRlTWV0aG9kID0gYXJncy5zaGlmdCgpO1xuXG4gICAgICBhcmdzID0gYXJncy5tYXAoZnVuY3Rpb24gKGFyZykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGFyZyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICByZXR1cm4gYXJnOyAvLyBJdCBpcyBhIHN0cmluZyBpZiBpdCBjYW4gbm90IHBhcnNlIGl0XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoYXJncy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRm9ybXN5IGRvZXMgbm90IHN1cHBvcnQgbXVsdGlwbGUgYXJncyBvbiBzdHJpbmcgdmFsaWRhdGlvbnMuIFVzZSBvYmplY3QgZm9ybWF0IG9mIHZhbGlkYXRpb25zIGluc3RlYWQuJyk7XG4gICAgICB9XG5cbiAgICAgIHZhbGlkYXRpb25zW3ZhbGlkYXRlTWV0aG9kXSA9IGFyZ3MubGVuZ3RoID8gYXJnc1swXSA6IHRydWU7XG4gICAgICByZXR1cm4gdmFsaWRhdGlvbnM7XG4gICAgfSwge30pO1xuICB9XG5cbiAgcmV0dXJuIHZhbGlkYXRpb25zIHx8IHt9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKCkge1xuICAgIHJldHVybiB7XG4gICAgICBfdmFsdWU6IHRoaXMucHJvcHMudmFsdWUsXG4gICAgICBfaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICBfaXNWYWxpZDogdHJ1ZSxcbiAgICAgIF9pc1ByaXN0aW5lOiB0cnVlLFxuICAgICAgX3ByaXN0aW5lVmFsdWU6IHRoaXMucHJvcHMudmFsdWUsXG4gICAgICBfdmFsaWRhdGlvbkVycm9yOiBbXSxcbiAgICAgIF9leHRlcm5hbEVycm9yOiBudWxsLFxuICAgICAgX2Zvcm1TdWJtaXR0ZWQ6IGZhbHNlXG4gICAgfTtcbiAgfSxcbiAgY29udGV4dFR5cGVzOiB7XG4gICAgZm9ybXN5OiBQcm9wVHlwZXMub2JqZWN0IC8vIFdoYXQgYWJvdXQgcmVxdWlyZWQ/XG4gIH0sXG4gIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24gZ2V0RGVmYXVsdFByb3BzKCkge1xuICAgIHJldHVybiB7XG4gICAgICB2YWxpZGF0aW9uRXJyb3I6ICcnLFxuICAgICAgdmFsaWRhdGlvbkVycm9yczoge31cbiAgICB9O1xuICB9LFxuXG4gIGNvbXBvbmVudFdpbGxNb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIHZhciBjb25maWd1cmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnNldFZhbGlkYXRpb25zKHRoaXMucHJvcHMudmFsaWRhdGlvbnMsIHRoaXMucHJvcHMucmVxdWlyZWQpO1xuXG4gICAgICAvLyBQYXNzIGEgZnVuY3Rpb24gaW5zdGVhZD9cbiAgICAgIHRoaXMuY29udGV4dC5mb3Jtc3kuYXR0YWNoVG9Gb3JtKHRoaXMpO1xuICAgICAgLy90aGlzLnByb3BzLl9hdHRhY2hUb0Zvcm0odGhpcyk7XG4gICAgfS5iaW5kKHRoaXMpO1xuXG4gICAgaWYgKCF0aGlzLnByb3BzLm5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRm9ybSBJbnB1dCByZXF1aXJlcyBhIG5hbWUgcHJvcGVydHkgd2hlbiB1c2VkJyk7XG4gICAgfVxuXG4gICAgLypcbiAgICBpZiAoIXRoaXMucHJvcHMuX2F0dGFjaFRvRm9ybSkge1xuICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNNb3VudGVkKCkpIHJldHVybjtcbiAgICAgICAgaWYgKCF0aGlzLnByb3BzLl9hdHRhY2hUb0Zvcm0pIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm0gTWl4aW4gcmVxdWlyZXMgY29tcG9uZW50IHRvIGJlIG5lc3RlZCBpbiBhIEZvcm0nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25maWd1cmUoKTtcbiAgICAgIH0uYmluZCh0aGlzKSwgMCk7XG4gICAgfVxuICAgICovXG4gICAgY29uZmlndXJlKCk7XG4gIH0sXG5cbiAgLy8gV2UgaGF2ZSB0byBtYWtlIHRoZSB2YWxpZGF0ZSBtZXRob2QgaXMga2VwdCB3aGVuIG5ldyBwcm9wcyBhcmUgYWRkZWRcbiAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wczogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICB0aGlzLnNldFZhbGlkYXRpb25zKG5leHRQcm9wcy52YWxpZGF0aW9ucywgbmV4dFByb3BzLnJlcXVpcmVkKTtcbiAgfSxcblxuICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcblxuICAgIC8vIElmIHRoZSB2YWx1ZSBwYXNzZWQgaGFzIGNoYW5nZWQsIHNldCBpdC4gSWYgdmFsdWUgaXMgbm90IHBhc3NlZCBpdCB3aWxsXG4gICAgLy8gaW50ZXJuYWxseSB1cGRhdGUsIGFuZCB0aGlzIHdpbGwgbmV2ZXIgcnVuXG4gICAgaWYgKCF1dGlscy5pc1NhbWUodGhpcy5wcm9wcy52YWx1ZSwgcHJldlByb3BzLnZhbHVlKSkge1xuICAgICAgdGhpcy5zZXRWYWx1ZSh0aGlzLnByb3BzLnZhbHVlKTtcbiAgICB9XG5cbiAgICAvLyBJZiB2YWxpZGF0aW9ucyBvciByZXF1aXJlZCBpcyBjaGFuZ2VkLCBydW4gYSBuZXcgdmFsaWRhdGlvblxuICAgIGlmICghdXRpbHMuaXNTYW1lKHRoaXMucHJvcHMudmFsaWRhdGlvbnMsIHByZXZQcm9wcy52YWxpZGF0aW9ucykgfHwgIXV0aWxzLmlzU2FtZSh0aGlzLnByb3BzLnJlcXVpcmVkLCBwcmV2UHJvcHMucmVxdWlyZWQpKSB7XG4gICAgICB0aGlzLmNvbnRleHQuZm9ybXN5LnZhbGlkYXRlKHRoaXMpO1xuICAgIH1cbiAgfSxcblxuICAvLyBEZXRhY2ggaXQgd2hlbiBjb21wb25lbnQgdW5tb3VudHNcbiAgY29tcG9uZW50V2lsbFVubW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMuY29udGV4dC5mb3Jtc3kuZGV0YWNoRnJvbUZvcm0odGhpcyk7XG4gICAgLy90aGlzLnByb3BzLl9kZXRhY2hGcm9tRm9ybSh0aGlzKTtcbiAgfSxcblxuICBzZXRWYWxpZGF0aW9uczogZnVuY3Rpb24gc2V0VmFsaWRhdGlvbnModmFsaWRhdGlvbnMsIHJlcXVpcmVkKSB7XG5cbiAgICAvLyBBZGQgdmFsaWRhdGlvbnMgdG8gdGhlIHN0b3JlIGl0c2VsZiBhcyB0aGUgcHJvcHMgb2JqZWN0IGNhbiBub3QgYmUgbW9kaWZpZWRcbiAgICB0aGlzLl92YWxpZGF0aW9ucyA9IGNvbnZlcnRWYWxpZGF0aW9uc1RvT2JqZWN0KHZhbGlkYXRpb25zKSB8fCB7fTtcbiAgICB0aGlzLl9yZXF1aXJlZFZhbGlkYXRpb25zID0gcmVxdWlyZWQgPT09IHRydWUgPyB7IGlzRGVmYXVsdFJlcXVpcmVkVmFsdWU6IHRydWUgfSA6IGNvbnZlcnRWYWxpZGF0aW9uc1RvT2JqZWN0KHJlcXVpcmVkKTtcbiAgfSxcblxuICAvLyBXZSB2YWxpZGF0ZSBhZnRlciB0aGUgdmFsdWUgaGFzIGJlZW4gc2V0XG4gIHNldFZhbHVlOiBmdW5jdGlvbiBzZXRWYWx1ZSh2YWx1ZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgX3ZhbHVlOiB2YWx1ZSxcbiAgICAgIF9pc1ByaXN0aW5lOiBmYWxzZVxuICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuY29udGV4dC5mb3Jtc3kudmFsaWRhdGUodGhpcyk7XG4gICAgICAvL3RoaXMucHJvcHMuX3ZhbGlkYXRlKHRoaXMpO1xuICAgIH0uYmluZCh0aGlzKSk7XG4gIH0sXG4gIHJlc2V0VmFsdWU6IGZ1bmN0aW9uIHJlc2V0VmFsdWUoKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBfdmFsdWU6IHRoaXMuc3RhdGUuX3ByaXN0aW5lVmFsdWUsXG4gICAgICBfaXNQcmlzdGluZTogdHJ1ZVxuICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuY29udGV4dC5mb3Jtc3kudmFsaWRhdGUodGhpcyk7XG4gICAgICAvL3RoaXMucHJvcHMuX3ZhbGlkYXRlKHRoaXMpO1xuICAgIH0pO1xuICB9LFxuICBnZXRWYWx1ZTogZnVuY3Rpb24gZ2V0VmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX3ZhbHVlO1xuICB9LFxuICBoYXNWYWx1ZTogZnVuY3Rpb24gaGFzVmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuX3ZhbHVlICE9PSAnJztcbiAgfSxcbiAgZ2V0RXJyb3JNZXNzYWdlOiBmdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2UoKSB7XG4gICAgdmFyIG1lc3NhZ2VzID0gdGhpcy5nZXRFcnJvck1lc3NhZ2VzKCk7XG4gICAgcmV0dXJuIG1lc3NhZ2VzLmxlbmd0aCA/IG1lc3NhZ2VzWzBdIDogbnVsbDtcbiAgfSxcbiAgZ2V0RXJyb3JNZXNzYWdlczogZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlcygpIHtcbiAgICByZXR1cm4gIXRoaXMuaXNWYWxpZCgpIHx8IHRoaXMuc2hvd1JlcXVpcmVkKCkgPyB0aGlzLnN0YXRlLl9leHRlcm5hbEVycm9yIHx8IHRoaXMuc3RhdGUuX3ZhbGlkYXRpb25FcnJvciB8fCBbXSA6IFtdO1xuICB9LFxuICBpc0Zvcm1EaXNhYmxlZDogZnVuY3Rpb24gaXNGb3JtRGlzYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGV4dC5mb3Jtc3kuaXNGb3JtRGlzYWJsZWQoKTtcbiAgICAvL3JldHVybiB0aGlzLnByb3BzLl9pc0Zvcm1EaXNhYmxlZCgpO1xuICB9LFxuICBpc1ZhbGlkOiBmdW5jdGlvbiBpc1ZhbGlkKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLl9pc1ZhbGlkO1xuICB9LFxuICBpc1ByaXN0aW5lOiBmdW5jdGlvbiBpc1ByaXN0aW5lKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLl9pc1ByaXN0aW5lO1xuICB9LFxuICBpc0Zvcm1TdWJtaXR0ZWQ6IGZ1bmN0aW9uIGlzRm9ybVN1Ym1pdHRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5fZm9ybVN1Ym1pdHRlZDtcbiAgfSxcbiAgaXNSZXF1aXJlZDogZnVuY3Rpb24gaXNSZXF1aXJlZCgpIHtcbiAgICByZXR1cm4gISF0aGlzLnByb3BzLnJlcXVpcmVkO1xuICB9LFxuICBzaG93UmVxdWlyZWQ6IGZ1bmN0aW9uIHNob3dSZXF1aXJlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5faXNSZXF1aXJlZDtcbiAgfSxcbiAgc2hvd0Vycm9yOiBmdW5jdGlvbiBzaG93RXJyb3IoKSB7XG4gICAgcmV0dXJuICF0aGlzLnNob3dSZXF1aXJlZCgpICYmICF0aGlzLmlzVmFsaWQoKTtcbiAgfSxcbiAgaXNWYWxpZFZhbHVlOiBmdW5jdGlvbiBpc1ZhbGlkVmFsdWUodmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZXh0LmZvcm1zeS5pc1ZhbGlkVmFsdWUuY2FsbChudWxsLCB0aGlzLCB2YWx1ZSk7XG4gICAgLy9yZXR1cm4gdGhpcy5wcm9wcy5faXNWYWxpZFZhbHVlLmNhbGwobnVsbCwgdGhpcywgdmFsdWUpO1xuICB9XG59O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vZm9ybXN5LXJlYWN0L2xpYi9NaXhpbi5qcyIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMob2JqLCBrZXlzKSB7IHZhciB0YXJnZXQgPSB7fTsgZm9yICh2YXIgaSBpbiBvYmopIHsgaWYgKGtleXMuaW5kZXhPZihpKSA+PSAwKSBjb250aW51ZTsgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBpKSkgY29udGludWU7IHRhcmdldFtpXSA9IG9ialtpXTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbnZhciBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG52YXIgUmVhY3QgPSBnbG9iYWwuUmVhY3QgfHwgcmVxdWlyZSgncmVhY3QnKTtcbnZhciBjcmVhdGVSZWFjdENsYXNzID0gcmVxdWlyZSgnY3JlYXRlLXJlYWN0LWNsYXNzJyk7XG52YXIgRm9ybXN5ID0ge307XG52YXIgdmFsaWRhdGlvblJ1bGVzID0gcmVxdWlyZSgnLi92YWxpZGF0aW9uUnVsZXMuanMnKTtcbnZhciBmb3JtRGF0YVRvT2JqZWN0ID0gcmVxdWlyZSgnZm9ybS1kYXRhLXRvLW9iamVjdCcpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscy5qcycpO1xudmFyIE1peGluID0gcmVxdWlyZSgnLi9NaXhpbi5qcycpO1xudmFyIEhPQyA9IHJlcXVpcmUoJy4vSE9DLmpzJyk7XG52YXIgRGVjb3JhdG9yID0gcmVxdWlyZSgnLi9EZWNvcmF0b3IuanMnKTtcbnZhciBvcHRpb25zID0ge307XG52YXIgZW1wdHlBcnJheSA9IFtdO1xuXG5Gb3Jtc3kuTWl4aW4gPSBNaXhpbjtcbkZvcm1zeS5IT0MgPSBIT0M7XG5Gb3Jtc3kuRGVjb3JhdG9yID0gRGVjb3JhdG9yO1xuXG5Gb3Jtc3kuZGVmYXVsdHMgPSBmdW5jdGlvbiAocGFzc2VkT3B0aW9ucykge1xuICBvcHRpb25zID0gcGFzc2VkT3B0aW9ucztcbn07XG5cbkZvcm1zeS5hZGRWYWxpZGF0aW9uUnVsZSA9IGZ1bmN0aW9uIChuYW1lLCBmdW5jKSB7XG4gIHZhbGlkYXRpb25SdWxlc1tuYW1lXSA9IGZ1bmM7XG59O1xuXG5Gb3Jtc3kuRm9ybSA9IGNyZWF0ZVJlYWN0Q2xhc3Moe1xuICBkaXNwbGF5TmFtZTogJ0Zvcm1zeScsXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpc1ZhbGlkOiB0cnVlLFxuICAgICAgaXNTdWJtaXR0aW5nOiBmYWxzZSxcbiAgICAgIGNhbkNoYW5nZTogZmFsc2VcbiAgICB9O1xuICB9LFxuICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgb25TdWNjZXNzOiBmdW5jdGlvbiBvblN1Y2Nlc3MoKSB7fSxcbiAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uIG9uRXJyb3IoKSB7fSxcbiAgICAgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdCgpIHt9LFxuICAgICAgb25WYWxpZFN1Ym1pdDogZnVuY3Rpb24gb25WYWxpZFN1Ym1pdCgpIHt9LFxuICAgICAgb25JbnZhbGlkU3VibWl0OiBmdW5jdGlvbiBvbkludmFsaWRTdWJtaXQoKSB7fSxcbiAgICAgIG9uVmFsaWQ6IGZ1bmN0aW9uIG9uVmFsaWQoKSB7fSxcbiAgICAgIG9uSW52YWxpZDogZnVuY3Rpb24gb25JbnZhbGlkKCkge30sXG4gICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoKSB7fSxcbiAgICAgIHZhbGlkYXRpb25FcnJvcnM6IG51bGwsXG4gICAgICBwcmV2ZW50RXh0ZXJuYWxJbnZhbGlkYXRpb246IGZhbHNlXG4gICAgfTtcbiAgfSxcblxuICBjaGlsZENvbnRleHRUeXBlczoge1xuICAgIGZvcm1zeTogUHJvcFR5cGVzLm9iamVjdFxuICB9LFxuICBnZXRDaGlsZENvbnRleHQ6IGZ1bmN0aW9uIGdldENoaWxkQ29udGV4dCgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGZvcm1zeToge1xuICAgICAgICBhdHRhY2hUb0Zvcm06IHRoaXMuYXR0YWNoVG9Gb3JtLFxuICAgICAgICBkZXRhY2hGcm9tRm9ybTogdGhpcy5kZXRhY2hGcm9tRm9ybSxcbiAgICAgICAgdmFsaWRhdGU6IHRoaXMudmFsaWRhdGUsXG4gICAgICAgIGlzRm9ybURpc2FibGVkOiB0aGlzLmlzRm9ybURpc2FibGVkLFxuICAgICAgICBpc1ZhbGlkVmFsdWU6IGZ1bmN0aW9uIGlzVmFsaWRWYWx1ZShjb21wb25lbnQsIHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLnJ1blZhbGlkYXRpb24oY29tcG9uZW50LCB2YWx1ZSkuaXNWYWxpZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH0sXG5cbiAgLy8gQWRkIGEgbWFwIHRvIHN0b3JlIHRoZSBpbnB1dHMgb2YgdGhlIGZvcm0sIGEgbW9kZWwgdG8gc3RvcmVcbiAgLy8gdGhlIHZhbHVlcyBvZiB0aGUgZm9ybSBhbmQgcmVnaXN0ZXIgY2hpbGQgaW5wdXRzXG4gIGNvbXBvbmVudFdpbGxNb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgIHRoaXMuaW5wdXRzID0gW107XG4gIH0sXG5cbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMudmFsaWRhdGVGb3JtKCk7XG4gIH0sXG5cbiAgY29tcG9uZW50V2lsbFVwZGF0ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVwZGF0ZSgpIHtcbiAgICAvLyBLZWVwIGEgcmVmZXJlbmNlIHRvIGlucHV0IG5hbWVzIGJlZm9yZSBmb3JtIHVwZGF0ZXMsXG4gICAgLy8gdG8gY2hlY2sgaWYgaW5wdXRzIGhhcyBjaGFuZ2VkIGFmdGVyIHJlbmRlclxuICAgIHRoaXMucHJldklucHV0TmFtZXMgPSB0aGlzLmlucHV0cy5tYXAoZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgcmV0dXJuIGNvbXBvbmVudC5wcm9wcy5uYW1lO1xuICAgIH0pO1xuICB9LFxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKCkge1xuXG4gICAgaWYgKHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9ycyAmJiBfdHlwZW9mKHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9ycykgPT09ICdvYmplY3QnICYmIE9iamVjdC5rZXlzKHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9ycykubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5zZXRJbnB1dFZhbGlkYXRpb25FcnJvcnModGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzKTtcbiAgICB9XG5cbiAgICB2YXIgbmV3SW5wdXROYW1lcyA9IHRoaXMuaW5wdXRzLm1hcChmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICByZXR1cm4gY29tcG9uZW50LnByb3BzLm5hbWU7XG4gICAgfSk7XG4gICAgaWYgKHV0aWxzLmFycmF5c0RpZmZlcih0aGlzLnByZXZJbnB1dE5hbWVzLCBuZXdJbnB1dE5hbWVzKSkge1xuICAgICAgdGhpcy52YWxpZGF0ZUZvcm0oKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gQWxsb3cgcmVzZXR0aW5nIHRvIHNwZWNpZmllZCBkYXRhXG4gIHJlc2V0OiBmdW5jdGlvbiByZXNldChkYXRhKSB7XG4gICAgdGhpcy5zZXRGb3JtUHJpc3RpbmUodHJ1ZSk7XG4gICAgdGhpcy5yZXNldE1vZGVsKGRhdGEpO1xuICB9LFxuXG4gIC8vIFVwZGF0ZSBtb2RlbCwgc3VibWl0IHRvIHVybCBwcm9wIGFuZCBzZW5kIHRoZSBtb2RlbFxuICBzdWJtaXQ6IGZ1bmN0aW9uIHN1Ym1pdChldmVudCkge1xuXG4gICAgZXZlbnQgJiYgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIC8vIFRyaWdnZXIgZm9ybSBhcyBub3QgcHJpc3RpbmUuXG4gICAgLy8gSWYgYW55IGlucHV0cyBoYXZlIG5vdCBiZWVuIHRvdWNoZWQgeWV0IHRoaXMgd2lsbCBtYWtlIHRoZW0gZGlydHlcbiAgICAvLyBzbyB2YWxpZGF0aW9uIGJlY29tZXMgdmlzaWJsZSAoaWYgYmFzZWQgb24gaXNQcmlzdGluZSlcbiAgICB0aGlzLnNldEZvcm1QcmlzdGluZShmYWxzZSk7XG4gICAgdmFyIG1vZGVsID0gdGhpcy5nZXRNb2RlbCgpO1xuICAgIHRoaXMucHJvcHMub25TdWJtaXQobW9kZWwsIHRoaXMucmVzZXRNb2RlbCwgdGhpcy51cGRhdGVJbnB1dHNXaXRoRXJyb3IpO1xuICAgIHRoaXMuc3RhdGUuaXNWYWxpZCA/IHRoaXMucHJvcHMub25WYWxpZFN1Ym1pdChtb2RlbCwgdGhpcy5yZXNldE1vZGVsLCB0aGlzLnVwZGF0ZUlucHV0c1dpdGhFcnJvcikgOiB0aGlzLnByb3BzLm9uSW52YWxpZFN1Ym1pdChtb2RlbCwgdGhpcy5yZXNldE1vZGVsLCB0aGlzLnVwZGF0ZUlucHV0c1dpdGhFcnJvcik7XG4gIH0sXG5cbiAgbWFwTW9kZWw6IGZ1bmN0aW9uIG1hcE1vZGVsKG1vZGVsKSB7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5tYXBwaW5nKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5tYXBwaW5nKG1vZGVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZvcm1EYXRhVG9PYmplY3QudG9PYmooT2JqZWN0LmtleXMobW9kZWwpLnJlZHVjZShmdW5jdGlvbiAobWFwcGVkTW9kZWwsIGtleSkge1xuXG4gICAgICAgIHZhciBrZXlBcnJheSA9IGtleS5zcGxpdCgnLicpO1xuICAgICAgICB2YXIgYmFzZSA9IG1hcHBlZE1vZGVsO1xuICAgICAgICB3aGlsZSAoa2V5QXJyYXkubGVuZ3RoKSB7XG4gICAgICAgICAgdmFyIGN1cnJlbnRLZXkgPSBrZXlBcnJheS5zaGlmdCgpO1xuICAgICAgICAgIGJhc2UgPSBiYXNlW2N1cnJlbnRLZXldID0ga2V5QXJyYXkubGVuZ3RoID8gYmFzZVtjdXJyZW50S2V5XSB8fCB7fSA6IG1vZGVsW2tleV07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWFwcGVkTW9kZWw7XG4gICAgICB9LCB7fSkpO1xuICAgIH1cbiAgfSxcblxuICBnZXRNb2RlbDogZnVuY3Rpb24gZ2V0TW9kZWwoKSB7XG4gICAgdmFyIGN1cnJlbnRWYWx1ZXMgPSB0aGlzLmdldEN1cnJlbnRWYWx1ZXMoKTtcbiAgICByZXR1cm4gdGhpcy5tYXBNb2RlbChjdXJyZW50VmFsdWVzKTtcbiAgfSxcblxuICAvLyBSZXNldCBlYWNoIGtleSBpbiB0aGUgbW9kZWwgdG8gdGhlIG9yaWdpbmFsIC8gaW5pdGlhbCAvIHNwZWNpZmllZCB2YWx1ZVxuICByZXNldE1vZGVsOiBmdW5jdGlvbiByZXNldE1vZGVsKGRhdGEpIHtcbiAgICB0aGlzLmlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgIHZhciBuYW1lID0gY29tcG9uZW50LnByb3BzLm5hbWU7XG4gICAgICBpZiAoZGF0YSAmJiBkYXRhLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIGNvbXBvbmVudC5zZXRWYWx1ZShkYXRhW25hbWVdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbXBvbmVudC5yZXNldFZhbHVlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy52YWxpZGF0ZUZvcm0oKTtcbiAgfSxcblxuICBzZXRJbnB1dFZhbGlkYXRpb25FcnJvcnM6IGZ1bmN0aW9uIHNldElucHV0VmFsaWRhdGlvbkVycm9ycyhlcnJvcnMpIHtcbiAgICB0aGlzLmlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgIHZhciBuYW1lID0gY29tcG9uZW50LnByb3BzLm5hbWU7XG4gICAgICB2YXIgYXJncyA9IFt7XG4gICAgICAgIF9pc1ZhbGlkOiAhKG5hbWUgaW4gZXJyb3JzKSxcbiAgICAgICAgX3ZhbGlkYXRpb25FcnJvcjogdHlwZW9mIGVycm9yc1tuYW1lXSA9PT0gJ3N0cmluZycgPyBbZXJyb3JzW25hbWVdXSA6IGVycm9yc1tuYW1lXVxuICAgICAgfV07XG4gICAgICBjb21wb25lbnQuc2V0U3RhdGUuYXBwbHkoY29tcG9uZW50LCBhcmdzKTtcbiAgICB9KTtcbiAgfSxcblxuICAvLyBDaGVja3MgaWYgdGhlIHZhbHVlcyBoYXZlIGNoYW5nZWQgZnJvbSB0aGVpciBpbml0aWFsIHZhbHVlXG4gIGlzQ2hhbmdlZDogZnVuY3Rpb24gaXNDaGFuZ2VkKCkge1xuICAgIHJldHVybiAhdXRpbHMuaXNTYW1lKHRoaXMuZ2V0UHJpc3RpbmVWYWx1ZXMoKSwgdGhpcy5nZXRDdXJyZW50VmFsdWVzKCkpO1xuICB9LFxuXG4gIGdldFByaXN0aW5lVmFsdWVzOiBmdW5jdGlvbiBnZXRQcmlzdGluZVZhbHVlcygpIHtcbiAgICByZXR1cm4gdGhpcy5pbnB1dHMucmVkdWNlKGZ1bmN0aW9uIChkYXRhLCBjb21wb25lbnQpIHtcbiAgICAgIHZhciBuYW1lID0gY29tcG9uZW50LnByb3BzLm5hbWU7XG4gICAgICBkYXRhW25hbWVdID0gY29tcG9uZW50LnByb3BzLnZhbHVlO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSwge30pO1xuICB9LFxuXG4gIC8vIEdvIHRocm91Z2ggZXJyb3JzIGZyb20gc2VydmVyIGFuZCBncmFiIHRoZSBjb21wb25lbnRzXG4gIC8vIHN0b3JlZCBpbiB0aGUgaW5wdXRzIG1hcC4gQ2hhbmdlIHRoZWlyIHN0YXRlIHRvIGludmFsaWRcbiAgLy8gYW5kIHNldCB0aGUgc2VydmVyRXJyb3IgbWVzc2FnZVxuICB1cGRhdGVJbnB1dHNXaXRoRXJyb3I6IGZ1bmN0aW9uIHVwZGF0ZUlucHV0c1dpdGhFcnJvcihlcnJvcnMpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIE9iamVjdC5rZXlzKGVycm9ycykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSwgaW5kZXgpIHtcbiAgICAgIHZhciBjb21wb25lbnQgPSB1dGlscy5maW5kKF90aGlzMi5pbnB1dHMsIGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudC5wcm9wcy5uYW1lID09PSBuYW1lO1xuICAgICAgfSk7XG4gICAgICBpZiAoIWNvbXBvbmVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBhcmUgdHJ5aW5nIHRvIHVwZGF0ZSBhbiBpbnB1dCB0aGF0IGRvZXMgbm90IGV4aXN0LiAnICsgJ1ZlcmlmeSBlcnJvcnMgb2JqZWN0IHdpdGggaW5wdXQgbmFtZXMuICcgKyBKU09OLnN0cmluZ2lmeShlcnJvcnMpKTtcbiAgICAgIH1cbiAgICAgIHZhciBhcmdzID0gW3tcbiAgICAgICAgX2lzVmFsaWQ6IF90aGlzMi5wcm9wcy5wcmV2ZW50RXh0ZXJuYWxJbnZhbGlkYXRpb24gfHwgZmFsc2UsXG4gICAgICAgIF9leHRlcm5hbEVycm9yOiB0eXBlb2YgZXJyb3JzW25hbWVdID09PSAnc3RyaW5nJyA/IFtlcnJvcnNbbmFtZV1dIDogZXJyb3JzW25hbWVdXG4gICAgICB9XTtcbiAgICAgIGNvbXBvbmVudC5zZXRTdGF0ZS5hcHBseShjb21wb25lbnQsIGFyZ3MpO1xuICAgIH0pO1xuICB9LFxuXG4gIGlzRm9ybURpc2FibGVkOiBmdW5jdGlvbiBpc0Zvcm1EaXNhYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5kaXNhYmxlZDtcbiAgfSxcblxuICBnZXRDdXJyZW50VmFsdWVzOiBmdW5jdGlvbiBnZXRDdXJyZW50VmFsdWVzKCkge1xuICAgIHJldHVybiB0aGlzLmlucHV0cy5yZWR1Y2UoZnVuY3Rpb24gKGRhdGEsIGNvbXBvbmVudCkge1xuICAgICAgdmFyIG5hbWUgPSBjb21wb25lbnQucHJvcHMubmFtZTtcbiAgICAgIGRhdGFbbmFtZV0gPSBjb21wb25lbnQuc3RhdGUuX3ZhbHVlO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSwge30pO1xuICB9LFxuXG4gIHNldEZvcm1QcmlzdGluZTogZnVuY3Rpb24gc2V0Rm9ybVByaXN0aW5lKGlzUHJpc3RpbmUpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIF9mb3JtU3VibWl0dGVkOiAhaXNQcmlzdGluZVxuICAgIH0pO1xuXG4gICAgLy8gSXRlcmF0ZSB0aHJvdWdoIGVhY2ggY29tcG9uZW50IGFuZCBzZXQgaXQgYXMgcHJpc3RpbmVcbiAgICAvLyBvciBcImRpcnR5XCIuXG4gICAgdGhpcy5pbnB1dHMuZm9yRWFjaChmdW5jdGlvbiAoY29tcG9uZW50LCBpbmRleCkge1xuICAgICAgY29tcG9uZW50LnNldFN0YXRlKHtcbiAgICAgICAgX2Zvcm1TdWJtaXR0ZWQ6ICFpc1ByaXN0aW5lLFxuICAgICAgICBfaXNQcmlzdGluZTogaXNQcmlzdGluZVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLy8gVXNlIHRoZSBiaW5kZWQgdmFsdWVzIGFuZCB0aGUgYWN0dWFsIGlucHV0IHZhbHVlIHRvXG4gIC8vIHZhbGlkYXRlIHRoZSBpbnB1dCBhbmQgc2V0IGl0cyBzdGF0ZS4gVGhlbiBjaGVjayB0aGVcbiAgLy8gc3RhdGUgb2YgdGhlIGZvcm0gaXRzZWxmXG4gIHZhbGlkYXRlOiBmdW5jdGlvbiB2YWxpZGF0ZShjb21wb25lbnQpIHtcblxuICAgIC8vIFRyaWdnZXIgb25DaGFuZ2VcbiAgICBpZiAodGhpcy5zdGF0ZS5jYW5DaGFuZ2UpIHtcbiAgICAgIHRoaXMucHJvcHMub25DaGFuZ2UodGhpcy5nZXRDdXJyZW50VmFsdWVzKCksIHRoaXMuaXNDaGFuZ2VkKCkpO1xuICAgIH1cblxuICAgIHZhciB2YWxpZGF0aW9uID0gdGhpcy5ydW5WYWxpZGF0aW9uKGNvbXBvbmVudCk7XG4gICAgLy8gUnVuIHRocm91Z2ggdGhlIHZhbGlkYXRpb25zLCBzcGxpdCB0aGVtIHVwIGFuZCBjYWxsXG4gICAgLy8gdGhlIHZhbGlkYXRvciBJRiB0aGVyZSBpcyBhIHZhbHVlIG9yIGl0IGlzIHJlcXVpcmVkXG4gICAgY29tcG9uZW50LnNldFN0YXRlKHtcbiAgICAgIF9pc1ZhbGlkOiB2YWxpZGF0aW9uLmlzVmFsaWQsXG4gICAgICBfaXNSZXF1aXJlZDogdmFsaWRhdGlvbi5pc1JlcXVpcmVkLFxuICAgICAgX3ZhbGlkYXRpb25FcnJvcjogdmFsaWRhdGlvbi5lcnJvcixcbiAgICAgIF9leHRlcm5hbEVycm9yOiBudWxsXG4gICAgfSwgdGhpcy52YWxpZGF0ZUZvcm0pO1xuICB9LFxuXG4gIC8vIENoZWNrcyB2YWxpZGF0aW9uIG9uIGN1cnJlbnQgdmFsdWUgb3IgYSBwYXNzZWQgdmFsdWVcbiAgcnVuVmFsaWRhdGlvbjogZnVuY3Rpb24gcnVuVmFsaWRhdGlvbihjb21wb25lbnQsIHZhbHVlKSB7XG5cbiAgICB2YXIgY3VycmVudFZhbHVlcyA9IHRoaXMuZ2V0Q3VycmVudFZhbHVlcygpO1xuICAgIHZhciB2YWxpZGF0aW9uRXJyb3JzID0gY29tcG9uZW50LnByb3BzLnZhbGlkYXRpb25FcnJvcnM7XG4gICAgdmFyIHZhbGlkYXRpb25FcnJvciA9IGNvbXBvbmVudC5wcm9wcy52YWxpZGF0aW9uRXJyb3I7XG4gICAgdmFsdWUgPSBhcmd1bWVudHMubGVuZ3RoID09PSAyID8gdmFsdWUgOiBjb21wb25lbnQuc3RhdGUuX3ZhbHVlO1xuXG4gICAgdmFyIHZhbGlkYXRpb25SZXN1bHRzID0gdGhpcy5ydW5SdWxlcyh2YWx1ZSwgY3VycmVudFZhbHVlcywgY29tcG9uZW50Ll92YWxpZGF0aW9ucyk7XG4gICAgdmFyIHJlcXVpcmVkUmVzdWx0cyA9IHRoaXMucnVuUnVsZXModmFsdWUsIGN1cnJlbnRWYWx1ZXMsIGNvbXBvbmVudC5fcmVxdWlyZWRWYWxpZGF0aW9ucyk7XG5cbiAgICAvLyB0aGUgY29tcG9uZW50IGRlZmluZXMgYW4gZXhwbGljaXQgdmFsaWRhdGUgZnVuY3Rpb25cbiAgICBpZiAodHlwZW9mIGNvbXBvbmVudC52YWxpZGF0ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB2YWxpZGF0aW9uUmVzdWx0cy5mYWlsZWQgPSBjb21wb25lbnQudmFsaWRhdGUoKSA/IFtdIDogWydmYWlsZWQnXTtcbiAgICB9XG5cbiAgICB2YXIgaXNSZXF1aXJlZCA9IE9iamVjdC5rZXlzKGNvbXBvbmVudC5fcmVxdWlyZWRWYWxpZGF0aW9ucykubGVuZ3RoID8gISFyZXF1aXJlZFJlc3VsdHMuc3VjY2Vzcy5sZW5ndGggOiBmYWxzZTtcbiAgICB2YXIgaXNWYWxpZCA9ICF2YWxpZGF0aW9uUmVzdWx0cy5mYWlsZWQubGVuZ3RoICYmICEodGhpcy5wcm9wcy52YWxpZGF0aW9uRXJyb3JzICYmIHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9yc1tjb21wb25lbnQucHJvcHMubmFtZV0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzUmVxdWlyZWQ6IGlzUmVxdWlyZWQsXG4gICAgICBpc1ZhbGlkOiBpc1JlcXVpcmVkID8gZmFsc2UgOiBpc1ZhbGlkLFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBpZiAoaXNWYWxpZCAmJiAhaXNSZXF1aXJlZCkge1xuICAgICAgICAgIHJldHVybiBlbXB0eUFycmF5O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhbGlkYXRpb25SZXN1bHRzLmVycm9ycy5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gdmFsaWRhdGlvblJlc3VsdHMuZXJyb3JzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9ycyAmJiB0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnNbY29tcG9uZW50LnByb3BzLm5hbWVdKSB7XG4gICAgICAgICAgcmV0dXJuIHR5cGVvZiB0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnNbY29tcG9uZW50LnByb3BzLm5hbWVdID09PSAnc3RyaW5nJyA/IFt0aGlzLnByb3BzLnZhbGlkYXRpb25FcnJvcnNbY29tcG9uZW50LnByb3BzLm5hbWVdXSA6IHRoaXMucHJvcHMudmFsaWRhdGlvbkVycm9yc1tjb21wb25lbnQucHJvcHMubmFtZV07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNSZXF1aXJlZCkge1xuICAgICAgICAgIHZhciBlcnJvciA9IHZhbGlkYXRpb25FcnJvcnNbcmVxdWlyZWRSZXN1bHRzLnN1Y2Nlc3NbMF1dO1xuICAgICAgICAgIHJldHVybiBlcnJvciA/IFtlcnJvcl0gOiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhbGlkYXRpb25SZXN1bHRzLmZhaWxlZC5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gdmFsaWRhdGlvblJlc3VsdHMuZmFpbGVkLm1hcChmdW5jdGlvbiAoZmFpbGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsaWRhdGlvbkVycm9yc1tmYWlsZWRdID8gdmFsaWRhdGlvbkVycm9yc1tmYWlsZWRdIDogdmFsaWRhdGlvbkVycm9yO1xuICAgICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoeCwgcG9zLCBhcnIpIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSBkdXBsaWNhdGVzXG4gICAgICAgICAgICByZXR1cm4gYXJyLmluZGV4T2YoeCkgPT09IHBvcztcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfS5jYWxsKHRoaXMpXG4gICAgfTtcbiAgfSxcblxuICBydW5SdWxlczogZnVuY3Rpb24gcnVuUnVsZXModmFsdWUsIGN1cnJlbnRWYWx1ZXMsIHZhbGlkYXRpb25zKSB7XG5cbiAgICB2YXIgcmVzdWx0cyA9IHtcbiAgICAgIGVycm9yczogW10sXG4gICAgICBmYWlsZWQ6IFtdLFxuICAgICAgc3VjY2VzczogW11cbiAgICB9O1xuICAgIGlmIChPYmplY3Qua2V5cyh2YWxpZGF0aW9ucykubGVuZ3RoKSB7XG4gICAgICBPYmplY3Qua2V5cyh2YWxpZGF0aW9ucykuZm9yRWFjaChmdW5jdGlvbiAodmFsaWRhdGlvbk1ldGhvZCkge1xuXG4gICAgICAgIGlmICh2YWxpZGF0aW9uUnVsZXNbdmFsaWRhdGlvbk1ldGhvZF0gJiYgdHlwZW9mIHZhbGlkYXRpb25zW3ZhbGlkYXRpb25NZXRob2RdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3Jtc3kgZG9lcyBub3QgYWxsb3cgeW91IHRvIG92ZXJyaWRlIGRlZmF1bHQgdmFsaWRhdGlvbnM6ICcgKyB2YWxpZGF0aW9uTWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdmFsaWRhdGlvblJ1bGVzW3ZhbGlkYXRpb25NZXRob2RdICYmIHR5cGVvZiB2YWxpZGF0aW9uc1t2YWxpZGF0aW9uTWV0aG9kXSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRm9ybXN5IGRvZXMgbm90IGhhdmUgdGhlIHZhbGlkYXRpb24gcnVsZTogJyArIHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiB2YWxpZGF0aW9uc1t2YWxpZGF0aW9uTWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHZhciB2YWxpZGF0aW9uID0gdmFsaWRhdGlvbnNbdmFsaWRhdGlvbk1ldGhvZF0oY3VycmVudFZhbHVlcywgdmFsdWUpO1xuICAgICAgICAgIGlmICh0eXBlb2YgdmFsaWRhdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJlc3VsdHMuZXJyb3JzLnB1c2godmFsaWRhdGlvbik7XG4gICAgICAgICAgICByZXN1bHRzLmZhaWxlZC5wdXNoKHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIXZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgIHJlc3VsdHMuZmFpbGVkLnB1c2godmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsaWRhdGlvbnNbdmFsaWRhdGlvbk1ldGhvZF0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB2YXIgdmFsaWRhdGlvbiA9IHZhbGlkYXRpb25SdWxlc1t2YWxpZGF0aW9uTWV0aG9kXShjdXJyZW50VmFsdWVzLCB2YWx1ZSwgdmFsaWRhdGlvbnNbdmFsaWRhdGlvbk1ldGhvZF0pO1xuICAgICAgICAgIGlmICh0eXBlb2YgdmFsaWRhdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJlc3VsdHMuZXJyb3JzLnB1c2godmFsaWRhdGlvbik7XG4gICAgICAgICAgICByZXN1bHRzLmZhaWxlZC5wdXNoKHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIXZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgIHJlc3VsdHMuZmFpbGVkLnB1c2godmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdHMuc3VjY2Vzcy5wdXNoKHZhbGlkYXRpb25NZXRob2QpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0cy5zdWNjZXNzLnB1c2godmFsaWRhdGlvbk1ldGhvZCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfSxcblxuICAvLyBWYWxpZGF0ZSB0aGUgZm9ybSBieSBnb2luZyB0aHJvdWdoIGFsbCBjaGlsZCBpbnB1dCBjb21wb25lbnRzXG4gIC8vIGFuZCBjaGVjayB0aGVpciBzdGF0ZVxuICB2YWxpZGF0ZUZvcm06IGZ1bmN0aW9uIHZhbGlkYXRlRm9ybSgpIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIC8vIFdlIG5lZWQgYSBjYWxsYmFjayBhcyB3ZSBhcmUgdmFsaWRhdGluZyBhbGwgaW5wdXRzIGFnYWluLiBUaGlzIHdpbGxcbiAgICAvLyBydW4gd2hlbiB0aGUgbGFzdCBjb21wb25lbnQgaGFzIHNldCBpdHMgc3RhdGVcbiAgICB2YXIgb25WYWxpZGF0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYWxsSXNWYWxpZCA9IHRoaXMuaW5wdXRzLmV2ZXJ5KGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudC5zdGF0ZS5faXNWYWxpZDtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgaXNWYWxpZDogYWxsSXNWYWxpZFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChhbGxJc1ZhbGlkKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25WYWxpZCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vbkludmFsaWQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gVGVsbCB0aGUgZm9ybSB0aGF0IGl0IGNhbiBzdGFydCB0byB0cmlnZ2VyIGNoYW5nZSBldmVudHNcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBjYW5DaGFuZ2U6IHRydWVcbiAgICAgIH0pO1xuICAgIH0uYmluZCh0aGlzKTtcblxuICAgIC8vIFJ1biB2YWxpZGF0aW9uIGFnYWluIGluIGNhc2UgYWZmZWN0ZWQgYnkgb3RoZXIgaW5wdXRzLiBUaGVcbiAgICAvLyBsYXN0IGNvbXBvbmVudCB2YWxpZGF0ZWQgd2lsbCBydW4gdGhlIG9uVmFsaWRhdGlvbkNvbXBsZXRlIGNhbGxiYWNrXG4gICAgdGhpcy5pbnB1dHMuZm9yRWFjaChmdW5jdGlvbiAoY29tcG9uZW50LCBpbmRleCkge1xuICAgICAgdmFyIHZhbGlkYXRpb24gPSBfdGhpczMucnVuVmFsaWRhdGlvbihjb21wb25lbnQpO1xuICAgICAgaWYgKHZhbGlkYXRpb24uaXNWYWxpZCAmJiBjb21wb25lbnQuc3RhdGUuX2V4dGVybmFsRXJyb3IpIHtcbiAgICAgICAgdmFsaWRhdGlvbi5pc1ZhbGlkID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBjb21wb25lbnQuc2V0U3RhdGUoe1xuICAgICAgICBfaXNWYWxpZDogdmFsaWRhdGlvbi5pc1ZhbGlkLFxuICAgICAgICBfaXNSZXF1aXJlZDogdmFsaWRhdGlvbi5pc1JlcXVpcmVkLFxuICAgICAgICBfdmFsaWRhdGlvbkVycm9yOiB2YWxpZGF0aW9uLmVycm9yLFxuICAgICAgICBfZXh0ZXJuYWxFcnJvcjogIXZhbGlkYXRpb24uaXNWYWxpZCAmJiBjb21wb25lbnQuc3RhdGUuX2V4dGVybmFsRXJyb3IgPyBjb21wb25lbnQuc3RhdGUuX2V4dGVybmFsRXJyb3IgOiBudWxsXG4gICAgICB9LCBpbmRleCA9PT0gX3RoaXMzLmlucHV0cy5sZW5ndGggLSAxID8gb25WYWxpZGF0aW9uQ29tcGxldGUgOiBudWxsKTtcbiAgICB9KTtcblxuICAgIC8vIElmIHRoZXJlIGFyZSBubyBpbnB1dHMsIHNldCBzdGF0ZSB3aGVyZSBmb3JtIGlzIHJlYWR5IHRvIHRyaWdnZXJcbiAgICAvLyBjaGFuZ2UgZXZlbnQuIE5ldyBpbnB1dHMgbWlnaHQgYmUgYWRkZWQgbGF0ZXJcbiAgICBpZiAoIXRoaXMuaW5wdXRzLmxlbmd0aCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGNhbkNoYW5nZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIC8vIE1ldGhvZCBwdXQgb24gZWFjaCBpbnB1dCBjb21wb25lbnQgdG8gcmVnaXN0ZXJcbiAgLy8gaXRzZWxmIHRvIHRoZSBmb3JtXG4gIGF0dGFjaFRvRm9ybTogZnVuY3Rpb24gYXR0YWNoVG9Gb3JtKGNvbXBvbmVudCkge1xuXG4gICAgaWYgKHRoaXMuaW5wdXRzLmluZGV4T2YoY29tcG9uZW50KSA9PT0gLTEpIHtcbiAgICAgIHRoaXMuaW5wdXRzLnB1c2goY29tcG9uZW50KTtcbiAgICB9XG5cbiAgICB0aGlzLnZhbGlkYXRlKGNvbXBvbmVudCk7XG4gIH0sXG5cbiAgLy8gTWV0aG9kIHB1dCBvbiBlYWNoIGlucHV0IGNvbXBvbmVudCB0byB1bnJlZ2lzdGVyXG4gIC8vIGl0c2VsZiBmcm9tIHRoZSBmb3JtXG4gIGRldGFjaEZyb21Gb3JtOiBmdW5jdGlvbiBkZXRhY2hGcm9tRm9ybShjb21wb25lbnQpIHtcbiAgICB2YXIgY29tcG9uZW50UG9zID0gdGhpcy5pbnB1dHMuaW5kZXhPZihjb21wb25lbnQpO1xuXG4gICAgaWYgKGNvbXBvbmVudFBvcyAhPT0gLTEpIHtcbiAgICAgIHRoaXMuaW5wdXRzID0gdGhpcy5pbnB1dHMuc2xpY2UoMCwgY29tcG9uZW50UG9zKS5jb25jYXQodGhpcy5pbnB1dHMuc2xpY2UoY29tcG9uZW50UG9zICsgMSkpO1xuICAgIH1cblxuICAgIHRoaXMudmFsaWRhdGVGb3JtKCk7XG4gIH0sXG4gIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICBtYXBwaW5nID0gX3Byb3BzLm1hcHBpbmcsXG4gICAgICAgIHZhbGlkYXRpb25FcnJvcnMgPSBfcHJvcHMudmFsaWRhdGlvbkVycm9ycyxcbiAgICAgICAgb25TdWJtaXQgPSBfcHJvcHMub25TdWJtaXQsXG4gICAgICAgIG9uVmFsaWQgPSBfcHJvcHMub25WYWxpZCxcbiAgICAgICAgb25WYWxpZFN1Ym1pdCA9IF9wcm9wcy5vblZhbGlkU3VibWl0LFxuICAgICAgICBvbkludmFsaWQgPSBfcHJvcHMub25JbnZhbGlkLFxuICAgICAgICBvbkludmFsaWRTdWJtaXQgPSBfcHJvcHMub25JbnZhbGlkU3VibWl0LFxuICAgICAgICBvbkNoYW5nZSA9IF9wcm9wcy5vbkNoYW5nZSxcbiAgICAgICAgcmVzZXQgPSBfcHJvcHMucmVzZXQsXG4gICAgICAgIHByZXZlbnRFeHRlcm5hbEludmFsaWRhdGlvbiA9IF9wcm9wcy5wcmV2ZW50RXh0ZXJuYWxJbnZhbGlkYXRpb24sXG4gICAgICAgIG9uU3VjY2VzcyA9IF9wcm9wcy5vblN1Y2Nlc3MsXG4gICAgICAgIG9uRXJyb3IgPSBfcHJvcHMub25FcnJvcixcbiAgICAgICAgbm9uRm9ybXN5UHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3Byb3BzLCBbJ21hcHBpbmcnLCAndmFsaWRhdGlvbkVycm9ycycsICdvblN1Ym1pdCcsICdvblZhbGlkJywgJ29uVmFsaWRTdWJtaXQnLCAnb25JbnZhbGlkJywgJ29uSW52YWxpZFN1Ym1pdCcsICdvbkNoYW5nZScsICdyZXNldCcsICdwcmV2ZW50RXh0ZXJuYWxJbnZhbGlkYXRpb24nLCAnb25TdWNjZXNzJywgJ29uRXJyb3InXSk7XG5cbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICdmb3JtJyxcbiAgICAgIF9leHRlbmRzKHt9LCBub25Gb3Jtc3lQcm9wcywgeyBvblN1Ym1pdDogdGhpcy5zdWJtaXQgfSksXG4gICAgICB0aGlzLnByb3BzLmNoaWxkcmVuXG4gICAgKTtcbiAgfVxufSk7XG5cbmlmICghZ2xvYmFsLmV4cG9ydHMgJiYgIWdsb2JhbC5tb2R1bGUgJiYgKCFnbG9iYWwuZGVmaW5lIHx8ICFnbG9iYWwuZGVmaW5lLmFtZCkpIHtcbiAgZ2xvYmFsLkZvcm1zeSA9IEZvcm1zeTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBGb3Jtc3k7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9mb3Jtc3ktcmVhY3QvbGliL21haW4uanMiLCIndXNlIHN0cmljdCc7XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGFycmF5c0RpZmZlcjogZnVuY3Rpb24gYXJyYXlzRGlmZmVyKGEsIGIpIHtcbiAgICB2YXIgaXNEaWZmZXJlbnQgPSBmYWxzZTtcbiAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICBpc0RpZmZlcmVudCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU2FtZShpdGVtLCBiW2luZGV4XSkpIHtcbiAgICAgICAgICBpc0RpZmZlcmVudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0sIHRoaXMpO1xuICAgIH1cbiAgICByZXR1cm4gaXNEaWZmZXJlbnQ7XG4gIH0sXG5cbiAgb2JqZWN0c0RpZmZlcjogZnVuY3Rpb24gb2JqZWN0c0RpZmZlcihhLCBiKSB7XG4gICAgdmFyIGlzRGlmZmVyZW50ID0gZmFsc2U7XG4gICAgaWYgKE9iamVjdC5rZXlzKGEpLmxlbmd0aCAhPT0gT2JqZWN0LmtleXMoYikubGVuZ3RoKSB7XG4gICAgICBpc0RpZmZlcmVudCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIE9iamVjdC5rZXlzKGEpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTYW1lKGFba2V5XSwgYltrZXldKSkge1xuICAgICAgICAgIGlzRGlmZmVyZW50ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSwgdGhpcyk7XG4gICAgfVxuICAgIHJldHVybiBpc0RpZmZlcmVudDtcbiAgfSxcblxuICBpc1NhbWU6IGZ1bmN0aW9uIGlzU2FtZShhLCBiKSB7XG4gICAgaWYgKCh0eXBlb2YgYSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoYSkpICE9PSAodHlwZW9mIGIgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGIpKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhKSAmJiBBcnJheS5pc0FycmF5KGIpKSB7XG4gICAgICByZXR1cm4gIXRoaXMuYXJyYXlzRGlmZmVyKGEsIGIpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGEgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBhLnRvU3RyaW5nKCkgPT09IGIudG9TdHJpbmcoKTtcbiAgICB9IGVsc2UgaWYgKCh0eXBlb2YgYSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoYSkpID09PSAnb2JqZWN0JyAmJiBhICE9PSBudWxsICYmIGIgIT09IG51bGwpIHtcbiAgICAgIHJldHVybiAhdGhpcy5vYmplY3RzRGlmZmVyKGEsIGIpO1xuICAgIH1cblxuICAgIHJldHVybiBhID09PSBiO1xuICB9LFxuXG4gIGZpbmQ6IGZ1bmN0aW9uIGZpbmQoY29sbGVjdGlvbiwgZm4pIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNvbGxlY3Rpb24ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IGNvbGxlY3Rpb25baV07XG4gICAgICBpZiAoZm4oaXRlbSkpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG59O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vZm9ybXN5LXJlYWN0L2xpYi91dGlscy5qcyIsIid1c2Ugc3RyaWN0JztcblxudmFyIF9pc0V4aXN0eSA9IGZ1bmN0aW9uIF9pc0V4aXN0eSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZDtcbn07XG5cbnZhciBpc0VtcHR5ID0gZnVuY3Rpb24gaXNFbXB0eSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT09ICcnO1xufTtcblxudmFyIHZhbGlkYXRpb25zID0ge1xuICBpc0RlZmF1bHRSZXF1aXJlZFZhbHVlOiBmdW5jdGlvbiBpc0RlZmF1bHRSZXF1aXJlZFZhbHVlKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gJyc7XG4gIH0sXG4gIGlzRXhpc3R5OiBmdW5jdGlvbiBpc0V4aXN0eSh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIF9pc0V4aXN0eSh2YWx1ZSk7XG4gIH0sXG4gIG1hdGNoUmVnZXhwOiBmdW5jdGlvbiBtYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCByZWdleHApIHtcbiAgICByZXR1cm4gIV9pc0V4aXN0eSh2YWx1ZSkgfHwgaXNFbXB0eSh2YWx1ZSkgfHwgcmVnZXhwLnRlc3QodmFsdWUpO1xuICB9LFxuICBpc1VuZGVmaW5lZDogZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkO1xuICB9LFxuICBpc0VtcHR5U3RyaW5nOiBmdW5jdGlvbiBpc0VtcHR5U3RyaW5nKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gaXNFbXB0eSh2YWx1ZSk7XG4gIH0sXG4gIGlzRW1haWw6IGZ1bmN0aW9uIGlzRW1haWwodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXigoKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSsoXFwuKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSspKil8KChcXHgyMikoKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPygoW1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4N2ZdfFxceDIxfFtcXHgyMy1cXHg1Yl18W1xceDVkLVxceDdlXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KFxcXFwoW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBkLVxceDdmXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSkqKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPyhcXHgyMikpKUAoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkkL2kpO1xuICB9LFxuICBpc1VybDogZnVuY3Rpb24gaXNVcmwodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXihodHRwcz98cz9mdHApOlxcL1xcLygoKChbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoJVtcXGRhLWZdezJ9KXxbIVxcJCYnXFwoXFwpXFwqXFwrLDs9XXw6KSpAKT8oKChcXGR8WzEtOV1cXGR8MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC01XSlcXC4oXFxkfFsxLTldXFxkfDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNV0pXFwuKFxcZHxbMS05XVxcZHwxXFxkXFxkfDJbMC00XVxcZHwyNVswLTVdKVxcLihcXGR8WzEtOV1cXGR8MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC01XSkpfCgoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4pKygoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKVxcLj8pKDpcXGQqKT8pKFxcLygoKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCkrKFxcLygoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OnxAKSopKik/KT8oXFw/KCgoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OnxAKXxbXFx1RTAwMC1cXHVGOEZGXXxcXC98XFw/KSopPygjKCgoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OnxAKXxcXC98XFw/KSopPyQvaSk7XG4gIH0sXG4gIGlzVHJ1ZTogZnVuY3Rpb24gaXNUcnVlKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IHRydWU7XG4gIH0sXG4gIGlzRmFsc2U6IGZ1bmN0aW9uIGlzRmFsc2UodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gZmFsc2U7XG4gIH0sXG4gIGlzTnVtZXJpYzogZnVuY3Rpb24gaXNOdW1lcmljKHZhbHVlcywgdmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXlstK10/KD86XFxkKlsuXSk/XFxkKyQvKTtcbiAgfSxcbiAgaXNBbHBoYTogZnVuY3Rpb24gaXNBbHBoYSh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eW0EtWl0rJC9pKTtcbiAgfSxcbiAgaXNBbHBoYW51bWVyaWM6IGZ1bmN0aW9uIGlzQWxwaGFudW1lcmljKHZhbHVlcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdmFsaWRhdGlvbnMubWF0Y2hSZWdleHAodmFsdWVzLCB2YWx1ZSwgL15bMC05QS1aXSskL2kpO1xuICB9LFxuICBpc0ludDogZnVuY3Rpb24gaXNJbnQodmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXig/OlstK10/KD86MHxbMS05XVxcZCopKSQvKTtcbiAgfSxcbiAgaXNGbG9hdDogZnVuY3Rpb24gaXNGbG9hdCh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eKD86Wy0rXT8oPzpcXGQrKSk/KD86XFwuXFxkKik/KD86W2VFXVtcXCtcXC1dPyg/OlxcZCspKT8kLyk7XG4gIH0sXG4gIGlzV29yZHM6IGZ1bmN0aW9uIGlzV29yZHModmFsdWVzLCB2YWx1ZSkge1xuICAgIHJldHVybiB2YWxpZGF0aW9ucy5tYXRjaFJlZ2V4cCh2YWx1ZXMsIHZhbHVlLCAvXltBLVpcXHNdKyQvaSk7XG4gIH0sXG4gIGlzU3BlY2lhbFdvcmRzOiBmdW5jdGlvbiBpc1NwZWNpYWxXb3Jkcyh2YWx1ZXMsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbGlkYXRpb25zLm1hdGNoUmVnZXhwKHZhbHVlcywgdmFsdWUsIC9eW0EtWlxcc1xcdTAwQzAtXFx1MDE3Rl0rJC9pKTtcbiAgfSxcbiAgaXNMZW5ndGg6IGZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlcywgdmFsdWUsIGxlbmd0aCkge1xuICAgIHJldHVybiAhX2lzRXhpc3R5KHZhbHVlKSB8fCBpc0VtcHR5KHZhbHVlKSB8fCB2YWx1ZS5sZW5ndGggPT09IGxlbmd0aDtcbiAgfSxcbiAgZXF1YWxzOiBmdW5jdGlvbiBlcXVhbHModmFsdWVzLCB2YWx1ZSwgZXFsKSB7XG4gICAgcmV0dXJuICFfaXNFeGlzdHkodmFsdWUpIHx8IGlzRW1wdHkodmFsdWUpIHx8IHZhbHVlID09IGVxbDtcbiAgfSxcbiAgZXF1YWxzRmllbGQ6IGZ1bmN0aW9uIGVxdWFsc0ZpZWxkKHZhbHVlcywgdmFsdWUsIGZpZWxkKSB7XG4gICAgcmV0dXJuIHZhbHVlID09IHZhbHVlc1tmaWVsZF07XG4gIH0sXG4gIG1heExlbmd0aDogZnVuY3Rpb24gbWF4TGVuZ3RoKHZhbHVlcywgdmFsdWUsIGxlbmd0aCkge1xuICAgIHJldHVybiAhX2lzRXhpc3R5KHZhbHVlKSB8fCB2YWx1ZS5sZW5ndGggPD0gbGVuZ3RoO1xuICB9LFxuICBtaW5MZW5ndGg6IGZ1bmN0aW9uIG1pbkxlbmd0aCh2YWx1ZXMsIHZhbHVlLCBsZW5ndGgpIHtcbiAgICByZXR1cm4gIV9pc0V4aXN0eSh2YWx1ZSkgfHwgaXNFbXB0eSh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoID49IGxlbmd0aDtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB2YWxpZGF0aW9ucztcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2Zvcm1zeS1yZWFjdC9saWIvdmFsaWRhdGlvblJ1bGVzLmpzIiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IEZvcm1zeSwgeyBIT0MgfSBmcm9tICdmb3Jtc3ktcmVhY3QnO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xyXG5cclxuY2xhc3MgRmllbGQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5jaGFuZ2VWYWx1ZSA9IChldmVudCkgPT4ge1xyXG4gICAgICB0aGlzLnByb3BzLnNldFZhbHVlKGV2ZW50LmN1cnJlbnRUYXJnZXRbdGhpcy5wcm9wcy50eXBlID09PSAnY2hlY2tib3gnID9cclxuICAgICAgICAnY2hlY2tlZCcgOiAndmFsdWUnXSk7XHJcbiAgICB9O1xyXG4gIH1cclxuICByZW5kZXIgKCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5wcm9wcy5nZXRFcnJvck1lc3NhZ2UoKTtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNpZ251cC1maWVsZC1ncm91cFwiPlxyXG4gICAgICAgIDxsYWJlbFxyXG4gICAgICAgICAgaHRtbEZvcj17IHRoaXMucHJvcHMubmFtZS50b0xvd2VyQ2FzZSgpIH1cclxuICAgICAgICAgIGNsYXNzTmFtZT1cInNpZ251cC1mb3JtX19sYWJlbFwiPlxyXG4gICAgICAgICAgeyB0aGlzLnByb3BzLm5hbWUgfVxyXG4gICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICBvbkNoYW5nZT17dGhpcy5jaGFuZ2VWYWx1ZX1cclxuICAgICAgICAgIHZhbHVlPXt0aGlzLnByb3BzLmdldFZhbHVlKCl9XHJcbiAgICAgICAgICB0eXBlPXt0aGlzLnByb3BzLnR5cGUgfHwgJ3RleHQnfVxyXG4gICAgICAgICAgbmFtZT17IHRoaXMucHJvcHMubmFtZS50b0xvd2VyQ2FzZSgpIH1cclxuICAgICAgICAgIGNsYXNzTmFtZT1cInNpZ251cC1mb3JtX19pbnB1dC1maWVsZFwiLz5cclxuICAgICAgICA8cCBjbGFzc05hbWU9XCJjYXB0aW9uIHNpZ251cC1mb3JtX19jYXB0aW9uXCI+XHJcbiAgICAgICAgICB7IHRoaXMucHJvcHMudGV4dCB9XHJcbiAgICAgICAgPC9wPlxyXG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInNpZ251cC1mb3JtX19lcnJvci1tZXNzYWdlXCI+e2Vycm9yTWVzc2FnZX08L3NwYW4+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbkZpZWxkLnByb3BUeXBlcyA9IHtcclxuICBuYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIHRleHQ6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgY2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIHR5cGU6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgc2V0VmFsdWU6IFByb3BUeXBlcy5hbnksXHJcbiAgZ2V0VmFsdWU6IFByb3BUeXBlcy5mdW5jLFxyXG4gIHZhbGlkYXRpb25zOiBQcm9wVHlwZXMuYW55LFxyXG4gIGdldEVycm9yTWVzc2FnZTogUHJvcFR5cGVzLmZ1bmMsXHJcbiAgcmVnaXN0cmF0aW9uOiBQcm9wVHlwZXMuZnVuY1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgSE9DKEZpZWxkKTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbXBvbmVudHMvQXV0aC9GaWVsZC9GaWVsZC5qcyIsImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBGb3Jtc3ksIHsgSE9DIH0gZnJvbSAnZm9ybXN5LXJlYWN0JztcclxuaW1wb3J0IEZpZWxkIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvQXV0aC9GaWVsZC9GaWVsZCc7XHJcbmltcG9ydCB7IHVwZGF0ZVByb2ZpbGVSZXF1ZXN0LCBkZWxldGVVc2VyUmVxdWVzdCxcclxuICBjbGVhclVwZGF0ZVByb2ZpbGVTdGF0dXMgfSBmcm9tICcuLi8uLi9hY3Rpb25zL3VzZXJzLmFjdGlvbic7XHJcbmltcG9ydCB7IGJpbmRBY3Rpb25DcmVhdG9ycyB9IGZyb20gJ3JlZHV4JztcclxuaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvTWVzc2FnZS9NZXNzYWdlJztcclxuaW1wb3J0IHsgUG9wdXAgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL1BvcHVwL1BvcHVwJztcclxuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9CdXR0b24vQnV0dG9uJztcclxuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlYWN0LXJlZHV4JztcclxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcclxuaW1wb3J0ICcuL1Byb2ZpbGUuc2Nzcyc7XHJcblxyXG5jbGFzcyBQcm9maWxlIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuXHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBjYW5TdWJtaXQ6IGZhbHNlLFxyXG4gICAgICBhbGxvd0VkaXROYW1lOiBmYWxzZSxcclxuICAgICAgYWxsb3dFZGl0RW1haWw6IGZhbHNlLFxyXG4gICAgICBhbGxvd0VkaXRJbWFnZTogZmFsc2UsXHJcbiAgICAgIGFsbG93RWRpdFBhc3N3b3JkOiBmYWxzZSxcclxuICAgICAgYWxsb3dSZXBlYXRQYXNzd29yZDogZmFsc2UsXHJcbiAgICAgIHVwZGF0ZUltYWdlU3RhdHVzOiAnRHJvcCB5b3VyIHBob3RvJyxcclxuICAgICAgaW1hZ2VCYXNlNjQ6IG51bGxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRQb3B1cFNob3duID0gKGlkKSA9PiB7XHJcbiAgICBjb25zdCBjdXJyZW50U3RhdGUgPSB0aGlzLnN0YXRlLnBvcHVwU2hvd247XHJcblxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIHBvcHVwU2hvd246ICFjdXJyZW50U3RhdGVcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHVwZGF0ZVByb2ZpbGUgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICBuYW1lOiB0aGlzLm5hbWUuZ2V0VmFsdWUoKSxcclxuICAgICAgZW1haWw6IHRoaXMuZW1haWwuZ2V0VmFsdWUoKSxcclxuICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQuZ2V0VmFsdWUoKSxcclxuICAgICAgcGFzc3dvcmRSZXBlYXQ6IHRoaXMucGFzc3dvcmRSZXBlYXQuZ2V0VmFsdWUoKSxcclxuICAgICAgYXZhdGFyOiB0aGlzLmJhc2U2NFN0cixcclxuICAgICAgX2lkOiB0aGlzLnByb3BzLnVzZXIuX2lkXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMucHJvcHMudXBkYXRlUHJvZmlsZVJlcXVlc3QoZGF0YSk7XHJcbiAgfTtcclxuXHJcbiAgZW5hYmxlQnV0dG9uID0gKCkgPT4ge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGNhblN1Ym1pdDogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgZGlzYWJsZUJ1dHRvbiA9ICgpID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBjYW5TdWJtaXQ6IGZhbHNlXHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBlZGl0TmFtZSA9ICgpID0+IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBhbGxvd0VkaXROYW1lOiAhdGhpcy5zdGF0ZS5hbGxvd0VkaXROYW1lXHJcbiAgICB9KTtcclxuICAgIHRoaXMuZmllbGROYW1lLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xyXG4gICAgdGhpcy5maWVsZE5hbWUuY2xhc3NMaXN0LnRvZ2dsZSgnZmxleC1kaXNwbGF5Jyk7XHJcbiAgfTtcclxuXHJcbiAgZWRpdEVtYWlsID0gKCkgPT4ge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGFsbG93RWRpdEVtYWlsOiAhdGhpcy5zdGF0ZS5hbGxvd0VkaXRFbWFpbFxyXG4gICAgfSk7XHJcbiAgICB0aGlzLmZpZWxkRW1haWwuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7XHJcbiAgICB0aGlzLmZpZWxkRW1haWwuY2xhc3NMaXN0LnRvZ2dsZSgnZmxleC1kaXNwbGF5Jyk7XHJcbiAgfTtcclxuXHJcbiAgZWRpdFBhc3N3b3JkID0gKCkgPT4ge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGFsbG93RWRpdFBhc3N3b3JkOiAhdGhpcy5zdGF0ZS5hbGxvd0VkaXRQYXNzd29yZFxyXG4gICAgfSk7XHJcbiAgICB0aGlzLmZpZWxkUGFzc3dvcmQuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7XHJcbiAgICB0aGlzLmZpZWxkUGFzc3dvcmQuY2xhc3NMaXN0LnRvZ2dsZSgnZmxleC1kaXNwbGF5Jyk7XHJcbiAgfTtcclxuXHJcbiAgcmVwZWF0UGFzc3dvcmQgPSAoKSA9PiB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgYWxsb3dSZXBlYXRQYXNzd29yZDogIXRoaXMuc3RhdGUuYWxsb3dSZXBlYXRQYXNzd29yZFxyXG4gICAgfSk7XHJcbiAgICB0aGlzLmZpZWxkUmVwZWF0UGFzc3dvcmQuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7XHJcbiAgICB0aGlzLmZpZWxkUmVwZWF0UGFzc3dvcmQuY2xhc3NMaXN0LnRvZ2dsZSgnZmxleC1kaXNwbGF5Jyk7XHJcbiAgfTtcclxuXHJcbiAgZWRpdEltYWdlID0gKCkgPT4ge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGFsbG93RWRpdEltYWdlOiAhdGhpcy5zdGF0ZS5hbGxvd0VkaXRJbWFnZVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLmZpZWxkSW1hZ2UuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7XHJcbiAgICB0aGlzLmZpZWxkSW1hZ2UuY2xhc3NMaXN0LnRvZ2dsZSgnZmxleC1kaXNwbGF5Jyk7XHJcbiAgfTtcclxuXHJcbiAgZGVsZXRlVXNlciA9ICgpID0+IHtcclxuICAgIHRoaXMucHJvcHMuZGVsZXRlVXNlclJlcXVlc3QodGhpcy5wcm9wcy51c2VyKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZUZpbGVTZWxlY3QgPSAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7IHVwZGF0ZUltYWdlU3RhdHVzOiAnTG9hZGluZy4uLicgfSk7XHJcbiAgICBjb25zdCBmaWxlcyA9IGUuZGF0YVRyYW5zZmVyLmZpbGVzO1xyXG5cclxuICAgIGlmIChmaWxlcykge1xyXG4gICAgICBjb25zdCBmaWxlID0gZmlsZXNbMF07XHJcblxyXG4gICAgICBpZiAoZmlsZSkge1xyXG4gICAgICAgIGNvbnN0IG1heEZpbGVTaXplID0gMTAyNCAqIDEwMjQ7XHJcblxyXG4gICAgICAgIGlmIChmaWxlLnNpemUgPiBtYXhGaWxlU2l6ZSkge1xyXG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHVwZGF0ZUltYWdlU3RhdHVzOiAnRXhjZWVkaW5nIDFNQiBsaW1pdCcgfSk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG5cclxuICAgICAgICByZWFkZXIub25sb2FkID0gKHJlYWRlckV2ZW50KSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBiaW5hcnlTdHJpbmcgPSByZWFkZXJFdmVudC50YXJnZXQucmVzdWx0O1xyXG5cclxuICAgICAgICAgIHRoaXMuYmFzZTY0U3RyID0gJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQsJyArIGJ0b2EoYmluYXJ5U3RyaW5nKTtcclxuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpbWFnZUJhc2U2NDogdGhpcy5iYXNlNjRTdHIsIHVwZGF0ZUltYWdlU3RhdHVzOiAnJyB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZWFkZXIucmVhZEFzQmluYXJ5U3RyaW5nKGZpbGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHByZXZlbnREZWZhdWx0ID0gKGV2ZW50KSA9PiB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkVXBkYXRlICgpIHtcclxuICAgIGlmICh0aGlzLnByb3BzLnVwZGF0ZVByb2ZpbGVTdGF0dXMgPT09ICdET05FJykge1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICB0aGlzLnByb3BzLmhpc3RvcnkucHVzaCgnLycpO1xyXG4gICAgICB9LCAxMDAwKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbmRlciA9ICgpID0+IHtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgIGNvbnN0IGV2bnQgPSBlIHx8IGV2ZW50O1xyXG5cclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0sIGZhbHNlKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgY29uc3QgZXZudCA9IGUgfHwgZXZlbnQ7XHJcblxyXG4gICAgICBldm50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9LCBmYWxzZSk7XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcm9maWxlLWNvbnRhaW5lclwiPlxyXG4gICAgICAgIDxNZXNzYWdlXHJcbiAgICAgICAgICBjbGVhclN0YXR1cz17dGhpcy5wcm9wcy5jbGVhclN0YXR1c31cclxuICAgICAgICAgIHN0YXR1cz17dGhpcy5wcm9wcy51cGRhdGVQcm9maWxlU3RhdHVzfVxyXG4gICAgICAgICAgdGV4dD17dGhpcy5wcm9wcy5lcnJvclRleHR9XHJcbiAgICAgICAgICBoZWFkZXI9eydFcnJvcid9IC8+XHJcbiAgICAgICAgPEZvcm1zeS5Gb3JtXHJcbiAgICAgICAgICBvblN1Ym1pdD17dGhpcy51cGRhdGVQcm9maWxlfVxyXG4gICAgICAgICAgb25WYWxpZD17dGhpcy5lbmFibGVCdXR0b259XHJcbiAgICAgICAgICBvbkludmFsaWQ9e3RoaXMuZGlzYWJsZUJ1dHRvbn1cclxuICAgICAgICAgIGNsYXNzTmFtZT1cInNpZ251cC1mb3JtIGVkaXRcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHJvZmlsZS1oZWFkZXJcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwcm9maWxlLWhlYWRlcl9fdXNlci1pbWFnZS1ib3hcIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInByb2ZpbGUtaGVhZGVyX191c2VyLWltYWdlLWVkaXRcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXt0aGlzLnByb3BzLnVzZXIuYXZhdGFyID9cclxuICAgICAgICAgICAgICAgICAgJ3Zpc2libGUnIDpcclxuICAgICAgICAgICAgICAgICAgJ2hpZGRlbidcclxuICAgICAgICAgICAgICAgIH0+XHJcbiAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3NOYW1lPVwicHJvZmlsZS1oZWFkZXJfX3VzZXItaW1hZ2VcIlxyXG4gICAgICAgICAgICAgICAgICAgIHNyYz17dGhpcy5wcm9wcy51c2VyLmF2YXRhcn0gLz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3RoaXMucHJvcHMudXNlci5hdmF0YXIgP1xyXG4gICAgICAgICAgICAgICAgICAnaGlkZGVuJyA6XHJcbiAgICAgICAgICAgICAgICAgICd2aXNpYmxlJ1xyXG4gICAgICAgICAgICAgICAgfT5cclxuICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtdXNlci1jaXJjbGUtbyBwaG90b1wiPjwvaT5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtcGVuY2lsIGVkaXQtdXNlci1pbmZvIGVkaXQtaW1hZ2VcIlxyXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmVkaXRJbWFnZX0gLz5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGlkZGVuXCJcclxuICAgICAgICAgICAgICAgICAgcmVmPXsoZWwpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpZWxkSW1hZ2UgPSBlbDtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIG9uRHJvcD17dGhpcy5oYW5kbGVGaWxlU2VsZWN0fVxyXG4gICAgICAgICAgICAgICAgICBvbkRyYWdPdmVyPXt0aGlzLnByZXZlbnREZWZhdWx0fT5cclxuICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnVwZGF0ZUltYWdlU3RhdHVzICE9PSAnJyA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdwcm9maWxlLWhlYWRlcl9fdXNlci1kcm9wLWFyaWEnIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3Byb2ZpbGUtaGVhZGVyX191c2VyLWRyb3AtaW1hZ2UgaGlkZGVuJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0+e3RoaXMuc3RhdGUudXBkYXRlSW1hZ2VTdGF0dXN9PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGltZyBjbGFzc05hbWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS51cGRhdGVJbWFnZVN0YXR1cyAhPT0gJycgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAncHJvZmlsZS1oZWFkZXJfX3VzZXItaW1hZ2UgaGlkZGVuJyA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdwcm9maWxlLWhlYWRlcl9fdXNlci1pbWFnZSdcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICBzcmM9e3RoaXMuc3RhdGUuaW1hZ2VCYXNlNjR9IC8+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInByb2ZpbGUtaGVhZGVyX191c2VyLW5hbWVcIj5cclxuICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLnVzZXIubmFtZX1cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cImVkaXQtcHJvZmlsZV9fdXNlci1pbmZvXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZWRpdC1wcm9maWxlLW5hbWVcIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImVkaXQtcHJvZmlsZV9fdXNlci1uYW1lLWNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1c2VyLW5hbWVfX2JveFwiPlxyXG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ1c2VyLW5hbWVfX3RpdGxlXCI+TmFtZTwvcD5cclxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidXNlci1uYW1lX19sb2dnZWQtbmFtZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLnVzZXIubmFtZX1cclxuICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImVkaXQtdXNlci1pbmZvX19pY29uXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLXBlbmNpbCBlZGl0LXVzZXItaW5mb1wiXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5lZGl0TmFtZX0gLz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhpZGRlblwiXHJcbiAgICAgICAgICAgICAgICByZWY9eyhlbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmZpZWxkTmFtZSA9IGVsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfT5cclxuICAgICAgICAgICAgICAgIDxGaWVsZFxyXG4gICAgICAgICAgICAgICAgICBuYW1lPVwiIFwiXHJcbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICAgICAgdGV4dD17J0VudGVyIHlvdXIgbmV3IG5hbWUnfVxyXG4gICAgICAgICAgICAgICAgICByZWY9eyhpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmFtZSA9IGlucHV0O1xyXG4gICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5wcm9wcy51c2VyLm5hbWV9XHJcbiAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25zPVwiaXNBbHBoYVwiXHJcbiAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcj1cIlRoaXMgaXMgbm90IGEgdmFsaWQgbmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJlZGl0LXByb2ZpbGUtZW1haWxcIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImVkaXQtcHJvZmlsZV9fdXNlci1lbWFpbC1jb250YWluZXJcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidXNlci1lbWFpbF9fYm94XCI+XHJcbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInVzZXItZW1haWxfX3RpdGxlXCI+RW1haWw8L3A+XHJcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInVzZXItZW1haWxfX2xvZ2dlZC1lbWFpbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLnVzZXIuZW1haWx9XHJcbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJlZGl0LXVzZXItaW5mb19faWNvblwiPlxyXG4gICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1wZW5jaWwgZWRpdC11c2VyLWluZm9cIlxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuZWRpdEVtYWlsfSAvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGlkZGVuXCJcclxuICAgICAgICAgICAgICAgIHJlZj17KGVsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZmllbGRFbWFpbCA9IGVsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfT5cclxuICAgICAgICAgICAgICAgIDxGaWVsZFxyXG4gICAgICAgICAgICAgICAgICBuYW1lPVwiIFwiXHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhpZGRlblwiXHJcbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICAgICAgdGV4dD17J0VudGVyIHlvdXIgbmV3IGUtbWFpbCd9XHJcbiAgICAgICAgICAgICAgICAgIHJlZj17KGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWFpbCA9IGlucHV0O1xyXG4gICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5wcm9wcy51c2VyLmVtYWlsfVxyXG4gICAgICAgICAgICAgICAgICB2YWxpZGF0aW9ucz1cImlzRW1haWxcIlxyXG4gICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3I9XCJUaGlzIGlzIG5vdCBhIHZhbGlkIGVtYWlsXCJcclxuICAgICAgICAgICAgICAgICAgcmVxdWlyZWRcclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L3NlY3Rpb24+XHJcbiAgICAgICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cImVkaXQtcHJvZmlsZV9fdXNlci1pbmZvLXBhc3N3b3JkXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZWRpdC1wcm9maWxlLXBhc3N3b3JkXCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJlZGl0LXByb2ZpbGVfX3VzZXItcGFzc3dvcmQtY29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInVzZXItcGFzc3dvcmRfX2JveFwiPlxyXG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ1c2VyLXBhc3N3b3JkX190aXRsZVwiPlBhc3N3b3JkPC9wPlxyXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ1c2VyLXBhc3N3b3JkX19sb2dnZWQtcGFzc3dvcmRcIj5cclxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy51c2VyLnBhc3N3b3JkfVxyXG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZWRpdC11c2VyLWluZm9fX2ljb25cIj5cclxuICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtcGVuY2lsIGVkaXQtdXNlci1pbmZvIGZhLXBhc3N3b3JkXCJcclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmVkaXRQYXNzd29yZH0gLz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhpZGRlblwiXHJcbiAgICAgICAgICAgICAgICByZWY9eyhlbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmZpZWxkUGFzc3dvcmQgPSBlbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0+XHJcbiAgICAgICAgICAgICAgICA8RmllbGRcclxuICAgICAgICAgICAgICAgICAgbmFtZT1cIlBhc3N3b3JkXCJcclxuICAgICAgICAgICAgICAgICAgdHlwZT1cInBhc3N3b3JkXCJcclxuICAgICAgICAgICAgICAgICAgdGV4dD17J0VudGVyIHlvdXIgbmV3IHBhc3N3b3JkJ31cclxuICAgICAgICAgICAgICAgICAgcmVmPXsoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhc3N3b3JkID0gaW5wdXQ7XHJcbiAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25zPSB7e1xyXG4gICAgICAgICAgICAgICAgICAgIG1pbkxlbmd0aDogNyxcclxuICAgICAgICAgICAgICAgICAgICBpc0FscGhhbnVtZXJpYzogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3I9XCJUaGlzIGlzIG5vdCBhIHZhbGlkIHBhc3N3b3JkXCJcclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImVkaXQtcHJvZmlsZS1yZXBlYXQtcGFzc3dvcmRcIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImVkaXQtcHJvZmlsZV9fdXNlci1yZXBlYXQtcGFzc3dvcmQtY29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInVzZXItcmVwZWF0LXBhc3N3b3JkX19ib3hcIj5cclxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidXNlci1yZXBlYXQtcGFzc3dvcmRfX3RpdGxlXCI+UmVwZWF0IFBhc3N3b3JkPC9wPlxyXG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ1c2VyLXJlcGVhdC1wYXNzd29yZF9fbG9nZ2VkLXBhc3N3b3JkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMudXNlci5wYXNzd29yZFJlcGVhdH1cclxuICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImVkaXQtdXNlci1pbmZvX19pY29uXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLXBlbmNpbCBlZGl0LXVzZXItaW5mbyBmYS1wYXNzd29yZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5yZXBlYXRQYXNzd29yZH0gLz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhpZGRlblwiXHJcbiAgICAgICAgICAgICAgICByZWY9eyhlbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmZpZWxkUmVwZWF0UGFzc3dvcmQgPSBlbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0+XHJcbiAgICAgICAgICAgICAgICA8RmllbGRcclxuICAgICAgICAgICAgICAgICAgbmFtZT1cIlJlcGVhdCBQYXNzd29yZFwiXHJcbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJwYXNzd29yZFwiXHJcbiAgICAgICAgICAgICAgICAgIHRleHQ9eydQbGVhc2UgcmVwZWF0IHlvdXIgcGFzc3dvcmQnfVxyXG4gICAgICAgICAgICAgICAgICByZWY9eyhpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFzc3dvcmRSZXBlYXQgPSBpbnB1dDtcclxuICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbnM9XCJlcXVhbHNGaWVsZDpQYXNzd29yZFwiXHJcbiAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcj1cIlBhc3N3b3JkIGRvZXMgbm90IG1hdGNoXCJcclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9zZWN0aW9uPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaWdudXAtZmllbGQtZ3JvdXAgc2lnbnVwLWJ0bi1ncm91cCBlZGl0XCI+XHJcbiAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgIHR5cGU9XCJzdWJtaXRcIlxyXG4gICAgICAgICAgICAgIGRpc2FibGVkPXshdGhpcy5zdGF0ZS5jYW5TdWJtaXR9XHJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi0tc2lnbnVwIGJ0bi0tc2lnbnVwLWFjdGl2ZSBlZGl0XCJcclxuICAgICAgICAgICAgICB2YWx1ZT1cIlN1Ym1pdFwiIC8+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkZWxldGUtdXNlci1wcm9maWxlX19pY29uXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLXRyYXNoXCJcclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnNldFBvcHVwU2hvd259IC8+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvRm9ybXN5LkZvcm0+XHJcbiAgICAgICAgPFBvcHVwXHJcbiAgICAgICAgICBzZXRQb3B1cFNob3duPXt0aGlzLnNldFBvcHVwU2hvd259XHJcbiAgICAgICAgICBwb3B1cFNob3duPXt0aGlzLnN0YXRlLnBvcHVwU2hvd259XHJcbiAgICAgICAgICBoZWFkZXI9XCJDb25maXJtIHRoZSBhY3Rpb25cIlxyXG4gICAgICAgICAgdGV4dD17J0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgeW91ciBhY2NvdW50Pyd9PlxyXG4gICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICBzZXRQb3B1cFNob3duPXt0aGlzLnNldFBvcHVwU2hvd259XHJcbiAgICAgICAgICAgIG9rSGFuZGxlcj17KCkgPT4ge1xyXG4gICAgICAgICAgICAgIHRoaXMuZGVsZXRlVXNlcigpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0UG9wdXBTaG93bigpO1xyXG4gICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICBjbGFzc05hbWU9e1xyXG4gICAgICAgICAgICAgICdidG4gcG9wdXBfX2J0bid9XHJcbiAgICAgICAgICAgIGlubmVyVGV4dD17J09rJ31cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgIG9rSGFuZGxlcj17KCkgPT4ge1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0UG9wdXBTaG93bigpO1xyXG4gICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICBjbGFzc05hbWU9eydidG4gYnRuLS1kZWZhdWx0IHBvcHVwX19idG4nfVxyXG4gICAgICAgICAgICBpbm5lclRleHQ9eydDYW5jZWwnfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICA8L1BvcHVwPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMgKHN0b3JlKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHVwZGF0ZVByb2ZpbGVTdGF0dXM6IHN0b3JlLnVzZXJzLnVwZGF0ZVByb2ZpbGVTdGF0dXMsXHJcbiAgICBlcnJvclRleHQ6IHN0b3JlLnVzZXJzLnVzZXIuZXJyb3JUZXh0LFxyXG4gICAgdXNlcjogc3RvcmUudXNlcnMudXNlclxyXG4gIH07XHJcbn1cclxuZnVuY3Rpb24gbWFwRGlzcGF0Y2hUb1Byb3BzIChkaXNwYXRjaCkge1xyXG4gIHJldHVybiB7XHJcbiAgICB1cGRhdGVQcm9maWxlUmVxdWVzdDogYmluZEFjdGlvbkNyZWF0b3JzKHVwZGF0ZVByb2ZpbGVSZXF1ZXN0LCBkaXNwYXRjaCksXHJcbiAgICBkZWxldGVVc2VyUmVxdWVzdDogYmluZEFjdGlvbkNyZWF0b3JzKGRlbGV0ZVVzZXJSZXF1ZXN0LCBkaXNwYXRjaCksXHJcbiAgICBjbGVhclN0YXR1czogYmluZEFjdGlvbkNyZWF0b3JzKGNsZWFyVXBkYXRlUHJvZmlsZVN0YXR1cywgZGlzcGF0Y2gpXHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMsIG1hcERpc3BhdGNoVG9Qcm9wcykoUHJvZmlsZSk7XHJcblxyXG5Qcm9maWxlLnByb3BUeXBlcyA9IHtcclxuICB1cGRhdGVQcm9maWxlU3RhdHVzOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gIHVwZGF0ZVByb2ZpbGVSZXF1ZXN0OiBQcm9wVHlwZXMuZnVuYyxcclxuICBkZWxldGVVc2VyUmVxdWVzdDogUHJvcFR5cGVzLmZ1bmMsXHJcbiAgdXNlcjogUHJvcFR5cGVzLm9iamVjdCxcclxuICBlbWFpbDogUHJvcFR5cGVzLm9iamVjdCxcclxuICBwYXNzd29yZDogUHJvcFR5cGVzLm9iamVjdCxcclxuICBwYXNzd29yZFJlcGVhdDogUHJvcFR5cGVzLm9iamVjdCxcclxuICBlcnJvclRleHQ6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgdmFsdWU6IFByb3BUeXBlcy5vYmplY3QsXHJcbiAgaGlzdG9yeTogUHJvcFR5cGVzLm9iamVjdCxcclxuICBjbGVhclN0YXR1czogUHJvcFR5cGVzLmZ1bmNcclxufTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3BhZ2VzL1Byb2ZpbGUvUHJvZmlsZS5qcyJdLCJzb3VyY2VSb290IjoiIn0=